<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WLG Cover</title>
    <link class="preload_font" href="https://shevernitskiy.github.io/store/fonts/US101/import.css" rel="stylesheet" />
    <link class="preload_font" href="https://shevernitskiy.github.io/store/fonts/Gilroy/import.css" rel="stylesheet" />
    <link class="preload_font" href="https://shevernitskiy.github.io/store/fonts/Geist/import.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="icon"
      type="image/png"
      href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAeA0lEQVR4Ae1dh5vdxLXnn3HJey94FxyKIYTeiwmY7oQSIIQEB4KJKcEEsBPAIYn9EptmTDAYjGkBDIEABgOGACF0zHZv73297d7J95v13B3pSiNp7oyudHXm+/aTVleacub85kw5Zb+aOVW1NXMW9NIf0YB4wM0DVbX71cxZMFQzZwGjP6IB8UARDwwBIJAeBBCiAfFAMQ/0EkCKiUKMQjQRPEAAIelJswcFDxBAFMQRowhdsytRCCAEEJIgCh4ggCiIQ5Iju5JD9D0BhABCEkTBAwQQBXHEKELX7EoSAggBhCSIggcIIArikOTIruQQfU8AIYCQBFHwAAFEQRwxitA1u5KEAEIAIQmi4AECiII4JDmyKzlE3xNACCAkQRQ8QABREEeMInTNriQhgBBASIIoeIAAoiAOSY7sSg7R9wQQAghJEAUPEEAUxBGjCF2zK0kIIAQQkiAKHiCAKIhDkiO7kkP0PQGEAEISRMEDBBAFccQoQtfsShICCAGEJIiCBwggCuKQ5Miu5BB9TwAhgJAEUfAAAURBHDGK0DW7koQAQgAhCaLgAQKIgjgkObIrOUTfE0AIICRBFDxAAFEQR4widM2uJCGAEEBIgih4gACiIA5JjuxKDtH3BBACCEkQBQ8QQBTEEaMIXbMrSQggBBCSIAoeIIAoiEOSI7uSQ/Q9AYQAQhJEwQMEEAVxxChC1+xKEgIIAYQkiIIHCCAK4pDkyK7kEH1fWQCpnX8AazjyRNZy/iWs49oVrHv1Gta34UE28OgWNvjENjaw5SnWv2kz6123gXXdtoq1XfVLtufM81n9wUcKgtB1HyjqDjycNZ26hLVd/nPWefNvWe+f/sL6Nz7KBh7fygaffJoNbH6S9d3/MOu5+4+sY/nNrOVHV7DGY09ltf93UCXRMN0Aqf3f73EG7/79vWz4ldfYRF09y+8dZ1FTbmCQjX/+JRvc+gzrXHErazzmVFYzt6qSOjqwLQ2LjmHt11zPBv72ONv70b/ZdE8vY/l8JFLmp6bYZHMLG92xk/WuXc9aLrqM1S04NLDsBEvx9AGk9jsHspYLLuUj2GTTnsidGKbH8xMTbPyzL1jPH9axpuPPSHMHK+vecNixrGvlKja26wOWGx0NQ5rI70x1dbOhv29nbVdew+r2P0RZnwQCJT0AqT/oB6x79T1s4tvayJ1UygcYFUd3vsenYwBnAjsxcp0wwAy/+DLLjY2VQprI3061tbO+9Q+wxqNPiVznMtE9+QABMLBmmO7rj9whpj+Y2P0t67huBUsrUFp/fAUb++Aj02SJnB+mwVjH8KlssjcCkguQ2v9ZyLpX3c2me/sid4DtD8a/+Iq1XvLTtIyCbM/p57DRt96xTZbI+efH9rL+Bzex+oVHJJWWyQRI83kXs/Gvd0cmeNwfDL2wnWFxWybxH1gu5vx9D2xi+cnJuEkTqbyp9g7WvuyGwPaUgc7JAgimLn0bHmIsl4tE4HK+jN2e9p//KnGd23z2RWyipq6cpIlcNtZFCZMmyQEIzi+wvZjW1P/w5sSsTbpu/z3DTlwaE3Ymm5csTcqAkwyAYFcF24FpT6Pvvl/WQ0es2wa3Pp12MrL8+DjrWH5LEkBSfoDgcAoEqZSEaU05dmfqqhclciFeSr/iHKoM6w65zPICpOOGW1K13gjb2ZMtrazpxMUyoa3e1y38fqqnpyq64tykjCApH0A6rr/Jyim4ithx/jbV2s6aTjrTeudycHz8SZxNi72s3r/cb52OPiAsD0CgAIcT6kpPtkGCHZ+9FQ4OwSPQovBhYpvP4wcIDq2gHJiVZAskM+D4T1bIyGcb7b+43iYYvPKOFyCYDkzsrslOp+5r6VRLm9E1SRamVV5MMj0wwJpOOcuLkW09ixcgQ8+/5NXuTDzjIDGwJqnkBXkYRoCWde3+B9sChDvf+ADS+evfhGl/Rb9TKkiytOZQMQL0t2Jaj8QDkIYjTpgxwFG1OiO/8TWJxhYwgUNikFyOtVx4aRwgiQcgg9uek1pHt1FBktU1h4pT9v77UwYTa8uSxD5AoEZCqZgCYXe3SHIU00486frNHekHSBLtEASBy32Fhd2eM8717eT67+GcI0NbuRE7ZLJxD4OKjUUpYleCwNMFJTUFYBC254cXFHVy/aFHc7t49df0a/cddxXRziBg7AJk5NXXqQdDUAA2JW6QNJ38Q4Z9/zjSVEcnd4IBc2KY5cK+pe++jdxLTOjyp3NsbNe/GDzMtP7katZ66VXctdLIa28wWA7aSlAOhXcbg6CQ87IHEBzoJN2SzVan6eTrJUkw/Zq2aQaQz3OLQ79pCgzYun77u0DnDmBS+CLzY9KmExazsffe1yFLqG8sGqzZAwi3DAzVPHpJUCBukHTedJsvU8vMji3V3MiIqKbjit0kbCTI73vez69mtg6KR954K7h8PecQdgACw52J2noHIemfcBTg060zz3d0uA1JEvWwrfPGlUUNAKCj2L7ARn78y6+L8in1AdwXNR55koNmniCNDhI7AIG4paRPAa81iUmQYNqm427VvaMGd6RRGRHuXm2krlvvjFyXEHW3AxAYuVAqjQIASfNZFzo6HSAxYZoMn1QhmKPoHdi6iwSb98bjTi96JyhfSBEYlJlOI6/viFyXoLrWzFlgByB7P/nUdPszmZ+t6VbYtYebgZrPWVroh8mGJm0nFWBm0wm0wrmRu84l/m8eIA2HH8dyw94LOtNEyUJ+XiCBZMkNDmk3v+1n12oxEsyIhUsmaNXqMt/QM3/XrrvqQ2ht6NbJ5zvzAME+OiWzFPDa3Wr/5a+1C4EvAB+GUD4HMEWCJ/2a+dXK9/3KsHU+Bk+cfmVqPjcLECz8un/3B0FDuhqkAAfJ4vMcDDD07AtaJSDEgQ7DIE6ISDj8azzq5Mj54FBvsqFRZGP0CnrAY71O23y+MQsQBKMZfOpZo42mzGYpgHm/vPuE03Ydl0lYJPsdDvowCmc6+P2Sk86I3XrxlXIWRu/3/ucz007nzAIEW3g2T0yNUjOlmSFalszEw9tf1WpJz5o/O/KR8/S6b7tqWVE5MACrP+So8PnMr2Zj739YlI+pB9CQbl+2PHx9gs9FzAKk67bVscfvMEXctOSDQDdyfA043tNJ8CqDoDZeYHA/azrlbDbd3eNZzMibb4fWhYJ7VpsJm0M6Us3dXul/swCB/yJ46s5qgu5ZHPpn3XfOLkZxgqwTdg59hOkZz0ux2G6/+rpAa9CxDz9WRuKClEGUKdspPz3N+v5q1NGcWYBA/GfJpY+jw3M5Hlyn86bZhazjd4P/DL/0j8LIj6CZk3uaS8p94pvdfHMFMQXhlqn53B8xGCNFCbYDdQ9s38I1D9aiexafxwOAQmpggyGu5J6CStKgQLMIz8wCBAt0m6rNcRE5cjn5PINTCkF4aMDaTHAWJ8rCFQF9KM1QAM67ZdqUeG8YIE8/ry3uU9vB+TzzOlfAesxW2vvp5w4mwKEdpRkKYJAuERTy94YB8uTT1qKlJpIBXJLD3TG2QDL6zq7ZTpxXbWRjBOsY2HWM/esjNv7VN9raEFCEhKoRpBx2ucTJe1z9N/jEtlnaBO9SBb1rFiAINJ+EYJuxdAbAseJWB4GxGHXrA9mYbmFeL8AIW4xS5vjoL2z5cnXxebMn4zD5hYo77L7DpNG332UtSy93xEUXcey5asl0PFHDwIOCNgauZgGCeA4IJF/xyQscC4/gawFEyapbcKijk0xLEjmAKEKt6SYcrDX84ARHXd1MVVe1iA2/9Ip/Ebkctzp0f+f+v+2KX5SkP+ZfgdlfsCuno4Lvrqv0v1mAYEQd//zL2RpX4l0uVyw5uJf1We8jOHEuAomhhTvoK+tA9a5dr0VlxJtHiG2JGfzv51UzPw3cKE4TYKeOrVhbCTb8nbfc7t+O6FMuswDByDbyzzdttb/8+UJy3LjS0QF+Tt2wTsDoKzOgiemWfLhX+92DtC03oVQq1y3oHoeT7i18uHQK+s79e//Gv1nrx4n6Br617C6zhP/NAqTp+DMY5oA2Ej+Es+gdI7DOPtMqt5WdnA+XJAZB0rfhQQdDwq5DJ2EhrsM0A1uechSHOC9R84GRlY7+mKNgn39Ab8Pe380CBNZiNpxUQ7kOh09YOA6/rKd75EPTcI8BDumcA0zhJzncGXqBBNOAqAGEEO9cZkbEZ4fjOZ2kG/sP0kskqJ6ABnKdwt7D0YONhM0LHSVMRb3NAgQFgZFNp951GwodEbsjbA/JERYcgg5Q4HSvSWCdF2a9hsGhKHDM3CoGf1O6CfpbCqbw/Q06WSLB+YJOHvjGlneTjuU3a9fJpy3mAQIET3V2CToaucqqFWhIHOocvOIeaw7uK1cjnrvXmgR+p1ov+xkbfPp5BnUP6LGBdvAIA0kJR25uYKH9A49vLYmuun6koF7P8nleNt8siL7o5Qysa8eibHQuxwBgH0bXfW4eIKjgyGvmF+ruRaX1eOAekqNUR9I48fZ1kzO3ioOBTxF8lAfrDjzcyBQT3g91GAlgFgneGN2bEGHzjKLjJcoLusLCEe6mwtYh5Ht2ANK1clVQeyL/jtBtdQccViAARt9SphnKCviuOWa3cpXfK37EViS8g0Rylzm3ikGrdrIp3KGdonj+Ew71QjKI4z33DlTL0p84fg+TZ8ORJ/o6oQuqt+p3SNUw5Ud8xw5AMErqqmCriIATWbmBGDEwPTGZsE9fdELuOucwUR5OqHvWrGWYtnjGuZhbxU1a4e8pzFolUp2mcwwHjDItg+6xQeJ2OeSe+gblgd9xkGcjtV52daT2hKmrNbc/KNyWZaG8YBeN5P5jR0dLpjvEdPN5FzsIHXVBHrUSACRstHGmAJsJLGDhSnNi97fWtkNRR2xP4xxF0DDo6ueJpOPaFaHzgINuGHyZTrAk1J3uBbTbjgRBoV6uKk0RBqfH7oZBag099yKDQ7OoCVuWGM2xTS3nizl/Jcchx+m4PG2V2164n1/NVJaAMG8Is+gHOHS3pYP6U9ZNK9RbcwPB9b09gGDktWldOLj1Gc8RsPG40xgABJVwlW0KlPRGd+zkO2IAgoswDIZI2Hmq9ARHEB3X31Q0AmP6CtUQ1UFogTb5PEN/NHlE8YWuF6z8YFBlI0ECw8jL3X+G/rcHEFTQtod37MW742oUCDO3iuHMBFZy2C7FXB5uazDaYf4ddMg19Kwd52Y2mMREnlhfjO58jw2/+DKDnbmO0im0HdAnw//4J4MzCRwI2gKGaLNFz+4AnV2AQIW6FA+AggiqK06koQJh0rs31L8ppYMCiGJWGBTNTKvk/OwChEuR+zbGQmks/rDAhcKkey3hR0BsFeNP/h3fs5hsF2IhTAUXYll62JcgYLx66AwZPlkP6nOUB63innvXsfZlNzDs12NaBfUOzKuhVwXvgjhHkYO/wNgJc3JKKaAAtqqXLHUMbvJAZ+jevgRBRTH/T2JynygjLACldFBgYPMTtsERjwThSJ5bxcZ2fZAoymMxKZ9mk9PtRHWPsjJQ4JRdsBqSFl6Ai0eCoAE4Mc4NDSsbHuePmHoJwuIkG+anlNJBAbhBFX1n+RofQNAQ2Tt4ObuCSw9pcd6x/Bbr1cEBJhT8StoAyOf5es6GGo91AhgqwOKhoBfo4gUIQOK2SjNEt0jZQF1ejDyYZkGtw2aCqSo2B/ggceNKbbtshJaomVfNNxvi3viwSZ+weSMOuwWN3QIvCJ6QrvEDBAxZzhNqrqYtWcJBl8hmwjmQO/IRDi6jShLom0kdx0zFK/RqO86W4K2x/5HH+AYLDLZwwIqBpe/+hxk8t8QtxaDciehlMg1iuI8fIGgUvGnAOVk5Uv+mWZ9SqIsN2wTRLg6O8y/x7FSAJKyHDzc4BGPsOW1JkYatKFvniljooA9XGZlb5VlvUTbU1nv//Fdfr+865ft9w8PQnbZEWR9RL8PX8gAEjYCOTjliqcMxsyCiHFLMr3N0n6vAIcoPI0n8wCHyMAUSaBPLYRVE/kFXDHamTQ5kmmN6KvdZUH0M/14+gKAhGIXiBAnWGrJPqf6HHpH7wth9GHCIjuz41Y2+060gcIg8oKxXyprE7S1F5AtzX+SN9RPsLaD35qfDBm/wYSViWEJzcLjMD0TdYrqWFyBoZJySRN4B4Yvz+oawfRX6PZ1O5esgl3oLvDFGYQIuSTQ0Fnr/+P9F5TSduoTh0JTvurlaDi1oeFps8Zg6oh2mQDIjOX5cVLcoNDHwbvkBEidIYFMtiCbH/HbxgPa/6FQvxhFlqq4cJLkZ/7Vdt60q1FP1jfu3qCBxe0LHeRCkSViXRDCicrvZQfTdUkEyA47ZqbC7nTH+nwyAoMG2p1sgOsxGBXFNm37iENS9WyXKCnuFI7ju1fcU6hj2O/k97G7hpDmISaHOLrsehUQdfuW1yIMDPLm74xR6ScSwGXNwlHdaJdM/OQBBJ3OQ1NSFpWWk99CRMiPB9sFk6rlLz1OIXCdT97ASxIIbUrJr5So2+tbOom1ZgFEurxQ9NNjMF4EEa6t9LoLC0hkOLZrPLfu0SqZLsgCCDrMFElm5DfbLXvPrsB3p9V7UqLEyc8ZxD8AMPPYkrzridsj+thCduNTEQSJJaLSpe/Wa0NkmEBwASvIAwkFiYQsYuyyCETFXjzq6BfU0LOcsG+8U6i/aoXNFnHJ3JFhTrkC9JAlsNoLSzJojUZJD0DqZALEBEgR3EQylGzo5sKNHRpjbwZ0oM44rplbwLohpClzAwn9vTcCBH2wqTCY4xoY9v2gvBiOVI42ESg5R/+QCBAQ2tXDHrgycOYhO67nnTyZ5wpEXTqPjBgl257DA5rHMpXk/rCyhFoJdMT+3ONDvMp3gi0DQGlfYuXulGXAkYrfKUV+p7skGCCrKQVJX70Xf0M+m+wccloMDm2fm4qEziPgiGDMOkOAMCQvwMAmhooXCpMQAhXVJmDzCvpMbHnGcyiO6lDsleFolgyX5ADEBEmxpymJ/5NXX3f1l/H/bIOFnHq0Rwx8gXJq0FgNtbXlvkTctYMoMfSqREraVKwPCfZ8OgBRAUqsnSeDXF2riYuQce/9D0VdWr7ZA0nDYsQwSQTd1rZw9iBx4dItuNsrvoLEt6I2r8K+VInCg/ukBSAEkGuckUN12dNYndgK4eHEMB8klP3WUL9dF537ohe1eRUV6Jk7roe9lIwHAbqmNtWDCzjmC+iVdAOEgwRZwxDUJwg7IjAivi3EmTC8avn+8ow5yfaLcQ7PVVIJ3F4REi2qbEqZ8hKaWFRsRms+Sg2kjdPXpg/QBBA2JuruF/XmZADhVjzPhwEwuv5R701MiGEHpqJgE0Q9uZ+XDSL9dtFJoEcO36QQICBMFJFzNXToPsGkk5WYcxAIx1pFzq4wbmsF/McIYmLYQxOGjsXab95gYtm7pBQgHCaZbIdYkCDwDZTzRYTYiYLmBgf/D2nOIegVd4eoGi1zTCSCBDYvJBFuboPak4Pd0AwQE5vYkASBxz4cHn9hmkhc88zINDtFWlcd6z4qU6WEMXg/jAGD6AcIZJ8AyEaoOcmxAuCS1mYxOq6TpBZcghkd6G3RAANIUSIcwdawMgBRAopAkLRdeWiAIt1ewwRmYVplcc0jg4Aw3r5pHw7VUdSPZYnGO9SEBxN15CfifL9x9QCLbP9iI5Q7uimomq8NEttVkCiiBCbDLDLjwm88NVHpgg6LTroR+UzkSRBCYg8TjnES2R0dEKa7Y59PROo/l/EVddK4we4UaCZw5YHu4+867GbSPhbKlyXMQZTtzOe5PWVYRUb2PrXS4l9Vpc4K/qTyAgNheIIEattwRptVNuiT1DbmcsPeIU9J5y+1s/OvdnrYqOIXG9jTilyAOShwJdYEJL85epru6i4pEnXDoiniUMXs8dPRlWBprvFeZAAEh3N5SsJMFpTlBpL71DxR1eCkPEFcEZYr8o1whHcI6z4atOfSaoMISR+q+4y7eJhz0wY8YPCxiDQcVe77xIem4RWlzSt6tXICgA9wgkQPfI3ah6TTxbS2Pixil85tOOSu6TyvYfOzzgGK6De78KuTAT2vgSp2yYhTGE+/y6dY+LWDZkAdh2nQCVboZyP1/FJBAVynMQae7jDj/h6RCMFRBz4xdK1uCiM6EJIErHK72Lu222doRAtOHmW5hYZ+GVCGHfjogzwZAABREwYUWsOzYDWcjtlIQSCDZkhRQSEUHeWoqBp2MXLMDEHQotk+x41LoXCj/ffaFijdK+k013YI9RloSzo0KNJMkcAaeZQsg6FCudi1p9kLd22biIPHY3fJzZGCzLjp5wxev7IExA6CQB4PsAcTdwfAtC21fm4lPt1zBX4QJqs1yTeQ9umOnzDBZuyeAADC2zE5lBnWrodic2snllnrfvmx51kAht5cAAoDU7n8ww1TIZupdu14mfFnD0IVtJ2ICBjmec0vkCvufACI6tP3q68LyjdZ7WHOIsnBN+hYvdLCaTlzsqLNc/4zcE0Dkjh7e/qoW84f5iFs1fnfWJSd0qmJJuVxktRSAo8K0cnWBTgCRAYLDvSkPpTxTjOzwtji/mkEDNo4EJxVhwQ9PjTgzkumS4XsCiLvz25fdYI1nEbpMLs9E2IGwlYX7T5xnIOAmpBm80UMbFya88GE19OwLM97ppS1wua4ZvSeAeHV8/4ObwvJdtPdyOdbsip7U94Clslw1G/vw4wI44cACMccbjz2V++uSHbx50SPDzwggnp0/v5qNvPm2i8XM/ItpFXbN5HJFYBszJXjnAjV5Hv88WyfhDjrLNA95TwDxI1T9wiOsrRHcwTNRh4EtT3lztsGnHdffVCrDZO17AogfQPAcat624rj3P/JYEbMNPL7VIByKs+pZs7aoTFX76beUOa8uR4dxoytLh4iD255jNfNnvc6jfTYliVdM9HLQNEVlkgQJ01n1i45hpuL4iXEdrj7h4dHLqbUtkMDmPUx76Z0Fgk4EkLDMAEfMYc8SBAg8r7kcG9z6DGs86mTRCZ5XGyDJsOGTJ41D9D0BJASRHMTFPB47QjoJh5BeYdBQB+xsYesVEkXscvXd/7BOMZ7fYC1VoZ5HHP0TtT8D3ieABBDIk/gtF1zKJhsaPRnR7yHeRywOuTxIpc4Vt7KR13ewqdZ2rhKCAzy42Bnd+R4PvmkqXByCdcpl031hGqWiCwFEl1FgeAWFQ5xGByWu+HfSmY6OaLtqWagwagBLfnw8qAjl7+NffcPgpEK3rRn+jgBSaufDsdroW+8oGRSeEeVyetdtUL5v8keEWt5z+jmO8uW60L1SkhBATDFIy9LL2ei77xd5RXTrX2ENo53gDyuCv9yptnbu7M1UGzOYDwHEdKdzhcCtzzCM3EiywwPuRaVEh29YrwSZ6yLcA07r6w89miRHaao1BBDTABH51R9yFN+xgjNq8Wxs1wfawkN8OFHfwKAGA3sS6HDt/fgT7u8L64yRN95iPXfdW3B0Lcqlq3IaVegfDzoRQDyIoiKY9m/NZ18keLzkK3a+HPWGf1xSU3fSpDTJIfIigDgYzQxRBXEdV6h5mEo4sIyr3hkvhwASFwNgsW4qTXyzmySGxcFM4gkCiEQMq6Py6Du7TOGDTbW0sVrJvj2uNmSwHAJIXJ0OW29TyR3WOq42ZLAcAkhcnW4y9DR2ruKqd8bLIYDExQAIImoqeRlbxdWOjJVDAImrw6GpKw4PSwUKlCXjqnfGyyGAxMkA/Q89Uio2uN5XnHXOeFkEkDgZAEFEcRKum3IjIzzGSZx1znhZBJC4GQC6WdP9M3pakYAynWMZ97RejmklASRugKA8RLqK4i0FIazhGbEcdc14mQSQcjEADK4QEgEGUX4pNzzCvZxggV+uema8XAJIuRmg7oDDWNuV1zAYUUFFHb5z++7byDquXcEaFh1DwIhHpcSPzgSQcgOEytdWRfdjapPPCSDEoIlmUJPMrpMXAYQAQgBR8AABREEcnRGHvinvmsE0/QkgBBCSIAoeIIAoiGN6NKL80iddCCAEEJIgCh4ggCiIQyN++kZ8031GACGAkARR8AABREEc06MR5Zc+iUQAIYCQBFHwAAFEQRwa8dM34pvuMwIIAYQkiIIHCCAK4pgejSi/9EkkAggBhCSIggcIIAri0IifvhHfdJ8RQAggJEEUPEAAURDH9GhE+aVPIhFACCAkQRQ8QABREIdG/PSN+Kb7jABCACEJouABAoiCOKZHI8ovfRKJA2SImIRGUeIBTx4Y2q9mTlVtzZwFvfRHNCAecPNAVe1/AV20WEfIvGKNAAAAAElFTkSuQmCC"
    />
    <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const Ld=!1;var Il=Array.isArray,s3=Array.prototype.indexOf,Ba=Array.prototype.includes,Zc=Array.from,Oy=Object.defineProperty,_i=Object.getOwnPropertyDescriptor,Iy=Object.getOwnPropertyDescriptors,a3=Object.prototype,o3=Array.prototype,Qp=Object.getPrototypeOf,jm=Object.isExtensible;function ha(r){return typeof r=="function"}const yr=()=>{};function l3(r){return r()}function _c(r){for(var e=0;e<r.length;e++)r[e]()}function By(){var r,e,t=new Promise((n,i)=>{r=n,e=i});return{promise:t,resolve:r,reject:e}}function u3(r,e){if(Array.isArray(r))return r;if(!(Symbol.iterator in r))return Array.from(r);const t=[];for(const n of r)if(t.push(n),t.length===e)break;return t}const ir=2,bc=4,Bl=8,eg=1<<24,Qn=16,Rn=32,Vs=64,tg=128,rn=512,Vt=1024,gr=2048,ei=4096,Dr=8192,bi=16384,Jc=32768,Zn=65536,Hm=1<<17,Fy=1<<18,uo=1<<19,Dy=1<<20,pi=1<<25,ks=32768,Ud=1<<21,rg=1<<22,zi=1<<23,qn=Symbol("$state"),Ly=Symbol("legacy props"),c3=Symbol(""),va=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Qc(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function f3(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function h3(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function d3(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function p3(r){throw new Error("https://svelte.dev/e/effect_orphan")}function g3(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function m3(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function v3(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _3(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function b3(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function y3(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const x3=1,w3=2,Uy=4,S3=8,T3=16,E3=1,A3=2,Ny=4,C3=8,P3=16,R3=4,k3=1,M3=2,Xt=Symbol(),O3="http://www.w3.org/1999/xhtml",I3="http://www.w3.org/2000/svg",B3="@attach";function F3(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function D3(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Gy(r){return r===this.v}function zy(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function jy(r){return!zy(r,this.v)}let co=!1,L3=!1;function U3(){co=!0}let xt=null;function Fa(r){xt=r}function N3(r,e){return G3().set(r,e),e}function He(r,e=!1,t){xt={p:xt,i:!1,c:null,e:null,s:r,x:null,l:co&&!e?{s:null,u:null,$:[]}:null}}function Ve(r){var e=xt,t=e.e;if(t!==null){e.e=null;for(var n of t)ux(n)}return r!==void 0&&(e.x=r),e.i=!0,xt=e.p,r??{}}function Fl(){return!co||xt!==null&&xt.l===null}function G3(r){return xt===null&&Qc(),xt.c??=new Map(z3(xt)||void 0)}function z3(r){let e=r.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}let _s=[];function Hy(){var r=_s;_s=[],_c(r)}function wn(r){if(_s.length===0&&!nl){var e=_s;queueMicrotask(()=>{e===_s&&Hy()})}_s.push(r)}function j3(){for(;_s.length>0;)Hy()}function Vy(r){var e=ot;if(e===null)return st.f|=zi,r;if(e.f&Jc)Da(r,e);else{if(!(e.f&tg))throw r;e.b.error(r)}}function Da(r,e){for(;e!==null;){if(e.f&tg)try{e.b.error(r);return}catch(t){r=t}e=e.parent}throw r}const H3=-7169;function zt(r,e){r.f=r.f&H3|e}function ng(r){r.f&rn||r.deps===null?zt(r,Vt):zt(r,ei)}function Wy(r){if(r!==null)for(const e of r)!(e.f&ir)||!(e.f&ks)||(e.f^=ks,Wy(e.deps))}function qy(r,e,t){r.f&gr?e.add(r):r.f&ei&&t.add(r),Wy(r.deps),zt(r,Vt)}const ou=new Set;let mt=null,Nd=null,vn=null,Rr=[],ef=null,Gd=!1,nl=!1,Ea=class Xy{committed=!1;current=new Map;previous=new Map;#t=new Set;#a=new Set;#e=0;#i=0;#s=null;#n=new Set;#r=new Set;skipped_effects=new Set;is_fork=!1;#o=!1;is_deferred(){return this.is_fork||this.#i>0}process(e){Rr=[],this.apply();var t=[],n=[];for(const i of e)this.#l(i,t,n);if(this.is_deferred()){this.#u(n),this.#u(t);for(const i of this.skipped_effects)Zy(i)}else{for(const i of this.#t)i();this.#t.clear(),this.#e===0&&this.#c(),Nd=this,mt=null,Vm(n),Vm(t),Nd=null,this.#s?.resolve()}vn=null}#l(e,t,n){e.f^=Vt;for(var i=e.first,s=null;i!==null;){var a=i.f,o=(a&(Rn|Vs))!==0,l=o&&(a&Vt)!==0,u=l||(a&Dr)!==0||this.skipped_effects.has(i);if(!u&&i.fn!==null){o?i.f^=Vt:s!==null&&a&(bc|Bl|eg)?s.b.defer_effect(i):a&bc?t.push(i):po(i)&&(a&Qn&&this.#r.add(i),Na(i));var c=i.first;if(c!==null){i=c;continue}}var f=i.parent;for(i=i.next;i===null&&f!==null;)f===s&&(s=null),i=f.next,f=f.parent}}#u(e){for(var t=0;t<e.length;t+=1)qy(e[t],this.#n,this.#r)}capture(e,t){t!==Xt&&!this.previous.has(e)&&this.previous.set(e,t),e.f&zi||(this.current.set(e,e.v),vn?.set(e,e.v))}activate(){mt=this,this.apply()}deactivate(){mt===this&&(mt=null,vn=null)}flush(){if(this.activate(),Rr.length>0){if(Yy(),mt!==null&&mt!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#a)e(this);this.#a.clear()}#c(){if(ou.size>1){this.previous.clear();var e=vn,t=!0;for(const i of ou){if(i===this){t=!1;continue}const s=[];for(const[o,l]of this.current){if(i.current.has(o))if(t&&l!==i.current.get(o))i.current.set(o,l);else continue;s.push(o)}if(s.length===0)continue;const a=[...i.current.keys()].filter(o=>!this.current.has(o));if(a.length>0){var n=Rr;Rr=[];const o=new Set,l=new Map;for(const u of s)$y(u,a,o,l);if(Rr.length>0){mt=i,i.apply();for(const u of Rr)i.#l(u,[],[]);i.deactivate()}Rr=n}}mt=null,vn=e}this.committed=!0,ou.delete(this)}increment(e){this.#e+=1,e&&(this.#i+=1)}decrement(e){this.#e-=1,e&&(this.#i-=1),!this.#o&&(this.#o=!0,wn(()=>{this.#o=!1,this.is_deferred()?Rr.length>0&&this.flush():this.revive()}))}revive(){for(const e of this.#n)this.#r.delete(e),zt(e,gr),Ai(e);for(const e of this.#r)zt(e,ei),Ai(e);this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#a.add(e)}settled(){return(this.#s??=By()).promise}static ensure(){if(mt===null){const e=mt=new Xy;ou.add(mt),nl||wn(()=>{mt===e&&e.flush()})}return mt}apply(){}};function V3(r){var e=nl;nl=!0;try{for(var t;;){if(j3(),Rr.length===0&&(mt?.flush(),Rr.length===0))return ef=null,t;Yy()}}finally{nl=e}}function Yy(){Gd=!0;var r=null;try{for(var e=0;Rr.length>0;){var t=Ea.ensure();if(e++>1e3){var n,i;W3()}t.process(Rr),ji.clear()}}finally{Gd=!1,ef=null}}function W3(){try{g3()}catch(r){Da(r,ef)}}let li=null;function Vm(r){var e=r.length;if(e!==0){for(var t=0;t<e;){var n=r[t++];if(!(n.f&(bi|Dr))&&po(n)&&(li=new Set,Na(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?dx(n):n.fn=null),li?.size>0)){ji.clear();for(const i of li){if(i.f&(bi|Dr))continue;const s=[i];let a=i.parent;for(;a!==null;)li.has(a)&&(li.delete(a),s.push(a)),a=a.parent;for(let o=s.length-1;o>=0;o--){const l=s[o];l.f&(bi|Dr)||Na(l)}}li.clear()}}li=null}}function $y(r,e,t,n){if(!t.has(r)&&(t.add(r),r.reactions!==null))for(const i of r.reactions){const s=i.f;s&ir?$y(i,e,t,n):s&(rg|Qn)&&!(s&gr)&&Ky(i,e,n)&&(zt(i,gr),Ai(i))}}function Ky(r,e,t){const n=t.get(r);if(n!==void 0)return n;if(r.deps!==null)for(const i of r.deps){if(Ba.call(e,i))return!0;if(i.f&ir&&Ky(i,e,t))return t.set(i,!0),!0}return t.set(r,!1),!1}function Ai(r){for(var e=ef=r;e.parent!==null;){e=e.parent;var t=e.f;if(Gd&&e===ot&&t&Qn&&!(t&Fy))return;if(t&(Vs|Rn)){if(!(t&Vt))return;e.f^=Vt}}Rr.push(e)}function Zy(r){if(!(r.f&Rn&&r.f&Vt)){zt(r,Vt);for(var e=r.first;e!==null;)Zy(e),e=e.next}}function q3(r){let e=0,t=qi(0),n;return()=>{sg()&&(z(t),fo(()=>(e===0&&(n=R(()=>r(()=>il(t)))),e+=1,()=>{wn(()=>{e-=1,e===0&&(n?.(),n=void 0,il(t))})})))}}var X3=Zn|uo|tg;function Y3(r,e,t){new $3(r,e,t)}class $3{parent;is_pending=!1;#t;#a=null;#e;#i;#s;#n=null;#r=null;#o=null;#l=null;#u=null;#c=0;#h=0;#p=!1;#d=!1;#g=new Set;#m=new Set;#f=null;#x=q3(()=>(this.#f=qi(this.#c),()=>{this.#f=null}));constructor(e,t,n){this.#t=e,this.#e=t,this.#i=n,this.parent=ot.b,this.is_pending=!!this.#e.pending,this.#s=ho(()=>{ot.b=this;{var i=this.#b();try{this.#n=br(()=>n(i))}catch(s){this.error(s)}this.#h>0?this.#_():this.is_pending=!1}return()=>{this.#u?.remove()}},X3)}#w(){try{this.#n=br(()=>this.#i(this.#t))}catch(e){this.error(e)}}#S(){const e=this.#e.pending;e&&(this.#r=br(()=>e(this.#t)),wn(()=>{var t=this.#b();this.#n=this.#v(()=>(Ea.ensure(),br(()=>this.#i(t)))),this.#h>0?this.#_():(Es(this.#r,()=>{this.#r=null}),this.is_pending=!1)}))}#b(){var e=this.#t;return this.is_pending&&(this.#u=Xn(),this.#t.before(this.#u),e=this.#u),e}defer_effect(e){qy(e,this.#g,this.#m)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#v(e){var t=ot,n=st,i=xt;ln(this.#s),on(this.#s),Fa(this.#s.ctx);try{return e()}catch(s){return Vy(s),null}finally{ln(t),on(n),Fa(i)}}#_(){const e=this.#e.pending;this.#n!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#u),mx(this.#n,this.#l)),this.#r===null&&(this.#r=br(()=>e(this.#t)))}#y(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(e);return}if(this.#h+=e,this.#h===0){this.is_pending=!1;for(const t of this.#g)zt(t,gr),Ai(t);for(const t of this.#m)zt(t,ei),Ai(t);this.#g.clear(),this.#m.clear(),this.#r&&Es(this.#r,()=>{this.#r=null}),this.#l&&(this.#t.before(this.#l),this.#l=null)}}update_pending_count(e){this.#y(e),this.#c+=e,!(!this.#f||this.#p)&&(this.#p=!0,wn(()=>{this.#p=!1,this.#f&&La(this.#f,this.#c)}))}get_effect_pending(){return this.#x(),z(this.#f)}error(e){var t=this.#e.onerror;let n=this.#e.failed;if(this.#d||!t&&!n)throw e;this.#n&&(nr(this.#n),this.#n=null),this.#r&&(nr(this.#r),this.#r=null),this.#o&&(nr(this.#o),this.#o=null);var i=!1,s=!1;const a=()=>{if(i){D3();return}i=!0,s&&y3(),Ea.ensure(),this.#c=0,this.#o!==null&&Es(this.#o,()=>{this.#o=null}),this.is_pending=this.has_pending_snippet(),this.#n=this.#v(()=>(this.#d=!1,br(()=>this.#i(this.#t)))),this.#h>0?this.#_():this.is_pending=!1};wn(()=>{try{s=!0,t?.(e,a),s=!1}catch(o){Da(o,this.#s&&this.#s.parent)}n&&(this.#o=this.#v(()=>{Ea.ensure(),this.#d=!0;try{return br(()=>{n(this.#t,()=>e,()=>a)})}catch(o){return Da(o,this.#s.parent),null}finally{this.#d=!1}}))})}}function Jy(r,e,t,n){const i=Fl()?Dl:Dt;var s=r.filter(h=>!h.settled);if(t.length===0&&s.length===0){n(e.map(i));return}var a=mt,o=ot,l=K3(),u=s.length===1?s[0].promise:s.length>1?Promise.all(s.map(h=>h.promise)):null;function c(h){l();try{n(h)}catch(d){o.f&bi||Da(d,o)}a?.deactivate(),zd()}if(t.length===0){u.then(()=>c(e.map(i)));return}function f(){l(),Promise.all(t.map(h=>Z3(h))).then(h=>c([...e.map(i),...h])).catch(h=>Da(h,o))}u?u.then(f):f()}function K3(){var r=ot,e=st,t=xt,n=mt;return function(s=!0){ln(r),on(e),Fa(t),s&&n?.activate()}}function zd(){ln(null),on(null),Fa(null)}function Dl(r){var e=ir|gr,t=st!==null&&st.f&ir?st:null;return ot!==null&&(ot.f|=uo),{ctx:xt,deps:null,effects:null,equals:Gy,f:e,fn:r,reactions:null,rv:0,v:Xt,wv:0,parent:t??ot,ac:null}}function Z3(r,e,t){let n=ot;n===null&&f3();var i=n.b,s=void 0,a=qi(Xt),o=!st,l=new Map;return uA(()=>{var u=By();s=u.promise;try{Promise.resolve(r()).then(u.resolve,u.reject).then(()=>{c===mt&&c.committed&&c.deactivate(),zd()})}catch(d){u.reject(d),zd()}var c=mt;if(o){var f=i.is_rendered();i.update_pending_count(1),c.increment(f),l.get(c)?.reject(va),l.delete(c),l.set(c,u)}const h=(d,p=void 0)=>{if(c.activate(),p)p!==va&&(a.f|=zi,La(a,p));else{a.f&zi&&(a.f^=zi),La(a,d);for(const[v,m]of l){if(l.delete(v),v===c)break;m.reject(va)}}o&&(i.update_pending_count(-1),c.decrement(f))};u.promise.then(h,d=>h(null,d||"unknown"))}),qs(()=>{for(const u of l.values())u.reject(va)}),new Promise(u=>{function c(f){function h(){f===s?u(a):c(s)}f.then(h,h)}c(s)})}function Ot(r){const e=Dl(r);return vx(e),e}function Dt(r){const e=Dl(r);return e.equals=jy,e}function Qy(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)nr(e[t])}}function J3(r){for(var e=r.parent;e!==null;){if(!(e.f&ir))return e.f&bi?null:e;e=e.parent}return null}function ig(r){var e,t=ot;ln(J3(r));try{r.f&=~ks,Qy(r),e=xx(r)}finally{ln(t)}return e}function ex(r){var e=ig(r);if(!r.equals(e)&&(r.wv=bx(),(!mt?.is_fork||r.deps===null)&&(r.v=e,r.deps===null))){zt(r,Vt);return}Xi||(vn!==null?(sg()||mt?.is_fork)&&vn.set(r,e):ng(r))}let jd=new Set;const ji=new Map;let tx=!1;function qi(r,e){var t={f:0,v:r,reactions:null,equals:Gy,rv:0,wv:0};return t}function Ct(r,e){const t=qi(r);return vx(t),t}function pt(r,e=!1,t=!0){const n=qi(r);return e||(n.equals=jy),co&&t&&xt!==null&&xt.l!==null&&(xt.l.s??=[]).push(n),n}function Js(r,e){return ve(r,R(()=>z(r))),e}function ve(r,e,t=!1){st!==null&&(!yn||st.f&Hm)&&Fl()&&st.f&(ir|Qn|rg|Hm)&&(nn===null||!Ba.call(nn,r))&&b3();let n=t?Ir(e):e;return La(r,n)}function La(r,e){if(!r.equals(e)){var t=r.v;Xi?ji.set(r,e):ji.set(r,t),r.v=e;var n=Ea.ensure();if(n.capture(r,t),r.f&ir){const i=r;r.f&gr&&ig(i),ng(i)}r.wv=bx(),rx(r,gr),Fl()&&ot!==null&&ot.f&Vt&&!(ot.f&(Rn|Vs))&&(Xr===null?hA([r]):Xr.push(r)),!n.is_fork&&jd.size>0&&!tx&&Q3()}return e}function Q3(){tx=!1;for(const r of jd)r.f&Vt&&zt(r,ei),po(r)&&Na(r);jd.clear()}function Wm(r,e=1){var t=z(r),n=e===1?t++:t--;return ve(r,t),n}function il(r){ve(r,r.v+1)}function rx(r,e){var t=r.reactions;if(t!==null)for(var n=Fl(),i=t.length,s=0;s<i;s++){var a=t[s],o=a.f;if(!(!n&&a===ot)){var l=(o&gr)===0;if(l&&zt(a,e),o&ir){var u=a;vn?.delete(u),o&ks||(o&rn&&(a.f|=ks),rx(u,ei))}else l&&(o&Qn&&li!==null&&li.add(a),Ai(a))}}}function Ir(r){if(typeof r!="object"||r===null||qn in r)return r;const e=Qp(r);if(e!==a3&&e!==o3)return r;var t=new Map,n=Il(r),i=Ct(0),s=As,a=o=>{if(As===s)return o();var l=st,u=As;on(null),$m(s);var c=o();return on(l),$m(u),c};return n&&t.set("length",Ct(r.length)),new Proxy(r,{defineProperty(o,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&v3();var c=t.get(l);return c===void 0?c=a(()=>{var f=Ct(u.value);return t.set(l,f),f}):ve(c,u.value,!0),!0},deleteProperty(o,l){var u=t.get(l);if(u===void 0){if(l in o){const c=a(()=>Ct(Xt));t.set(l,c),il(i)}}else ve(u,Xt),il(i);return!0},get(o,l,u){if(l===qn)return r;var c=t.get(l),f=l in o;if(c===void 0&&(!f||_i(o,l)?.writable)&&(c=a(()=>{var d=Ir(f?o[l]:Xt),p=Ct(d);return p}),t.set(l,c)),c!==void 0){var h=z(c);return h===Xt?void 0:h}return Reflect.get(o,l,u)},getOwnPropertyDescriptor(o,l){var u=Reflect.getOwnPropertyDescriptor(o,l);if(u&&"value"in u){var c=t.get(l);c&&(u.value=z(c))}else if(u===void 0){var f=t.get(l),h=f?.v;if(f!==void 0&&h!==Xt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(o,l){if(l===qn)return!0;var u=t.get(l),c=u!==void 0&&u.v!==Xt||Reflect.has(o,l);if(u!==void 0||ot!==null&&(!c||_i(o,l)?.writable)){u===void 0&&(u=a(()=>{var h=c?Ir(o[l]):Xt,d=Ct(h);return d}),t.set(l,u));var f=z(u);if(f===Xt)return!1}return c},set(o,l,u,c){var f=t.get(l),h=l in o;if(n&&l==="length")for(var d=u;d<f.v;d+=1){var p=t.get(d+"");p!==void 0?ve(p,Xt):d in o&&(p=a(()=>Ct(Xt)),t.set(d+"",p))}if(f===void 0)(!h||_i(o,l)?.writable)&&(f=a(()=>Ct(void 0)),ve(f,Ir(u)),t.set(l,f));else{h=f.v!==Xt;var v=a(()=>Ir(u));ve(f,v)}var m=Reflect.getOwnPropertyDescriptor(o,l);if(m?.set&&m.set.call(c,u),!h){if(n&&typeof l=="string"){var g=t.get("length"),_=Number(l);Number.isInteger(_)&&_>=g.v&&ve(g,_+1)}il(i)}return!0},ownKeys(o){z(i);var l=Reflect.ownKeys(o).filter(f=>{var h=t.get(f);return h===void 0||h.v!==Xt});for(var[u,c]of t)c.v!==Xt&&!(u in o)&&l.push(u);return l},setPrototypeOf(){_3()}})}function qm(r){try{if(r!==null&&typeof r=="object"&&qn in r)return r[qn]}catch{}return r}function eA(r,e){return Object.is(qm(r),qm(e))}var Lr,nx,ix,sx;function tA(){if(Lr===void 0){Lr=window,nx=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;ix=_i(e,"firstChild").get,sx=_i(e,"nextSibling").get,jm(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),jm(t)&&(t.__t=void 0)}}function Xn(r=""){return document.createTextNode(r)}function Ua(r){return ix.call(r)}function Ll(r){return sx.call(r)}function ye(r,e){return Ua(r)}function be(r,e=!1){{var t=Ua(r);return t instanceof Comment&&t.data===""?Ll(t):t}}function ee(r,e=1,t=!1){let n=r;for(;e--;)n=Ll(n);return n}function rA(r){r.textContent=""}function ax(){return!1}function nA(r,e){if(e){const t=document.body;r.autofocus=!0,wn(()=>{document.activeElement===t&&r.focus()})}}let Xm=!1;function iA(){Xm||(Xm=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{if(!r.defaultPrevented)for(const e of r.target.elements)e.__on_r?.()})},{capture:!0}))}function sA(r,e,t,n=!0){n&&t();for(var i of e)r.addEventListener(i,t);qs(()=>{for(var s of e)r.removeEventListener(s,t)})}function Ws(r){var e=st,t=ot;on(null),ln(null);try{return r()}finally{on(e),ln(t)}}function ox(r,e,t,n=t){r.addEventListener(e,()=>Ws(t));const i=r.__on_r;i?r.__on_r=()=>{i(),n(!0)}:r.__on_r=()=>n(!0),iA()}function lx(r){ot===null&&(st===null&&p3(),d3()),Xi&&h3()}function aA(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function kn(r,e,t){var n=ot;n!==null&&n.f&Dr&&(r|=Dr);var i={ctx:xt,deps:null,nodes:null,f:r|gr|rn,first:null,fn:e,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(t)try{Na(i),i.f|=Jc}catch(o){throw nr(i),o}else e!==null&&Ai(i);var s=i;if(t&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&!(s.f&uo)&&(s=s.first,r&Qn&&r&Zn&&s!==null&&(s.f|=Zn)),s!==null&&(s.parent=n,n!==null&&aA(s,n),st!==null&&st.f&ir&&!(r&Vs))){var a=st;(a.effects??=[]).push(s)}return i}function sg(){return st!==null&&!yn}function qs(r){const e=kn(Bl,null,!1);return zt(e,Vt),e.teardown=r,e}function En(r){lx();var e=ot.f,t=!st&&(e&Rn)!==0&&(e&Jc)===0;if(t){var n=xt;(n.e??=[]).push(r)}else return ux(r)}function ux(r){return kn(bc|Dy,r,!1)}function oA(r){return lx(),kn(Bl|Dy,r,!0)}function lA(r){Ea.ensure();const e=kn(Vs|uo,r,!0);return(t={})=>new Promise(n=>{t.outro?Es(e,()=>{nr(e),n(void 0)}):(nr(e),n(void 0))})}function Ms(r){return kn(bc,r,!1)}function Ut(r,e){var t=xt,n={effect:null,ran:!1,deps:r};t.l.$.push(n),n.effect=fo(()=>{r(),!n.ran&&(n.ran=!0,R(e))})}function Xs(){var r=xt;fo(()=>{for(var e of r.l.$){e.deps();var t=e.effect;t.f&Vt&&t.deps!==null&&zt(t,ei),po(t)&&Na(t),e.ran=!1}})}function uA(r){return kn(rg|uo,r,!0)}function fo(r,e=0){return kn(Bl|e,r,!0)}function qe(r,e=[],t=[],n=[]){Jy(n,e,t,i=>{kn(Bl,()=>r(...i.map(z)),!0)})}function ho(r,e=0){var t=kn(Qn|e,r,!0);return t}function cx(r,e=0){var t=kn(eg|e,r,!0);return t}function br(r){return kn(Rn|uo,r,!0)}function fx(r){var e=r.teardown;if(e!==null){const t=Xi,n=st;Ym(!0),on(null);try{e.call(null)}finally{Ym(t),on(n)}}}function hx(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){const i=t.ac;i!==null&&Ws(()=>{i.abort(va)});var n=t.next;t.f&Vs?t.parent=null:nr(t,e),t=n}}function cA(r){for(var e=r.first;e!==null;){var t=e.next;e.f&Rn||nr(e),e=t}}function nr(r,e=!0){var t=!1;(e||r.f&Fy)&&r.nodes!==null&&r.nodes.end!==null&&(fA(r.nodes.start,r.nodes.end),t=!0),hx(r,e&&!t),yc(r,0),zt(r,bi);var n=r.nodes&&r.nodes.t;if(n!==null)for(const s of n)s.stop();fx(r);var i=r.parent;i!==null&&i.first!==null&&dx(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes=r.ac=null}function fA(r,e){for(;r!==null;){var t=r===e?null:Ll(r);r.remove(),r=t}}function dx(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function Es(r,e,t=!0){var n=[];px(r,n,!0);var i=()=>{t&&nr(r),e&&e()},s=n.length;if(s>0){var a=()=>--s||i();for(var o of n)o.out(a)}else i()}function px(r,e,t){if(!(r.f&Dr)){r.f^=Dr;var n=r.nodes&&r.nodes.t;if(n!==null)for(const o of n)(o.is_global||t)&&e.push(o);for(var i=r.first;i!==null;){var s=i.next,a=(i.f&Zn)!==0||(i.f&Rn)!==0&&(r.f&Qn)!==0;px(i,e,a?t:!1),i=s}}}function ag(r){gx(r,!0)}function gx(r,e){if(r.f&Dr){r.f^=Dr,r.f&Vt||(zt(r,gr),Ai(r));for(var t=r.first;t!==null;){var n=t.next,i=(t.f&Zn)!==0||(t.f&Rn)!==0;gx(t,i?e:!1),t=n}var s=r.nodes&&r.nodes.t;if(s!==null)for(const a of s)(a.is_global||e)&&a.in()}}function mx(r,e){if(r.nodes)for(var t=r.nodes.start,n=r.nodes.end;t!==null;){var i=t===n?null:Ll(t);e.append(t),t=i}}let Xu=!1,Xi=!1;function Ym(r){Xi=r}let st=null,yn=!1;function on(r){st=r}let ot=null;function ln(r){ot=r}let nn=null;function vx(r){st!==null&&(nn===null?nn=[r]:nn.push(r))}let _r=null,Pr=0,Xr=null;function hA(r){Xr=r}let _x=1,bs=0,As=bs;function $m(r){As=r}function bx(){return++_x}function po(r){var e=r.f;if(e&gr)return!0;if(e&ir&&(r.f&=~ks),e&ei){for(var t=r.deps,n=t.length,i=0;i<n;i++){var s=t[i];if(po(s)&&ex(s),s.wv>r.wv)return!0}e&rn&&vn===null&&zt(r,Vt)}return!1}function yx(r,e,t=!0){var n=r.reactions;if(n!==null&&!(nn!==null&&Ba.call(nn,r)))for(var i=0;i<n.length;i++){var s=n[i];s.f&ir?yx(s,e,!1):e===s&&(t?zt(s,gr):s.f&Vt&&zt(s,ei),Ai(s))}}function xx(r){var e=_r,t=Pr,n=Xr,i=st,s=nn,a=xt,o=yn,l=As,u=r.f;_r=null,Pr=0,Xr=null,st=u&(Rn|Vs)?null:r,nn=null,Fa(r.ctx),yn=!1,As=++bs,r.ac!==null&&(Ws(()=>{r.ac.abort(va)}),r.ac=null);try{r.f|=Ud;var c=r.fn,f=c(),h=r.deps,d=mt?.is_fork;if(_r!==null){var p;if(d||yc(r,Pr),h!==null&&Pr>0)for(h.length=Pr+_r.length,p=0;p<_r.length;p++)h[Pr+p]=_r[p];else r.deps=h=_r;if(sg()&&r.f&rn)for(p=Pr;p<h.length;p++)(h[p].reactions??=[]).push(r)}else!d&&h!==null&&Pr<h.length&&(yc(r,Pr),h.length=Pr);if(Fl()&&Xr!==null&&!yn&&h!==null&&!(r.f&(ir|ei|gr)))for(p=0;p<Xr.length;p++)yx(Xr[p],r);if(i!==null&&i!==r){if(bs++,i.deps!==null)for(let v=0;v<t;v+=1)i.deps[v].rv=bs;if(e!==null)for(const v of e)v.rv=bs;Xr!==null&&(n===null?n=Xr:n.push(...Xr))}return r.f&zi&&(r.f^=zi),f}catch(v){return Vy(v)}finally{r.f^=Ud,_r=e,Pr=t,Xr=n,st=i,nn=s,Fa(a),yn=o,As=l}}function dA(r,e){let t=e.reactions;if(t!==null){var n=s3.call(t,r);if(n!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[n]=t[i],t.pop())}}if(t===null&&e.f&ir&&(_r===null||!Ba.call(_r,e))){var s=e;s.f&rn&&(s.f^=rn,s.f&=~ks),ng(s),Qy(s),yc(s,0)}}function yc(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)dA(r,t[n])}function Na(r){var e=r.f;if(!(e&bi)){zt(r,Vt);var t=ot,n=Xu;ot=r,Xu=!0;try{e&(Qn|eg)?cA(r):hx(r),fx(r);var i=xx(r);r.teardown=typeof i=="function"?i:null,r.wv=_x;var s;Ld&&L3&&r.f&gr&&r.deps}finally{Xu=n,ot=t}}}async function Yn(){await Promise.resolve(),V3()}function z(r){var e=r.f,t=(e&ir)!==0;if(st!==null&&!yn){var n=ot!==null&&(ot.f&bi)!==0;if(!n&&(nn===null||!Ba.call(nn,r))){var i=st.deps;if(st.f&Ud)r.rv<bs&&(r.rv=bs,_r===null&&i!==null&&i[Pr]===r?Pr++:_r===null?_r=[r]:_r.push(r));else{(st.deps??=[]).push(r);var s=r.reactions;s===null?r.reactions=[st]:Ba.call(s,st)||s.push(st)}}}if(Xi&&ji.has(r))return ji.get(r);if(t){var a=r;if(Xi){var o=a.v;return(!(a.f&Vt)&&a.reactions!==null||Sx(a))&&(o=ig(a)),ji.set(a,o),o}var l=(a.f&rn)===0&&!yn&&st!==null&&(Xu||(st.f&rn)!==0),u=a.deps===null;po(a)&&(l&&(a.f|=rn),ex(a)),l&&!u&&wx(a)}if(vn?.has(r))return vn.get(r);if(r.f&zi)throw r.v;return r.v}function wx(r){if(r.deps!==null){r.f|=rn;for(const e of r.deps)(e.reactions??=[]).push(r),e.f&ir&&!(e.f&rn)&&wx(e)}}function Sx(r){if(r.v===Xt)return!0;if(r.deps===null)return!1;for(const e of r.deps)if(ji.has(e)||e.f&ir&&Sx(e))return!0;return!1}function R(r){var e=yn;try{return yn=!0,r()}finally{yn=e}}function Le(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(qn in r)Hd(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&qn in t&&Hd(t)}}}function Hd(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{Hd(r[n],e)}catch{}const t=Qp(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=Iy(t);for(let i in n){const s=n[i].get;if(s)try{s.call(r)}catch{}}}}}function pA(r){return r.endsWith("capture")&&r!=="gotpointercapture"&&r!=="lostpointercapture"}const gA=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function mA(r){return gA.includes(r)}const vA={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function _A(r){return r=r.toLowerCase(),vA[r]??r}const bA=["touchstart","touchmove"];function yA(r){return bA.includes(r)}const Tx=new Set,Vd=new Set;function Ex(r,e,t,n={}){function i(s){if(n.capture||Yo.call(e,s),!s.cancelBubble)return Ws(()=>t?.call(this,s))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?wn(()=>{e.addEventListener(r,i,n)}):e.addEventListener(r,i,n),i}function We(r,e,t,n,i){var s={capture:n,passive:i},a=Ex(r,e,t,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&qs(()=>{e.removeEventListener(r,a,s)})}function is(r){for(var e=0;e<r.length;e++)Tx.add(r[e]);for(var t of Vd)t(r)}let Km=null;function Yo(r){var e=this,t=e.ownerDocument,n=r.type,i=r.composedPath?.()||[],s=i[0]||r.target;Km=r;var a=0,o=Km===r&&r.__root;if(o){var l=i.indexOf(o);if(l!==-1&&(e===document||e===window)){r.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(a=l)}if(s=i[a]||r.target,s!==e){Oy(r,"currentTarget",{configurable:!0,get(){return s||t}});var c=st,f=ot;on(null),ln(null);try{for(var h,d=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var v=s["__"+n];v!=null&&(!s.disabled||r.target===s)&&v.call(s,r)}catch(m){h?d.push(m):h=m}if(r.cancelBubble||p===e||p===null)break;s=p}if(h){for(let m of d)queueMicrotask(()=>{throw m});throw h}}finally{r.__root=e,delete r.currentTarget,on(c),ln(f)}}}function Ax(r){var e=document.createElement("template");return e.innerHTML=r.replaceAll("<!>","\x3C!---->"),e.content}function Ga(r,e){var t=ot;t.nodes===null&&(t.nodes={start:r,end:e,a:null,t:null})}function pe(r,e){var t=(e&k3)!==0,n=(e&M3)!==0,i,s=!r.startsWith("<!>");return()=>{i===void 0&&(i=Ax(s?r:"<!>"+r),t||(i=Ua(i)));var a=n||nx?document.importNode(i,!0):i.cloneNode(!0);if(t){var o=Ua(a),l=a.lastChild;Ga(o,l)}else Ga(a,a);return a}}function xA(r,e,t="svg"){var n=!r.startsWith("<!>"),i=`<${t}>${n?r:"<!>"+r}</${t}>`,s;return()=>{if(!s){var a=Ax(i),o=Ua(a);s=Ua(o)}var l=s.cloneNode(!0);return Ga(l,l),l}}function wA(r,e){return xA(r,e,"svg")}function er(r=""){{var e=Xn(r+"");return Ga(e,e),e}}function Ke(){var r=document.createDocumentFragment(),e=document.createComment(""),t=Xn();return r.append(e,t),Ga(e,t),r}function le(r,e){r!==null&&r.before(e)}let xc=!0;function lu(r){xc=r}function kt(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??=r.nodeValue)&&(r.__t=t,r.nodeValue=t+"")}function SA(r,e){return TA(r,e)}const Qs=new Map;function TA(r,{target:e,anchor:t,props:n={},events:i,context:s,intro:a=!0}){tA();var o=new Set,l=f=>{for(var h=0;h<f.length;h++){var d=f[h];if(!o.has(d)){o.add(d);var p=yA(d);e.addEventListener(d,Yo,{passive:p});var v=Qs.get(d);v===void 0?(document.addEventListener(d,Yo,{passive:p}),Qs.set(d,1)):Qs.set(d,v+1)}}};l(Zc(Tx)),Vd.add(l);var u=void 0,c=lA(()=>{var f=t??e.appendChild(Xn());return Y3(f,{pending:()=>{}},h=>{if(s){He({});var d=xt;d.c=s}i&&(n.$$events=i),xc=a,u=r(h,n)||{},xc=!0,s&&Ve()}),()=>{for(var h of o){e.removeEventListener(h,Yo);var d=Qs.get(h);--d===0?(document.removeEventListener(h,Yo),Qs.delete(h)):Qs.set(h,d)}Vd.delete(l),f!==t&&f.parentNode?.removeChild(f)}});return EA.set(u,c),u}let EA=new WeakMap;class tf{anchor;#t=new Map;#a=new Map;#e=new Map;#i=new Set;#s=!0;constructor(e,t=!0){this.anchor=e,this.#s=t}#n=()=>{var e=mt;if(this.#t.has(e)){var t=this.#t.get(e),n=this.#a.get(t);if(n)ag(n),this.#i.delete(t);else{var i=this.#e.get(t);i&&(this.#a.set(t,i.effect),this.#e.delete(t),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[s,a]of this.#t){if(this.#t.delete(s),s===e)break;const o=this.#e.get(a);o&&(nr(o.effect),this.#e.delete(a))}for(const[s,a]of this.#a){if(s===t||this.#i.has(s))continue;const o=()=>{if(Array.from(this.#t.values()).includes(s)){var u=document.createDocumentFragment();mx(a,u),u.append(Xn()),this.#e.set(s,{effect:a,fragment:u})}else nr(a);this.#i.delete(s),this.#a.delete(s)};this.#s||!n?(this.#i.add(s),Es(a,o,!1)):o()}}};#r=e=>{this.#t.delete(e);const t=Array.from(this.#t.values());for(const[n,i]of this.#e)t.includes(n)||(nr(i.effect),this.#e.delete(n))};ensure(e,t){var n=mt,i=ax();if(t&&!this.#a.has(e)&&!this.#e.has(e))if(i){var s=document.createDocumentFragment(),a=Xn();s.append(a),this.#e.set(e,{effect:br(()=>t(a)),fragment:s})}else this.#a.set(e,br(()=>t(this.anchor)));if(this.#t.set(n,e),i){for(const[o,l]of this.#a)o===e?n.skipped_effects.delete(l):n.skipped_effects.add(l);for(const[o,l]of this.#e)o===e?n.skipped_effects.delete(l.effect):n.skipped_effects.add(l.effect);n.oncommit(this.#n),n.ondiscard(this.#r)}else this.#n()}}function Ze(r,e,t=!1){var n=new tf(r),i=t?Zn:0;function s(a,o){n.ensure(a,o)}ho(()=>{var a=!1;e((o,l=!0)=>{a=!0,s(l,o)}),a||s(!1,null)},i)}function Os(r,e){return e}function AA(r,e,t){for(var n=[],i=e.length,s,a=e.length,o=0;o<i;o++){let f=e[o];Es(f,()=>{if(s){if(s.pending.delete(f),s.done.add(f),s.pending.size===0){var h=r.outrogroups;Wd(Zc(s.done)),h.delete(s),h.size===0&&(r.outrogroups=null)}}else a-=1},!1)}if(a===0){var l=n.length===0&&t!==null;if(l){var u=t,c=u.parentNode;rA(c),c.append(u),r.items.clear()}Wd(e,!l)}else s={pending:new Set(e),done:new Set},(r.outrogroups??=new Set).add(s)}function Wd(r,e=!0){for(var t=0;t<r.length;t++)nr(r[t],e)}var Zm;function Is(r,e,t,n,i,s=null){var a=r,o=new Map,l=(e&Uy)!==0;if(l){var u=r;a=u.appendChild(Xn())}var c=null,f=Dt(()=>{var g=t();return Il(g)?g:g==null?[]:Zc(g)}),h,d=!0;function p(){m.fallback=c,CA(m,h,a,e,n),c!==null&&(h.length===0?c.f&pi?(c.f^=pi,$o(c,null,a)):ag(c):Es(c,()=>{c=null}))}var v=ho(()=>{h=z(f);for(var g=h.length,_=new Set,b=mt,w=ax(),S=0;S<g;S+=1){var T=h[S],E=n(T,S),O=d?null:o.get(E);O?(O.v&&La(O.v,T),O.i&&La(O.i,S),w&&b.skipped_effects.delete(O.e)):(O=PA(o,d?a:Zm??=Xn(),T,E,S,i,e,t),d||(O.e.f|=pi),o.set(E,O)),_.add(E)}if(g===0&&s&&!c&&(d?c=br(()=>s(a)):(c=br(()=>s(Zm??=Xn())),c.f|=pi)),!d)if(w){for(const[P,V]of o)_.has(P)||b.skipped_effects.add(V.e);b.oncommit(p),b.ondiscard(()=>{})}else p();z(f)}),m={effect:v,items:o,outrogroups:null,fallback:c};d=!1}function Bo(r){for(;r!==null&&!(r.f&Rn);)r=r.next;return r}function CA(r,e,t,n,i){var s=(n&S3)!==0,a=e.length,o=r.items,l=Bo(r.effect.first),u,c=null,f,h=[],d=[],p,v,m,g;if(s)for(g=0;g<a;g+=1)p=e[g],v=i(p,g),m=o.get(v).e,m.f&pi||(m.nodes?.a?.measure(),(f??=new Set).add(m));for(g=0;g<a;g+=1){if(p=e[g],v=i(p,g),m=o.get(v).e,r.outrogroups!==null)for(const V of r.outrogroups)V.pending.delete(m),V.done.delete(m);if(m.f&pi)if(m.f^=pi,m===l)$o(m,null,t);else{var _=c?c.next:l;m===r.effect.last&&(r.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),Oi(r,c,m),Oi(r,m,_),$o(m,_,t),c=m,h=[],d=[],l=Bo(c.next);continue}if(m.f&Dr&&(ag(m),s&&(m.nodes?.a?.unfix(),(f??=new Set).delete(m))),m!==l){if(u!==void 0&&u.has(m)){if(h.length<d.length){var b=d[0],w;c=b.prev;var S=h[0],T=h[h.length-1];for(w=0;w<h.length;w+=1)$o(h[w],b,t);for(w=0;w<d.length;w+=1)u.delete(d[w]);Oi(r,S.prev,T.next),Oi(r,c,S),Oi(r,T,b),l=b,c=T,g-=1,h=[],d=[]}else u.delete(m),$o(m,l,t),Oi(r,m.prev,m.next),Oi(r,m,c===null?r.effect.first:c.next),Oi(r,c,m),c=m;continue}for(h=[],d=[];l!==null&&l!==m;)(u??=new Set).add(l),d.push(l),l=Bo(l.next);if(l===null)continue}m.f&pi||h.push(m),c=m,l=Bo(m.next)}if(r.outrogroups!==null){for(const V of r.outrogroups)V.pending.size===0&&(Wd(Zc(V.done)),r.outrogroups?.delete(V));r.outrogroups.size===0&&(r.outrogroups=null)}if(l!==null||u!==void 0){var E=[];if(u!==void 0)for(m of u)m.f&Dr||E.push(m);for(;l!==null;)!(l.f&Dr)&&l!==r.fallback&&E.push(l),l=Bo(l.next);var O=E.length;if(O>0){var P=n&Uy&&a===0?t:null;if(s){for(g=0;g<O;g+=1)E[g].nodes?.a?.measure();for(g=0;g<O;g+=1)E[g].nodes?.a?.fix()}AA(r,E,P)}}s&&wn(()=>{if(f!==void 0)for(m of f)m.nodes?.a?.apply()})}function PA(r,e,t,n,i,s,a,o){var l=a&x3?a&T3?qi(t):pt(t,!1,!1):null,u=a&w3?qi(i):null;return{v:l,i:u,e:br(()=>(s(e,l??t,u??i,o),()=>{r.delete(n)}))}}function $o(r,e,t){if(r.nodes)for(var n=r.nodes.start,i=r.nodes.end,s=e&&!(e.f&pi)?e.nodes.start:t;n!==null;){var a=Ll(n);if(s.before(n),n===i)return;n=a}}function Oi(r,e,t){e===null?r.effect.first=t:e.next=t,t===null?r.effect.last=e:t.prev=e}function fr(r,e,t,n,i){var s=e.$$slots?.[t],a=!1;s===!0&&(s=e[t==="default"?"children":t],a=!0),s===void 0||s(r,a?()=>n:n)}function Yi(r,e,...t){var n=new tf(r);ho(()=>{const i=e()??null;n.ensure(i,i&&(s=>i(s,...t)))},Zn)}function kr(r,e,t){var n=new tf(r);ho(()=>{var i=e()??null;n.ensure(i,i&&(s=>t(s,i)))},Zn)}const RA=()=>performance.now(),hi={tick:r=>requestAnimationFrame(r),now:()=>RA(),tasks:new Set};function Cx(){const r=hi.now();hi.tasks.forEach(e=>{e.c(r)||(hi.tasks.delete(e),e.f())}),hi.tasks.size!==0&&hi.tick(Cx)}function kA(r){let e;return hi.tasks.size===0&&hi.tick(Cx),{promise:new Promise(t=>{hi.tasks.add(e={c:r,f:t})}),abort(){hi.tasks.delete(e)}}}function wc(r,e){Ws(()=>{r.dispatchEvent(new CustomEvent(e))})}function MA(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Jm(r){const e={},t=r.split(";");for(const n of t){const[i,s]=n.split(":");if(!i||s===void 0)break;const a=MA(i.trim());e[a]=s.trim()}return e}const OA=r=>r;function _l(r,e,t,n){var i=(r&R3)!==0,s="both",a,o=e.inert,l=e.style.overflow,u,c;function f(){return Ws(()=>a??=t()(e,n?.()??{},{direction:s}))}var h={is_global:i,in(){e.inert=o,u=qd(e,f(),c,1,()=>{wc(e,"introend"),u?.abort(),u=a=void 0,e.style.overflow=l})},out(m){e.inert=!0,c=qd(e,f(),u,0,()=>{wc(e,"outroend"),m?.()})},stop:()=>{u?.abort(),c?.abort()}},d=ot;if((d.nodes.t??=[]).push(h),xc){var p=i;if(!p){for(var v=d.parent;v&&v.f&Zn;)for(;(v=v.parent)&&!(v.f&Qn););p=!v||(v.f&Jc)!==0}p&&Ms(()=>{R(()=>h.in())})}}function qd(r,e,t,n,i){var s=n===1;if(ha(e)){var a,o=!1;return wn(()=>{if(!o){var m=e({direction:s?"in":"out"});a=qd(r,m,t,n,i)}}),{abort:()=>{o=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(t?.deactivate(),!e?.duration&&!e?.delay)return wc(r,s?"introstart":"outrostart"),i(),{abort:yr,deactivate:yr,reset:yr,t:()=>n};const{delay:l=0,css:u,tick:c,easing:f=OA}=e;var h=[];if(s&&t===void 0&&(c&&c(0,1),u)){var d=Jm(u(0,1));h.push(d,d)}var p=()=>1-n,v=r.animate(h,{duration:l,fill:"forwards"});return v.onfinish=()=>{v.cancel(),wc(r,s?"introstart":"outrostart");var m=t?.t()??1-n;t?.abort();var g=n-m,_=e.duration*Math.abs(g),b=[];if(_>0){var w=!1;if(u)for(var S=Math.ceil(_/16.666666666666668),T=0;T<=S;T+=1){var E=m+g*f(T/S),O=Jm(u(E,1-E));b.push(O),w||=O.overflow==="hidden"}w&&(r.style.overflow="hidden"),p=()=>{var P=v.currentTime;return m+g*f(P/_)},c&&kA(()=>{if(v.playState!=="running")return!1;var P=p();return c(P,1-P),!0})}v=r.animate(b,{duration:_,fill:"forwards"}),v.onfinish=()=>{p=()=>n,c?.(n,1-n),i()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=yr)},deactivate:()=>{i=yr},reset:()=>{n===0&&c?.(1,0)},t:()=>p()}}function IA(r,e,t,n,i,s){var a=null,o=r,l=new tf(o,!1);ho(()=>{const u=e()||null;var c=I3;if(u===null){l.ensure(null,null),lu(!0);return}return l.ensure(u,f=>{if(u){if(a=document.createElementNS(c,u),Ga(a,a),n){var h=a.appendChild(Xn());n(a,h)}ot.nodes.end=a,f.before(a)}}),lu(!0),()=>{u&&lu(!1)}},Zn),qs(()=>{lu(!0)})}function ur(r,e,t){Ms(()=>{var n=R(()=>e(r,t?.())||{});if(n?.destroy)return()=>n.destroy()})}function BA(r,e){var t=void 0,n;cx(()=>{t!==(t=e())&&(n&&(nr(n),n=null),t&&(n=br(()=>{Ms(()=>t(r))})))})}function Px(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=Px(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function FA(){for(var r,e,t=0,n="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=Px(r))&&(n&&(n+=" "),n+=e);return n}function Rx(r){return typeof r=="object"?FA(r):r??""}const Qm=[...` 	
\r\fÂ \v\uFEFF`];function DA(r,e,t){var n=r==null?"":""+r;if(e&&(n=n?n+" "+e:e),t){for(var i in t)if(t[i])n=n?n+" "+i:i;else if(n.length)for(var s=i.length,a=0;(a=n.indexOf(i,a))>=0;){var o=a+s;(a===0||Qm.includes(n[a-1]))&&(o===n.length||Qm.includes(n[o]))?n=(a===0?"":n.substring(0,a))+n.substring(o+1):a=o}}return n===""?null:n}function ev(r,e=!1){var t=e?" !important;":";",n="";for(var i in r){var s=r[i];s!=null&&s!==""&&(n+=" "+i+": "+s+t)}return n}function Af(r){return r[0]!=="-"||r[1]!=="-"?r.toLowerCase():r}function LA(r,e){if(e){var t="",n,i;if(Array.isArray(e)?(n=e[0],i=e[1]):n=e,r){r=String(r).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var s=!1,a=0,o=!1,l=[];n&&l.push(...Object.keys(n).map(Af)),i&&l.push(...Object.keys(i).map(Af));var u=0,c=-1;const v=r.length;for(var f=0;f<v;f++){var h=r[f];if(o?h==="/"&&r[f-1]==="*"&&(o=!1):s?s===h&&(s=!1):h==="/"&&r[f+1]==="*"?o=!0:h==='"'||h==="'"?s=h:h==="("?a++:h===")"&&a--,!o&&s===!1&&a===0){if(h===":"&&c===-1)c=f;else if(h===";"||f===v-1){if(c!==-1){var d=Af(r.substring(u,c).trim());if(!l.includes(d)){h!==";"&&f++;var p=r.substring(u,f).trim();t+=" "+p+";"}}u=f+1,c=-1}}}}return n&&(t+=ev(n)),i&&(t+=ev(i,!0)),t=t.trim(),t===""?null:t}return r==null?null:String(r)}function ss(r,e,t,n,i,s){var a=r.__className;if(a!==t||a===void 0){var o=DA(t,n,s);o==null?r.removeAttribute("class"):e?r.className=o:r.setAttribute("class",o),r.__className=t}else if(s&&i!==s)for(var l in s){var u=!!s[l];(i==null||u!==!!i[l])&&r.classList.toggle(l,u)}return s}function Cf(r,e={},t,n){for(var i in t){var s=t[i];e[i]!==s&&(t[i]==null?r.style.removeProperty(i):r.style.setProperty(i,s,n))}}function cr(r,e,t,n){var i=r.__style;if(i!==e){var s=LA(e,n);s==null?r.removeAttribute("style"):r.style.cssText=s,r.__style=e}else n&&(Array.isArray(n)?(Cf(r,t?.[0],n[0]),Cf(r,t?.[1],n[1],"important")):Cf(r,t,n));return n}function Xd(r,e,t=!1){if(r.multiple){if(e==null)return;if(!Il(e))return F3();for(var n of r.options)n.selected=e.includes(tv(n));return}for(n of r.options){var i=tv(n);if(eA(i,e)){n.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function UA(r){var e=new MutationObserver(()=>{Xd(r,r.__value)});e.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),qs(()=>{e.disconnect()})}function tv(r){return"__value"in r?r.__value:r.value}const Fo=Symbol("class"),Do=Symbol("style"),kx=Symbol("is custom element"),Mx=Symbol("is html");function mn(r,e){var t=og(r);t.value===(t.value=e??void 0)||r.value===e&&(e!==0||r.nodeName!=="PROGRESS")||(r.value=e??"")}function NA(r,e){e?r.hasAttribute("selected")||r.setAttribute("selected",""):r.removeAttribute("selected")}function Qe(r,e,t,n){var i=og(r);i[e]!==(i[e]=t)&&(e==="loading"&&(r[c3]=t),t==null?r.removeAttribute(e):typeof t!="string"&&Ox(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function GA(r,e,t,n,i=!1,s=!1){var a=og(r),o=a[kx],l=!a[Mx],u=e||{},c=r.tagName==="OPTION";for(var f in e)f in t||(t[f]=null);t.class?t.class=Rx(t.class):(n||t[Fo])&&(t.class=null),t[Do]&&(t.style??=null);var h=Ox(r);for(const b in t){let w=t[b];if(c&&b==="value"&&w==null){r.value=r.__value="",u[b]=w;continue}if(b==="class"){var d=r.namespaceURI==="http://www.w3.org/1999/xhtml";ss(r,d,w,n,e?.[Fo],t[Fo]),u[b]=w,u[Fo]=t[Fo];continue}if(b==="style"){cr(r,w,e?.[Do],t[Do]),u[b]=w,u[Do]=t[Do];continue}var p=u[b];if(!(w===p&&!(w===void 0&&r.hasAttribute(b)))){u[b]=w;var v=b[0]+b[1];if(v!=="$$")if(v==="on"){const S={},T="$$"+b;let E=b.slice(2);var m=mA(E);if(pA(E)&&(E=E.slice(0,-7),S.capture=!0),!m&&p){if(w!=null)continue;r.removeEventListener(E,u[T],S),u[T]=null}if(w!=null)if(m)r[`__${E}`]=w,is([E]);else{let O=function(P){u[b].call(this,P)};u[T]=Ex(E,r,O,S)}else m&&(r[`__${E}`]=void 0)}else if(b==="style")Qe(r,b,w);else if(b==="autofocus")nA(r,!!w);else if(!o&&(b==="__value"||b==="value"&&w!=null))r.value=r.__value=w;else if(b==="selected"&&c)NA(r,w);else{var g=b;l||(g=_A(g));var _=g==="defaultValue"||g==="defaultChecked";if(w==null&&!o&&!_)if(a[b]=null,g==="value"||g==="checked"){let S=r;const T=e===void 0;if(g==="value"){let E=S.defaultValue;S.removeAttribute(g),S.defaultValue=E,S.value=S.__value=T?E:null}else{let E=S.defaultChecked;S.removeAttribute(g),S.defaultChecked=E,S.checked=T?E:!1}}else r.removeAttribute(b);else _||h.includes(g)&&(o||typeof w!="string")?(r[g]=w,g in a&&(a[g]=Xt)):typeof w!="function"&&Qe(r,g,w)}}}return u}function Nt(r,e,t=[],n=[],i=[],s,a=!1,o=!1){Jy(i,t,n,l=>{var u=void 0,c={},f=r.nodeName==="SELECT",h=!1;if(cx(()=>{var p=e(...l.map(z)),v=GA(r,u,p,s,a,o);h&&f&&"value"in p&&Xd(r,p.value);for(let g of Object.getOwnPropertySymbols(c))p[g]||nr(c[g]);for(let g of Object.getOwnPropertySymbols(p)){var m=p[g];g.description===B3&&(!u||m!==u[g])&&(c[g]&&nr(c[g]),c[g]=br(()=>BA(r,()=>m))),v[g]=m}u=v}),f){var d=r;Ms(()=>{Xd(d,u.value,!0),UA(d)})}h=!0})}function og(r){return r.__attributes??={[kx]:r.nodeName.includes("-"),[Mx]:r.namespaceURI===O3}}var rv=new Map;function Ox(r){var e=r.getAttribute("is")||r.nodeName,t=rv.get(e);if(t)return t;rv.set(e,t=[]);for(var n,i=r,s=Element.prototype;s!==i;){n=Iy(i);for(var a in n)n[a].set&&t.push(a);i=Qp(i)}return t}function go(r,e,t=e){var n=new WeakSet;ox(r,"input",async i=>{var s=i?r.defaultValue:r.value;if(s=Pf(r)?Rf(s):s,t(s),mt!==null&&n.add(mt),await Yn(),s!==(s=e())){var a=r.selectionStart,o=r.selectionEnd,l=r.value.length;if(r.value=s??"",o!==null){var u=r.value.length;a===o&&o===l&&u>l?(r.selectionStart=u,r.selectionEnd=u):(r.selectionStart=a,r.selectionEnd=Math.min(o,u))}}}),R(e)==null&&r.value&&(t(Pf(r)?Rf(r.value):r.value),mt!==null&&n.add(mt)),fo(()=>{var i=e();if(r===document.activeElement){var s=Nd??mt;if(n.has(s))return}Pf(r)&&i===Rf(r.value)||r.type==="date"&&!i&&!r.value||i!==r.value&&(r.value=i??"")})}function Ix(r,e,t=e){ox(r,"change",n=>{var i=n?r.defaultChecked:r.checked;t(i)}),R(e)==null&&t(r.checked),fo(()=>{var n=e();r.checked=!!n})}function Pf(r){var e=r.type;return e==="number"||e==="range"}function Rf(r){return r===""?null:+r}function zA(r,e,t){var n=_i(r,e);n&&n.set&&(r[e]=t,qs(()=>{r[e]=null}))}function nv(r,e){return r===e||r?.[qn]===e}function as(r={},e,t,n){return Ms(()=>{var i,s;return fo(()=>{i=s,s=[],R(()=>{r!==t(...s)&&(e(r,...s),i&&nv(t(...i),r)&&e(null,...i))})}),()=>{wn(()=>{s&&nv(t(...s),r)&&e(null,...s)})}}),r}function iv(r,e){sA(window,["resize"],()=>Ws(()=>e(window[r])))}function jA(r){return function(...e){var t=e[0];t.target===this&&r?.apply(this,e)}}function xn(r){return function(...e){var t=e[0];return t.preventDefault(),r?.apply(this,e)}}function Ar(r=!1){const e=xt,t=e.l.u;if(!t)return;let n=()=>Le(e.s);if(r){let i=0,s={};const a=Dl(()=>{let o=!1;const l=e.s;for(const u in l)l[u]!==s[u]&&(s[u]=l[u],o=!0);return o&&i++,i});n=()=>z(a)}t.b.length&&oA(()=>{sv(e,n),_c(t.b)}),En(()=>{const i=R(()=>t.m.map(l3));return()=>{for(const s of i)typeof s=="function"&&s()}}),t.a.length&&En(()=>{sv(e,n),_c(t.a)})}function sv(r,e){if(r.l.s)for(const t of r.l.s)z(t);e()}function Yd(r,e){var t=r.$$events?.[e.type],n=Il(t)?t.slice():t==null?[]:[t];for(var i of n)i.call(this,e)}function lg(r,e,t){if(r==null)return e(void 0),t&&t(void 0),yr;const n=R(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}const ea=[];function Br(r,e){return{subscribe:Xe(r,e).subscribe}}function Xe(r,e=yr){let t=null;const n=new Set;function i(o){if(zy(r,o)&&(r=o,t)){const l=!ea.length;for(const u of n)u[1](),ea.push(u,r);if(l){for(let u=0;u<ea.length;u+=2)ea[u][0](ea[u+1]);ea.length=0}}}function s(o){i(o(r))}function a(o,l=yr){const u=[o,l];return n.add(u),n.size===1&&(t=e(i,s)||yr),o(r),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:i,update:s,subscribe:a}}function tr(r,e,t){const n=!Array.isArray(r),i=n?[r]:r;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Br(t,(a,o)=>{let l=!1;const u=[];let c=0,f=yr;const h=()=>{if(c)return;f();const p=e(n?u[0]:u,a,o);s?a(p):f=typeof p=="function"?p:yr},d=i.map((p,v)=>lg(p,m=>{u[v]=m,c&=~(1<<v),l&&h()},()=>{c|=1<<v}));return l=!0,h(),function(){_c(d),f(),l=!1}})}function Yu(r){return{subscribe:r.subscribe.bind(r)}}function St(r){let e;return lg(r,t=>e=t)(),e}let uu=!1,$d=Symbol();function Ie(r,e,t){const n=t[e]??={store:null,source:pt(void 0),unsubscribe:yr};if(n.store!==r&&!($d in t))if(n.unsubscribe(),n.store=r??null,r==null)n.source.v=void 0,n.unsubscribe=yr;else{var i=!0;n.unsubscribe=lg(r,s=>{i?n.source.v=s:ve(n.source,s)}),i=!1}return r&&$d in t?St(r):z(n.source)}function gi(r,e){return r.set(e),e}function Mt(){const r={};function e(){qs(()=>{for(var t in r)r[t].unsubscribe();Oy(r,$d,{enumerable:!1,value:!0})})}return[r,e]}function ce(r,e,t){return r.set(t),e}function HA(r){var e=uu;try{return uu=!1,[r(),uu]}finally{uu=e}}const VA={get(r,e){if(!r.exclude.includes(e))return r.props[e]},set(r,e){return!1},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function rf(r,e,t){return new Proxy({props:r,exclude:e},VA)}const WA={get(r,e){if(!r.exclude.includes(e))return z(r.version),e in r.special?r.special[e]():r.props[e]},set(r,e,t){if(!(e in r.special)){var n=ot;try{ln(r.parent_effect),r.special[e]=ge({get[e](){return r.props[e]}},e,Ny)}finally{ln(n)}}return r.special[e](t),Wm(r.version),!0},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},deleteProperty(r,e){return r.exclude.includes(e)||(r.exclude.push(e),Wm(r.version)),!0},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function Sr(r,e){return new Proxy({props:r,exclude:e,special:{},version:qi(0),parent_effect:ot},WA)}const qA={get(r,e){let t=r.props.length;for(;t--;){let n=r.props[t];if(ha(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n)return n[e]}},set(r,e,t){let n=r.props.length;for(;n--;){let i=r.props[n];ha(i)&&(i=i());const s=_i(i,e);if(s&&s.set)return s.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let n=r.props[t];if(ha(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n){const i=_i(n,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(r,e){if(e===qn||e===Ly)return!1;for(let t of r.props)if(ha(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props)if(ha(t)&&(t=t()),!!t){for(const n in t)e.includes(n)||e.push(n);for(const n of Object.getOwnPropertySymbols(t))e.includes(n)||e.push(n)}return e}};function Mn(...r){return new Proxy({props:r},qA)}function ge(r,e,t,n){var i=!co||(t&A3)!==0,s=(t&C3)!==0,a=(t&P3)!==0,o=n,l=!0,u=()=>(l&&(l=!1,o=a?R(n):n),o),c;if(s){var f=qn in r||Ly in r;c=_i(r,e)?.set??(f&&e in r?b=>r[e]=b:void 0)}var h,d=!1;s?[h,d]=HA(()=>r[e]):h=r[e],h===void 0&&n!==void 0&&(h=u(),c&&(i&&m3(),c(h)));var p;if(i?p=()=>{var b=r[e];return b===void 0?u():(l=!0,b)}:p=()=>{var b=r[e];return b!==void 0&&(o=void 0),b===void 0?o:b},i&&!(t&Ny))return p;if(c){var v=r.$$legacy;return function(b,w){return arguments.length>0?((!i||!w||v||d)&&c(w?p():b),b):p()}}var m=!1,g=(t&E3?Dl:Dt)(()=>(m=!1,p()));s&&z(g);var _=ot;return function(b,w){if(arguments.length>0){const S=w?z(g):i&&s?Ir(b):b;return ve(g,S),m=!0,o!==void 0&&(o=S),b}return Xi&&m||_.f&bi?g.v:z(g)}}function Bx(r){xt===null&&Qc(),co&&xt.l!==null?$A(xt).m.push(r):En(()=>{const e=R(r);if(typeof e=="function")return e})}function XA(r){xt===null&&Qc(),Bx(()=>()=>R(r))}function YA(r,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:n})}function mo(){const r=xt;return r===null&&Qc(),(e,t,n)=>{const i=r.s.$$events?.[e];if(i){const s=Il(i)?i.slice():[i],a=YA(e,t,n);for(const o of s)o.call(r.x,a);return!a.defaultPrevented}return!0}}function $A(r){var e=r.l;return e.u??={a:[],b:[],m:[]}}const KA="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(KA);U3();var av=Object.prototype.hasOwnProperty;function ov(r,e,t){for(t of r.keys())if(_n(t,e))return t}function _n(r,e){var t,n,i;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((n=r.length)===e.length)for(;n--&&_n(r[n],e[n]););return n===-1}if(t===Set){if(r.size!==e.size)return!1;for(n of r)if(i=n,i&&typeof i=="object"&&(i=ov(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(r.size!==e.size)return!1;for(n of r)if(i=n[0],i&&typeof i=="object"&&(i=ov(e,i),!i)||!_n(n[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(t===DataView){if((n=r.byteLength)===e.byteLength)for(;n--&&r.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(r)){if((n=r.byteLength)===e.byteLength)for(;n--&&r[n]===e[n];);return n===-1}if(!t||typeof r=="object"){n=0;for(t in r)if(av.call(r,t)&&++n&&!av.call(e,t)||!(t in e)||!_n(r[t],e[t]))return!1;return Object.keys(e).length===n}}return r!==r&&e!==e}function ZA(r,e,t,n=!0){const i=e-t;return i<=0?n?r[r.length-1]:r[0]:r[i]}function JA(r,e,t,n=!0){const i=e+t;return i>r.length-1?n?r[0]:r[r.length-1]:r[i]}function QA(r,e,t=!0){return e===r.length-1?t?r[0]:r[e]:r[e+1]}function eC(r,e,t=!0){return e<=0?t?r[r.length-1]:r[0]:r[e-1]}function kf(r){return r[r.length-1]}function tC(r,e){return r.map((t,n)=>r[(e+n)%r.length])}function rC(r,e,t=_n){const n=e.findIndex(i=>t(i,r));return n!==-1?e.splice(n,1):e.push(r),e}function Ci(r){return Object.keys(r).reduce((e,t)=>r[t]===void 0?e:e+`${t}:${r[t]};`,"")}function ar(r){return r?!0:void 0}Ci({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function nC(r){if(r!==null)return""}function Ys(r,...e){const t={};for(const n of Object.keys(r))e.includes(n)||(t[n]=r[n]);return t}function iC(r,e,t){return Object.fromEntries(Object.entries(r).filter(([n,i])=>!_n(i,e)))}function Ko(r){const e={};for(const t in r){const n=r[t];n!==void 0&&(e[t]=n)}return e}function lv(r){function e(t){return t(r),()=>{}}return{subscribe:e}}function qr(r){if(!$i)return null;const e=document.querySelector(`[data-melt-id="${r}"]`);return bt(e)?e:null}const cu=r=>new Proxy(r,{get(e,t,n){return Reflect.get(e,t,n)},ownKeys(e){return Reflect.ownKeys(e).filter(t=>t!=="action")}}),uv=r=>typeof r=="function";It("empty");function It(r,e){const{stores:t,action:n,returned:i}=e??{},s=(()=>{if(t&&i)return tr(t,o=>{const l=i(o);if(uv(l)){const u=(...c)=>cu(Ko({...l(...c),[`data-melt-${r}`]:"",action:n??gt}));return u.action=n??gt,u}return cu(Ko({...l,[`data-melt-${r}`]:"",action:n??gt}))});{const l=i?.();if(uv(l)){const u=(...c)=>cu(Ko({...l(...c),[`data-melt-${r}`]:"",action:n??gt}));return u.action=n??gt,lv(u)}return lv(cu(Ko({...l,[`data-melt-${r}`]:"",action:n??gt})))}})(),a=n??(()=>{});return a.subscribe=s.subscribe,a}function vo(r){const e=s=>s?`${r}-${s}`:r,t=s=>`data-melt-${r}${s?`-${s}`:""}`,n=s=>`[data-melt-${r}${s?`-${s}`:""}]`;return{name:e,attribute:t,selector:n,getEl:s=>document.querySelector(n(s))}}const $i=typeof document<"u",sC=r=>typeof r=="function";function aC(r){return r instanceof Document}function _o(r){return r instanceof Element}function bt(r){return r instanceof HTMLElement}function Fx(r){return r instanceof HTMLInputElement}function oC(r){return r instanceof HTMLLabelElement}function cv(r){return r instanceof HTMLButtonElement}function fv(r){const e=r.getAttribute("aria-disabled"),t=r.getAttribute("disabled"),n=r.hasAttribute("data-disabled");return!!(e==="true"||t!==null||n)}function hv(r){return r.pointerType==="touch"}function ug(r){return r!==null&&typeof r=="object"}function cg(r){return ug(r)&&"subscribe"in r}function Zt(...r){return(...e)=>{for(const t of r)typeof t=="function"&&t(...e)}}function gt(){}function Bs(r,e,t,n){const i=Array.isArray(e)?e:[e];return i.forEach(s=>r.addEventListener(s,t,n)),()=>{i.forEach(s=>r.removeEventListener(s,t,n))}}function dt(r,e,t,n){const i=Array.isArray(e)?e:[e];if(typeof t=="function"){const s=uC(a=>t(a));return i.forEach(a=>r.addEventListener(a,s,n)),()=>{i.forEach(a=>r.removeEventListener(a,s,n))}}return()=>void 0}function lC(r){const e=r.currentTarget;if(!bt(e))return null;const t=new CustomEvent(`m-${r.type}`,{detail:{originalEvent:r},cancelable:!0});return e.dispatchEvent(t),t}function uC(r){return e=>{if(!lC(e)?.defaultPrevented)return r(e)}}function cC(r){r.setAttribute("data-highlighted","")}function fC(r){r.removeAttribute("data-highlighted")}const hC=r=>{try{XA(r)}catch{return r}};function Mf(r){return Array.from(r.querySelectorAll('[role="option"]:not([data-disabled])')).filter(e=>bt(e))}function dC(r){return window.getComputedStyle(r).getPropertyValue("direction")}function Tr(r){return{...r,get:()=>St(r)}}Tr.writable=function(r){const e=Xe(r);let t=r;return{subscribe:e.subscribe,set(n){e.set(n),t=n},update(n){const i=n(t);e.set(i),t=i},get(){return t}}};Tr.derived=function(r,e){const t=new Map,n=()=>{const s=Array.isArray(r)?r.map(a=>a.get()):r.get();return e(s)};return{get:n,subscribe:s=>{const a=[];return(Array.isArray(r)?r:[r]).forEach(l=>{a.push(l.subscribe(()=>{s(n())}))}),s(n()),t.set(s,a),()=>{const l=t.get(s);if(l)for(const u of l)u();t.delete(s)}}}};const za=(r,e)=>{const t=Tr(r),n=(s,a)=>{t.update(o=>{const l=s(o);let u=l;return e&&(u=e({curr:o,next:l})),a?.(u),u})};return{...t,update:n,set:s=>{n(()=>s)}}};function pC(r){return new Promise(e=>setTimeout(e,r))}let gC="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",mC=(r=21)=>{let e="",t=r|0;for(;t--;)e+=gC[Math.random()*64|0];return e};function _a(){return mC(10)}function fg(r){return r.reduce((e,t)=>(e[t]=_a(),e),{})}const Ae={ALT:"Alt",ARROW_DOWN:"ArrowDown",ARROW_LEFT:"ArrowLeft",ARROW_RIGHT:"ArrowRight",ARROW_UP:"ArrowUp",BACKSPACE:"Backspace",CAPS_LOCK:"CapsLock",CONTROL:"Control",DELETE:"Delete",END:"End",ENTER:"Enter",ESCAPE:"Escape",F1:"F1",F10:"F10",F11:"F11",F12:"F12",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",HOME:"Home",META:"Meta",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",SHIFT:"Shift",SPACE:" ",TAB:"Tab"},vC=[Ae.ARROW_DOWN,Ae.PAGE_UP,Ae.HOME],_C=[Ae.ARROW_UP,Ae.PAGE_DOWN,Ae.END],bC=[...vC,..._C];function $u(r,e=500){let t;const n=(...i)=>{clearTimeout(t),t=setTimeout(()=>r(...i),e)};return n.destroy=()=>clearTimeout(t),n}const Dx=()=>typeof window<"u";function yC(){return navigator.userAgentData?.platform??navigator.platform}const Lx=r=>Dx()&&r.test(yC().toLowerCase()),xC=()=>Dx()&&!!navigator.maxTouchPoints,wC=()=>Lx(/^mac/)&&!xC(),SC=()=>Lx(/mac|iphone|ipad|ipod/i),TC=()=>SC()&&!wC();function EC(r){const e=r.slice();return e.sort(CC),AC(e)}function AC(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const i=r[n];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const i=r[n];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}return t.pop(),e.length==1&&t.length==1&&e[0].x==t[0].x&&e[0].y==t[0].y?e:e.concat(t)}function CC(r,e){return r.x<e.x?-1:r.x>e.x?1:r.y<e.y?-1:r.y>e.y?1:0}function PC(r){const e=r.getBoundingClientRect();return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom},{x:e.left,y:e.bottom}]}function RC(r){const e=r.flatMap(t=>PC(t));return EC(e)}function kC(r,e){let t=!1;for(let n=0,i=e.length-1;n<e.length;i=n++){const s=e[n].x,a=e[n].y,o=e[i].x,l=e[i].y;a>r.y!=l>r.y&&r.x<(o-s)*(r.y-a)/(l-a)+s&&(t=!t)}return t}const Of="data-melt-scroll-lock";function dv(r,e){if(!r)return;const t=r.style.cssText;return Object.assign(r.style,e),()=>{r.style.cssText=t}}function MC(r,e,t){if(!r)return;const n=r.style.getPropertyValue(e);return r.style.setProperty(e,t),()=>{n?r.style.setProperty(e,n):r.style.removeProperty(e)}}function OC(r){const e=r.getBoundingClientRect().left;return Math.round(e)+r.scrollLeft?"paddingLeft":"paddingRight"}function IC(r){const e=document,t=e.defaultView??window,{documentElement:n,body:i}=e;if(i.hasAttribute(Of))return gt;i.setAttribute(Of,"");const a=t.innerWidth-n.clientWidth,o=()=>MC(n,"--scrollbar-width",`${a}px`),l=OC(n),u=t.getComputedStyle(i)[l],c=()=>dv(i,{overflow:"hidden",[l]:`calc(${u} + ${a}px)`}),f=()=>{const{scrollX:d,scrollY:p,visualViewport:v}=t,m=v?.offsetLeft??0,g=v?.offsetTop??0,_=dv(i,{position:"fixed",overflow:"hidden",top:`${-(p-Math.floor(g))}px`,left:`${-(d-Math.floor(m))}px`,right:"0",[l]:`calc(${u} + ${a}px)`});return()=>{_?.(),t.scrollTo(d,p)}},h=[o(),TC()?f():c()];return()=>{h.forEach(d=>d?.()),i.removeAttribute(Of)}}function BC(r){const{open:e,forceVisible:t,activeTrigger:n}=r;return tr([e,t,n],([i,s,a])=>(i||s)&&a!==null)}function Zr(r,e,t={}){const{skipFirstRun:n}=t;let i=!0,s;const a=tr(r,l=>{s?.(),i&&n?i=!1:s=e(l)}).subscribe(gt),o=()=>{a(),s?.()};return hC(o),o}function Fs(r){const e={};return Object.keys(r).forEach(t=>{const n=t,i=r[n];e[n]=Tr(Xe(i))}),e}function fs(r){$i&&pC(1).then(()=>{const e=document.activeElement;!bt(e)||e===r||(e.tabIndex=-1,r&&(r.tabIndex=0,r.focus()))})}const FC=new Set(["Shift","Control","Alt","Meta","CapsLock","NumLock"]),DC={onMatch:fs,getCurrentItem:()=>document.activeElement};function LC(r={}){const e={...DC,...r},t=Tr(Xe([])),n=$u(()=>{t.update(()=>[])});return{typed:t,resetTyped:n,handleTypeaheadSearch:(s,a)=>{if(FC.has(s))return;const o=e.getCurrentItem(),l=St(t);if(!Array.isArray(l))return;l.push(s.toLowerCase()),t.set(l);const u=a.filter(m=>!(m.getAttribute("disabled")==="true"||m.getAttribute("aria-disabled")==="true"||m.hasAttribute("data-disabled"))),f=l.length>1&&l.every(m=>m===l[0])?l[0]:l.join(""),h=bt(o)?u.indexOf(o):-1;let d=tC(u,Math.max(h,0));f.length===1&&(d=d.filter(m=>m!==o));const v=d.find(m=>m?.innerText&&m.innerText.toLowerCase().startsWith(f.toLowerCase()));bt(v)&&v!==o&&e.onMatch(v),n()}}}function UC(r){let e=r.parentElement;for(;bt(e)&&!e.hasAttribute("data-portal");)e=e.parentElement;return e||"body"}function Ux(r,e){return e!==void 0?e:UC(r)==="body"?document.body:null}function hg(r,e){return r===e||r.contains(e)}function Nx(r){return r?.ownerDocument??document}function NC(r){return e=>{const t=e.target,n=qr(r);if(!n||!_o(t))return!1;const i=n.id;return!!(oC(t)&&i===t.htmlFor||t.closest(`label[for="${i}"]`))}}function GC(r,e){return e?kC({x:r.clientX,y:r.clientY},e):!1}function zC(r){const e={};return Object.keys(r).forEach(t=>{const n=t,i=r[n];cg(i)?e[n]=Tr(i):e[n]=Tr(Br(i))}),e}const jC={prefix:"",disabled:Br(!1),required:Br(!1),name:Br(void 0),type:Br(void 0),checked:void 0};function HC(r){const e={...jC,...Ko(r)},{name:t}=vo(e.prefix),{value:n,name:i,disabled:s,required:a,type:o,checked:l}=zC(Ys(e,"prefix")),u=i,c=Tr.derived([l,o],([h,d])=>{if(d==="checkbox")return h==="indeterminate"?!1:h});return It(t("hidden-input"),{stores:[n,u,s,a,o,c],returned:([h,d,p,v,m,g])=>({name:d,value:h?.toString(),"aria-hidden":"true",hidden:!0,disabled:p,required:v,tabIndex:-1,type:m,checked:g,style:Ci({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"})}),action:h=>({destroy:Zt(n.subscribe(p=>{o.get()!=="checkbox"&&(h.value=p,h.dispatchEvent(new Event("change",{bubbles:!0})))}),c.subscribe(()=>{o.get()==="checkbox"&&h.dispatchEvent(new Event("change",{bubbles:!0}))}))})})}const VC={defaultOpen:!1,disabled:!1,forceVisible:!1},{name:If}=vo("collapsible");function WC(r){const e={...VC,...r},t=Fs(Ys(e,"open","defaultOpen","onOpenChange")),{disabled:n,forceVisible:i}=t,s=e.open??Xe(e.defaultOpen),a=za(s,e?.onOpenChange),o=It(If(),{stores:[a,n],returned:([f,h])=>({"data-state":f?"open":"closed","data-disabled":ar(h)})}),l=It(If("trigger"),{stores:[a,n],returned:([f,h])=>({"data-state":f?"open":"closed","data-disabled":ar(h),disabled:ar(h)}),action:f=>({destroy:dt(f,"click",()=>{f.dataset.disabled===void 0&&a.update(p=>!p)})})}),u=tr([a,i],([f,h])=>f||h),c=It(If("content"),{stores:[u,a,n],returned:([f,h,d])=>({"data-state":h?"open":"closed","data-disabled":ar(d),hidden:f?void 0:!0,style:f?void 0:Ci({display:"none"})})});return{elements:{root:o,trigger:l,content:c},states:{open:a},options:t}}const Ku=new Map,Gx=(r,e={})=>{let t=gt;function n(i={}){t();const s={behaviorType:"close",...i},a=cg(s.behaviorType)?s.behaviorType:Tr(Br(s.behaviorType));Ku.set(r,a),t=Zt(Bs(document,"keydown",l=>{if(l.key!==Ae.ESCAPE||!qC(r))return;const u=l.target;bt(u)&&(l.preventDefault(),!XC(l,s.ignore)&&YC(a.get())&&s.handler?.(l))},{passive:!1}),Zr(a,l=>{l==="close"||l==="defer-otherwise-close"&&[...Ku.keys()][0]===r?r.dataset.escapee="":delete r.dataset.escapee}),a.destroy||gt)}return n(e),{update:n,destroy(){Ku.delete(r),delete r.dataset.escapee,t()}}},qC=r=>{const e=[...Ku],t=e.findLast(([i,s])=>{const a=s.get();return a==="close"||a==="ignore"});if(t)return t[0]===r;const[n]=e[0];return n===r},XC=(r,e)=>e?!!(sC(e)&&e(r)||Array.isArray(e)&&e.some(t=>r.target===t)):!1,YC=r=>r==="close"||r==="defer-otherwise-close",Ki=Math.min,Mr=Math.max,Sc=Math.round,fu=Math.floor,$n=r=>({x:r,y:r}),$C={left:"right",right:"left",bottom:"top",top:"bottom"},KC={start:"end",end:"start"};function Kd(r,e,t){return Mr(r,Ki(e,t))}function bo(r,e){return typeof r=="function"?r(e):r}function Zi(r){return r.split("-")[0]}function yo(r){return r.split("-")[1]}function zx(r){return r==="x"?"y":"x"}function dg(r){return r==="y"?"height":"width"}const ZC=new Set(["top","bottom"]);function mi(r){return ZC.has(Zi(r))?"y":"x"}function pg(r){return zx(mi(r))}function JC(r,e,t){t===void 0&&(t=!1);const n=yo(r),i=pg(r),s=dg(i);let a=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=Tc(a)),[a,Tc(a)]}function QC(r){const e=Tc(r);return[Zd(r),e,Zd(e)]}function Zd(r){return r.replace(/start|end/g,e=>KC[e])}const pv=["left","right"],gv=["right","left"],eP=["top","bottom"],tP=["bottom","top"];function rP(r,e,t){switch(r){case"top":case"bottom":return t?e?gv:pv:e?pv:gv;case"left":case"right":return e?eP:tP;default:return[]}}function nP(r,e,t,n){const i=yo(r);let s=rP(Zi(r),t==="start",n);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(Zd)))),s}function Tc(r){return r.replace(/left|right|bottom|top/g,e=>$C[e])}function iP(r){return{top:0,right:0,bottom:0,left:0,...r}}function jx(r){return typeof r!="number"?iP(r):{top:r,right:r,bottom:r,left:r}}function Ec(r){const{x:e,y:t,width:n,height:i}=r;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function mv(r,e,t){let{reference:n,floating:i}=r;const s=mi(e),a=pg(e),o=dg(a),l=Zi(e),u=s==="y",c=n.x+n.width/2-i.width/2,f=n.y+n.height/2-i.height/2,h=n[o]/2-i[o]/2;let d;switch(l){case"top":d={x:c,y:n.y-i.height};break;case"bottom":d={x:c,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:f};break;case"left":d={x:n.x-i.width,y:f};break;default:d={x:n.x,y:n.y}}switch(yo(e)){case"start":d[a]-=h*(t&&u?-1:1);break;case"end":d[a]+=h*(t&&u?-1:1);break}return d}async function sP(r,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=r,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:h=!1,padding:d=0}=bo(e,r),p=jx(d),m=o[h?f==="floating"?"reference":"floating":f],g=Ec(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(m)))==null||t?m:m.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:u,rootBoundary:c,strategy:l})),_=f==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Ec(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:b,strategy:l}):_);return{top:(g.top-S.top+p.top)/w.y,bottom:(S.bottom-g.bottom+p.bottom)/w.y,left:(g.left-S.left+p.left)/w.x,right:(S.right-g.right+p.right)/w.x}}const aP=async(r,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=t,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:r,floating:e,strategy:i}),{x:c,y:f}=mv(u,n,l),h=n,d={},p=0;for(let m=0;m<o.length;m++){var v;const{name:g,fn:_}=o[m],{x:b,y:w,data:S,reset:T}=await _({x:c,y:f,initialPlacement:n,placement:h,strategy:i,middlewareData:d,rects:u,platform:{...a,detectOverflow:(v=a.detectOverflow)!=null?v:sP},elements:{reference:r,floating:e}});c=b??c,f=w??f,d={...d,[g]:{...d[g],...S}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(h=T.placement),T.rects&&(u=T.rects===!0?await a.getElementRects({reference:r,floating:e,strategy:i}):T.rects),{x:c,y:f}=mv(u,h,l)),m=-1)}return{x:c,y:f,placement:h,strategy:i,middlewareData:d}},oP=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=e,{element:u,padding:c=0}=bo(r,e)||{};if(u==null)return{};const f=jx(c),h={x:t,y:n},d=pg(i),p=dg(d),v=await a.getDimensions(u),m=d==="y",g=m?"top":"left",_=m?"bottom":"right",b=m?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[d]-h[d]-s.floating[p],S=h[d]-s.reference[d],T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let E=T?T[b]:0;(!E||!await(a.isElement==null?void 0:a.isElement(T)))&&(E=o.floating[b]||s.floating[p]);const O=w/2-S/2,P=E/2-v[p]/2-1,V=Ki(f[g],P),W=Ki(f[_],P),D=V,j=E-v[p]-W,I=E/2-v[p]/2+O,q=Kd(D,I,j),$=!l.arrow&&yo(i)!=null&&I!==q&&s.reference[p]/2-(I<D?V:W)-v[p]/2<0,K=$?I<D?I-D:I-j:0;return{[d]:h[d]+K,data:{[d]:q,centerOffset:I-q-K,...$&&{alignmentOffset:K}},reset:$}}}),lP=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:u}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:v=!0,...m}=bo(r,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const g=Zi(i),_=mi(o),b=Zi(o)===o,w=await(l.isRTL==null?void 0:l.isRTL(u.floating)),S=h||(b||!v?[Tc(o)]:QC(o)),T=p!=="none";!h&&T&&S.push(...nP(o,v,p,w));const E=[o,...S],O=await l.detectOverflow(e,m),P=[];let V=((n=s.flip)==null?void 0:n.overflows)||[];if(c&&P.push(O[g]),f){const I=JC(i,a,w);P.push(O[I[0]],O[I[1]])}if(V=[...V,{placement:i,overflows:P}],!P.every(I=>I<=0)){var W,D;const I=(((W=s.flip)==null?void 0:W.index)||0)+1,q=E[I];if(q&&(!(f==="alignment"?_!==mi(q):!1)||V.every(ae=>mi(ae.placement)===_?ae.overflows[0]>0:!0)))return{data:{index:I,overflows:V},reset:{placement:q}};let $=(D=V.filter(K=>K.overflows[0]<=0).sort((K,ae)=>K.overflows[1]-ae.overflows[1])[0])==null?void 0:D.placement;if(!$)switch(d){case"bestFit":{var j;const K=(j=V.filter(ae=>{if(T){const k=mi(ae.placement);return k===_||k==="y"}return!0}).map(ae=>[ae.placement,ae.overflows.filter(k=>k>0).reduce((k,H)=>k+H,0)]).sort((ae,k)=>ae[1]-k[1])[0])==null?void 0:j[0];K&&($=K);break}case"initialPlacement":$=o;break}if(i!==$)return{reset:{placement:$}}}return{}}}},uP=new Set(["left","top"]);async function cP(r,e){const{placement:t,platform:n,elements:i}=r,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=Zi(t),o=yo(t),l=mi(t)==="y",u=uP.has(a)?-1:1,c=s&&l?-1:1,f=bo(e,r);let{mainAxis:h,crossAxis:d,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return o&&typeof p=="number"&&(d=o==="end"?p*-1:p),l?{x:d*c,y:h*u}:{x:h*u,y:d*c}}const fP=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:i,y:s,placement:a,middlewareData:o}=e,l=await cP(e,r);return a===((t=o.offset)==null?void 0:t.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},hP=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:i,platform:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x:_,y:b}=g;return{x:_,y:b}}},...u}=bo(r,e),c={x:t,y:n},f=await s.detectOverflow(e,u),h=mi(Zi(i)),d=zx(h);let p=c[d],v=c[h];if(a){const g=d==="y"?"top":"left",_=d==="y"?"bottom":"right",b=p+f[g],w=p-f[_];p=Kd(b,p,w)}if(o){const g=h==="y"?"top":"left",_=h==="y"?"bottom":"right",b=v+f[g],w=v-f[_];v=Kd(b,v,w)}const m=l.fn({...e,[d]:p,[h]:v});return{...m,data:{x:m.x-t,y:m.y-n,enabled:{[d]:a,[h]:o}}}}}},dP=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,n;const{placement:i,rects:s,platform:a,elements:o}=e,{apply:l=()=>{},...u}=bo(r,e),c=await a.detectOverflow(e,u),f=Zi(i),h=yo(i),d=mi(i)==="y",{width:p,height:v}=s.floating;let m,g;f==="top"||f==="bottom"?(m=f,g=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(g=f,m=h==="end"?"top":"bottom");const _=v-c.top-c.bottom,b=p-c.left-c.right,w=Ki(v-c[m],_),S=Ki(p-c[g],b),T=!e.middlewareData.shift;let E=w,O=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(O=b),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(E=_),T&&!h){const V=Mr(c.left,0),W=Mr(c.right,0),D=Mr(c.top,0),j=Mr(c.bottom,0);d?O=p-2*(V!==0||W!==0?V+W:Mr(c.left,c.right)):E=v-2*(D!==0||j!==0?D+j:Mr(c.top,c.bottom))}await l({...e,availableWidth:O,availableHeight:E});const P=await a.getDimensions(o.floating);return p!==P.width||v!==P.height?{reset:{rects:!0}}:{}}}};function nf(){return typeof window<"u"}function xo(r){return Hx(r)?(r.nodeName||"").toLowerCase():"#document"}function Ur(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function ti(r){var e;return(e=(Hx(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function Hx(r){return nf()?r instanceof Node||r instanceof Ur(r).Node:!1}function An(r){return nf()?r instanceof Element||r instanceof Ur(r).Element:!1}function Jn(r){return nf()?r instanceof HTMLElement||r instanceof Ur(r).HTMLElement:!1}function vv(r){return!nf()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof Ur(r).ShadowRoot}const pP=new Set(["inline","contents"]);function Ul(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=Cn(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!pP.has(i)}const gP=new Set(["table","td","th"]);function mP(r){return gP.has(xo(r))}const vP=[":popover-open",":modal"];function sf(r){return vP.some(e=>{try{return r.matches(e)}catch{return!1}})}const _P=["transform","translate","scale","rotate","perspective"],bP=["transform","translate","scale","rotate","perspective","filter"],yP=["paint","layout","strict","content"];function gg(r){const e=mg(),t=An(r)?Cn(r):r;return _P.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||bP.some(n=>(t.willChange||"").includes(n))||yP.some(n=>(t.contain||"").includes(n))}function xP(r){let e=Ji(r);for(;Jn(e)&&!ja(e);){if(gg(e))return e;if(sf(e))return null;e=Ji(e)}return null}function mg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const wP=new Set(["html","body","#document"]);function ja(r){return wP.has(xo(r))}function Cn(r){return Ur(r).getComputedStyle(r)}function af(r){return An(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Ji(r){if(xo(r)==="html")return r;const e=r.assignedSlot||r.parentNode||vv(r)&&r.host||ti(r);return vv(e)?e.host:e}function Vx(r){const e=Ji(r);return ja(e)?r.ownerDocument?r.ownerDocument.body:r.body:Jn(e)&&Ul(e)?e:Vx(e)}function bl(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=Vx(r),s=i===((n=r.ownerDocument)==null?void 0:n.body),a=Ur(i);if(s){const o=Jd(a);return e.concat(a,a.visualViewport||[],Ul(i)?i:[],o&&t?bl(o):[])}return e.concat(i,bl(i,[],t))}function Jd(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function Wx(r){const e=Cn(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Jn(r),s=i?r.offsetWidth:t,a=i?r.offsetHeight:n,o=Sc(t)!==s||Sc(n)!==a;return o&&(t=s,n=a),{width:t,height:n,$:o}}function vg(r){return An(r)?r:r.contextElement}function Aa(r){const e=vg(r);if(!Jn(e))return $n(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:s}=Wx(e);let a=(s?Sc(t.width):t.width)/n,o=(s?Sc(t.height):t.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const SP=$n(0);function qx(r){const e=Ur(r);return!mg()||!e.visualViewport?SP:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function TP(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==Ur(r)?!1:e}function Ds(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),s=vg(r);let a=$n(1);e&&(n?An(n)&&(a=Aa(n)):a=Aa(r));const o=TP(s,t,n)?qx(s):$n(0);let l=(i.left+o.x)/a.x,u=(i.top+o.y)/a.y,c=i.width/a.x,f=i.height/a.y;if(s){const h=Ur(s),d=n&&An(n)?Ur(n):n;let p=h,v=Jd(p);for(;v&&n&&d!==p;){const m=Aa(v),g=v.getBoundingClientRect(),_=Cn(v),b=g.left+(v.clientLeft+parseFloat(_.paddingLeft))*m.x,w=g.top+(v.clientTop+parseFloat(_.paddingTop))*m.y;l*=m.x,u*=m.y,c*=m.x,f*=m.y,l+=b,u+=w,p=Ur(v),v=Jd(p)}}return Ec({width:c,height:f,x:l,y:u})}function of(r,e){const t=af(r).scrollLeft;return e?e.left+t:Ds(ti(r)).left+t}function Xx(r,e){const t=r.getBoundingClientRect(),n=t.left+e.scrollLeft-of(r,t),i=t.top+e.scrollTop;return{x:n,y:i}}function EP(r){let{elements:e,rect:t,offsetParent:n,strategy:i}=r;const s=i==="fixed",a=ti(n),o=e?sf(e.floating):!1;if(n===a||o&&s)return t;let l={scrollLeft:0,scrollTop:0},u=$n(1);const c=$n(0),f=Jn(n);if((f||!f&&!s)&&((xo(n)!=="body"||Ul(a))&&(l=af(n)),Jn(n))){const d=Ds(n);u=Aa(n),c.x=d.x+n.clientLeft,c.y=d.y+n.clientTop}const h=a&&!f&&!s?Xx(a,l):$n(0);return{width:t.width*u.x,height:t.height*u.y,x:t.x*u.x-l.scrollLeft*u.x+c.x+h.x,y:t.y*u.y-l.scrollTop*u.y+c.y+h.y}}function AP(r){return Array.from(r.getClientRects())}function CP(r){const e=ti(r),t=af(r),n=r.ownerDocument.body,i=Mr(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Mr(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-t.scrollLeft+of(r);const o=-t.scrollTop;return Cn(n).direction==="rtl"&&(a+=Mr(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}const _v=25;function PP(r,e){const t=Ur(r),n=ti(r),i=t.visualViewport;let s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const c=mg();(!c||c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const u=of(n);if(u<=0){const c=n.ownerDocument,f=c.body,h=getComputedStyle(f),d=c.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,p=Math.abs(n.clientWidth-f.clientWidth-d);p<=_v&&(s-=p)}else u<=_v&&(s+=u);return{width:s,height:a,x:o,y:l}}const RP=new Set(["absolute","fixed"]);function kP(r,e){const t=Ds(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,s=Jn(r)?Aa(r):$n(1),a=r.clientWidth*s.x,o=r.clientHeight*s.y,l=i*s.x,u=n*s.y;return{width:a,height:o,x:l,y:u}}function bv(r,e,t){let n;if(e==="viewport")n=PP(r,t);else if(e==="document")n=CP(ti(r));else if(An(e))n=kP(e,t);else{const i=qx(r);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Ec(n)}function Yx(r,e){const t=Ji(r);return t===e||!An(t)||ja(t)?!1:Cn(t).position==="fixed"||Yx(t,e)}function MP(r,e){const t=e.get(r);if(t)return t;let n=bl(r,[],!1).filter(o=>An(o)&&xo(o)!=="body"),i=null;const s=Cn(r).position==="fixed";let a=s?Ji(r):r;for(;An(a)&&!ja(a);){const o=Cn(a),l=gg(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&RP.has(i.position)||Ul(a)&&!l&&Yx(r,a))?n=n.filter(c=>c!==a):i=o,a=Ji(a)}return e.set(r,n),n}function OP(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const a=[...t==="clippingAncestors"?sf(e)?[]:MP(e,this._c):[].concat(t),n],o=a[0],l=a.reduce((u,c)=>{const f=bv(e,c,i);return u.top=Mr(f.top,u.top),u.right=Ki(f.right,u.right),u.bottom=Ki(f.bottom,u.bottom),u.left=Mr(f.left,u.left),u},bv(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function IP(r){const{width:e,height:t}=Wx(r);return{width:e,height:t}}function BP(r,e,t){const n=Jn(e),i=ti(e),s=t==="fixed",a=Ds(r,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=$n(0);function u(){l.x=of(i)}if(n||!n&&!s)if((xo(e)!=="body"||Ul(i))&&(o=af(e)),n){const d=Ds(e,!0,s,e);l.x=d.x+e.clientLeft,l.y=d.y+e.clientTop}else i&&u();s&&!n&&i&&u();const c=i&&!n&&!s?Xx(i,o):$n(0),f=a.left+o.scrollLeft-l.x-c.x,h=a.top+o.scrollTop-l.y-c.y;return{x:f,y:h,width:a.width,height:a.height}}function Bf(r){return Cn(r).position==="static"}function yv(r,e){if(!Jn(r)||Cn(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return ti(r)===t&&(t=t.ownerDocument.body),t}function $x(r,e){const t=Ur(r);if(sf(r))return t;if(!Jn(r)){let i=Ji(r);for(;i&&!ja(i);){if(An(i)&&!Bf(i))return i;i=Ji(i)}return t}let n=yv(r,e);for(;n&&mP(n)&&Bf(n);)n=yv(n,e);return n&&ja(n)&&Bf(n)&&!gg(n)?t:n||xP(r)||t}const FP=async function(r){const e=this.getOffsetParent||$x,t=this.getDimensions,n=await t(r.floating);return{reference:BP(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function DP(r){return Cn(r).direction==="rtl"}const LP={convertOffsetParentRelativeRectToViewportRelativeRect:EP,getDocumentElement:ti,getClippingRect:OP,getOffsetParent:$x,getElementRects:FP,getClientRects:AP,getDimensions:IP,getScale:Aa,isElement:An,isRTL:DP};function Kx(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function UP(r,e){let t=null,n;const i=ti(r);function s(){var o;clearTimeout(n),(o=t)==null||o.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const u=r.getBoundingClientRect(),{left:c,top:f,width:h,height:d}=u;if(o||e(),!h||!d)return;const p=fu(f),v=fu(i.clientWidth-(c+h)),m=fu(i.clientHeight-(f+d)),g=fu(c),b={rootMargin:-p+"px "+-v+"px "+-m+"px "+-g+"px",threshold:Mr(0,Ki(1,l))||1};let w=!0;function S(T){const E=T[0].intersectionRatio;if(E!==l){if(!w)return a();E?a(!1,E):n=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!Kx(u,r.getBoundingClientRect())&&a(),w=!1}try{t=new IntersectionObserver(S,{...b,root:i.ownerDocument})}catch{t=new IntersectionObserver(S,b)}t.observe(r)}return a(!0),s}function NP(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,u=vg(r),c=i||s?[...u?bl(u):[],...bl(e)]:[];c.forEach(g=>{i&&g.addEventListener("scroll",t,{passive:!0}),s&&g.addEventListener("resize",t)});const f=u&&o?UP(u,t):null;let h=-1,d=null;a&&(d=new ResizeObserver(g=>{let[_]=g;_&&_.target===u&&d&&(d.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var b;(b=d)==null||b.observe(e)})),t()}),u&&!l&&d.observe(u),d.observe(e));let p,v=l?Ds(r):null;l&&m();function m(){const g=Ds(r);v&&!Kx(v,g)&&t(),v=g,p=requestAnimationFrame(m)}return t(),()=>{var g;c.forEach(_=>{i&&_.removeEventListener("scroll",t),s&&_.removeEventListener("resize",t)}),f?.(),(g=d)==null||g.disconnect(),d=null,l&&cancelAnimationFrame(p)}}const GP=fP,zP=hP,jP=lP,HP=dP,VP=oP,WP=(r,e,t)=>{const n=new Map,i={platform:LP,...t},s={...i.platform,_c:n};return aP(r,e,{...i,platform:s})},qP={strategy:"absolute",placement:"top",gutter:5,flip:!0,sameWidth:!1,overflowPadding:8},XP={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function Zx(r,e,t={}){if(!e||!r||t===null)return{destroy:gt};const n={...qP,...t},i=e.querySelector("[data-arrow=true]"),s=[];n.flip&&s.push(jP({boundary:n.boundary,padding:n.overflowPadding,...ug(n.flip)&&n.flip}));const a=bt(i)?i.offsetHeight/2:0;if(n.gutter||n.offset){const l=n.gutter?{mainAxis:n.gutter}:n.offset;l?.mainAxis!=null&&(l.mainAxis+=a),s.push(GP(l))}s.push(zP({boundary:n.boundary,crossAxis:n.overlap,padding:n.overflowPadding})),i&&s.push(VP({element:i,padding:8})),s.push(HP({padding:n.overflowPadding,apply({rects:l,availableHeight:u,availableWidth:c}){n.sameWidth&&Object.assign(e.style,{width:`${Math.round(l.reference.width)}px`,minWidth:"unset"}),n.fitViewport&&Object.assign(e.style,{maxWidth:`${c}px`,maxHeight:`${u}px`})}}));function o(){if(!r||!e||bt(r)&&!r.ownerDocument.documentElement.contains(r))return;const{placement:l,strategy:u}=n;WP(r,e,{placement:l,middleware:s,strategy:u}).then(c=>{const f=Math.round(c.x),h=Math.round(c.y),[d,p]=YP(c.placement);if(e.setAttribute("data-side",d),e.setAttribute("data-align",p),Object.assign(e.style,{position:n.strategy,top:`${h}px`,left:`${f}px`}),bt(i)&&c.middlewareData.arrow){const{x:v,y:m}=c.middlewareData.arrow,g=c.placement.split("-")[0];i.setAttribute("data-side",g),Object.assign(i.style,{position:"absolute",left:v!=null?`${v}px`:"",top:m!=null?`${m}px`:"",[g]:`calc(100% - ${a}px)`,transform:XP[g],backgroundColor:"inherit",zIndex:"inherit"})}return c})}return Object.assign(e.style,{position:n.strategy}),{destroy:NP(r,e,o)}}function YP(r){const[e,t="center"]=r.split("-");return[e,t]}/*!
* tabbable 6.4.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Jx=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],Ac=Jx.join(","),Qx=typeof Element>"u",Ls=Qx?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Cc=!Qx&&Element.prototype.getRootNode?function(r){var e;return r==null||(e=r.getRootNode)===null||e===void 0?void 0:e.call(r)}:function(r){return r?.ownerDocument},Pc=function(e,t){var n;t===void 0&&(t=!0);var i=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),s=i===""||i==="true",a=s||t&&e&&(typeof e.closest=="function"?e.closest("[inert]"):Pc(e.parentNode));return a},$P=function(e){var t,n=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return n===""||n==="true"},e1=function(e,t,n){if(Pc(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(Ac));return t&&Ls.call(e,Ac)&&i.unshift(e),i=i.filter(n),i},Rc=function(e,t,n){for(var i=[],s=Array.from(e);s.length;){var a=s.shift();if(!Pc(a,!1))if(a.tagName==="SLOT"){var o=a.assignedElements(),l=o.length?o:a.children,u=Rc(l,!0,n);n.flatten?i.push.apply(i,u):i.push({scopeParent:a,candidates:u})}else{var c=Ls.call(a,Ac);c&&n.filter(a)&&(t||!e.includes(a))&&i.push(a);var f=a.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(a),h=!Pc(f,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(f&&h){var d=Rc(f===!0?a.children:f.children,!0,n);n.flatten?i.push.apply(i,d):i.push({scopeParent:a,candidates:d})}else s.unshift.apply(s,a.children)}}return i},t1=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},vs=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||$P(e))&&!t1(e)?0:e.tabIndex},KP=function(e,t){var n=vs(e);return n<0&&t&&!t1(e)?0:n},ZP=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},r1=function(e){return e.tagName==="INPUT"},JP=function(e){return r1(e)&&e.type==="hidden"},QP=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return t},eR=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},tR=function(e){if(!e.name)return!0;var t=e.form||Cc(e),n=function(o){return t.querySelectorAll('input[type="radio"][name="'+o+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(e.name));else try{i=n(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=eR(i,e.form);return!s||s===e},rR=function(e){return r1(e)&&e.type==="radio"},nR=function(e){return rR(e)&&!tR(e)},iR=function(e){var t,n=e&&Cc(e),i=(t=n)===null||t===void 0?void 0:t.host,s=!1;if(n&&n!==e){var a,o,l;for(s=!!((a=i)!==null&&a!==void 0&&(o=a.ownerDocument)!==null&&o!==void 0&&o.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var u,c,f;n=Cc(i),i=(u=n)===null||u===void 0?void 0:u.host,s=!!((c=i)!==null&&c!==void 0&&(f=c.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},xv=function(e){var t=e.getBoundingClientRect(),n=t.width,i=t.height;return n===0&&i===0},sR=function(e,t){var n=t.displayCheck,i=t.getShadowRoot;if(n==="full-native"&&"checkVisibility"in e){var s=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(e).visibility==="hidden")return!0;var a=Ls.call(e,"details>summary:first-of-type"),o=a?e.parentElement:e;if(Ls.call(o,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="full-native"||n==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var u=e.parentElement,c=Cc(e);if(u&&!u.shadowRoot&&i(u)===!0)return xv(e);e.assignedSlot?e=e.assignedSlot:!u&&c!==e.ownerDocument?e=c.host:e=u}e=l}if(iR(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return xv(e);return!1},aR=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var n=0;n<t.children.length;n++){var i=t.children.item(n);if(i.tagName==="LEGEND")return Ls.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},kc=function(e,t){return!(t.disabled||JP(t)||sR(t,e)||QP(t)||aR(t))},Qd=function(e,t){return!(nR(t)||vs(t)<0||!kc(e,t))},oR=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},n1=function(e){var t=[],n=[];return e.forEach(function(i,s){var a=!!i.scopeParent,o=a?i.scopeParent:i,l=KP(o,a),u=a?n1(i.candidates):o;l===0?a?t.push.apply(t,u):t.push(o):n.push({documentOrder:s,tabIndex:l,item:i,isScope:a,content:u})}),n.sort(ZP).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},lR=function(e,t){t=t||{};var n;return t.getShadowRoot?n=Rc([e],t.includeContainer,{filter:Qd.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:oR}):n=e1(e,t.includeContainer,Qd.bind(null,t)),n1(n)},uR=function(e,t){t=t||{};var n;return t.getShadowRoot?n=Rc([e],t.includeContainer,{filter:kc.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):n=e1(e,t.includeContainer,kc.bind(null,t)),n},ta=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Ls.call(e,Ac)===!1?!1:Qd(t,e)},cR=Jx.concat("iframe:not([inert]):not([inert] *)").join(","),Ff=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Ls.call(e,cR)===!1?!1:kc(t,e)};/*!
* focus-trap 7.8.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function ep(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function fR(r){if(Array.isArray(r))return ep(r)}function wv(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=i1(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(l){throw l},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){t=t.call(r)},n:function(){var l=t.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{a||t.return==null||t.return()}finally{if(o)throw s}}}}function hR(r,e,t){return(e=vR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function dR(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function pR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sv(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Tv(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Sv(Object(t),!0).forEach(function(n){hR(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Sv(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function gR(r){return fR(r)||dR(r)||i1(r)||pR()}function mR(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function vR(r){var e=mR(r,"string");return typeof e=="symbol"?e:e+""}function i1(r,e){if(r){if(typeof r=="string")return ep(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ep(r,e):void 0}}var di={getActiveTrap:function(e){return e?.length>0?e[e.length-1]:null},activateTrap:function(e,t){var n=di.getActiveTrap(e);t!==n&&di.pauseTrap(e);var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1),di.unpauseTrap(e)},pauseTrap:function(e){var t=di.getActiveTrap(e);t?._setPausedState(!0)},unpauseTrap:function(e){var t=di.getActiveTrap(e);t&&!t._isManuallyPaused()&&t._setPausedState(!1)}},_R=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},bR=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},sl=function(e){return e?.key==="Tab"||e?.keyCode===9},yR=function(e){return sl(e)&&!e.shiftKey},xR=function(e){return sl(e)&&e.shiftKey},Ev=function(e){return setTimeout(e,0)},Lo=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,n):e},hu=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},wR=[],SR=function(e,t){var n=t?.document||document,i=t?.trapStack||wR,s=Tv({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isolateSubtrees:!1,isKeyForward:yR,isKeyBackward:xR},t),a={containers:[],containerGroups:[],tabbableGroups:[],adjacentElements:new Set,alreadySilent:new Set,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,l=function(I,q,$){return I&&I[q]!==void 0?I[q]:s[$||q]},u=function(I,q){var $=typeof q?.composedPath=="function"?q.composedPath():void 0;return a.containerGroups.findIndex(function(K){var ae=K.container,k=K.tabbableNodes;return ae.contains(I)||$?.includes(ae)||k.find(function(H){return H===I})})},c=function(I){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=q.hasFallback,K=$===void 0?!1:$,ae=q.params,k=ae===void 0?[]:ae,H=s[I];if(typeof H=="function"&&(H=H.apply(void 0,gR(k))),H===!0&&(H=void 0),!H){if(H===void 0||H===!1)return H;throw new Error("`".concat(I,"` was specified but was not a node, or did not return a node"))}var ie=H;if(typeof H=="string"){try{ie=n.querySelector(H)}catch(X){throw new Error("`".concat(I,'` appears to be an invalid selector; error="').concat(X.message,'"'))}if(!ie&&!K)throw new Error("`".concat(I,"` as selector refers to no known node"))}return ie},f=function(){var I=c("initialFocus",{hasFallback:!0});if(I===!1)return!1;if(I===void 0||I&&!Ff(I,s.tabbableOptions))if(u(n.activeElement)>=0)I=n.activeElement;else{var q=a.tabbableGroups[0],$=q&&q.firstTabbableNode;I=$||c("fallbackFocus")}else I===null&&(I=c("fallbackFocus"));if(!I)throw new Error("Your focus-trap needs to have at least one focusable element");return I},h=function(){if(a.containerGroups=a.containers.map(function(I){var q=lR(I,s.tabbableOptions),$=uR(I,s.tabbableOptions),K=q.length>0?q[0]:void 0,ae=q.length>0?q[q.length-1]:void 0,k=$.find(function(X){return ta(X)}),H=$.slice().reverse().find(function(X){return ta(X)}),ie=!!q.find(function(X){return vs(X)>0});return{container:I,tabbableNodes:q,focusableNodes:$,posTabIndexesFound:ie,firstTabbableNode:K,lastTabbableNode:ae,firstDomTabbableNode:k,lastDomTabbableNode:H,nextTabbableNode:function(N){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,F=q.indexOf(N);return F<0?M?$.slice($.indexOf(N)+1).find(function(A){return ta(A)}):$.slice(0,$.indexOf(N)).reverse().find(function(A){return ta(A)}):q[F+(M?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(I){return I.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!c("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(I){return I.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},d=function(I){var q=I.activeElement;if(q)return q.shadowRoot&&q.shadowRoot.activeElement!==null?d(q.shadowRoot):q},p=function(I){if(I!==!1&&I!==d(document)){if(!I||!I.focus){p(f());return}I.focus({preventScroll:!!s.preventScroll}),a.mostRecentlyFocusedNode=I,_R(I)&&I.select()}},v=function(I){var q=c("setReturnFocus",{params:[I]});return q||(q===!1?!1:I)},m=function(I){var q=I.target,$=I.event,K=I.isBackward,ae=K===void 0?!1:K;q=q||hu($),h();var k=null;if(a.tabbableGroups.length>0){var H=u(q,$),ie=H>=0?a.containerGroups[H]:void 0;if(H<0)ae?k=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:k=a.tabbableGroups[0].firstTabbableNode;else if(ae){var X=a.tabbableGroups.findIndex(function(Y){var te=Y.firstTabbableNode;return q===te});if(X<0&&(ie.container===q||Ff(q,s.tabbableOptions)&&!ta(q,s.tabbableOptions)&&!ie.nextTabbableNode(q,!1))&&(X=H),X>=0){var N=X===0?a.tabbableGroups.length-1:X-1,M=a.tabbableGroups[N];k=vs(q)>=0?M.lastTabbableNode:M.lastDomTabbableNode}else sl($)||(k=ie.nextTabbableNode(q,!1))}else{var F=a.tabbableGroups.findIndex(function(Y){var te=Y.lastTabbableNode;return q===te});if(F<0&&(ie.container===q||Ff(q,s.tabbableOptions)&&!ta(q,s.tabbableOptions)&&!ie.nextTabbableNode(q))&&(F=H),F>=0){var A=F===a.tabbableGroups.length-1?0:F+1,L=a.tabbableGroups[A];k=vs(q)>=0?L.firstTabbableNode:L.firstDomTabbableNode}else sl($)||(k=ie.nextTabbableNode(q))}}else k=c("fallbackFocus");return k},g=function(I){var q=hu(I);if(!(u(q,I)>=0)){if(Lo(s.clickOutsideDeactivates,I)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Lo(s.allowOutsideClick,I)||I.preventDefault()}},_=function(I){var q=hu(I),$=u(q,I)>=0;if($||q instanceof Document)$&&(a.mostRecentlyFocusedNode=q);else{I.stopImmediatePropagation();var K,ae=!0;if(a.mostRecentlyFocusedNode)if(vs(a.mostRecentlyFocusedNode)>0){var k=u(a.mostRecentlyFocusedNode),H=a.containerGroups[k].tabbableNodes;if(H.length>0){var ie=H.findIndex(function(X){return X===a.mostRecentlyFocusedNode});ie>=0&&(s.isKeyForward(a.recentNavEvent)?ie+1<H.length&&(K=H[ie+1],ae=!1):ie-1>=0&&(K=H[ie-1],ae=!1))}}else a.containerGroups.some(function(X){return X.tabbableNodes.some(function(N){return vs(N)>0})})||(ae=!1);else ae=!1;ae&&(K=m({target:a.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(a.recentNavEvent)})),p(K||a.mostRecentlyFocusedNode||f())}a.recentNavEvent=void 0},b=function(I){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=I;var $=m({event:I,isBackward:q});$&&(sl(I)&&I.preventDefault(),p($))},w=function(I){(s.isKeyForward(I)||s.isKeyBackward(I))&&b(I,s.isKeyBackward(I))},S=function(I){bR(I)&&Lo(s.escapeDeactivates,I)!==!1&&(I.preventDefault(),o.deactivate())},T=function(I){var q=hu(I);u(q,I)>=0||Lo(s.clickOutsideDeactivates,I)||Lo(s.allowOutsideClick,I)||(I.preventDefault(),I.stopImmediatePropagation())},E=function(){if(a.active)return di.activateTrap(i,o),a.delayInitialFocusTimer=s.delayInitialFocus?Ev(function(){p(f())}):p(f()),n.addEventListener("focusin",_,!0),n.addEventListener("mousedown",g,{capture:!0,passive:!1}),n.addEventListener("touchstart",g,{capture:!0,passive:!1}),n.addEventListener("click",T,{capture:!0,passive:!1}),n.addEventListener("keydown",w,{capture:!0,passive:!1}),n.addEventListener("keydown",S),o},O=function(I){a.active&&!a.paused&&o._setSubtreeIsolation(!1),a.adjacentElements.clear(),a.alreadySilent.clear();var q=new Set,$=new Set,K=wv(I),ae;try{for(K.s();!(ae=K.n()).done;){var k=ae.value;q.add(k);for(var H=typeof ShadowRoot<"u"&&k.getRootNode()instanceof ShadowRoot,ie=k;ie;){q.add(ie);var X=ie.parentElement,N=[];X?N=X.children:!X&&H&&(N=ie.getRootNode().children,X=ie.getRootNode().host,H=typeof ShadowRoot<"u"&&X.getRootNode()instanceof ShadowRoot);var M=wv(N),F;try{for(M.s();!(F=M.n()).done;){var A=F.value;$.add(A)}}catch(L){M.e(L)}finally{M.f()}ie=X}}}catch(L){K.e(L)}finally{K.f()}q.forEach(function(L){$.delete(L)}),a.adjacentElements=$},P=function(){if(a.active)return n.removeEventListener("focusin",_,!0),n.removeEventListener("mousedown",g,!0),n.removeEventListener("touchstart",g,!0),n.removeEventListener("click",T,!0),n.removeEventListener("keydown",w,!0),n.removeEventListener("keydown",S),o},V=function(I){var q=I.some(function($){var K=Array.from($.removedNodes);return K.some(function(ae){return ae===a.mostRecentlyFocusedNode})});q&&p(f())},W=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(V):void 0,D=function(){W&&(W.disconnect(),a.active&&!a.paused&&a.containers.map(function(I){W.observe(I,{subtree:!0,childList:!0})}))};return o={get active(){return a.active},get paused(){return a.paused},activate:function(I){if(a.active)return this;var q=l(I,"onActivate"),$=l(I,"onPostActivate"),K=l(I,"checkCanFocusTrap"),ae=di.getActiveTrap(i),k=!1;if(ae&&!ae.paused){var H;(H=ae._setSubtreeIsolation)===null||H===void 0||H.call(ae,!1),k=!0}try{K||h(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=d(n),q?.();var ie=function(){K&&h(),E(),D(),s.isolateSubtrees&&o._setSubtreeIsolation(!0),$?.()};if(K)return K(a.containers.concat()).then(ie,ie),this;ie()}catch(N){if(ae===di.getActiveTrap(i)&&k){var X;(X=ae._setSubtreeIsolation)===null||X===void 0||X.call(ae,!0)}throw N}return this},deactivate:function(I){if(!a.active)return this;var q=Tv({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},I);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,a.paused||o._setSubtreeIsolation(!1),a.alreadySilent.clear(),P(),a.active=!1,a.paused=!1,D(),di.deactivateTrap(i,o);var $=l(q,"onDeactivate"),K=l(q,"onPostDeactivate"),ae=l(q,"checkCanReturnFocus"),k=l(q,"returnFocus","returnFocusOnDeactivate");$?.();var H=function(){Ev(function(){k&&p(v(a.nodeFocusedBeforeActivation)),K?.()})};return k&&ae?(ae(v(a.nodeFocusedBeforeActivation)).then(H,H),this):(H(),this)},pause:function(I){return a.active?(a.manuallyPaused=!0,this._setPausedState(!0,I)):this},unpause:function(I){return a.active?(a.manuallyPaused=!1,i[i.length-1]!==this?this:this._setPausedState(!1,I)):this},updateContainerElements:function(I){var q=[].concat(I).filter(Boolean);return a.containers=q.map(function($){return typeof $=="string"?n.querySelector($):$}),s.isolateSubtrees&&O(a.containers),a.active&&(h(),s.isolateSubtrees&&!a.paused&&o._setSubtreeIsolation(!0)),D(),this}},Object.defineProperties(o,{_isManuallyPaused:{value:function(){return a.manuallyPaused}},_setPausedState:{value:function(I,q){if(a.paused===I)return this;if(a.paused=I,I){var $=l(q,"onPause"),K=l(q,"onPostPause");$?.(),P(),D(),o._setSubtreeIsolation(!1),K?.()}else{var ae=l(q,"onUnpause"),k=l(q,"onPostUnpause");ae?.(),o._setSubtreeIsolation(!0),h(),E(),D(),k?.()}return this}},_setSubtreeIsolation:{value:function(I){s.isolateSubtrees&&a.adjacentElements.forEach(function(q){var $;if(I)switch(s.isolateSubtrees){case"aria-hidden":(q.ariaHidden==="true"||(($=q.getAttribute("aria-hidden"))===null||$===void 0?void 0:$.toLowerCase())==="true")&&a.alreadySilent.add(q),q.setAttribute("aria-hidden","true");break;default:(q.inert||q.hasAttribute("inert"))&&a.alreadySilent.add(q),q.setAttribute("inert",!0);break}else if(!a.alreadySilent.has(q))switch(s.isolateSubtrees){case"aria-hidden":q.removeAttribute("aria-hidden");break;default:q.removeAttribute("inert");break}})}}}),o.updateContainerElements(e),o};const TR=(r,e={})=>{let t=gt;const n=i=>{t();const s=SR(r,{returnFocusOnDeactivate:!1,allowOutsideClick:!0,escapeDeactivates:!1,clickOutsideDeactivates:!1,...i});t=s.deactivate,s.activate()};return n(e),{destroy:t,update:n}},ER=(r,e)=>{let t=gt;function n(i){t();const{onClose:s,shouldCloseOnInteractOutside:a,closeOnInteractOutside:o}=i;function l(){s?.()}function u(f){const h=f.target;_o(h)&&f.stopImmediatePropagation()}function c(f){a?.(f)&&(f.stopImmediatePropagation(),l())}t=_g(r,{onInteractOutsideStart:u,onInteractOutside:o?c:void 0,enabled:o}).destroy}return n(e),{update:n,destroy(){t()}}},tp=new Set,AR=(r,e={})=>{tp.add(r);let t=gt,n=gt;const i=Nx(r);let s=!1;const a=l=>{t(),o();const u={enabled:!0,...l},c=cg(u.enabled)?u.enabled:Tr(Br(u.enabled));t=Zt(Bs(i,"pointerdown",h=>{const d=h.target;!PR(r)||!bt(d)||!c.get()||(s=hg(r,d),s&&(n=CR(r)))},!0),Bs(i,"pointerup",o,!0))},o=()=>{n(),n=gt,s=!1};return a(e),{destroy(){tp.delete(r),t(),o()},update:a}},CR=r=>{const e=document.body,t=Av(e),n=Av(r);return du(e,"none"),du(r,"text"),()=>{du(e,t),du(r,n)}},Av=r=>r.style.userSelect||r.style.webkitUserSelect,du=(r,e)=>{r.style.userSelect=e,r.style.webkitUserSelect=e},PR=r=>[...tp].at(-1)===r,RR={floating:{},focusTrap:{},modal:{},escapeKeydown:{},portal:"body",preventTextSelectionOverflow:{}},kR=(r,e)=>{r.dataset.escapee="";const{anchorElement:t,open:n,options:i}=e;if(!t||!n||!i)return{destroy:gt};const s={...RR,...i},a=[];s.portal!==null&&a.push(s1(r,s.portal).destroy),a.push(Zx(t,r,s.floating).destroy),s.focusTrap!==null&&a.push(TR(r,{fallbackFocus:r,...s.focusTrap}).destroy),s.modal!==null&&a.push(ER(r,{onClose:()=>{bt(t)&&(n.set(!1),t.focus())},shouldCloseOnInteractOutside:l=>!(l.defaultPrevented||bt(t)&&t.contains(l.target)),...s.modal}).destroy),s.escapeKeydown!==null&&a.push(Gx(r,{handler:()=>{n.set(!1)},...s.escapeKeydown}).destroy),s.preventTextSelectionOverflow!==null&&a.push(AR(r).destroy);const o=Zt(...a);return{destroy(){o()}}},s1=(r,e="body")=>{let t;if(!bt(e)&&typeof e!="string")return{destroy:gt};async function n(s="body"){if(e=s,typeof e=="string"){if(t=document.querySelector(e),t===null&&(await Yn(),t=document.querySelector(e)),t===null)throw new Error(`No element found matching css selector: "${e}"`)}else if(e instanceof HTMLElement)t=e;else throw new TypeError(`Unknown portal target type: ${e===null?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);r.dataset.portal="",t.appendChild(r),r.hidden=!1}function i(){r.remove()}return n(e),{update:n,destroy:i}},rp=new Set,_g=(r,e={})=>{let t=gt,n=gt,i=gt,s=gt;rp.add(r);const a=Nx(r);let o=!1,l=!1;const u={pointerdown:!1,pointerup:!1,mousedown:!1,mouseup:!1,touchstart:!1,touchend:!1,click:!1},c=()=>{for(const g in u)u[g]=!1},f=()=>{for(const g of Object.values(u))if(g)return!0;return!1},h=(g,_)=>Bs(a,g,b=>{u[g]=!0,_?.(b)},!0),d=(g,_)=>Bs(a,g,b=>{u[g]=!1,_?.(b)});function p(g){t(),n(),i(),s(),c();const{onInteractOutside:_,onInteractOutsideStart:b,enabled:w}={enabled:!0,...g};if(!w)return;let S=!1;const T=$u(V=>{if(!S||f())return;_&&Cv(V,r)&&b?.(V);const W=V.target;_o(W)&&hg(r,W)&&(l=!0),o=!0},10);n=T.destroy;const E=$u(V=>{S&&!f()&&v(V)&&_?.(V),m()},10);i=E.destroy;const O=$u(c,20);s=O.destroy;const P=()=>{S=MR(r)};t=Zt(h("pointerdown",P),h("mousedown",P),h("touchstart",P),h("pointerup",O),h("mouseup",O),h("touchend",O),h("click",O),d("pointerdown",T),d("mousedown",T),d("touchstart",T),d("pointerup",E),d("mouseup",E),d("touchend",E),d("click",E))}function v(g){return!!(o&&!l&&Cv(g,r))}function m(){o=!1,l=!1}return p(e),{update:p,destroy(){t(),n(),i(),s(),rp.delete(r)}}};function Cv(r,e){if("button"in r&&r.button>0)return!1;const t=r.target;if(!_o(t))return!1;const n=t.ownerDocument;return!n||!n.documentElement.contains(t)?!1:e&&!hg(e,t)}function MR(r){return Array.from(rp).at(-1)===r}function OR(){return{elements:{root:It("label",{action:e=>({destroy:dt(e,"mousedown",n=>{!n.defaultPrevented&&n.detail>1&&n.preventDefault()})})})}}}const IR=[Ae.ARROW_LEFT,Ae.ESCAPE,Ae.ARROW_RIGHT,Ae.SHIFT,Ae.CAPS_LOCK,Ae.CONTROL,Ae.ALT,Ae.META,Ae.ENTER,Ae.F1,Ae.F2,Ae.F3,Ae.F4,Ae.F5,Ae.F6,Ae.F7,Ae.F8,Ae.F9,Ae.F10,Ae.F11,Ae.F12],BR={positioning:{placement:"bottom",sameWidth:!0},scrollAlignment:"nearest",loop:!0,defaultOpen:!1,closeOnOutsideClick:!0,preventScroll:!0,escapeBehavior:"close",forceVisible:!1,portal:"body",builder:"listbox",disabled:!1,required:!1,name:void 0,typeahead:!0,highlightOnHover:!0,onOutsideClick:void 0,preventTextSelectionOverflow:!0},FR=["trigger","menu","label"];function DR(r){const e={...BR,...r},t=Tr(Xe(null)),n=Tr(Xe(null)),i=e.selected??Xe(e.defaultSelected),s=za(i,e?.onSelectedChange),a=tr(n,Q=>Q?q(Q):void 0),o=e.open??Xe(e.defaultOpen),l=za(o,e?.onOpenChange),u=Fs({...Ys(e,"open","defaultOpen","builder","ids"),multiple:e.multiple??!1}),{scrollAlignment:c,loop:f,closeOnOutsideClick:h,escapeBehavior:d,preventScroll:p,portal:v,forceVisible:m,positioning:g,multiple:_,arrowSize:b,disabled:w,required:S,typeahead:T,name:E,highlightOnHover:O,onOutsideClick:P,preventTextSelectionOverflow:V}=u,{name:W,selector:D}=vo(e.builder),j=Fs({...fg(FR),...e.ids}),{handleTypeaheadSearch:I}=LC({onMatch:Q=>{n.set(Q),Q.scrollIntoView({block:c.get()})},getCurrentItem(){return n.get()}});function q(Q){const oe=Q.getAttribute("data-value"),_e=Q.getAttribute("data-label"),me=Q.hasAttribute("data-disabled");return{value:oe&&JSON.parse(oe),label:_e??Q.textContent??void 0,disabled:!!me}}const $=Q=>{s.update(oe=>{if(_.get()){const me=Array.isArray(oe)?[...oe]:[];return rC(Q,me,(Pe,Ue)=>_n(Pe.value,Ue.value))}return Q})};function K(Q){const oe=q(Q);$(oe)}async function ae(){l.set(!0),await Yn();const Q=document.getElementById(j.menu.get());if(!bt(Q))return;const oe=Q.querySelector("[aria-selected=true]");bt(oe)&&n.set(oe)}function k(){l.set(!1),n.set(null)}const H=BC({open:l,forceVisible:m,activeTrigger:t}),ie=tr([s],([Q])=>oe=>Array.isArray(Q)?Q.some(_e=>_n(_e.value,oe)):ug(oe)?_n(Q?.value,iC(oe,void 0)):_n(Q?.value,oe)),X=tr([a],([Q])=>oe=>_n(Q?.value,oe)),N=It(W("trigger"),{stores:[l,n,w,j.menu,j.trigger,j.label],returned:([Q,oe,_e,me,Pe,Ue])=>({"aria-activedescendant":oe?.id,"aria-autocomplete":"list","aria-controls":me,"aria-expanded":Q,"aria-labelledby":Ue,"data-state":Q?"open":"closed",id:Pe,role:"combobox",disabled:ar(_e),type:e.builder==="select"?"button":void 0}),action:Q=>{t.set(Q);const oe=Fx(Q),_e=Zt(dt(Q,"click",()=>{Q.focus(),l.get()?k():ae()}),dt(Q,"keydown",me=>{if(!l.get()){if(IR.includes(me.key)||me.key===Ae.TAB||me.key===Ae.BACKSPACE&&oe&&Q.value===""||me.key===Ae.SPACE&&cv(Q))return;ae(),Yn().then(()=>{if(s.get())return;const se=document.getElementById(j.menu.get());if(!bt(se))return;const Te=Array.from(se.querySelectorAll(`${D("item")}:not([data-disabled]):not([data-hidden])`)).filter(Be=>bt(Be));Te.length&&(me.key===Ae.ARROW_DOWN?(n.set(Te[0]),Te[0].scrollIntoView({block:c.get()})):me.key===Ae.ARROW_UP&&(n.set(kf(Te)),kf(Te).scrollIntoView({block:c.get()})))})}if(me.key===Ae.TAB){k();return}if(me.key===Ae.ENTER&&!me.isComposing||me.key===Ae.SPACE&&cv(Q)){me.preventDefault();const Ue=n.get();Ue&&K(Ue),_.get()||k()}if(me.key===Ae.ARROW_UP&&me.altKey&&k(),bC.includes(me.key)){me.preventDefault();const Ue=document.getElementById(j.menu.get());if(!bt(Ue))return;const se=Mf(Ue);if(!se.length)return;const Te=se.filter(de=>!fv(de)&&de.dataset.hidden===void 0),Be=n.get(),Ee=Be?Te.indexOf(Be):-1,Ce=f.get(),Z=c.get();let ne;switch(me.key){case Ae.ARROW_DOWN:ne=QA(Te,Ee,Ce);break;case Ae.ARROW_UP:ne=eC(Te,Ee,Ce);break;case Ae.PAGE_DOWN:ne=JA(Te,Ee,10,Ce);break;case Ae.PAGE_UP:ne=ZA(Te,Ee,10,Ce);break;case Ae.HOME:ne=Te[0];break;case Ae.END:ne=kf(Te);break;default:return}n.set(ne),ne?.scrollIntoView({block:Z})}else if(T.get()){const Ue=document.getElementById(j.menu.get());if(!bt(Ue))return;I(me.key,Mf(Ue))}}));return{destroy(){t.set(null),_e()}}}}),M=It(W("menu"),{stores:[H,j.menu],returned:([Q,oe])=>({hidden:Q?void 0:!0,id:oe,role:"listbox",style:Q?void 0:Ci({display:"none"})}),action:Q=>{let oe=gt;const _e=Zt(Zr([H,v,h,g,t],([me,Pe,Ue,se,Te])=>{oe(),!(!me||!Te)&&Yn().then(()=>{oe();const Be=NC(j.trigger.get());oe=kR(Q,{anchorElement:Te,open:l,options:{floating:se,focusTrap:null,modal:{closeOnInteractOutside:Ue,onClose:k,shouldCloseOnInteractOutside:Ee=>{if(P.get()?.(Ee),Ee.defaultPrevented)return!1;const Ce=Ee.target;return!(!_o(Ce)||Ce===Te||Te.contains(Ce)||Be(Ee))}},escapeKeydown:{handler:k,behaviorType:d},portal:Ux(Q,Pe),preventTextSelectionOverflow:{enabled:V}}}).destroy})}));return{destroy:()=>{_e(),oe()}}}}),{elements:{root:F}}=OR(),{action:A}=St(F),L=It(W("label"),{stores:[j.label,j.trigger],returned:([Q,oe])=>({id:Q,for:oe}),action:A}),Y=It(W("option"),{stores:[ie],returned:([Q])=>oe=>{const _e=Q(oe.value);return{"data-value":JSON.stringify(oe.value),"data-label":oe.label,"data-disabled":ar(oe.disabled),"aria-disabled":oe.disabled?!0:void 0,"aria-selected":_e,"data-selected":_e?"":void 0,id:_a(),role:"option"}},action:Q=>({destroy:Zt(dt(Q,"click",_e=>{if(fv(Q)){_e.preventDefault();return}K(Q),_.get()||k()}),Zr(O,_e=>_e?Zt(dt(Q,"mouseover",()=>{n.set(Q)}),dt(Q,"mouseleave",()=>{n.set(null)})):void 0))})}),te=It(W("group"),{returned:()=>Q=>({role:"group","aria-labelledby":Q})}),fe=It(W("group-label"),{returned:()=>Q=>({id:Q})}),B=HC({value:tr([s],([Q])=>{const oe=Array.isArray(Q)?Q.map(_e=>_e.value):Q?.value;return typeof oe=="string"?oe:JSON.stringify(oe)}),name:Yu(E),required:S,prefix:e.builder}),G=It(W("arrow"),{stores:b,returned:Q=>({"data-arrow":!0,style:Ci({position:"absolute",width:`var(--arrow-size, ${Q}px)`,height:`var(--arrow-size, ${Q}px)`})})});return Zr([n],([Q])=>{if(!$i)return;const oe=document.getElementById(j.menu.get());bt(oe)&&Mf(oe).forEach(_e=>{_e===Q?cC(_e):fC(_e)})}),Zr([l,p],([Q,oe])=>{if(!(!$i||!Q||!oe))return IC()}),{ids:j,elements:{trigger:N,group:te,option:Y,menu:M,groupLabel:fe,label:L,hiddenInput:B,arrow:G},states:{open:l,selected:s,highlighted:a,highlightedItem:n},helpers:{isSelected:ie,isHighlighted:X,closeMenu:k},options:u}}const LR={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...Ys(LR,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});function UR(r){const e=DR({...r,builder:"select"}),t=tr(e.states.selected,n=>Array.isArray(n)?n.map(i=>i.label).join(", "):n?.label??"");return{...e,elements:{...e.elements},states:{...e.states,selectedLabel:t}}}function Bn(r,e="default"){const t=qr(r);Fx(t)&&(t.focus(),e==="start"?t.setSelectionRange(0,0):e==="end"&&t.setSelectionRange(t.value.length,t.value.length))}function Fn(r,e){if(!r){e.set(null);return}e.set({id:r.getAttribute("data-tag-id")??"",value:r.getAttribute("data-tag-value")??""})}function Pv(r){const e=document.querySelector(r);if(!bt(e))return;e.focus();const t=document.createRange();t.selectNodeContents(e);const n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t))}const NR={placeholder:"",disabled:!1,editable:!0,defaultTags:[],unique:!1,trim:!0,blur:"nothing",addOnPaste:!1,maxTags:void 0,allowed:[],denied:[],add:void 0,remove:void 0,update:void 0},{name:Uo,attribute:GR,selector:ra}=vo("tags-input");function zR(r){const e={...NR,...r},t=fg(["root","input"]),n=Fs(Ys(e,"tags")),{placeholder:i,disabled:s,editable:a,unique:o,trim:l,blur:u,addOnPaste:c,allowed:f,denied:h,add:d,remove:p,update:v,maxTags:m}=n,g=Xe(""),_=Xe(!1),b=Xe(""),w=e.tags??Xe(e.defaultTags&&e.defaultTags.length>0?typeof e.defaultTags[0]=="string"?e.defaultTags.map(k=>({id:_a(),value:k})):e.defaultTags:[]),S=za(w,e?.onTagsChange),T=Tr.writable(e.selected??null),E=Tr.writable(null),O=k=>{const H=S.get(),ie=E.get(),X=f.get(),N=h.get(),M=m.get();return l.get()&&(k=k.trim()),!(o.get()&&ie?.value!==k&&H.findIndex(A=>A.value===k)>=0||X&&X.length>0&&!X.includes(k)||N&&N.length>0&&N.includes(k)||M&&M>0&&H.length>=M)},P=async k=>{const H=d.get();let ie={id:"",value:k};if(H)try{const X=await H(k);typeof X=="string"?ie.value=X:ie=X,ie.id||(ie.id=_a())}catch{return!1}else ie.id=_a();return l.get()&&(ie.value=ie.value.trim()),O(ie.value)?(S.update(X=>(X.push(ie),X)),!0):!1};async function V(k,H=!1){const ie=v.get(),X=k.id;let N=k;if(ie)try{N=await ie(N),N.id||(N.id=_a())}catch{return!1}return l.get()&&(N.value=N.value.trim()),O(N.value)?(S.update(M=>M.map(F=>F.id===X?N:F)),H&&T.set(N),!0):!1}async function W(k){const H=p.get();if(H)try{if(!await H(k))return!1}catch{return!1}const X=S.get().findIndex(N=>N.id===k.id);return S.update(N=>(N.splice(X,1),N)),!0}const D=tr([a,E],([k,H])=>ie=>k&&H?.id===ie.id),j=It(Uo(""),{stores:[s],returned:([k])=>({"data-melt-id":t.root,"data-disabled":ar(k),disabled:ar(k)}),action:k=>({destroy:Zt(dt(k,"mousedown",ie=>{const X=ie.target;bt(X)&&X.hasAttribute(GR())&&(ie.preventDefault(),Bn(t.input))}))})}),I=It(Uo("input"),{stores:[s,i],returned:([k,H])=>({"data-melt-id":t.input,"data-disabled":ar(k),disabled:ar(k),placeholder:H}),action:k=>{const H=X=>{const N=qr(t.root);let M=[],F=-1,A=-1,L=-1;return N&&(M=Array.from(N.querySelectorAll(ra("tag"))),F=M.findIndex(Y=>Y.getAttribute("data-tag-id")===X),A=F-1,L=F+1),{tagsEl:M,selectedIndex:F,prevIndex:A,nextIndex:L}};return{destroy:Zt(dt(k,"focus",()=>{const X=qr(t.root);X&&X.setAttribute("data-focus",""),k.setAttribute("data-focus","")}),dt(k,"blur",async()=>{const X=qr(t.root);X&&X.removeAttribute("data-focus"),k.removeAttribute("data-focus"),T.set(null);const N=k.value;if(!N)return;const M=u.get();M==="clear"?k.value="":M==="add"&&(O(N)&&await P(N)?(k.value="",g.set("")):_.set(!0))}),dt(k,"paste",async X=>{const N=X.clipboardData?.getData("text");if(!N||!c.get())return;X.preventDefault();const M=N.split(",");e:for(let F=0;F<M.length;F++){const A=M[F];if(O(A)&&await P(A))continue e;k.value=M.slice(F).join(","),_.set(!0);return}}),dt(k,"keydown",async X=>{const N=T.get();if(N){if(X.key.length===1)T.set(null);else if(X.key===Ae.ARROW_LEFT){X.preventDefault();const{tagsEl:M,prevIndex:F}=H(N.id);F>=0&&Fn(M[F],T)}else if(X.key===Ae.ARROW_RIGHT){X.preventDefault();const{tagsEl:M,nextIndex:F}=H(N.id);F===-1||F>=M.length?(T.set(null),Bn(t.input,"start")):Fn(M[F],T)}else if(X.key===Ae.HOME){X.preventDefault();const{tagsEl:M}=H(N.id);M.length>0&&Fn(M[0],T)}else if(X.key===Ae.END)X.preventDefault(),T.set(null),Bn(t.input);else if(X.key===Ae.DELETE){X.preventDefault();const M=N,{tagsEl:F,nextIndex:A}=H(N.id);A===-1||A>=F.length?(T.set(null),Bn(t.input)):Fn(F[A],T),await W(M)||T.set(M)}else if(X.key===Ae.BACKSPACE){X.preventDefault();const M=N,{tagsEl:F,nextIndex:A,prevIndex:L}=H(N.id);L>=0?Fn(F[L],T):A===-1||A>=F.length?(T.set(null),Bn(t.input,"start")):Fn(F[A],T),await W(M)||T.set(M)}else if(X.key===Ae.ENTER){X.preventDefault();const M=document.querySelector(ra("edit")+`[data-tag-id="${N.id}"]`);if(!M)return;E.set({id:N.id,value:N.value}),M.textContent=N.value,await Yn(),Pv(ra("edit")+`[data-tag-id="${N.id}"]`)}}else if(X.key===Ae.ENTER){X.preventDefault();const M=k.value;if(!M)return;O(M)&&await P(M)?(k.value="",g.set("")):_.set(!0)}else if(k.selectionStart===0&&k.selectionEnd===0&&(X.key===Ae.ARROW_LEFT||X.key===Ae.BACKSPACE)){X.preventDefault();const{tagsEl:M}=H(""),F=M.at(-1);if(!F)return;Fn(F,T)}}),dt(k,"input",()=>{g.set(k.value)}))}}}),q=It(Uo("tag"),{stores:[T,E,s,a],returned:([k,H,ie,X])=>N=>{const M=ie||N.disabled,F=X&&N.editable!==!1,A=M?void 0:k?.id===N?.id,L=F?H?.id===N?.id:void 0;return{"aria-hidden":L,"aria-selected":A,"data-tag-id":N.id,"data-tag-value":N.value,"data-selected":A?"":void 0,"data-editable":F?"":void 0,"data-editing":L?"":void 0,"data-disabled":ar(M),disabled:ar(M),hidden:L,tabindex:-1,style:L?Ci({position:"absolute",opacity:0,"pointer-events":"none",margin:0}):void 0}},action:k=>{const H=()=>({id:k.getAttribute("data-tag-id")??""});return{destroy:Zt(dt(k,"mousedown",X=>{const N=E.get();N&&N.id!==H().id||(Bn(t.input),X.preventDefault(),Fn(k,T),E.set(null))}),dt(k,"click",X=>{const N=E.get();N&&N.id===H().id||(Bn(t.input),X.preventDefault(),Fn(k,T),E.set(null))}),dt(k,"dblclick",async()=>{if(!$i||!k.hasAttribute("data-editable"))return;const X=document.querySelector(ra("edit")+`[data-tag-id="${H().id}"]`);if(!X)return;const N=k.getAttribute("data-tag-value")??"";E.set({id:k.getAttribute("data-tag-id")??"",value:N}),X.textContent=N,await Yn(),Pv(ra("edit")+`[data-tag-id="${H().id}"]`)}))}}}),$=It(Uo("delete-trigger"),{stores:[T,E,s,a],returned:([k,H,ie,X])=>N=>{const M=ie||N.disabled,F=X&&N.editable!==!1,A=M?void 0:k?.id===N?.id,L=F?H?.id===N?.id:void 0;return{"aria-selected":A,"data-tag-id":N.id,"data-tag-value":N.value,"data-selected":A?"":void 0,"data-editing":L?"":void 0,"data-disabled":ar(M),disabled:ar(M),tabindex:-1}},action:k=>{function H(){if(k.hasAttribute("data-disabled"))return;const X=k.getAttribute("data-tag-value")??"",N=k.getAttribute("data-tag-id")??"";W({id:N,value:X}),Bn(t.input)}return{destroy:Zt(dt(k,"click",X=>{X.stopPropagation(),H()}),dt(k,"keydown",X=>{X.key!==Ae.ENTER&&X.key!==Ae.SPACE||(X.preventDefault(),H())}))}}}),K=It(Uo("edit"),{stores:D,returned:k=>H=>{const ie=k(H);return{"aria-hidden":!ie,"data-tag-id":H.id,"data-tag-value":H.value,hidden:ie?void 0:!0,contenteditable:ie,tabindex:-1,style:ie?void 0:Ci({position:"absolute",opacity:0,"pointer-events":"none",margin:0})}},action:k=>{const H=()=>{const M=k.getAttribute("data-tag-id")??"",F=k.getAttribute("data-tag-value")??"";return{id:M,value:F}};let ie=gt,X=gt;const N=Zr(D,M=>{ie(),X(),M(H())&&(ie=_g(k).destroy,X=Zt(dt(k,"blur",()=>{E.set(null),k.textContent=H().value,qr(t.root)?.removeAttribute("data-invalid-edit"),k.removeAttribute("data-invalid-edit")}),dt(k,"keydown",async F=>{if(F.key===Ae.ENTER){F.preventDefault();const A=k.textContent;if(!A)return;const L={id:H().id,value:A};O(A)&&await V(L,!0)?(k.textContent=L.value,b.set(""),Bn(t.input)):(qr(t.root)?.setAttribute("data-invalid-edit",""),k.setAttribute("data-invalid-edit",""))}else F.key===Ae.ESCAPE&&(F.preventDefault(),F.stopImmediatePropagation(),k.textContent=H().value,b.set(""),Fn(k,T),Bn(t.input))}),dt(k,"input",()=>{b.set(k.textContent||"")})))});return{destroy(){ie(),X(),N()}}}}),ae=tr(T,k=>H=>k?.id===H.id);return Zr(g,()=>{_.set(!1)}),Zr(_,k=>{k?(qr(t.root)?.setAttribute("data-invalid",""),qr(t.input)?.setAttribute("data-invalid","")):(qr(t.root)?.removeAttribute("data-invalid"),qr(t.input)?.removeAttribute("data-invalid"))}),Zr(b,()=>{if(!$i)return;qr(t.root)?.removeAttribute("data-invalid-edit"),Array.from(document.querySelectorAll(ra("edit")+"[data-invalid-edit]")).forEach(H=>{H.removeAttribute("data-invalid-edit")})}),{ids:t,elements:{root:j,input:I,deleteTrigger:$,edit:K,tag:q},states:{tags:S,inputValue:Yu(g),inputInvalid:Yu(_),selected:Yu(T)},helpers:{isSelected:ae,isEditing:D,isInputValid:O,addTag:P,updateTag:V,removeTag:W},options:n}}const jR={type:"single",orientation:"horizontal",loop:!0,rovingFocus:!0,disabled:!1,defaultValue:""},{name:Rv,selector:pu}=vo("toggle-group"),HR=r=>{const e={...jR,...r},t=Fs(Ys(e,"value")),{type:n,orientation:i,loop:s,rovingFocus:a,disabled:o}=t,l=e.defaultValue?e.defaultValue:e.type==="single"?void 0:[],u=e.value??Xe(l),c=za(u,e?.onValueChange),f=It(Rv(),{stores:i,returned:p=>({role:"group","data-orientation":p})}),h=It(Rv("item"),{stores:[c,o,i,n],returned:([p,v,m,g])=>_=>{const b=typeof _=="string"?_:_.value,w=typeof _=="string"?!1:!!_.disabled,S=v||w,T=Array.isArray(p)?p.includes(b):p===b,E=g==="single",O=g==="multiple"||g===void 0;return{disabled:ar(S),pressed:T,"data-orientation":m,"data-disabled":ar(S),"data-state":T?"on":"off","data-value":b,"aria-pressed":O?T:void 0,"aria-checked":E?T:void 0,type:"button",role:E?"radio":void 0,tabindex:T?0:-1}},action:p=>{let v=gt;const m=p.closest(pu());if(!bt(m))return{};const g=Array.from(m.querySelectorAll(pu("item"))),_=c.get();!(Array.isArray(_)?_.length>0:!!_)&&g[0]===p&&(p.tabIndex=0);function w(){const T=p.dataset.value,E=p.dataset.disabled==="true";return{value:T,disabled:E}}function S(){const{value:T,disabled:E}=w();T===void 0||E||c.update(O=>Array.isArray(O)?O.includes(T)?O.filter(P=>P!==T):[...O,T]:O===T?void 0:T)}return v=Zt(dt(p,"click",()=>{S()}),dt(p,"keydown",T=>{if(T.key===Ae.SPACE||T.key===Ae.ENTER){T.preventDefault(),S();return}if(!a.get())return;const E=T.currentTarget;if(!bt(E))return;const O=E.closest(pu());if(!bt(O))return;const P=Array.from(O.querySelectorAll(pu("item")+":not([data-disabled])")).filter($=>bt($)),V=P.indexOf(E),W=dC(E),D=i.get(),j={horizontal:W==="rtl"?Ae.ARROW_LEFT:Ae.ARROW_RIGHT,vertical:Ae.ARROW_DOWN}[D??"horizontal"],I={horizontal:W==="rtl"?Ae.ARROW_RIGHT:Ae.ARROW_LEFT,vertical:Ae.ARROW_UP}[D??"horizontal"],q=s.get();if(T.key===j){T.preventDefault();const $=V+1;$>=P.length&&q?fs(P[0]):fs(P[$])}else if(T.key===I){T.preventDefault();const $=V-1;$<0&&q?fs(P[P.length-1]):fs(P[$])}else T.key===Ae.HOME?(T.preventDefault(),fs(P[0])):T.key===Ae.END&&(T.preventDefault(),fs(P[P.length-1]))})),{destroy:v}}}),d=tr(c,p=>v=>Array.isArray(p)?p.includes(v):p===v);return{elements:{root:f,item:h},states:{value:c},helpers:{isPressed:d},options:t}},VR={positioning:{placement:"bottom"},arrowSize:8,defaultOpen:!1,closeOnPointerDown:!0,openDelay:1e3,closeDelay:0,forceVisible:!1,portal:"body",escapeBehavior:"close",disableHoverableContent:!1,group:void 0},{name:Df}=vo("tooltip"),gu=new Map,WR=["trigger","content"];function qR(r){const e={...VR,...r},t=Fs(Ys(e,"open","ids")),{positioning:n,arrowSize:i,closeOnPointerDown:s,openDelay:a,closeDelay:o,forceVisible:l,portal:u,escapeBehavior:c,disableHoverableContent:f,group:h}=t,d=e.open??Xe(e.defaultOpen),p=za(d,e?.onOpenChange),v=Xe(null),m=Fs({...fg(WR),...e.ids});let g=!1,_=!1,b=!1;const w=I=>$i?document.getElementById(m[I].get()):null;let S=null,T=null;function E(I){T&&(window.clearTimeout(T),T=null),S||(S=window.setTimeout(()=>{p.set(!0),v.update(q=>q??I),S=null},a.get()))}function O(I){if(S&&(window.clearTimeout(S),S=null),I&&j){v.set("pointer");return}T||(T=window.setTimeout(()=>{p.set(!1),v.set(null),I&&(g=!1),T=null},o.get()))}const P=tr([p,l],([I,q])=>I||q),V=It(Df("trigger"),{stores:[m.content,m.trigger,p],returned:([I,q,$])=>({"aria-describedby":I,id:q,"data-state":$?"open":"closed"}),action:I=>{const q=Zt(dt(I,"pointerdown",()=>{s.get()&&(p.set(!1),g=!0,S&&(window.clearTimeout(S),S=null))}),dt(I,"pointerenter",$=>{_=!0,!hv($)&&E("pointer")}),dt(I,"pointerleave",$=>{_=!1,!hv($)&&S&&(window.clearTimeout(S),S=null)}),dt(I,"focus",()=>{g||E("focus")}),dt(I,"blur",()=>O(!0)));return{destroy(){q(),_=!1}}}}),W=It(Df("content"),{stores:[P,p,u,m.content],returned:([I,q,$,K])=>({role:"tooltip",hidden:I?void 0:!0,tabindex:-1,style:I?void 0:Ci({display:"none"}),id:K,"data-portal":nC($),"data-state":q?"open":"closed"}),action:I=>{let q=gt,$=gt,K=gt,ae=gt;const k=Zr([P,n,u],([X,N,M])=>{$(),q(),K(),ae();const F=w("trigger");!X||!F||Yn().then(()=>{$(),q(),K(),ae();const A=Ux(I,M);A!==null&&($=s1(I,A).destroy),q=Zx(F,I,N).destroy,K=_g(I).destroy,ae=Gx(I,{behaviorType:c,handler:()=>{S&&(window.clearTimeout(S),S=null),p.set(!1)}}).destroy})});function H(X){if(!p.get())return;const N=X.target;if(!_o(N)&&!aC(N))return;const M=w("trigger");M&&N.contains(M)&&O()}const ie=Zt(dt(I,"pointerenter",()=>{b=!0,E("pointer")}),dt(I,"pointerleave",()=>{b=!1}),dt(I,"pointerdown",()=>E("pointer")),Bs(window,"scroll",H,{capture:!0}));return{destroy(){b=!1,ie(),$(),q(),k(),K()}}}}),D=It(Df("arrow"),{stores:i,returned:I=>({"data-arrow":!0,style:Ci({position:"absolute",width:`var(--arrow-size, ${I}px)`,height:`var(--arrow-size, ${I}px)`})})});let j=!1;return Zr(p,I=>{const q=h.get();if(q===void 0||q===!1)return;if(!I){gu.get(q)===p&&gu.delete(q);return}gu.get(q)?.set(!1),gu.set(q,p)}),Zr([p,v],([I,q])=>{if(!(!I||!$i))return Zt(Bs(document,"mousemove",$=>{const K=w("content"),ae=w("trigger");if(!K||!ae)return;const k=f.get()?[ae]:[ae,K],H=RC(k);j=_||b||GC($,H),q==="pointer"&&(j||O())}))}),{ids:m,elements:{trigger:V,content:W,arrow:D},states:{open:p},options:t}}const XR=r=>r;function YR(r){const e=r-1;return e*e*e+1}function a1(r,{delay:e=0,duration:t=400,easing:n=XR}={}){const i=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:n,css:s=>`opacity: ${s*i}`}}function bg(r,{delay:e=0,duration:t=400,easing:n=YR,axis:i="y"}={}){const s=getComputedStyle(r),a=+s.opacity,o=i==="y"?"height":"width",l=parseFloat(s[o]),u=i==="y"?["top","bottom"]:["left","right"],c=u.map(g=>`${g[0].toUpperCase()}${g.slice(1)}`),f=parseFloat(s[`padding${c[0]}`]),h=parseFloat(s[`padding${c[1]}`]),d=parseFloat(s[`margin${c[0]}`]),p=parseFloat(s[`margin${c[1]}`]),v=parseFloat(s[`border${c[0]}Width`]),m=parseFloat(s[`border${c[1]}Width`]);return{delay:e,duration:t,easing:n,css:g=>`overflow: hidden;opacity: ${Math.min(g*20,1)*a};${o}: ${g*l}px;padding-${u[0]}: ${g*f}px;padding-${u[1]}: ${g*h}px;margin-${u[0]}: ${g*d}px;margin-${u[1]}: ${g*p}px;border-${u[0]}-width: ${g*v}px;border-${u[1]}-width: ${g*m}px;min-${o}: 0`}}var $R=pe('<div><div class="collapsible"><div class="item svelte-1009h7f"><span><!></span></div></div></div>'),KR=pe('<div><div class="header svelte-1009h7f"><span> </span> <button><div class="abs-center"><!></div></button></div> <!></div>');function hn(r,e){He(e,!0);const t=()=>Ie(u,"$root",a),n=()=>Ie(f,"$trigger",a),i=()=>Ie(h,"$open",a),s=()=>Ie(c,"$content",a),[a,o]=Mt();let l=ge(e,"collapsed",3,!1);const{elements:{root:u,content:c,trigger:f},states:{open:h}}=WC();h.set(!l());var d=KR();Nt(d,()=>({...t(),class:"root"}),void 0,void 0,void 0,"svelte-1009h7f");var p=ye(d),v=ye(p);Nt(v,()=>({class:"label",...n()}),void 0,void 0,void 0,"svelte-1009h7f");var m=ye(v);ur(v,O=>f?.(O));var g=ee(v,2);Nt(g,()=>({...n()}),void 0,void 0,void 0,"svelte-1009h7f");var _=ye(g),b=ye(_);{var w=O=>{var P=er("-");le(O,P)},S=O=>{var P=er("+");le(O,P)};Ze(b,O=>{i()?O(w):O(S,!1)})}ur(g,O=>f?.(O));var T=ee(p,2);{var E=O=>{var P=$R();Nt(P,()=>({...s()}),void 0,void 0,void 0,"svelte-1009h7f");var V=ye(P),W=ye(V),D=ye(W),j=ye(D);Yi(j,()=>e.children),ur(P,I=>c?.(I)),_l(3,P,()=>bg),le(O,P)};Ze(T,O=>{i()&&O(E)})}ur(d,O=>u?.(O)),qe(()=>kt(m,e.title)),le(r,d),Ve(),o()}var ZR=pe("<div><!></div>");function rt(r,e){let t=rf(e,["$$slots","$$events","$$legacy","children"]);var n=ZR();Nt(n,()=>({class:"row",...t}),void 0,void 0,void 0,"svelte-1owbhwc");var i=ye(n);Yi(i,()=>e.children),le(r,n)}let JR=0;var QR=pe('<div class="container svelte-aw96os"><div class="label svelte-aw96os"> </div> <div class="switch svelte-aw96os"><input type="checkbox" class="svelte-aw96os"/> <label class="svelte-aw96os"></label></div></div>');function o1(r,e){He(e,!0);let t=ge(e,"label",3,""),n=ge(e,"checked",15,!1),i="input_toggle_"+JR++;var s=QR(),a=ye(s),o=ye(a),l=ee(a,2),u=ye(l),c=ee(u,2);qe(()=>{cr(s,e.style),kt(o,t()),Qe(u,"id",i),Qe(c,"for",i)}),Ix(u,n),le(r,s),Ve()}var ek=pe('<label class="svelte-1dqsdwl"> <input type="number"/></label>');function Se(r,e){He(e,!0);let t=ge(e,"value",15,0),n=ge(e,"step",3,1),i=ge(e,"label",3,""),s=ge(e,"placeholder",3,""),a=Ot(()=>e.width?"width: "+e.width+"px;":"");function o(f){f.deltaY*-1>0?e.max&&t()<e.max&&t(t()+n()):e.min&&t()>e.min&&t(t()-n())}var l=ek(),u=ye(l),c=ee(u);c.__input=function(...f){e.oninput?.apply(this,f)},c.__change=function(...f){e.onchange?.apply(this,f)},qe(()=>{kt(u,`${i()??""} `),Qe(c,"min",e.min),Qe(c,"max",e.max),Qe(c,"step",n()),Qe(c,"placeholder",s()),cr(c,z(a))}),We("wheel",c,o),go(c,t),le(r,l),Ve()}is(["input","change"]);var tk={grad:.9,turn:360,rad:360/(2*Math.PI)},ii=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},$t=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},Jr=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},l1=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},kv=function(r){return{r:Jr(r.r,0,255),g:Jr(r.g,0,255),b:Jr(r.b,0,255),a:Jr(r.a)}},Lf=function(r){return{r:$t(r.r),g:$t(r.g),b:$t(r.b),a:$t(r.a,3)}},rk=/^#([0-9a-f]{3,8})$/i,mu=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},u1=function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=Math.max(e,t,n),a=s-Math.min(e,t,n),o=a?s===e?(t-n)/a:s===t?2+(n-e)/a:4+(e-t)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:i}},c1=function(r){var e=r.h,t=r.s,n=r.v,i=r.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),a=n*(1-t),o=n*(1-(e-s)*t),l=n*(1-(1-e+s)*t),u=s%6;return{r:255*[n,o,a,a,l,n][u],g:255*[l,n,n,o,a,a][u],b:255*[a,a,l,n,n,o][u],a:i}},Mv=function(r){return{h:l1(r.h),s:Jr(r.s,0,100),l:Jr(r.l,0,100),a:Jr(r.a)}},Ov=function(r){return{h:$t(r.h),s:$t(r.s),l:$t(r.l),a:$t(r.a,3)}},Iv=function(r){return c1((t=(e=r).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},al=function(r){return{h:(e=u1(r)).h,s:(i=(200-(t=e.s))*(n=e.v)/100)>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,n,i},nk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ik=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sk=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ak=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Bv={string:[[function(r){var e=rk.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?$t(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?$t(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=sk.exec(r)||ak.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:kv({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=nk.exec(r)||ik.exec(r);if(!e)return null;var t,n,i=Mv({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(tk[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Iv(i)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=i===void 0?1:i;return ii(e)&&ii(t)&&ii(n)?kv({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(r){var e=r.h,t=r.s,n=r.l,i=r.a,s=i===void 0?1:i;if(!ii(e)||!ii(t)||!ii(n))return null;var a=Mv({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return Iv(a)},"hsl"],[function(r){var e=r.h,t=r.s,n=r.v,i=r.a,s=i===void 0?1:i;if(!ii(e)||!ii(t)||!ii(n))return null;var a=function(o){return{h:l1(o.h),s:Jr(o.s,0,100),v:Jr(o.v,0,100),a:Jr(o.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return c1(a)},"hsv"]]},Fv=function(r,e){for(var t=0;t<e.length;t++){var n=e[t][0](r);if(n)return[n,e[t][1]]}return[null,void 0]},ok=function(r){return typeof r=="string"?Fv(r.trim(),Bv.string):typeof r=="object"&&r!==null?Fv(r,Bv.object):[null,void 0]},Uf=function(r,e){var t=al(r);return{h:t.h,s:Jr(t.s+100*e,0,100),l:t.l,a:t.a}},Nf=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},Dv=function(r,e){var t=al(r);return{h:t.h,s:t.s,l:Jr(t.l+100*e,0,100),a:t.a}},Lv=function(){function r(e){this.parsed=ok(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return $t(Nf(this.rgba),2)},r.prototype.isDark=function(){return Nf(this.rgba)<.5},r.prototype.isLight=function(){return Nf(this.rgba)>=.5},r.prototype.toHex=function(){return e=Lf(this.rgba),t=e.r,n=e.g,i=e.b,a=(s=e.a)<1?mu($t(255*s)):"","#"+mu(t)+mu(n)+mu(i)+a;var e,t,n,i,s,a},r.prototype.toRgb=function(){return Lf(this.rgba)},r.prototype.toRgbString=function(){return e=Lf(this.rgba),t=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+i+", "+s+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,s},r.prototype.toHsl=function(){return Ov(al(this.rgba))},r.prototype.toHslString=function(){return e=Ov(al(this.rgba)),t=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+s+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,s},r.prototype.toHsv=function(){return e=u1(this.rgba),{h:$t(e.h),s:$t(e.s),v:$t(e.v),a:$t(e.a,3)};var e},r.prototype.invert=function(){return vr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),vr(Uf(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),vr(Uf(this.rgba,-e))},r.prototype.grayscale=function(){return vr(Uf(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),vr(Dv(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),vr(Dv(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?vr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):$t(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=al(this.rgba);return typeof e=="number"?vr({h:e,s:t.s,l:t.l,a:t.a}):$t(t.h)},r.prototype.isEqual=function(e){return this.toHex()===vr(e).toHex()},r}(),vr=function(r){return r instanceof Lv?r:new Lv(r)},lk=pe('<input type="hidden"/>'),uk=pe('<div role="slider" tabindex="0"><div class="track svelte-84foe7"></div> <div class="thumb svelte-84foe7"></div></div> <!>',1);function Mc(r,e){He(e,!1);const t=pt(),n=pt(),i=pt(),s=pt();let a=ge(e,"min",8,0),o=ge(e,"max",8,100),l=ge(e,"step",8,1),u=ge(e,"value",12,50),c=ge(e,"ariaValueText",8,k=>k.toString()),f=ge(e,"name",8,void 0),h=ge(e,"direction",8,"horizontal"),d=ge(e,"reverse",8,!1),p=ge(e,"keyboardOnly",8,!1),v=ge(e,"slider",12,void 0),m=ge(e,"ariaLabel",8,void 0),g=ge(e,"ariaLabelledBy",8,void 0),_=ge(e,"ariaControls",8,void 0),b=ge(e,"isDragging",12,!1);const w=mo();function S(k){const H=1/z(i),ie=Math.round(k*H)/H;return Math.max(z(t),Math.min(z(n),ie))}function T(k){const H=k.shiftKey?z(i)*10:z(i);k.key==="ArrowUp"||k.key==="ArrowRight"?(u(u()+H),k.preventDefault()):k.key==="ArrowDown"||k.key==="ArrowLeft"?(u(u()-H),k.preventDefault()):k.key==="Home"?(u(z(t)),k.preventDefault()):k.key==="End"?(u(z(n)),k.preventDefault()):k.key==="PageUp"?(u(u()+z(i)*10),k.preventDefault()):k.key==="PageDown"&&(u(u()-z(i)*10),k.preventDefault()),u(S(u())),w("input",u())}const E={horizontal:{clientSize:"clientWidth",offset:"left",client:"clientX"},vertical:{clientSize:"clientHeight",offset:"top",client:"clientY"}};function O(k){const H=v()?.[E[h()].clientSize]||120,ie=v()?.getBoundingClientRect()[E[h()].offset]||0;let X=k[E[h()].client]-ie;h()==="vertical"&&(X=-1*X+H),d()?u(z(n)-X/H*(z(n)-z(t))):u(X/H*(z(n)-z(t))+z(t)),u(S(u())),w("input",u())}function P(k){O(k),b(!0)}function V(k){b()&&O(k)}function W(){b(!1)}function D(k){O({clientX:k.changedTouches[0].clientX,clientY:k.changedTouches[0].clientY})}Ut(()=>Le(a()),()=>{ve(t,typeof a()=="string"?parseFloat(a()):a())}),Ut(()=>Le(o()),()=>{ve(n,typeof o()=="string"?parseFloat(o()):o())}),Ut(()=>Le(l()),()=>{ve(i,typeof l()=="string"?parseFloat(l()):l())}),Ut(()=>(Le(u()),z(t),z(n)),()=>{ve(s,((u()-z(t))/(z(n)-z(t))*1).toFixed(4))}),Xs(),Ar();var j=uk();We("mousemove",Lr,V),We("mouseup",Lr,W);var I=be(j);let q,$;as(I,k=>v(k),()=>v());var K=ee(I,2);{var ae=k=>{var H=lk();qe(()=>{Qe(H,"name",f()),mn(H,u())}),le(k,H)};Ze(K,k=>{f()&&k(ae)})}qe(k=>{q=ss(I,1,"slider svelte-84foe7",null,q,{reverse:d()}),Qe(I,"aria-orientation",h()),Qe(I,"aria-valuemax",z(n)),Qe(I,"aria-valuemin",z(t)),Qe(I,"aria-valuenow",u()),Qe(I,"aria-valuetext",k),Qe(I,"aria-label",m()),Qe(I,"aria-labelledby",g()),Qe(I,"aria-controls",_()),$=cr(I,"",$,{"--position":z(s)})},[()=>(Le(c()),Le(u()),R(()=>c()(u())))]),We("keydown",I,T),We("mousedown",I,jA(function(...k){(p()?void 0:P)?.apply(this,k)})),We("touchstart",I,xn(function(...k){(p()?void 0:D)?.apply(this,k)}),void 0,!1),We("touchmove",I,xn(function(...k){(p()?void 0:D)?.apply(this,k)}),void 0,!1),We("touchend",I,xn(function(...k){(p()?void 0:D)?.apply(this,k)}),void 0,!1),le(r,j),Ve()}var ck=pe('<div class="picker svelte-1re3ldl"><!> <div class="s svelte-1re3ldl"><!></div> <div class="v svelte-1re3ldl"><!></div></div>');function fk(r,e){He(e,!1);const t=mo();let n=ge(e,"components",8),i=ge(e,"h",8),s=ge(e,"s",12),a=ge(e,"v",12),o=ge(e,"isDark",8),l=ge(e,"texts",8),u=pt(),c=!1,f=pt(),h=pt({x:100,y:0});function d(j,I,q){return Math.min(Math.max(I,j),q)}function p(j){const{width:I,left:q,height:$,top:K}=z(u).getBoundingClientRect(),ae={x:d(j.clientX-q,0,I),y:d(j.clientY-K,0,$)};s(d(ae.x/I,0,1)*100),a(d(($-ae.y)/$,0,1)*100)}function v(j){j.button===0&&(c=!0,p(j))}function m(){c=!1}function g(j){c&&p(j)}function _(j){j.target.isSameNode(z(u))}function b(j){j.preventDefault(),p(j.changedTouches[0])}Ut(()=>(Le(i()),vr),()=>{typeof i()=="number"&&ve(f,vr({h:i(),s:100,v:100,a:1}).toHex())}),Ut(()=>(Le(s()),Le(a()),z(u)),()=>{typeof s()=="number"&&typeof a()=="number"&&z(u)&&ve(h,{x:s(),y:100-a()})}),Ut(()=>(Le(s()),Le(a())),()=>{t("input",{s:s(),v:a()})}),Xs(),Ar();var w=ck();We("mouseup",Lr,m),We("mousedown",Lr,_),We("mousemove",Lr,g);let S;var T=ye(w);kr(T,()=>n().pickerIndicator,(j,I)=>{I(j,{get pos(){return z(h)},get isDark(){return o()}})});var E=ee(T,2);let O;var P=ye(E);Mc(P,{keyboardOnly:!0,ariaValueText:j=>`${j}%`,get ariaLabel(){return Le(l()),R(()=>l().label.s)},get value(){return s()},set value(j){s(j)},$$legacy:!0});var V=ee(E,2);let W;var D=ye(V);Mc(D,{keyboardOnly:!0,ariaValueText:j=>`${j}%`,direction:"vertical",get ariaLabel(){return Le(l()),R(()=>l().label.v)},get value(){return a()},set value(j){a(j)},$$legacy:!0}),as(w,j=>ve(u,j),()=>z(u)),qe(()=>{S=cr(w,"",S,{"--picker-color-bg":z(f)}),O=cr(E,"",O,{"--pos-y":(z(h),R(()=>z(h).y))}),W=cr(V,"",W,{"--pos-x":(z(h),R(()=>z(h).x))})}),We("mousedown",w,xn(v)),We("touchstart",w,b,void 0,!1),We("touchmove",w,xn(b),void 0,!1),We("touchend",w,b,void 0,!1),le(r,w),Ve()}var hk=pe("<div></div>");function dk(r,e){He(e,!1);let t=ge(e,"pos",8),n=ge(e,"isDark",8);Ar();var i=hk();let s,a;qe(()=>{s=ss(i,1,"picker-indicator svelte-r05dnq",null,s,{"is-dark":n()}),a=cr(i,"",a,{"--pos-x":(Le(t()),R(()=>t().x)),"--pos-y":(Le(t()),R(()=>t().y))})}),le(r,i),Ve()}var pk=pe('<input class="svelte-c6e38s"/>'),gk=pe('<input type="number" min="0" max="255" class="svelte-c6e38s"/> <input type="number" min="0" max="255" class="svelte-c6e38s"/> <input type="number" min="0" max="255" class="svelte-c6e38s"/>',1),mk=pe('<input type="number" min="0" max="360" class="svelte-c6e38s"/> <input type="number" min="0" max="100" class="svelte-c6e38s"/> <input type="number" min="0" max="100" class="svelte-c6e38s"/>',1),vk=pe('<input type="number" min="0" max="1" step="0.01" class="svelte-c6e38s"/>'),_k=pe('<button type="button" class="svelte-c6e38s"><span class="disappear svelte-c6e38s" aria-hidden="true"> </span> <span class="appear svelte-c6e38s"> </span></button>'),bk=pe('<div class="button-like svelte-c6e38s"> </div>'),yk=pe('<div class="text-input svelte-c6e38s"><div class="input-container svelte-c6e38s"><!> <!></div> <!></div>');function xk(r,e){He(e,!1);const t=pt(),n=pt(),i=pt(),s=pt(),a=pt(),o=mo();let l=ge(e,"isAlpha",8),u=ge(e,"rgb",12),c=ge(e,"hsv",12),f=ge(e,"hex",12),h=ge(e,"textInputModes",8),d=ge(e,"texts",8);const p=/^#?([A-F0-9]{6}|[A-F0-9]{8})$/i;let v=pt(h()[0]||"hex");function m(j){const I=j.target;p.test(I.value)&&(f(I.value),o("input",{hex:f()}))}function g(j){return function(I){u({...u(),[j]:parseFloat(I.target.value)}),o("input",{rgb:u()})}}function _(j){return function(I){c({...c(),[j]:parseFloat(I.target.value)}),o("input",{hsv:c()})}}Ut(()=>(Le(h()),z(v)),()=>{ve(t,h()[(h().indexOf(z(v))+1)%h().length])}),Ut(()=>Le(c()),()=>{ve(n,Math.round(c().h))}),Ut(()=>Le(c()),()=>{ve(i,Math.round(c().s))}),Ut(()=>Le(c()),()=>{ve(s,Math.round(c().v))}),Ut(()=>Le(c()),()=>{ve(a,c().a===void 0?1:Math.round(c().a*100)/100)}),Xs(),Ar();var b=yk(),w=ye(b),S=ye(w);{var T=j=>{var I=pk();cr(I,"",{},{flex:3}),qe(()=>{Qe(I,"aria-label",(Le(d()),R(()=>d().label.hex))),mn(I,f())}),We("input",I,m),le(j,I)},E=j=>{var I=Ke(),q=be(I);{var $=ae=>{var k=gk(),H=be(k),ie=Ot(()=>g("r")),X=ee(H,2),N=Ot(()=>g("g")),M=ee(X,2),F=Ot(()=>g("b"));qe(()=>{Qe(H,"aria-label",(Le(d()),R(()=>d().label.r))),mn(H,(Le(u()),R(()=>u().r))),Qe(X,"aria-label",(Le(d()),R(()=>d().label.g))),mn(X,(Le(u()),R(()=>u().g))),Qe(M,"aria-label",(Le(d()),R(()=>d().label.b))),mn(M,(Le(u()),R(()=>u().b)))}),We("input",H,function(...A){z(ie)?.apply(this,A)}),We("input",X,function(...A){z(N)?.apply(this,A)}),We("input",M,function(...A){z(F)?.apply(this,A)}),le(ae,k)},K=ae=>{var k=mk(),H=be(k),ie=Ot(()=>_("h")),X=ee(H,2),N=Ot(()=>_("s")),M=ee(X,2),F=Ot(()=>_("v"));qe(()=>{Qe(H,"aria-label",(Le(d()),R(()=>d().label.h))),mn(H,z(n)),Qe(X,"aria-label",(Le(d()),R(()=>d().label.s))),mn(X,z(i)),Qe(M,"aria-label",(Le(d()),R(()=>d().label.v))),mn(M,z(s))}),We("input",H,function(...A){z(ie)?.apply(this,A)}),We("input",X,function(...A){z(N)?.apply(this,A)}),We("input",M,function(...A){z(F)?.apply(this,A)}),le(ae,k)};Ze(q,ae=>{z(v)==="rgb"?ae($):ae(K,!1)},!0)}le(j,I)};Ze(S,j=>{z(v)==="hex"?j(T):j(E,!1)})}var O=ee(S,2);{var P=j=>{var I=vk(),q=Ot(()=>z(v)==="hsv"?_("a"):g("a"));qe(()=>{Qe(I,"aria-label",(Le(d()),R(()=>d().label.a))),mn(I,z(a))}),We("input",I,function(...$){z(q)?.apply(this,$)}),le(j,I)};Ze(O,j=>{l()&&j(P)})}var V=ee(w,2);{var W=j=>{var I=_k(),q=ye(I),$=ye(q),K=ee(q,2),ae=ye(K);qe(()=>{kt($,(Le(d()),z(v),R(()=>d().color[z(v)]))),kt(ae,`${Le(d()),R(()=>d().changeTo)??""} ${z(t)??""}`)}),We("click",I,()=>ve(v,z(t))),le(j,I)},D=j=>{var I=bk(),q=ye(I);qe(()=>kt(q,(Le(d()),z(v),R(()=>d().color[z(v)])))),le(j,I)};Ze(V,j=>{Le(h()),R(()=>h().length>1)?j(W):j(D,!1)})}le(r,b),Ve()}var wk=pe('<label class="svelte-rprnu7"><div class="container svelte-rprnu7"><input type="color" aria-haspopup="dialog" class="svelte-rprnu7"/> <div class="alpha svelte-rprnu7"></div> <div class="color svelte-rprnu7"></div></div> </label>');function Sk(r,e){let t=ge(e,"labelElement",12),n=ge(e,"hex",8),i=ge(e,"label",8),s=ge(e,"name",8,void 0);ge(e,"isOpen",8);function a(){}var o=wk(),l=ye(o),u=ye(l),c=ee(u,4);let f;var h=ee(l);as(o,d=>t(d),()=>t()),qe(()=>{Qe(u,"name",s()),mn(u,n()),f=cr(c,"",f,{background:n()}),kt(h,` ${i()??""}`)}),We("click",u,xn(a)),We("mousedown",u,xn(a)),We("click",o,xn(a)),We("mousedown",o,xn(a)),le(r,o)}var Tk=pe('<div aria-label="color picker"><!></div>');function Ek(r,e){let t=ge(e,"wrapper",12),n=ge(e,"isOpen",8),i=ge(e,"isDialog",8);var s=Tk();let a;var o=ye(s);fr(o,e,"default",{}),as(s,l=>t(l),()=>t()),qe(()=>{a=ss(s,1,"wrapper svelte-x2zmuu",null,a,{"is-open":n()}),Qe(s,"role",i()?"dialog":void 0)}),le(r,s)}const Gf={label:{h:"hue channel",s:"saturation channel",v:"brightness channel",r:"red channel",g:"green channel",b:"blue channel",a:"alpha channel",hex:"hex color",withoutColor:"without color"},color:{rgb:"rgb",hsv:"hsv",hex:"hex"},changeTo:"change to "},f1="a[href], area[href], input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";function Ak(r){return function(e){if(e.target===window)return;const t=e.target;if(!r.contains(t))return;const n=r.querySelectorAll(f1),i=n[0],s=n[n.length-1];function a(l){return l.code==="Tab"&&!l.shiftKey}function o(l){return l.code==="Tab"&&l.shiftKey}a(e)&&e.target===s?(e.preventDefault(),i.focus()):o(e)&&e.target===i&&(e.preventDefault(),s.focus())}}const Ck=r=>{const e=r.querySelector(f1);e&&e.focus();const t=Ak(r);return document.addEventListener("keydown",t),{destroy(){document.removeEventListener("keydown",t)}}};var Pk=pe('<label class="nullability-checkbox svelte-d1oaef"><div class="svelte-d1oaef"><input type="checkbox" class="svelte-d1oaef"/> <span class="svelte-d1oaef"></span></div> </label>');function Rk(r,e){He(e,!1);let t=ge(e,"isUndefined",12),n=ge(e,"texts",8);Ar();var i=Pk(),s=ye(i),a=ye(s),o=ee(s);qe(()=>kt(o,` ${Le(n()),R(()=>n().label.withoutColor)??""}`)),Ix(a,t),le(r,i),Ve()}var kk=pe('<input type="hidden"/>'),Mk=pe('<div class="a svelte-wyzo5s"><!></div>'),Ok=pe('<!> <!> <div class="h svelte-wyzo5s"><!></div> <!> <!> <!>',1),Ik=pe("<span><!> <!></span>");function Bk(r,e){He(e,!1);const t=mo();let n=ge(e,"components",24,()=>({})),i=ge(e,"label",8,"Choose a color"),s=ge(e,"name",8,void 0),a=ge(e,"nullable",8,!1),o=ge(e,"rgb",28,()=>a()?void 0:{r:255,g:0,b:0,a:1}),l=ge(e,"hsv",28,()=>a()?void 0:{h:0,s:100,v:100,a:1}),u=ge(e,"hex",28,()=>a()?void 0:"#ff0000"),c=ge(e,"color",12,void 0),f=ge(e,"isDark",12,!1),h=ge(e,"isAlpha",8,!0),d=ge(e,"isDialog",8,!0),p=ge(e,"isOpen",28,()=>!d()),v=ge(e,"position",8,"fixed"),m=ge(e,"isTextInput",8,!0),g=ge(e,"textInputModes",24,()=>["hex","rgb","hsv"]),_=ge(e,"sliderDirection",8,"vertical"),b=ge(e,"disableCloseClickOutside",8,!1),w=ge(e,"a11yColors",24,()=>[{bgHex:"#ffffff"}]),S=ge(e,"a11yLevel",8,"AA"),T=ge(e,"texts",8,void 0),E=ge(e,"a11yTexts",8,void 0),O=pt({r:255,g:0,b:0,a:1}),P=pt({h:0,s:100,v:100,a:1}),V=pt("#ff0000"),W=pt(!1),D=z(W),j=pt(),I=pt(),q=pt(),$,K=pt(),ae=pt();const k=12,H={pickerIndicator:dk,textInput:xk,input:Sk,nullabilityCheckbox:Rk,wrapper:Ek};function ie(){return{...H,...n()}}function X(){return{label:{...Gf.label,...T()?.label},color:{...Gf.color,...T()?.color},changeTo:T()?.changeTo??Gf.changeTo}}function N({target:oe}){d()&&(z(I).contains(oe)||z(I).isSameNode(oe)?p(!p()):p()&&!z(q).contains(oe)&&!b()&&p(!1))}function M({key:oe,target:_e}){if(d())oe==="Enter"&&z(I).contains(_e)?(p(!p()),setTimeout(()=>{$=Ck(z(q))})):oe==="Escape"&&p()&&(p(!1),z(j).contains(_e)&&(z(I)?.focus(),$?.destroy()));else return}function F(){if(z(W)&&!D){D=!0,l(o(u(void 0))),t("input",{color:c(),hsv:l(),rgb:o(),hex:u()});return}else if(D&&!z(W)){D=!1,l(z(P)),o(z(O)),u(z(V)),t("input",{color:c(),hsv:l(),rgb:o(),hex:u()});return}if(!l()&&!o()&&!u()){ve(W,!0),D=!0,t("input",{color:void 0,hsv:l(),rgb:o(),hex:u()});return}l()&&o()&&l().h===z(P).h&&l().s===z(P).s&&l().v===z(P).v&&l().a===z(P).a&&o().r===z(O).r&&o().g===z(O).g&&o().b===z(O).b&&o().a===z(O).a&&u()===z(V)||(ve(W,!1),l()&&l().a===void 0&&l(l().a=1,!0),z(P).a===void 0&&Js(P,z(P).a=1),o()&&o().a===void 0&&o(o().a=1,!0),z(O).a===void 0&&Js(O,z(O).a=1),u()?.substring(7)==="ff"&&u(u().substring(0,7)),u()?.substring(7)==="ff"&&u(u().substring(0,7)),l()&&(l().h!==z(P).h||l().s!==z(P).s||l().v!==z(P).v||l().a!==z(P).a||!o()&&!u())?(c(vr(l())),o(c().toRgb()),u(c().toHex())):o()&&(o().r!==z(O).r||o().g!==z(O).g||o().b!==z(O).b||o().a!==z(O).a||!l()&&!u())?(c(vr(o())),u(c().toHex()),l(c().toHsv())):u()&&(u()!==z(V)||!l()&&!o())&&(c(vr(u())),o(c().toRgb()),l(c().toHsv())),c()&&f(c().isDark()),u()&&(ve(P,Object.assign({},l())),ve(O,Object.assign({},o())),ve(V,u()),D=z(W),t("input",{color:c(),hsv:l(),rgb:o(),hex:u()})))}function A(oe){return _e=>{l()||l({...z(P)}),l(l()[oe]=_e.detail,!0)}}function L(oe){return _e=>{l()||l({...z(P)}),oe.forEach(me=>{l()&&l(l()[me]=_e.detail[me],!0)})}}async function Y(){if(await Yn(),v()!=="fixed"&&p()&&d()&&z(I)&&z(q)){const oe=z(q).getBoundingClientRect(),_e=z(I).getBoundingClientRect();(v()==="responsive"||v()==="responsive-y")&&(_e.top+oe.height+k>z(ae)?Js(q,z(q).style.top=`-${oe.height+k}px`):Js(q,z(q).style.top=`${_e.height+k}px`)),(v()==="responsive"||v()==="responsive-x")&&(_e.left+oe.width+k>z(K)?Js(q,z(q).style.left=`-${oe.width-_e.width+k}px`):Js(q,z(q).style.left=`${k}px`))}}Ut(()=>(Le(l()),Le(o()),Le(u())),()=>{(l()||o()||u())&&F()}),Ut(()=>z(W),()=>{z(W),F()}),Ut(()=>(z(K),z(ae),Le(p())),()=>{z(K),z(ae),p(),Y()}),Xs(),Ar();var te=Ik();We("mousedown",Lr,N),We("keyup",Lr,M),We("scroll",Lr,Y);var fe=ye(te);{var B=oe=>{var _e=Ke(),me=be(_e);kr(me,()=>ie().input,(Pe,Ue)=>{Ue(Pe,{isOpen:!0,get hex(){return u()},get label(){return i()},get name(){return s()},get labelElement(){return z(I)},set labelElement(se){ve(I,se)},$$legacy:!0})}),le(oe,_e)},G=oe=>{var _e=Ke(),me=be(_e);{var Pe=Ue=>{var se=kk();qe(()=>{mn(se,u()),Qe(se,"name",s())}),le(Ue,se)};Ze(me,Ue=>{s()&&Ue(Pe)},!0)}le(oe,_e)};Ze(fe,oe=>{d()?oe(B):oe(G,!1)})}var Q=ee(fe,2);kr(Q,()=>ie().wrapper,(oe,_e)=>{_e(oe,{get isOpen(){return p()},get isDialog(){return d()},get wrapper(){return z(q)},set wrapper(me){ve(q,me)},children:(me,Pe)=>{var Ue=Ok(),se=be(Ue);{var Te=x=>{var U=Ke(),J=be(U);{let ue=Dt(()=>R(X));kr(J,()=>ie().nullabilityCheckbox,(he,De)=>{De(he,{get texts(){return z(ue)},get isUndefined(){return z(W)},set isUndefined($e){ve(W,$e)},$$legacy:!0})})}le(x,U)};Ze(se,x=>{a()&&x(Te)})}var Be=ee(se,2),Ee=Ot(()=>L(["s","v"]));{let x=Dt(()=>R(ie)),U=Dt(()=>(Le(l()),z(P),R(()=>l()?.h??z(P).h))),J=Dt(()=>(Le(l()),z(P),R(()=>l()?.s??z(P).s))),ue=Dt(()=>(Le(l()),z(P),R(()=>l()?.v??z(P).v))),he=Dt(()=>R(X));fk(Be,{get components(){return z(x)},get h(){return z(U)},get s(){return z(J)},get v(){return z(ue)},get isDark(){return f()},get texts(){return z(he)},$$events:{input(...De){z(Ee)?.apply(this,De)}}})}var Ce=ee(Be,2),Z=ye(Ce),ne=Ot(()=>A("h"));{let x=Dt(()=>(Le(l()),z(P),R(()=>l()?.h??z(P).h))),U=Dt(()=>_()==="vertical"),J=Dt(()=>R(()=>X().label.h));Mc(Z,{min:0,max:360,step:1,get value(){return z(x)},get direction(){return _()},get reverse(){return z(U)},get ariaLabel(){return z(J)},$$events:{input(...ue){z(ne)?.apply(this,ue)}}})}var de=ee(Ce,2);{var we=x=>{var U=Mk();let J;var ue=ye(U),he=Ot(()=>A("a"));{let De=Dt(()=>(Le(l()),z(P),R(()=>l()?.a??z(P).a))),$e=Dt(()=>_()==="vertical"),nt=Dt(()=>R(()=>X().label.a));Mc(ue,{min:0,max:1,step:.01,get value(){return z(De)},get direction(){return _()},get reverse(){return z($e)},get ariaLabel(){return z(nt)},$$events:{input(...Et){z(he)?.apply(this,Et)}}})}qe(De=>J=cr(U,"",J,De),[()=>({"--alphaless-color":(Le(u()),z(V),R(()=>(u()?u():z(V)).substring(0,7)))})]),le(x,U)};Ze(de,x=>{h()&&x(we)})}var xe=ee(de,2);{var ke=x=>{var U=Ke(),J=be(U);{let ue=Dt(()=>u()??z(V)),he=Dt(()=>o()??z(O)),De=Dt(()=>l()??z(P)),$e=Dt(()=>R(X));kr(J,()=>ie().textInput,(nt,Et)=>{Et(nt,{get hex(){return z(ue)},get rgb(){return z(he)},get hsv(){return z(De)},get isAlpha(){return h()},get textInputModes(){return g()},get texts(){return z($e)},$$events:{input:({detail:it})=>{it.hsv?l(it.hsv):it.rgb?o(it.rgb):it.hex&&u(it.hex)}}})})}le(x,U)};Ze(xe,x=>{m()&&x(ke)})}var C=ee(xe,2);{var y=x=>{var U=Ke(),J=be(U);{let ue=Dt(()=>R(ie)),he=Dt(()=>u()||"#00000000");kr(J,()=>ie().a11yNotice,(De,$e)=>{$e(De,{get components(){return z(ue)},get a11yColors(){return w()},get hex(){return z(he)},get a11yTexts(){return E()},get a11yLevel(){return S()}})})}le(x,U)};Ze(C,x=>{R(()=>ie().a11yNotice)&&x(y)})}le(me,Ue)},$$slots:{default:!0},$$legacy:!0})}),as(te,oe=>ve(j,oe),()=>z(j)),qe(()=>ss(te,1,`color-picker ${_()??""}`,"svelte-wyzo5s")),iv("innerWidth",oe=>ve(K,oe)),iv("innerHeight",oe=>ve(ae,oe)),le(r,te),Ve()}var Fk=pe("<span> </span>"),Dk=pe("<!> <!>",1);function wr(r,e){He(e,!0);let t=ge(e,"label",3,""),n=ge(e,"hex",15),i=Ot(()=>!t()||t()===""?"hide":"");var s=Dk(),a=be(s);{var o=u=>{var c=Fk(),f=ye(c);qe(()=>{ss(c,1,Rx(z(i)),"svelte-12vop2h"),kt(f,t())}),le(u,c)};Ze(a,u=>{t()&&u(o)})}var l=ee(a,2);Bk(l,{label:"",position:"responsive",get hex(){return n()},set hex(u){n(u)},$$events:{input(u){Yd.call(this,e,u)},change(u){Yd.call(this,e,u)}}}),le(r,s),Ve()}function Lk(r){return Object.keys(r).reduce((e,t)=>r[t]===void 0?e:e+`${t}:${r[t]};`,"")}function Uv(r){return r?!0:void 0}Lk({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"});function Nv(r){function e(t){return t(r),()=>{}}return{subscribe:e}}const vu=r=>new Proxy(r,{get(e,t,n){return Reflect.get(e,t,n)},ownKeys(e){return Reflect.ownKeys(e).filter(t=>t!=="action")}}),Gv=r=>typeof r=="function";h1("empty");function h1(r,e){const{stores:t,action:n,returned:i}=e??{},s=(()=>{if(t&&i)return tr(t,o=>{const l=i(o);if(Gv(l)){const u=(...c)=>vu({...l(...c),[`data-melt-${r}`]:"",action:n??na});return u.action=n??na,u}return vu({...l,[`data-melt-${r}`]:"",action:n??na})});{const l=i?.();if(Gv(l)){const u=(...c)=>vu({...l(...c),[`data-melt-${r}`]:"",action:n??na});return u.action=n??na,Nv(u)}return Nv(vu({...l,[`data-melt-${r}`]:"",action:n??na}))}})(),a=n??(()=>{});return a.subscribe=s.subscribe,a}function Uk(r){return r instanceof HTMLElement}function Nk(...r){return(...e)=>{for(const t of r)typeof t=="function"&&t(...e)}}function na(){}function d1(r,e,t,n){const i=Array.isArray(e)?e:[e];return i.forEach(s=>r.addEventListener(s,t,n)),()=>{i.forEach(s=>r.removeEventListener(s,t,n))}}function zv(r,e,t,n){const i=Array.isArray(e)?e:[e];if(typeof t=="function"){const s=zk(a=>t(a));return i.forEach(a=>r.addEventListener(a,s,n)),()=>{i.forEach(a=>r.removeEventListener(a,s,n))}}return()=>void 0}function Gk(r){const e=r.currentTarget;if(!Uk(e))return null;const t=new CustomEvent(`m-${r.type}`,{detail:{originalEvent:r},cancelable:!0});return e.dispatchEvent(t),t}function zk(r){return e=>{if(!Gk(e)?.defaultPrevented)return r(e)}}function p1(r,...e){const t={};for(const n of Object.keys(r))e.includes(n)||(t[n]=r[n]);return t}function lf(r){return{...r,get:()=>St(r)}}lf.writable=function(r){const e=Xe(r);let t=r;return{subscribe:e.subscribe,set(n){e.set(n),t=n},update(n){const i=n(t);e.set(i),t=i},get(){return t}}};lf.derived=function(r,e){const t=new Map,n=()=>{const s=Array.isArray(r)?r.map(a=>a.get()):r.get();return e(s)};return{get:n,subscribe:s=>{const a=[];return(Array.isArray(r)?r:[r]).forEach(l=>{a.push(l.subscribe(()=>{s(n())}))}),s(n()),t.set(s,a),()=>{const l=t.get(s);if(l)for(const u of l)u();t.delete(s)}}}};const jk=(r,e)=>{const t=lf(r),n=(s,a)=>{t.update(o=>{const l=s(o);let u=l;return e&&(u=e({curr:o,next:l})),a?.(u),u})};return{...t,update:n,set:s=>{n(()=>s)}}},np={ENTER:"Enter",ESCAPE:"Escape",SPACE:" "};function Hk(r){const e={};return Object.keys(r).forEach(t=>{const n=t,i=r[n];e[n]=lf(Xe(i))}),e}Br(void 0,r=>{function e(n){r(n),r(void 0)}return d1(document,"pointerup",e,{passive:!1,capture:!0})});Br(void 0,r=>{function e(n){n&&n.key===np.ESCAPE&&r(n),r(void 0)}return d1(document,"keydown",e,{passive:!1})});Br(!1),Br(!1),Br(void 0);const Vk={isDateDisabled:void 0,isDateUnavailable:void 0,value:void 0,preventDeselect:!1,numberOfMonths:1,pagedNavigation:!1,weekStartsOn:0,fixedWeeks:!1,calendarLabel:"Event Date",locale:"en",minValue:void 0,maxValue:void 0,disabled:!1,readonly:!1,weekdayFormat:"narrow"};({...p1(Vk,"isDateDisabled","isDateUnavailable","value","locale","disabled","readonly","minValue","maxValue","weekdayFormat")});const Wk={defaultPressed:!1,disabled:!1};function qk(r){const e={...Wk,...r},t=Hk(p1(e,"pressed")),{disabled:n}=t,i=e.pressed??Xe(e.defaultPressed),s=jk(i,e?.onPressedChange);function a(){n.get()||s.update(u=>!u)}return{elements:{root:h1("toggle",{stores:[s,n],returned:([l,u])=>({"data-disabled":Uv(u),disabled:Uv(u),"data-state":l?"on":"off","aria-pressed":l,type:"button"}),action:l=>({destroy:Nk(zv(l,"click",()=>{a()}),zv(l,"keydown",c=>{c.key!==np.ENTER&&c.key!==np.SPACE||(c.preventDefault(),a())}))})})},states:{pressed:s},options:t}}function Xk(r,e){const t={};return e.forEach(n=>{t[n]={[`data-${r}-${n}`]:""}}),n=>t[n]}function Yk(){const r=mo();return e=>{const{originalEvent:t}=e.detail,{cancelable:n}=e,i=t.type;r(i,{originalEvent:t,currentTarget:t.currentTarget},{cancelable:n})||e.preventDefault()}}function $k(r){const e={};for(const t in r){const n=r[t];n!==void 0&&(e[t]=n)}return e}function Kk(r){return function(e,t){if(t===void 0)return;const n=r[e];n&&n.set(t)}}function Zk(){return{NAME:"toggle",PARTS:["root","input"]}}function Jk(r){const{NAME:e,PARTS:t}=Zk(),n=Xk(e,t),i={...qk($k(r)),getAttrs:n};return N3(e,i),{...i,updateOption:Kk(i.options)}}var Qk=pe("<button><!></button>");function e4(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]),n=Sr(t,["disabled","pressed","onPressedChange","asChild","el"]);He(e,!1);const i=()=>Ie(d,"$root",s),[s,a]=Mt(),o=pt();let l=ge(e,"disabled",24,()=>{}),u=ge(e,"pressed",28,()=>{}),c=ge(e,"onPressedChange",24,()=>{}),f=ge(e,"asChild",8,!1),h=ge(e,"el",28,()=>{});const{elements:{root:d},states:{pressed:p},updateOption:v,getAttrs:m}=Jk({disabled:l(),defaultPressed:u(),onPressedChange:({next:E})=>(u()!==E&&(c()?.(E),u(E)),E)}),g=Yk(),_=m("root");Ut(()=>Le(u()),()=>{u()!==void 0&&p.set(u())}),Ut(()=>Le(l()),()=>{v("disabled",l())}),Ut(()=>i(),()=>{ve(o,i())}),Ut(()=>z(o),()=>{Object.assign(z(o),_)}),Xs(),Ar();var b=Ke(),w=be(b);{var S=E=>{var O=Ke(),P=be(O);fr(P,e,"default",{get builder(){return z(o)}}),le(E,O)},T=E=>{var O=Qk();Nt(O,()=>({...z(o),type:"button",...n}));var P=ye(O);fr(P,e,"default",{get builder(){return z(o)}}),as(O,V=>h(V),()=>h()),ur(O,V=>z(o).action?.(V)),Ms(()=>We("m-click",O,g)),Ms(()=>We("m-keydown",O,g)),le(E,O)};Ze(w,E=>{f()?E(S):E(T,!1)})}le(r,b),Ve(),a()}var t4=pe('<div><div></div> <p class="tooltip-text svelte-sj99h3"> </p></div>'),r4=pe("<div><!></div> <!>",1);function wo(r,e){He(e,!0);const t=()=>Ie(l,"$trigger",a),n=()=>Ie(f,"$open",a),i=()=>Ie(u,"$content",a),s=()=>Ie(c,"$arrow",a),[a,o]=Mt(),{elements:{trigger:l,content:u,arrow:c},states:{open:f}}=qR({positioning:{placement:"top"},openDelay:500,closeDelay:0,closeOnPointerDown:!1,forceVisible:!0});var h=Ke(),d=be(h);{var p=m=>{var g=r4(),_=be(g);Nt(_,()=>({...t(),class:"content"}),void 0,void 0,void 0,"svelte-sj99h3");var b=ye(_);Yi(b,()=>e.children),ur(_,T=>l?.(T));var w=ee(_,2);{var S=T=>{var E=t4();Nt(E,()=>({...i(),class:"tooltip"}),void 0,void 0,void 0,"svelte-sj99h3");var O=ye(E);Nt(O,()=>({...s()}),void 0,void 0,void 0,"svelte-sj99h3"),ur(O,W=>c?.(W));var P=ee(O,2),V=ye(P);ur(E,W=>u?.(W)),qe(()=>kt(V,e.tooltip)),_l(3,E,()=>a1,()=>({duration:100})),le(T,E)};Ze(w,T=>{n()&&T(S)})}le(m,g)},v=m=>{var g=Ke(),_=be(g);Yi(_,()=>e.children),le(m,g)};Ze(d,m=>{e.tooltip?m(p):m(v,!1)})}le(r,h),Ve(),o()}function Di(r,e){He(e,!0);let t=ge(e,"checked",15,!1),n=rf(e,["$$slots","$$events","$$legacy","children","checked","tooltip"]);wo(r,{get tooltip(){return e.tooltip},children:(i,s)=>{var a=Ke(),o=be(a);kr(o,()=>e4,(l,u)=>{u(l,Mn(()=>n,{get pressed(){return t()},set pressed(c){t(c)},children:(c,f)=>{var h=Ke(),d=be(h);Yi(d,()=>e.children),le(c,h)},$$slots:{default:!0}}))}),le(i,a)},$$slots:{default:!0}}),Ve()}var n4=pe('<button class="reset_filters svelte-3c1fen">âº</button>'),i4=pe('<!> <!> <div class="reset svelte-3c1fen"><!></div>',1),s4=pe("<!> <!> <!> <!> <!> <!> <!>",1),a4=pe("<!> <!> <!> <!> <!> <!>",1),o4=pe("<!> <!> <!> <!> <!>",1),l4=pe("<!> <!> <!> <!>",1),u4=pe("<!> <!> <!> <!> <!>",1),c4=pe("<!> <!> <!> <!> <!> <!>",1);function yg(r,e){He(e,!0);const t=()=>Ie(e.filter,"$filter",n),[n,i]=Mt();let s=ge(e,"collapsed",3,!1);const a="flex: 0 0 4.5rem; justify-content: center; font-size: smaller; height: 1.7rem;";function o(){e.filter.set(structuredClone(e.defaults))}hn(r,{title:"Ð¤Ð¸Ð»ÑÑÑÑ",get collapsed(){return s()},children:(l,u)=>{var c=c4(),f=be(c);rt(f,{children:(g,_)=>{var b=i4(),w=be(b);Di(w,{style:a,get checked(){return t().blur.enabled},set checked(O){ce(e.filter,R(t).blur.enabled=O,R(t))},children:(O,P)=>{var V=er("blur");le(O,V)},$$slots:{default:!0}});var S=ee(w,2);Se(S,{label:"value",step:.1,min:0,get value(){return t().blur.value},set value(O){ce(e.filter,R(t).blur.value=O,R(t))}});var T=ee(S,2),E=ye(T);wo(E,{tooltip:"ÑÐ±ÑÐ¾ÑÐ¸ÑÑ ÑÐ¸Ð»ÑÑÑÑ",children:(O,P)=>{var V=n4();V.__click=o,le(O,V)},$$slots:{default:!0}}),le(g,b)},$$slots:{default:!0}});var h=ee(f,2);rt(h,{children:(g,_)=>{var b=s4(),w=be(b);Di(w,{style:a,get checked(){return t().gradient.enabled},set checked(W){ce(e.filter,R(t).gradient.enabled=W,R(t))},children:(W,D)=>{var j=er("gradient");le(W,j)},$$slots:{default:!0}});var S=ee(w,2);Se(S,{label:"#1",step:.01,min:0,max:1,get value(){return t().gradient.start.value},set value(W){ce(e.filter,R(t).gradient.start.value=W,R(t))}});var T=ee(S,2);wr(T,{get hex(){return t().gradient.start.color},set hex(W){ce(e.filter,R(t).gradient.start.color=W,R(t))}});var E=ee(T,2);Se(E,{label:"#2",step:.01,min:0,max:1,get value(){return t().gradient.mid.value},set value(W){ce(e.filter,R(t).gradient.mid.value=W,R(t))}});var O=ee(E,2);wr(O,{get hex(){return t().gradient.mid.color},set hex(W){ce(e.filter,R(t).gradient.mid.color=W,R(t))}});var P=ee(O,2);Se(P,{label:"#3",step:.01,min:0,max:1,get value(){return t().gradient.end.value},set value(W){ce(e.filter,R(t).gradient.end.value=W,R(t))}});var V=ee(P,2);wr(V,{get hex(){return t().gradient.end.color},set hex(W){ce(e.filter,R(t).gradient.end.color=W,R(t))}}),le(g,b)},$$slots:{default:!0}});var d=ee(h,2);rt(d,{children:(g,_)=>{var b=a4(),w=be(b);Di(w,{style:a,get checked(){return t().tilt_shift.enabled},set checked(V){ce(e.filter,R(t).tilt_shift.enabled=V,R(t))},children:(V,W)=>{var D=er("tilt-shift");le(V,D)},$$slots:{default:!0}});var S=ee(w,2);Se(S,{label:"Xâ",get value(){return t().tilt_shift.start.x},set value(V){ce(e.filter,R(t).tilt_shift.start.x=V,R(t))}});var T=ee(S,2);Se(T,{label:"Yâ",get value(){return t().tilt_shift.start.y},set value(V){ce(e.filter,R(t).tilt_shift.start.y=V,R(t))}});var E=ee(T,2);Se(E,{label:"Xâ",get value(){return t().tilt_shift.end.x},set value(V){ce(e.filter,R(t).tilt_shift.end.x=V,R(t))}});var O=ee(E,2);Se(O,{label:"Yâ",get value(){return t().tilt_shift.end.y},set value(V){ce(e.filter,R(t).tilt_shift.end.y=V,R(t))}});var P=ee(O,2);Se(P,{label:"blur",step:.1,min:0,get value(){return t().tilt_shift.blur},set value(V){ce(e.filter,R(t).tilt_shift.blur=V,R(t))}}),le(g,b)},$$slots:{default:!0}});var p=ee(d,2);rt(p,{children:(g,_)=>{var b=o4(),w=be(b);Di(w,{style:a,get checked(){return t().zoom_blur.enabled},set checked(P){ce(e.filter,R(t).zoom_blur.enabled=P,R(t))},children:(P,V)=>{var W=er("zoomblur");le(P,W)},$$slots:{default:!0}});var S=ee(w,2);Se(S,{label:"X",get value(){return t().zoom_blur.center.x},set value(P){ce(e.filter,R(t).zoom_blur.center.x=P,R(t))}});var T=ee(S,2);Se(T,{label:"Y",get value(){return t().zoom_blur.center.y},set value(P){ce(e.filter,R(t).zoom_blur.center.y=P,R(t))}});var E=ee(T,2);Se(E,{label:"R",min:0,get value(){return t().zoom_blur.radius},set value(P){ce(e.filter,R(t).zoom_blur.radius=P,R(t))}});var O=ee(E,2);Se(O,{label:"blur",step:.01,min:0,get value(){return t().zoom_blur.value},set value(P){ce(e.filter,R(t).zoom_blur.value=P,R(t))}}),le(g,b)},$$slots:{default:!0}});var v=ee(p,2);rt(v,{children:(g,_)=>{var b=l4(),w=be(b);Di(w,{style:a,get checked(){return t().vignetting.enabled},set checked(O){ce(e.filter,R(t).vignetting.enabled=O,R(t))},children:(O,P)=>{var V=er("vignette");le(O,V)},$$slots:{default:!0}});var S=ee(w,2);Se(S,{label:"value",step:.01,min:0,get value(){return t().vignetting.value},set value(O){ce(e.filter,R(t).vignetting.value=O,R(t))}});var T=ee(S,2);Se(T,{label:"Î±",step:.01,min:0,max:1,get value(){return t().vignetting.alpha},set value(O){ce(e.filter,R(t).vignetting.alpha=O,R(t))}});var E=ee(T,2);Se(E,{label:"blur",step:.01,min:0,get value(){return t().vignetting.blur},set value(O){ce(e.filter,R(t).vignetting.blur=O,R(t))}}),le(g,b)},$$slots:{default:!0}});var m=ee(v,2);rt(m,{children:(g,_)=>{var b=u4(),w=be(b);Di(w,{style:a,get checked(){return t().adjustment.enabled},set checked(P){ce(e.filter,R(t).adjustment.enabled=P,R(t))},children:(P,V)=>{var W=er("adjust");le(P,W)},$$slots:{default:!0}});var S=ee(w,2);Se(S,{label:"gam",step:.01,min:0,get value(){return t().adjustment.gamma},set value(P){ce(e.filter,R(t).adjustment.gamma=P,R(t))}});var T=ee(S,2);Se(T,{label:"con",step:.01,min:0,get value(){return t().adjustment.contrast},set value(P){ce(e.filter,R(t).adjustment.contrast=P,R(t))}});var E=ee(T,2);Se(E,{label:"bri",step:.01,min:0,get value(){return t().adjustment.brightness},set value(P){ce(e.filter,R(t).adjustment.brightness=P,R(t))}});var O=ee(E,2);Se(O,{label:"sat",step:.01,min:0,get value(){return t().adjustment.saturation},set value(P){ce(e.filter,R(t).adjustment.saturation=P,R(t))}}),le(g,b)},$$slots:{default:!0}}),le(l,c)},$$slots:{default:!0}}),Ve(),i()}is(["click"]);let f4=0;var h4=pe('<label class="svelte-l7bxsv"> </label>'),d4=pe("<!> <input/>",1);function zr(r,e){He(e,!0);let t=ge(e,"value",15),n=rf(e,["$$slots","$$events","$$legacy","placeholder","value","label","width","cl","onchange","oninput"]),i=Ot(()=>e.width?"width: "+e.width+"px;":""),s="input_text_"+f4++;var a=d4(),o=be(a);{var l=c=>{var f=h4(),h=ye(f);qe(()=>{Qe(f,"for",s),kt(h,e.label)}),le(c,f)};Ze(o,c=>{e.label&&c(l)})}var u=ee(o,2);Nt(u,()=>({id:s,class:e.cl,type:"text",onchange:e.onchange,oninput:e.oninput,placeholder:e.placeholder,style:z(i),...n}),void 0,void 0,void 0,void 0,!0),go(u,t),le(r,a),Ve()}var p4=pe("<!> <!> <!> <!> <!> <!>",1),g4=pe("<!> <!>",1);function xg(r,e){He(e,!0);const t=()=>Ie(e.logo,"$logo",i),n=()=>Ie(e.appstate,"$appstate",i),[i,s]=Mt();function a(o){ce(e.logo,R(t).src=o.target?.value,R(t))}hn(r,{title:"ÐÐ¾Ð³Ð¾",collapsed:!0,children:(o,l)=>{var u=g4(),c=be(u);rt(c,{children:(h,d)=>{zr(h,{placeholder:"ÑÑÑÐ»ÐºÐ° Ð½Ð° ÐºÐ°ÑÑÐ¸Ð½ÐºÑ Ð»Ð¾Ð³Ð¾ÑÐ¸Ð¿Ð°",onchange:a,get value(){return n().logo},set value(p){ce(e.appstate,R(n).logo=p,R(n))}})},$$slots:{default:!0}});var f=ee(c,2);rt(f,{children:(h,d)=>{var p=p4(),v=be(p);Se(v,{label:"X",get value(){return t().x},set value(S){ce(e.logo,R(t).x=S,R(t))}});var m=ee(v,2);Se(m,{label:"Y",get value(){return t().y},set value(S){ce(e.logo,R(t).y=S,R(t))}});var g=ee(m,2);Se(g,{label:"W",get value(){return t().w},set value(S){ce(e.logo,R(t).w=S,R(t))}});var _=ee(g,2);Se(_,{label:"H",get value(){return t().h},set value(S){ce(e.logo,R(t).h=S,R(t))}});var b=ee(_,2);Se(b,{label:"blur",step:.1,min:0,get value(){return t().blur},set value(S){ce(e.logo,R(t).blur=S,R(t))}});var w=ee(b,2);Se(w,{label:"Î±",step:.01,min:0,max:1,get value(){return t().alpha},set value(S){ce(e.logo,R(t).alpha=S,R(t))}}),le(h,p)},$$slots:{default:!0}}),le(o,u)},$$slots:{default:!0}}),Ve(),s()}/**
 * @license lucide-svelte v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var v4=wA("<svg><!><!></svg>");function ri(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]),n=Sr(t,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);He(e,!1);let i=ge(e,"name",8,void 0),s=ge(e,"color",8,"currentColor"),a=ge(e,"size",8,24),o=ge(e,"strokeWidth",8,2),l=ge(e,"absoluteStrokeWidth",8,!1),u=ge(e,"iconNode",24,()=>[]);const c=(...p)=>p.filter((v,m,g)=>!!v&&g.indexOf(v)===m).join(" ");Ar();var f=v4();Nt(f,(p,v)=>({...m4,...n,width:a(),height:a(),stroke:s(),"stroke-width":p,class:v}),[()=>(Le(l()),Le(o()),Le(a()),R(()=>l()?Number(o())*24/Number(a()):o())),()=>(Le(i()),Le(t),R(()=>c("lucide-icon","lucide",i()?`lucide-${i()}`:"",t.class)))]);var h=ye(f);Is(h,1,u,Os,(p,v)=>{var m=Ot(()=>u3(z(v),2));let g=()=>z(m)[0],_=()=>z(m)[1];var b=Ke(),w=be(b);IA(w,g,!0,(S,T)=>{Nt(S,()=>({..._()}))}),le(p,b)});var d=ee(h);fr(d,e,"default",{}),le(r,f),Ve()}function g1(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"}]];ri(r,Mn({name:"folder-open"},()=>t,{get iconNode(){return n},children:(i,s)=>{var a=Ke(),o=be(a);fr(o,e,"default",{}),le(i,a)},$$slots:{default:!0}}))}var _4=pe('<label class="svelte-1u4l702"><!> <input type="file" class="svelte-1u4l702"/></label>');function m1(r,e){He(e,!0);let t=ge(e,"src",15);function n(i){const s=i.target?.files[0];if(s){const a=new FileReader;a.onload=async o=>{const l=o.target?.result;t()&&t(l),e.onload&&e.onload(l,s.name)},a.readAsDataURL(s)}}wo(r,{get tooltip(){return e.tooltip},children:(i,s)=>{var a=_4(),o=ye(a);g1(o,{size:18});var l=ee(o,2);l.__change=n,qe(()=>Qe(l,"accept",e.accept)),le(i,a)},$$slots:{default:!0}}),Ve()}is(["change"]);function wg(r,e,t,n){const i=t/n;if(i<r/e){const s=Math.round(r/i);return{x:0,y:Math.round((e-s)/2),w:r,h:s}}else{const s=Math.round(e*i);return{x:Math.round((r-s)/2),y:0,w:s,h:e}}}var b4=pe("<button><!></button>"),y4=pe("<div></div>");function x4(r,e){He(e,!0);const t=()=>Ie(o,"$root",i),n=()=>Ie(l,"$item",i),[i,s]=Mt();let a=ge(e,"selected",15);const{elements:{root:o,item:l}}=HR({type:"single",loop:!0,rovingFocus:!0,defaultValue:a(),onValueChange:({curr:c,next:f})=>f?(a(f),f):c});var u=y4();Nt(u,()=>({...t(),class:"container"}),void 0,void 0,void 0,"svelte-1539pur"),Is(u,21,()=>e.options,Os,(c,f,h)=>{var d=b4();Nt(d,v=>({class:"toggle-item",...v}),[()=>n()(z(f))],void 0,void 0,"svelte-1539pur");var p=ye(d);Yi(p,()=>e.children[h]),ur(d,v=>l?.(v)),le(c,d)}),ur(u,c=>o?.(c)),le(r,u),Ve(),s()}function w4(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=[["path",{d:"M2 12h6"}],["path",{d:"M22 12h-6"}],["path",{d:"M12 2v2"}],["path",{d:"M12 8v2"}],["path",{d:"M12 14v2"}],["path",{d:"M12 20v2"}],["path",{d:"m19 9-3 3 3 3"}],["path",{d:"m5 15 3-3-3-3"}]];ri(r,Mn({name:"fold-horizontal"},()=>t,{get iconNode(){return n},children:(i,s)=>{var a=Ke(),o=be(a);fr(o,e,"default",{}),le(i,a)},$$slots:{default:!0}}))}function S4(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=[["path",{d:"M12 22v-6"}],["path",{d:"M12 8V2"}],["path",{d:"M4 12H2"}],["path",{d:"M10 12H8"}],["path",{d:"M16 12h-2"}],["path",{d:"M22 12h-2"}],["path",{d:"m15 19-3-3-3 3"}],["path",{d:"m15 5-3 3-3-3"}]];ri(r,Mn({name:"fold-vertical"},()=>t,{get iconNode(){return n},children:(i,s)=>{var a=Ke(),o=be(a);fr(o,e,"default",{}),le(i,a)},$$slots:{default:!0}}))}function v1(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3"}]];ri(r,Mn({name:"maximize"},()=>t,{get iconNode(){return n},children:(i,s)=>{var a=Ke(),o=be(a);fr(o,e,"default",{}),le(i,a)},$$slots:{default:!0}}))}function T4(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3"}]];ri(r,Mn({name:"minimize"},()=>t,{get iconNode(){return n},children:(i,s)=>{var a=Ke(),o=be(a);fr(o,e,"default",{}),le(i,a)},$$slots:{default:!0}}))}function E4(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17"}],["path",{d:"m10 15 5-3-5-3z"}]];ri(r,Mn({name:"youtube"},()=>t,{get iconNode(){return n},children:(i,s)=>{var a=Ke(),o=be(a);fr(o,e,"default",{}),le(i,a)},$$slots:{default:!0}}))}function A4(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=[["path",{d:"M21 2H3v16h5v4l4-4h5l4-4V2zm-10 9V7m5 4V7"}]];ri(r,Mn({name:"twitch"},()=>t,{get iconNode(){return n},children:(i,s)=>{var a=Ke(),o=be(a);fr(o,e,"default",{}),le(i,a)},$$slots:{default:!0}}))}function C4(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}],["path",{d:"m21.854 2.147-10.94 10.939"}]];ri(r,Mn({name:"send"},()=>t,{get iconNode(){return n},children:(i,s)=>{var a=Ke(),o=be(a);fr(o,e,"default",{}),le(i,a)},$$slots:{default:!0}}))}function P4(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7"}]];ri(r,Mn({name:"save"},()=>t,{get iconNode(){return n},children:(i,s)=>{var a=Ke(),o=be(a);fr(o,e,"default",{}),le(i,a)},$$slots:{default:!0}}))}function R4(r,e){const t=Sr(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.451.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]];ri(r,Mn({name:"trash-2"},()=>t,{get iconNode(){return n},children:(i,s)=>{var a=Ke(),o=be(a);fr(o,e,"default",{}),le(i,a)},$$slots:{default:!0}}))}var k4=pe('<span class="svelte-1e76cj3"><!></span>'),M4=pe('<span class="svelte-1e76cj3"><!></span>'),O4=pe('<div class="svelte-1e76cj3"><!> <input/></div>');function ba(r,e){He(e,!0);let t=ge(e,"value",15),n=ge(e,"step",3,1),i=ge(e,"width",3,"70px"),s=rf(e,["$$slots","$$events","$$legacy","value","type","children","max","min","step","tooltip","width","label_width"]);function a(l){typeof t()=="number"&&(l.deltaY*-1>0?e.max&&t()<e.max&&t(t()+(n()+Number.EPSILON)):e.min&&t()>e.min&&t(t()-(n()+Number.EPSILON)))}let o=Ot(()=>e.type==="text"?"width: 100%;":"");wo(r,{get tooltip(){return e.tooltip},children:(l,u)=>{var c=O4(),f=ye(c);{var h=v=>{var m=k4(),g=ye(m);Yi(g,()=>e.children),qe(()=>cr(m,`width: ${e.label_width??""}`)),le(v,m)},d=v=>{var m=Ke(),g=be(m);{var _=b=>{var w=M4(),S=ye(w);Yi(S,()=>e.children),le(b,w)};Ze(g,b=>{e.children&&e.label_width===void 0&&b(_)},!0)}le(v,m)};Ze(f,v=>{e.children&&e.label_width?v(h):v(d,!1)})}var p=ee(f,2);Nt(p,()=>({type:e.type,style:`width: ${i()??""}`,onwheel:e.type==="number"?a:null,max:e.max,min:e.min,step:n(),...s}),void 0,void 0,void 0,"svelte-1e76cj3",!0),qe(()=>cr(c,z(o))),go(p,t),le(l,c)},$$slots:{default:!0}}),Ve()}const I4=r=>{wo(r,{tooltip:"ÑÐ°ÑÑÑÐ½ÑÑÑ",children:(e,t)=>{v1(e,{size:"1.2rem"})},$$slots:{default:!0}})},B4=r=>{wo(r,{tooltip:"ÑÐ¾ÑÑÐ°Ð½Ð¸ÑÑ Ð¿ÑÐ¾Ð¿Ð¾ÑÑÐ¸Ð¸",children:(e,t)=>{T4(e,{size:"1.2rem"})},$$slots:{default:!0}})};var F4=pe("<!> <!>",1),D4=pe('<!> <!> <!> <!> <div class="spacer svelte-1t7yqk4"></div> <!> <!> <!>',1),L4=pe("<!> <!>",1);function Sg(r,e){He(e,!0);const t=()=>Ie(e.background,"$background",s),n=()=>Ie(e.appstate,"$appstate",s),i=()=>Ie(e.datastate,"$datastate",s),[s,a]=Mt();Ir(t().paste_mode==="fit");let o=t().paste_mode,l="";window.addEventListener("texture_loaded",f=>{f.detail===l&&(ce(e.appstate,R(n).background_loading=!1,R(n)),l="")});function u(f){ce(e.background,R(t).src=f.target?.value,R(t))}function c(f,h){if(l=f,ce(e.appstate,R(n).background_loading=!0,R(n)),t().paste_mode==="fit"){gi(e.background,{...t(),src:f,x:0,y:0,w:i().width,h:i().height});const d=new Image;d.src=f,d.onload=()=>{gi(e.appstate,{...n(),background_width:d.width,background_height:d.height,background_aspect:d.width/d.height,background:h})}}else if(t().paste_mode==="aspect"){const d=new Image;d.src=f,d.onload=()=>{const p=wg(i().width,i().height,d.width,d.height);gi(e.background,{...t(),...p,src:f}),gi(e.appstate,{...n(),background_width:d.width,background_height:d.height,background_aspect:d.width/d.height,background:h})}}}En(()=>{o!==t().paste_mode&&R(()=>{ce(e.appstate,R(n).background_loading=!0,R(n)),o=t().paste_mode,c(t().src,n().background),ce(e.appstate,R(n).background_loading=!1,R(n))})}),hn(r,{title:"Ð¤Ð¾Ð½",collapsed:!0,children:(f,h)=>{var d=L4(),p=be(d);rt(p,{style:"margin-bottom: 0.5rem;",children:(m,g)=>{var _=F4(),b=be(_);zr(b,{placeholder:"ÑÑÑÐ»ÐºÐ° Ð½Ð° ÐºÐ°ÑÑÐ¸Ð½ÐºÑ ÑÐ¾Ð½Ð°",onchange:u,get value(){return n().background},set value(S){ce(e.appstate,R(n).background=S,R(n))}});var w=ee(b,2);m1(w,{onload:c,accept:"image/*",tooltip:"Ð·Ð°Ð³ÑÑÐ·Ð¸ÑÑ"}),le(m,_)},$$slots:{default:!0}});var v=ee(p,2);rt(v,{children:(m,g)=>{var _=D4(),b=be(_);ba(b,{type:"number",width:"52px",label_width:"20px",get value(){return t().x},set value(V){ce(e.background,R(t).x=V,R(t))},children:(V,W)=>{var D=er("X");le(V,D)},$$slots:{default:!0}});var w=ee(b,2);ba(w,{type:"number",width:"52px",label_width:"20px",get value(){return t().y},set value(V){ce(e.background,R(t).y=V,R(t))},children:(V,W)=>{var D=er("Y");le(V,D)},$$slots:{default:!0}});var S=ee(w,2);ba(S,{type:"number",width:"52px",label_width:"20px",get value(){return t().w},set value(V){ce(e.background,R(t).w=V,R(t))},children:(V,W)=>{var D=er("W");le(V,D)},$$slots:{default:!0}});var T=ee(S,2);ba(T,{type:"number",width:"52px",label_width:"20px",get value(){return t().h},set value(V){ce(e.background,R(t).h=V,R(t))},children:(V,W)=>{var D=er("H");le(V,D)},$$slots:{default:!0}});var E=ee(T,4);Di(E,{tooltip:"Ð¾ÑÑÐ°Ð·Ð¸ÑÑ Ð³Ð¾ÑÐ¸Ð·Ð¾Ð½ÑÐ°Ð»ÑÐ½Ð¾",get checked(){return t().flip_h},set checked(V){ce(e.background,R(t).flip_h=V,R(t))},children:(V,W)=>{w4(V,{size:"1.2rem"})},$$slots:{default:!0}});var O=ee(E,2);Di(O,{tooltip:"Ð¾ÑÑÐ°Ð·Ð¸ÑÑ Ð²ÐµÑÑÐ¸ÐºÐ°Ð»ÑÐ½Ð¾",get checked(){return t().flip_v},set checked(V){ce(e.background,R(t).flip_v=V,R(t))},children:(V,W)=>{S4(V,{size:"1.2rem"})},$$slots:{default:!0}});var P=ee(O,2);{let V=Ot(()=>[I4,B4]);x4(P,{options:["fit","aspect"],get children(){return z(V)},get selected(){return t().paste_mode},set selected(W){ce(e.background,R(t).paste_mode=W,R(t))}})}le(m,_)},$$slots:{default:!0}}),le(f,d)},$$slots:{default:!0}}),Ve(),a()}function U4(r,e,t=10,n){const{promise:i,resolve:s,reject:a}=Promise.withResolvers(),o=e.getWriter(),l=new Map;let u=0,c=0,f=0,h=!1;function d(){if(u===0&&c===r.length&&f===r.length){s();return}!h&&l.has(f)&&v(f++).catch(()=>a(new Error(`failed to write url ${r[f-1]}`))),u<t&&c<r.length&&p(c++).catch(()=>a(new Error(`failed to download url ${r[c-1]}`)))}async function p(m){u++;const _=await(await fetch(r[m])).bytes();l.set(m,_),u--,d()}async function v(m){h=!0,await o.write(l.get(m)),l.delete(m),h=!1,n&&n(Math.round(m*1e4/r.length)/100),d()}for(let m=0;m<t;m++)d();return i}var qt={},uf={};uf.byteLength=z4;uf.toByteArray=H4;uf.fromByteArray=q4;var jn=[],Yr=[],N4=typeof Uint8Array<"u"?Uint8Array:Array,zf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ia=0,G4=zf.length;ia<G4;++ia)jn[ia]=zf[ia],Yr[zf.charCodeAt(ia)]=ia;Yr[45]=62;Yr[95]=63;function _1(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function z4(r){var e=_1(r),t=e[0],n=e[1];return(t+n)*3/4-n}function j4(r,e,t){return(e+t)*3/4-t}function H4(r){var e,t=_1(r),n=t[0],i=t[1],s=new N4(j4(r,n,i)),a=0,o=i>0?n-4:n,l;for(l=0;l<o;l+=4)e=Yr[r.charCodeAt(l)]<<18|Yr[r.charCodeAt(l+1)]<<12|Yr[r.charCodeAt(l+2)]<<6|Yr[r.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Yr[r.charCodeAt(l)]<<2|Yr[r.charCodeAt(l+1)]>>4,s[a++]=e&255),i===1&&(e=Yr[r.charCodeAt(l)]<<10|Yr[r.charCodeAt(l+1)]<<4|Yr[r.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function V4(r){return jn[r>>18&63]+jn[r>>12&63]+jn[r>>6&63]+jn[r&63]}function W4(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(V4(n));return i.join("")}function q4(r){for(var e,t=r.length,n=t%3,i=[],s=16383,a=0,o=t-n;a<o;a+=s)i.push(W4(r,a,a+s>o?o:a+s));return n===1?(e=r[t-1],i.push(jn[e>>2]+jn[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(jn[e>>10]+jn[e>>4&63]+jn[e<<2&63]+"=")),i.join("")}var Tg={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Tg.read=function(r,e,t,n,i){var s,a,o=i*8-n-1,l=(1<<o)-1,u=l>>1,c=-7,f=t?i-1:0,h=t?-1:1,d=r[e+f];for(f+=h,s=d&(1<<-c)-1,d>>=-c,c+=o;c>0;s=s*256+r[e+f],f+=h,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=n;c>0;a=a*256+r[e+f],f+=h,c-=8);if(s===0)s=1-u;else{if(s===l)return a?NaN:(d?-1:1)*(1/0);a=a+Math.pow(2,n),s=s-u}return(d?-1:1)*a*Math.pow(2,s-n)};Tg.write=function(r,e,t,n,i,s){var a,o,l,u=s*8-i-1,c=(1<<u)-1,f=c>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+f>=1?e+=h/l:e+=h*Math.pow(2,1-f),e*l>=2&&(a++,l/=2),a+f>=c?(o=0,a=c):a+f>=1?(o=(e*l-1)*Math.pow(2,i),a=a+f):(o=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;r[t+d]=o&255,d+=p,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;r[t+d]=a&255,d+=p,a/=256,u-=8);r[t+d-p]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=uf,t=Tg,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=S,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:a,SharedArrayBuffer:o}=globalThis;c.TYPED_ARRAY_SUPPORT=l(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const C=new s(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,s.prototype),Object.setPrototypeOf(C,y),C.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(C){if(C>i)throw new RangeError('The value "'+C+'" is invalid for option "size"');const y=new s(C);return Object.setPrototypeOf(y,c.prototype),y}function c(C,y,x){if(typeof C=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(C)}return f(C,y,x)}c.poolSize=8192;function f(C,y,x){if(typeof C=="string")return v(C,y);if(a.isView(C))return g(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(ne(C,a)||C&&ne(C.buffer,a)||typeof o<"u"&&(ne(C,o)||C&&ne(C.buffer,o)))return _(C,y,x);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const U=C.valueOf&&C.valueOf();if(U!=null&&U!==C)return c.from(U,y,x);const J=b(C);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return c.from(C[Symbol.toPrimitive]("string"),y,x);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}c.from=function(C,y,x){return f(C,y,x)},Object.setPrototypeOf(c.prototype,s.prototype),Object.setPrototypeOf(c,s);function h(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function d(C,y,x){return h(C),C<=0?u(C):y!==void 0?typeof x=="string"?u(C).fill(y,x):u(C).fill(y):u(C)}c.alloc=function(C,y,x){return d(C,y,x)};function p(C){return h(C),u(C<0?0:w(C)|0)}c.allocUnsafe=function(C){return p(C)},c.allocUnsafeSlow=function(C){return p(C)};function v(C,y){if((typeof y!="string"||y==="")&&(y="utf8"),!c.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const x=T(C,y)|0;let U=u(x);const J=U.write(C,y);return J!==x&&(U=U.slice(0,J)),U}function m(C){const y=C.length<0?0:w(C.length)|0,x=u(y);for(let U=0;U<y;U+=1)x[U]=C[U]&255;return x}function g(C){if(ne(C,s)){const y=new s(C);return _(y.buffer,y.byteOffset,y.byteLength)}return m(C)}function _(C,y,x){if(y<0||C.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<y+(x||0))throw new RangeError('"length" is outside of buffer bounds');let U;return y===void 0&&x===void 0?U=new s(C):x===void 0?U=new s(C,y):U=new s(C,y,x),Object.setPrototypeOf(U,c.prototype),U}function b(C){if(c.isBuffer(C)){const y=w(C.length)|0,x=u(y);return x.length===0||C.copy(x,0,0,y),x}if(C.length!==void 0)return typeof C.length!="number"||de(C.length)?u(0):m(C);if(C.type==="Buffer"&&Array.isArray(C.data))return m(C.data)}function w(C){if(C>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return C|0}function S(C){return+C!=C&&(C=0),c.alloc(+C)}c.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==c.prototype},c.compare=function(y,x){if(ne(y,s)&&(y=c.from(y,y.offset,y.byteLength)),ne(x,s)&&(x=c.from(x,x.offset,x.byteLength)),!c.isBuffer(y)||!c.isBuffer(x))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===x)return 0;let U=y.length,J=x.length;for(let ue=0,he=Math.min(U,J);ue<he;++ue)if(y[ue]!==x[ue]){U=y[ue],J=x[ue];break}return U<J?-1:J<U?1:0},c.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(y,x){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return c.alloc(0);let U;if(x===void 0)for(x=0,U=0;U<y.length;++U)x+=y[U].length;const J=c.allocUnsafe(x);let ue=0;for(U=0;U<y.length;++U){let he=y[U];if(ne(he,s))ue+he.length>J.length?(c.isBuffer(he)||(he=c.from(he)),he.copy(J,ue)):s.prototype.set.call(J,he,ue);else if(c.isBuffer(he))he.copy(J,ue);else throw new TypeError('"list" argument must be an Array of Buffers');ue+=he.length}return J};function T(C,y){if(c.isBuffer(C))return C.length;if(a.isView(C)||ne(C,a))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const x=C.length,U=arguments.length>2&&arguments[2]===!0;if(!U&&x===0)return 0;let J=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":return Te(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x*2;case"hex":return x>>>1;case"base64":return Ce(C).length;default:if(J)return U?-1:Te(C).length;y=(""+y).toLowerCase(),J=!0}}c.byteLength=T;function E(C,y,x){let U=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((x===void 0||x>this.length)&&(x=this.length),x<=0)||(x>>>=0,y>>>=0,x<=y))return"";for(C||(C="utf8");;)switch(C){case"hex":return X(this,y,x);case"utf8":case"utf-8":return K(this,y,x);case"ascii":return H(this,y,x);case"latin1":case"binary":return ie(this,y,x);case"base64":return $(this,y,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,y,x);default:if(U)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),U=!0}}c.prototype._isBuffer=!0;function O(C,y,x){const U=C[y];C[y]=C[x],C[x]=U}c.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let x=0;x<y;x+=2)O(this,x,x+1);return this},c.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let x=0;x<y;x+=4)O(this,x,x+3),O(this,x+1,x+2);return this},c.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let x=0;x<y;x+=8)O(this,x,x+7),O(this,x+1,x+6),O(this,x+2,x+5),O(this,x+3,x+4);return this},c.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?K(this,0,y):E.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(y){if(!c.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:c.compare(this,y)===0},c.prototype.inspect=function(){let y="";const x=r.INSPECT_MAX_BYTES;return y=this.toString("hex",0,x).replace(/(.{2})/g,"$1 ").trim(),this.length>x&&(y+=" ... "),"<Buffer "+y+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(y,x,U,J,ue){if(ne(y,s)&&(y=c.from(y,y.offset,y.byteLength)),!c.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(x===void 0&&(x=0),U===void 0&&(U=y?y.length:0),J===void 0&&(J=0),ue===void 0&&(ue=this.length),x<0||U>y.length||J<0||ue>this.length)throw new RangeError("out of range index");if(J>=ue&&x>=U)return 0;if(J>=ue)return-1;if(x>=U)return 1;if(x>>>=0,U>>>=0,J>>>=0,ue>>>=0,this===y)return 0;let he=ue-J,De=U-x;const $e=Math.min(he,De),nt=this.slice(J,ue),Et=y.slice(x,U);for(let it=0;it<$e;++it)if(nt[it]!==Et[it]){he=nt[it],De=Et[it];break}return he<De?-1:De<he?1:0};function P(C,y,x,U,J){if(C.length===0)return-1;if(typeof x=="string"?(U=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,de(x)&&(x=J?0:C.length-1),x<0&&(x=C.length+x),x>=C.length){if(J)return-1;x=C.length-1}else if(x<0)if(J)x=0;else return-1;if(typeof y=="string"&&(y=c.from(y,U)),c.isBuffer(y))return y.length===0?-1:V(C,y,x,U,J);if(typeof y=="number")return y=y&255,typeof s.prototype.indexOf=="function"?J?s.prototype.indexOf.call(C,y,x):s.prototype.lastIndexOf.call(C,y,x):V(C,[y],x,U,J);throw new TypeError("val must be string, number or Buffer")}function V(C,y,x,U,J){let ue=1,he=C.length,De=y.length;if(U!==void 0&&(U=String(U).toLowerCase(),U==="ucs2"||U==="ucs-2"||U==="utf16le"||U==="utf-16le")){if(C.length<2||y.length<2)return-1;ue=2,he/=2,De/=2,x/=2}function $e(Et,it){return ue===1?Et[it]:Et.readUInt16BE(it*ue)}let nt;if(J){let Et=-1;for(nt=x;nt<he;nt++)if($e(C,nt)===$e(y,Et===-1?0:nt-Et)){if(Et===-1&&(Et=nt),nt-Et+1===De)return Et*ue}else Et!==-1&&(nt-=nt-Et),Et=-1}else for(x+De>he&&(x=he-De),nt=x;nt>=0;nt--){let Et=!0;for(let it=0;it<De;it++)if($e(C,nt+it)!==$e(y,it)){Et=!1;break}if(Et)return nt}return-1}c.prototype.includes=function(y,x,U){return this.indexOf(y,x,U)!==-1},c.prototype.indexOf=function(y,x,U){return P(this,y,x,U,!0)},c.prototype.lastIndexOf=function(y,x,U){return P(this,y,x,U,!1)};function W(C,y,x,U){x=Number(x)||0;const J=C.length-x;U?(U=Number(U),U>J&&(U=J)):U=J;const ue=y.length;U>ue/2&&(U=ue/2);let he;for(he=0;he<U;++he){const De=parseInt(y.substr(he*2,2),16);if(de(De))return he;C[x+he]=De}return he}function D(C,y,x,U){return Z(Te(y,C.length-x),C,x,U)}function j(C,y,x,U){return Z(Be(y),C,x,U)}function I(C,y,x,U){return Z(Ce(y),C,x,U)}function q(C,y,x,U){return Z(Ee(y,C.length-x),C,x,U)}c.prototype.write=function(y,x,U,J){if(x===void 0)J="utf8",U=this.length,x=0;else if(U===void 0&&typeof x=="string")J=x,U=this.length,x=0;else if(isFinite(x))x=x>>>0,isFinite(U)?(U=U>>>0,J===void 0&&(J="utf8")):(J=U,U=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ue=this.length-x;if((U===void 0||U>ue)&&(U=ue),y.length>0&&(U<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let he=!1;for(;;)switch(J){case"hex":return W(this,y,x,U);case"utf8":case"utf-8":return D(this,y,x,U);case"ascii":case"latin1":case"binary":return j(this,y,x,U);case"base64":return I(this,y,x,U);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q(this,y,x,U);default:if(he)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),he=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(C,y,x){return y===0&&x===C.length?e.fromByteArray(C):e.fromByteArray(C.slice(y,x))}function K(C,y,x){x=Math.min(C.length,x);const U=[];let J=y;for(;J<x;){const ue=C[J];let he=null,De=ue>239?4:ue>223?3:ue>191?2:1;if(J+De<=x){let $e,nt,Et,it;switch(De){case 1:ue<128&&(he=ue);break;case 2:$e=C[J+1],($e&192)===128&&(it=(ue&31)<<6|$e&63,it>127&&(he=it));break;case 3:$e=C[J+1],nt=C[J+2],($e&192)===128&&(nt&192)===128&&(it=(ue&15)<<12|($e&63)<<6|nt&63,it>2047&&(it<55296||it>57343)&&(he=it));break;case 4:$e=C[J+1],nt=C[J+2],Et=C[J+3],($e&192)===128&&(nt&192)===128&&(Et&192)===128&&(it=(ue&15)<<18|($e&63)<<12|(nt&63)<<6|Et&63,it>65535&&it<1114112&&(he=it))}}he===null?(he=65533,De=1):he>65535&&(he-=65536,U.push(he>>>10&1023|55296),he=56320|he&1023),U.push(he),J+=De}return k(U)}const ae=4096;function k(C){const y=C.length;if(y<=ae)return String.fromCharCode.apply(String,C);let x="",U=0;for(;U<y;)x+=String.fromCharCode.apply(String,C.slice(U,U+=ae));return x}function H(C,y,x){let U="";x=Math.min(C.length,x);for(let J=y;J<x;++J)U+=String.fromCharCode(C[J]&127);return U}function ie(C,y,x){let U="";x=Math.min(C.length,x);for(let J=y;J<x;++J)U+=String.fromCharCode(C[J]);return U}function X(C,y,x){const U=C.length;(!y||y<0)&&(y=0),(!x||x<0||x>U)&&(x=U);let J="";for(let ue=y;ue<x;++ue)J+=we[C[ue]];return J}function N(C,y,x){const U=C.slice(y,x);let J="";for(let ue=0;ue<U.length-1;ue+=2)J+=String.fromCharCode(U[ue]+U[ue+1]*256);return J}c.prototype.slice=function(y,x){const U=this.length;y=~~y,x=x===void 0?U:~~x,y<0?(y+=U,y<0&&(y=0)):y>U&&(y=U),x<0?(x+=U,x<0&&(x=0)):x>U&&(x=U),x<y&&(x=y);const J=this.subarray(y,x);return Object.setPrototypeOf(J,c.prototype),J};function M(C,y,x){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+y>x)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(y,x,U){y=y>>>0,x=x>>>0,U||M(y,x,this.length);let J=this[y],ue=1,he=0;for(;++he<x&&(ue*=256);)J+=this[y+he]*ue;return J},c.prototype.readUintBE=c.prototype.readUIntBE=function(y,x,U){y=y>>>0,x=x>>>0,U||M(y,x,this.length);let J=this[y+--x],ue=1;for(;x>0&&(ue*=256);)J+=this[y+--x]*ue;return J},c.prototype.readUint8=c.prototype.readUInt8=function(y,x){return y=y>>>0,x||M(y,1,this.length),this[y]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(y,x){return y=y>>>0,x||M(y,2,this.length),this[y]|this[y+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(y,x){return y=y>>>0,x||M(y,2,this.length),this[y]<<8|this[y+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(y,x){return y=y>>>0,x||M(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(y,x){return y=y>>>0,x||M(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},c.prototype.readBigUInt64LE=xe(function(y){y=y>>>0,me(y,"offset");const x=this[y],U=this[y+7];(x===void 0||U===void 0)&&Pe(y,this.length-8);const J=x+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,ue=this[++y]+this[++y]*2**8+this[++y]*2**16+U*2**24;return BigInt(J)+(BigInt(ue)<<BigInt(32))}),c.prototype.readBigUInt64BE=xe(function(y){y=y>>>0,me(y,"offset");const x=this[y],U=this[y+7];(x===void 0||U===void 0)&&Pe(y,this.length-8);const J=x*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],ue=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+U;return(BigInt(J)<<BigInt(32))+BigInt(ue)}),c.prototype.readIntLE=function(y,x,U){y=y>>>0,x=x>>>0,U||M(y,x,this.length);let J=this[y],ue=1,he=0;for(;++he<x&&(ue*=256);)J+=this[y+he]*ue;return ue*=128,J>=ue&&(J-=Math.pow(2,8*x)),J},c.prototype.readIntBE=function(y,x,U){y=y>>>0,x=x>>>0,U||M(y,x,this.length);let J=x,ue=1,he=this[y+--J];for(;J>0&&(ue*=256);)he+=this[y+--J]*ue;return ue*=128,he>=ue&&(he-=Math.pow(2,8*x)),he},c.prototype.readInt8=function(y,x){return y=y>>>0,x||M(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},c.prototype.readInt16LE=function(y,x){y=y>>>0,x||M(y,2,this.length);const U=this[y]|this[y+1]<<8;return U&32768?U|4294901760:U},c.prototype.readInt16BE=function(y,x){y=y>>>0,x||M(y,2,this.length);const U=this[y+1]|this[y]<<8;return U&32768?U|4294901760:U},c.prototype.readInt32LE=function(y,x){return y=y>>>0,x||M(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},c.prototype.readInt32BE=function(y,x){return y=y>>>0,x||M(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},c.prototype.readBigInt64LE=xe(function(y){y=y>>>0,me(y,"offset");const x=this[y],U=this[y+7];(x===void 0||U===void 0)&&Pe(y,this.length-8);const J=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(U<<24);return(BigInt(J)<<BigInt(32))+BigInt(x+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),c.prototype.readBigInt64BE=xe(function(y){y=y>>>0,me(y,"offset");const x=this[y],U=this[y+7];(x===void 0||U===void 0)&&Pe(y,this.length-8);const J=(x<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(J)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+U)}),c.prototype.readFloatLE=function(y,x){return y=y>>>0,x||M(y,4,this.length),t.read(this,y,!0,23,4)},c.prototype.readFloatBE=function(y,x){return y=y>>>0,x||M(y,4,this.length),t.read(this,y,!1,23,4)},c.prototype.readDoubleLE=function(y,x){return y=y>>>0,x||M(y,8,this.length),t.read(this,y,!0,52,8)},c.prototype.readDoubleBE=function(y,x){return y=y>>>0,x||M(y,8,this.length),t.read(this,y,!1,52,8)};function F(C,y,x,U,J,ue){if(!c.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>J||y<ue)throw new RangeError('"value" argument is out of bounds');if(x+U>C.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(y,x,U,J){if(y=+y,x=x>>>0,U=U>>>0,!J){const De=Math.pow(2,8*U)-1;F(this,y,x,U,De,0)}let ue=1,he=0;for(this[x]=y&255;++he<U&&(ue*=256);)this[x+he]=y/ue&255;return x+U},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(y,x,U,J){if(y=+y,x=x>>>0,U=U>>>0,!J){const De=Math.pow(2,8*U)-1;F(this,y,x,U,De,0)}let ue=U-1,he=1;for(this[x+ue]=y&255;--ue>=0&&(he*=256);)this[x+ue]=y/he&255;return x+U},c.prototype.writeUint8=c.prototype.writeUInt8=function(y,x,U){return y=+y,x=x>>>0,U||F(this,y,x,1,255,0),this[x]=y&255,x+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(y,x,U){return y=+y,x=x>>>0,U||F(this,y,x,2,65535,0),this[x]=y&255,this[x+1]=y>>>8,x+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(y,x,U){return y=+y,x=x>>>0,U||F(this,y,x,2,65535,0),this[x]=y>>>8,this[x+1]=y&255,x+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(y,x,U){return y=+y,x=x>>>0,U||F(this,y,x,4,4294967295,0),this[x+3]=y>>>24,this[x+2]=y>>>16,this[x+1]=y>>>8,this[x]=y&255,x+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(y,x,U){return y=+y,x=x>>>0,U||F(this,y,x,4,4294967295,0),this[x]=y>>>24,this[x+1]=y>>>16,this[x+2]=y>>>8,this[x+3]=y&255,x+4};function A(C,y,x,U,J){_e(y,U,J,C,x,7);let ue=Number(y&BigInt(4294967295));C[x++]=ue,ue=ue>>8,C[x++]=ue,ue=ue>>8,C[x++]=ue,ue=ue>>8,C[x++]=ue;let he=Number(y>>BigInt(32)&BigInt(4294967295));return C[x++]=he,he=he>>8,C[x++]=he,he=he>>8,C[x++]=he,he=he>>8,C[x++]=he,x}function L(C,y,x,U,J){_e(y,U,J,C,x,7);let ue=Number(y&BigInt(4294967295));C[x+7]=ue,ue=ue>>8,C[x+6]=ue,ue=ue>>8,C[x+5]=ue,ue=ue>>8,C[x+4]=ue;let he=Number(y>>BigInt(32)&BigInt(4294967295));return C[x+3]=he,he=he>>8,C[x+2]=he,he=he>>8,C[x+1]=he,he=he>>8,C[x]=he,x+8}c.prototype.writeBigUInt64LE=xe(function(y,x=0){return A(this,y,x,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=xe(function(y,x=0){return L(this,y,x,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(y,x,U,J){if(y=+y,x=x>>>0,!J){const $e=Math.pow(2,8*U-1);F(this,y,x,U,$e-1,-$e)}let ue=0,he=1,De=0;for(this[x]=y&255;++ue<U&&(he*=256);)y<0&&De===0&&this[x+ue-1]!==0&&(De=1),this[x+ue]=(y/he>>0)-De&255;return x+U},c.prototype.writeIntBE=function(y,x,U,J){if(y=+y,x=x>>>0,!J){const $e=Math.pow(2,8*U-1);F(this,y,x,U,$e-1,-$e)}let ue=U-1,he=1,De=0;for(this[x+ue]=y&255;--ue>=0&&(he*=256);)y<0&&De===0&&this[x+ue+1]!==0&&(De=1),this[x+ue]=(y/he>>0)-De&255;return x+U},c.prototype.writeInt8=function(y,x,U){return y=+y,x=x>>>0,U||F(this,y,x,1,127,-128),y<0&&(y=255+y+1),this[x]=y&255,x+1},c.prototype.writeInt16LE=function(y,x,U){return y=+y,x=x>>>0,U||F(this,y,x,2,32767,-32768),this[x]=y&255,this[x+1]=y>>>8,x+2},c.prototype.writeInt16BE=function(y,x,U){return y=+y,x=x>>>0,U||F(this,y,x,2,32767,-32768),this[x]=y>>>8,this[x+1]=y&255,x+2},c.prototype.writeInt32LE=function(y,x,U){return y=+y,x=x>>>0,U||F(this,y,x,4,2147483647,-2147483648),this[x]=y&255,this[x+1]=y>>>8,this[x+2]=y>>>16,this[x+3]=y>>>24,x+4},c.prototype.writeInt32BE=function(y,x,U){return y=+y,x=x>>>0,U||F(this,y,x,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[x]=y>>>24,this[x+1]=y>>>16,this[x+2]=y>>>8,this[x+3]=y&255,x+4},c.prototype.writeBigInt64LE=xe(function(y,x=0){return A(this,y,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=xe(function(y,x=0){return L(this,y,x,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Y(C,y,x,U,J,ue){if(x+U>C.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function te(C,y,x,U,J){return y=+y,x=x>>>0,J||Y(C,y,x,4),t.write(C,y,x,U,23,4),x+4}c.prototype.writeFloatLE=function(y,x,U){return te(this,y,x,!0,U)},c.prototype.writeFloatBE=function(y,x,U){return te(this,y,x,!1,U)};function fe(C,y,x,U,J){return y=+y,x=x>>>0,J||Y(C,y,x,8),t.write(C,y,x,U,52,8),x+8}c.prototype.writeDoubleLE=function(y,x,U){return fe(this,y,x,!0,U)},c.prototype.writeDoubleBE=function(y,x,U){return fe(this,y,x,!1,U)},c.prototype.copy=function(y,x,U,J){if(!c.isBuffer(y))throw new TypeError("argument should be a Buffer");if(U||(U=0),!J&&J!==0&&(J=this.length),x>=y.length&&(x=y.length),x||(x=0),J>0&&J<U&&(J=U),J===U||y.length===0||this.length===0)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(U<0||U>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),y.length-x<J-U&&(J=y.length-x+U);const ue=J-U;return this===y&&typeof s.prototype.copyWithin=="function"?this.copyWithin(x,U,J):s.prototype.set.call(y,this.subarray(U,J),x),ue},c.prototype.fill=function(y,x,U,J){if(typeof y=="string"){if(typeof x=="string"?(J=x,x=0,U=this.length):typeof U=="string"&&(J=U,U=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!c.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(y.length===1){const he=y.charCodeAt(0);(J==="utf8"&&he<128||J==="latin1")&&(y=he)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(x<0||this.length<x||this.length<U)throw new RangeError("Out of range index");if(U<=x)return this;x=x>>>0,U=U===void 0?this.length:U>>>0,y||(y=0);let ue;if(typeof y=="number")for(ue=x;ue<U;++ue)this[ue]=y;else{const he=c.isBuffer(y)?y:c.from(y,J),De=he.length;if(De===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(ue=0;ue<U-x;++ue)this[ue+x]=he[ue%De]}return this};const B={};function G(C,y,x){B[C]=class extends x{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}G("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),G("ERR_INVALID_ARG_TYPE",function(C,y){return`The "${C}" argument must be of type number. Received type ${typeof y}`},TypeError),G("ERR_OUT_OF_RANGE",function(C,y,x){let U=`The value of "${C}" is out of range.`,J=x;return Number.isInteger(x)&&Math.abs(x)>2**32?J=Q(String(x)):typeof x=="bigint"&&(J=String(x),(x>BigInt(2)**BigInt(32)||x<-(BigInt(2)**BigInt(32)))&&(J=Q(J)),J+="n"),U+=` It must be ${y}. Received ${J}`,U},RangeError);function Q(C){let y="",x=C.length;const U=C[0]==="-"?1:0;for(;x>=U+4;x-=3)y=`_${C.slice(x-3,x)}${y}`;return`${C.slice(0,x)}${y}`}function oe(C,y,x){me(y,"offset"),(C[y]===void 0||C[y+x]===void 0)&&Pe(y,C.length-(x+1))}function _e(C,y,x,U,J,ue){if(C>x||C<y){const he=typeof y=="bigint"?"n":"";let De;throw y===0||y===BigInt(0)?De=`>= 0${he} and < 2${he} ** ${(ue+1)*8}${he}`:De=`>= -(2${he} ** ${(ue+1)*8-1}${he}) and < 2 ** ${(ue+1)*8-1}${he}`,new B.ERR_OUT_OF_RANGE("value",De,C)}oe(U,J,ue)}function me(C,y){if(typeof C!="number")throw new B.ERR_INVALID_ARG_TYPE(y,"number",C)}function Pe(C,y,x){throw Math.floor(C)!==C?(me(C,x),new B.ERR_OUT_OF_RANGE("offset","an integer",C)):y<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,C)}const Ue=/[^+/0-9A-Za-z-_]/g;function se(C){if(C=C.split("=")[0],C=C.trim().replace(Ue,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function Te(C,y){y=y||1/0;let x;const U=C.length;let J=null;const ue=[];for(let he=0;he<U;++he){if(x=C.charCodeAt(he),x>55295&&x<57344){if(!J){if(x>56319){(y-=3)>-1&&ue.push(239,191,189);continue}else if(he+1===U){(y-=3)>-1&&ue.push(239,191,189);continue}J=x;continue}if(x<56320){(y-=3)>-1&&ue.push(239,191,189),J=x;continue}x=(J-55296<<10|x-56320)+65536}else J&&(y-=3)>-1&&ue.push(239,191,189);if(J=null,x<128){if((y-=1)<0)break;ue.push(x)}else if(x<2048){if((y-=2)<0)break;ue.push(x>>6|192,x&63|128)}else if(x<65536){if((y-=3)<0)break;ue.push(x>>12|224,x>>6&63|128,x&63|128)}else if(x<1114112){if((y-=4)<0)break;ue.push(x>>18|240,x>>12&63|128,x>>6&63|128,x&63|128)}else throw new Error("Invalid code point")}return ue}function Be(C){const y=[];for(let x=0;x<C.length;++x)y.push(C.charCodeAt(x)&255);return y}function Ee(C,y){let x,U,J;const ue=[];for(let he=0;he<C.length&&!((y-=2)<0);++he)x=C.charCodeAt(he),U=x>>8,J=x%256,ue.push(J),ue.push(U);return ue}function Ce(C){return e.toByteArray(se(C))}function Z(C,y,x,U){let J;for(J=0;J<U&&!(J+x>=y.length||J>=C.length);++J)y[J+x]=C[J];return J}function ne(C,y){return C instanceof y||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===y.name}function de(C){return C!==C}const we=function(){const C="0123456789abcdef",y=new Array(256);for(let x=0;x<16;++x){const U=x*16;for(let J=0;J<16;++J)y[U+J]=C[x]+C[J]}return y}();function xe(C){return typeof BigInt>"u"?ke:C}function ke(){throw new Error("BigInt not supported")}})(qt);const b1=qt.Buffer,X4=qt.Blob,Y4=qt.BlobOptions,y1=qt.Buffer,$4=qt.File,K4=qt.FileOptions,Z4=qt.INSPECT_MAX_BYTES,J4=qt.SlowBuffer,Q4=qt.TranscodeEncoding,e5=qt.atob,t5=qt.btoa,r5=qt.constants,n5=qt.isAscii,i5=qt.isUtf8,s5=qt.kMaxLength,a5=qt.kStringMaxLength,o5=qt.resolveObjectURL,l5=qt.transcode,u5=Object.freeze(Object.defineProperty({__proto__:null,Blob:X4,BlobOptions:Y4,Buffer:y1,File:$4,FileOptions:K4,INSPECT_MAX_BYTES:Z4,SlowBuffer:J4,TranscodeEncoding:Q4,atob:e5,btoa:t5,constants:r5,default:b1,isAscii:n5,isUtf8:i5,kMaxLength:s5,kStringMaxLength:a5,resolveObjectURL:o5,transcode:l5},Symbol.toStringTag,{value:"Module"}));function c5(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var x1={exports:{}},Gt=x1.exports={},Gn,zn;function ip(){throw new Error("setTimeout has not been defined")}function sp(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Gn=setTimeout:Gn=ip}catch{Gn=ip}try{typeof clearTimeout=="function"?zn=clearTimeout:zn=sp}catch{zn=sp}})();function w1(r){if(Gn===setTimeout)return setTimeout(r,0);if((Gn===ip||!Gn)&&setTimeout)return Gn=setTimeout,setTimeout(r,0);try{return Gn(r,0)}catch{try{return Gn.call(null,r,0)}catch{return Gn.call(this,r,0)}}}function f5(r){if(zn===clearTimeout)return clearTimeout(r);if((zn===sp||!zn)&&clearTimeout)return zn=clearTimeout,clearTimeout(r);try{return zn(r)}catch{try{return zn.call(null,r)}catch{return zn.call(this,r)}}}var vi=[],Ca=!1,ys,Zu=-1;function h5(){!Ca||!ys||(Ca=!1,ys.length?vi=ys.concat(vi):Zu=-1,vi.length&&S1())}function S1(){if(!Ca){var r=w1(h5);Ca=!0;for(var e=vi.length;e;){for(ys=vi,vi=[];++Zu<e;)ys&&ys[Zu].run();Zu=-1,e=vi.length}ys=null,Ca=!1,f5(r)}}Gt.nextTick=function(r){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];vi.push(new T1(r,e)),vi.length===1&&!Ca&&w1(S1)};function T1(r,e){this.fun=r,this.array=e}T1.prototype.run=function(){this.fun.apply(null,this.array)};Gt.title="browser";Gt.browser=!0;Gt.env={};Gt.argv=[];Gt.version="";Gt.versions={};function Mi(){}Gt.on=Mi;Gt.addListener=Mi;Gt.once=Mi;Gt.off=Mi;Gt.removeListener=Mi;Gt.removeAllListeners=Mi;Gt.emit=Mi;Gt.prependListener=Mi;Gt.prependOnceListener=Mi;Gt.listeners=function(r){return[]};Gt.binding=function(r){throw new Error("process.binding is not supported")};Gt.cwd=function(){return"/"};Gt.chdir=function(r){throw new Error("process.chdir is not supported")};Gt.umask=function(){return 0};var d5=x1.exports;const Ge=c5(d5);var Qi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Eg(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function p5(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var E1={};const Ha=p5(u5);var Ag={exports:{}},Pa=typeof Reflect=="object"?Reflect:null,jv=Pa&&typeof Pa.apply=="function"?Pa.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Ju;Pa&&typeof Pa.ownKeys=="function"?Ju=Pa.ownKeys:Object.getOwnPropertySymbols?Ju=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ju=function(e){return Object.getOwnPropertyNames(e)};function g5(r){console&&console.warn&&console.warn(r)}var A1=Number.isNaN||function(e){return e!==e};function wt(){wt.init.call(this)}Ag.exports=wt;Ag.exports.once=b5;wt.EventEmitter=wt;wt.prototype._events=void 0;wt.prototype._eventsCount=0;wt.prototype._maxListeners=void 0;var Hv=10;function cf(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(wt,"defaultMaxListeners",{enumerable:!0,get:function(){return Hv},set:function(r){if(typeof r!="number"||r<0||A1(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Hv=r}});wt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};wt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||A1(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function C1(r){return r._maxListeners===void 0?wt.defaultMaxListeners:r._maxListeners}wt.prototype.getMaxListeners=function(){return C1(this)};wt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")jv(l,this,t);else for(var u=l.length,c=O1(l,u),n=0;n<u;++n)jv(c[n],this,t);return!0};function P1(r,e,t,n){var i,s,a;if(cf(t),s=r._events,s===void 0?(s=r._events=Object.create(null),r._eventsCount=0):(s.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),a=s[e]),a===void 0)a=s[e]=t,++r._eventsCount;else if(typeof a=="function"?a=s[e]=n?[t,a]:[a,t]:n?a.unshift(t):a.push(t),i=C1(r),i>0&&a.length>i&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=r,o.type=e,o.count=a.length,g5(o)}return r}wt.prototype.addListener=function(e,t){return P1(this,e,t,!1)};wt.prototype.on=wt.prototype.addListener;wt.prototype.prependListener=function(e,t){return P1(this,e,t,!0)};function m5(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function R1(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=m5.bind(n);return i.listener=t,n.wrapFn=i,i}wt.prototype.once=function(e,t){return cf(t),this.on(e,R1(this,e,t)),this};wt.prototype.prependOnceListener=function(e,t){return cf(t),this.prependListener(e,R1(this,e,t)),this};wt.prototype.removeListener=function(e,t){var n,i,s,a,o;if(cf(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,s=a;break}if(s<0)return this;s===0?n.shift():v5(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,o||t)}return this};wt.prototype.off=wt.prototype.removeListener;wt.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),a;for(i=0;i<s.length;++i)a=s[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function k1(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?_5(i):O1(i,i.length)}wt.prototype.listeners=function(e){return k1(this,e,!0)};wt.prototype.rawListeners=function(e){return k1(this,e,!1)};wt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):M1.call(r,e)};wt.prototype.listenerCount=M1;function M1(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}wt.prototype.eventNames=function(){return this._eventsCount>0?Ju(this._events):[]};function O1(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function v5(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function _5(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function b5(r,e){return new Promise(function(t,n){function i(a){r.removeListener(e,s),n(a)}function s(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}I1(r,e,s,{once:!0}),e!=="error"&&y5(r,i,{once:!0})})}function y5(r,e,t){typeof r.on=="function"&&I1(r,"error",e,t)}function I1(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(s){n.once&&r.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var Cg=Ag.exports,ap={exports:{}};typeof Object.create=="function"?ap.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ap.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var $s=ap.exports,jf,Vv;function B1(){return Vv||(Vv=1,jf=Cg.EventEmitter),jf}var Pi={},F1={},Pg=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0},x5=Pg,ff=function(){return x5()&&!!Symbol.toStringTag},Rg=Object,w5=Error,S5=EvalError,T5=RangeError,E5=ReferenceError,D1=SyntaxError,Nl=TypeError,A5=URIError,C5=Math.abs,P5=Math.floor,R5=Math.max,k5=Math.min,M5=Math.pow,O5=Math.round,I5=Number.isNaN||function(e){return e!==e},B5=I5,F5=function(e){return B5(e)||e===0?e:e<0?-1:1},D5=Object.getOwnPropertyDescriptor,Qu=D5;if(Qu)try{Qu([],"length")}catch{Qu=null}var So=Qu,ec=Object.defineProperty||!1;if(ec)try{ec({},"a",{value:1})}catch{ec=!1}var hf=ec,Hf,Wv;function L5(){if(Wv)return Hf;Wv=1;var r=typeof Symbol<"u"&&Symbol,e=Pg;return Hf=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},Hf}var Vf,qv;function L1(){return qv||(qv=1,Vf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Vf}var Wf,Xv;function U1(){if(Xv)return Wf;Xv=1;var r=Rg;return Wf=r.getPrototypeOf||null,Wf}var qf,Yv;function U5(){if(Yv)return qf;Yv=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(l,u){for(var c=[],f=0;f<l.length;f+=1)c[f]=l[f];for(var h=0;h<u.length;h+=1)c[h+l.length]=u[h];return c},s=function(l,u){for(var c=[],f=u,h=0;f<l.length;f+=1,h+=1)c[h]=l[f];return c},a=function(o,l){for(var u="",c=0;c<o.length;c+=1)u+=o[c],c+1<o.length&&(u+=l);return u};return qf=function(l){var u=this;if(typeof u!="function"||e.apply(u)!==n)throw new TypeError(r+u);for(var c=s(arguments,1),f,h=function(){if(this instanceof f){var g=u.apply(this,i(c,arguments));return Object(g)===g?g:this}return u.apply(l,i(c,arguments))},d=t(0,u.length-c.length),p=[],v=0;v<d;v++)p[v]="$"+v;if(f=Function("binder","return function ("+a(p,",")+"){ return binder.apply(this,arguments); }")(h),u.prototype){var m=function(){};m.prototype=u.prototype,f.prototype=new m,m.prototype=null}return f},qf}var Xf,$v;function Gl(){if($v)return Xf;$v=1;var r=U5();return Xf=Function.prototype.bind||r,Xf}var Yf,Kv;function kg(){return Kv||(Kv=1,Yf=Function.prototype.call),Yf}var $f,Zv;function Mg(){return Zv||(Zv=1,$f=Function.prototype.apply),$f}var N5=typeof Reflect<"u"&&Reflect&&Reflect.apply,G5=Gl(),z5=Mg(),j5=kg(),H5=N5,N1=H5||G5.call(j5,z5),V5=Gl(),W5=Nl,q5=kg(),X5=N1,Og=function(e){if(e.length<1||typeof e[0]!="function")throw new W5("a function is required");return X5(V5,q5,e)},Kf,Jv;function Y5(){if(Jv)return Kf;Jv=1;var r=Og,e=So,t;try{t=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var n=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return Kf=n&&typeof n.get=="function"?r([n.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,Kf}var Zf,Qv;function Ig(){if(Qv)return Zf;Qv=1;var r=L1(),e=U1(),t=Y5();return Zf=r?function(i){return r(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,Zf}var Jf,e_;function G1(){if(e_)return Jf;e_=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=Gl();return Jf=t.call(r,e),Jf}var Je,$5=Rg,K5=w5,Z5=S5,J5=T5,Q5=E5,Va=D1,Ra=Nl,eM=A5,tM=C5,rM=P5,nM=R5,iM=k5,sM=M5,aM=O5,oM=F5,z1=Function,Qf=function(r){try{return z1('"use strict"; return ('+r+").constructor;")()}catch{}},yl=So,lM=hf,eh=function(){throw new Ra},uM=yl?function(){try{return arguments.callee,eh}catch{try{return yl(arguments,"callee").get}catch{return eh}}}():eh,sa=L5()(),Yt=Ig(),cM=U1(),fM=L1(),j1=Mg(),zl=kg(),da={},hM=typeof Uint8Array>"u"||!Yt?Je:Yt(Uint8Array),Cs={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Je:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Je:ArrayBuffer,"%ArrayIteratorPrototype%":sa&&Yt?Yt([][Symbol.iterator]()):Je,"%AsyncFromSyncIteratorPrototype%":Je,"%AsyncFunction%":da,"%AsyncGenerator%":da,"%AsyncGeneratorFunction%":da,"%AsyncIteratorPrototype%":da,"%Atomics%":typeof Atomics>"u"?Je:Atomics,"%BigInt%":typeof BigInt>"u"?Je:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Je:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Je:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Je:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":K5,"%eval%":eval,"%EvalError%":Z5,"%Float16Array%":typeof Float16Array>"u"?Je:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Je:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Je:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Je:FinalizationRegistry,"%Function%":z1,"%GeneratorFunction%":da,"%Int8Array%":typeof Int8Array>"u"?Je:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Je:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Je:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":sa&&Yt?Yt(Yt([][Symbol.iterator]())):Je,"%JSON%":typeof JSON=="object"?JSON:Je,"%Map%":typeof Map>"u"?Je:Map,"%MapIteratorPrototype%":typeof Map>"u"||!sa||!Yt?Je:Yt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":$5,"%Object.getOwnPropertyDescriptor%":yl,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Je:Promise,"%Proxy%":typeof Proxy>"u"?Je:Proxy,"%RangeError%":J5,"%ReferenceError%":Q5,"%Reflect%":typeof Reflect>"u"?Je:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Je:Set,"%SetIteratorPrototype%":typeof Set>"u"||!sa||!Yt?Je:Yt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Je:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":sa&&Yt?Yt(""[Symbol.iterator]()):Je,"%Symbol%":sa?Symbol:Je,"%SyntaxError%":Va,"%ThrowTypeError%":uM,"%TypedArray%":hM,"%TypeError%":Ra,"%Uint8Array%":typeof Uint8Array>"u"?Je:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Je:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Je:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Je:Uint32Array,"%URIError%":eM,"%WeakMap%":typeof WeakMap>"u"?Je:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Je:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Je:WeakSet,"%Function.prototype.call%":zl,"%Function.prototype.apply%":j1,"%Object.defineProperty%":lM,"%Object.getPrototypeOf%":cM,"%Math.abs%":tM,"%Math.floor%":rM,"%Math.max%":nM,"%Math.min%":iM,"%Math.pow%":sM,"%Math.round%":aM,"%Math.sign%":oM,"%Reflect.getPrototypeOf%":fM};if(Yt)try{null.error}catch(r){var dM=Yt(Yt(r));Cs["%Error.prototype%"]=dM}var pM=function r(e){var t;if(e==="%AsyncFunction%")t=Qf("async function () {}");else if(e==="%GeneratorFunction%")t=Qf("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Qf("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&Yt&&(t=Yt(i.prototype))}return Cs[e]=t,t},t_={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},jl=Gl(),Oc=G1(),gM=jl.call(zl,Array.prototype.concat),mM=jl.call(j1,Array.prototype.splice),r_=jl.call(zl,String.prototype.replace),Ic=jl.call(zl,String.prototype.slice),vM=jl.call(zl,RegExp.prototype.exec),_M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,bM=/\\(\\)?/g,yM=function(e){var t=Ic(e,0,1),n=Ic(e,-1);if(t==="%"&&n!=="%")throw new Va("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Va("invalid intrinsic syntax, expected opening `%`");var i=[];return r_(e,_M,function(s,a,o,l){i[i.length]=o?r_(l,bM,"$1"):a||s}),i},xM=function(e,t){var n=e,i;if(Oc(t_,n)&&(i=t_[n],n="%"+i[0]+"%"),Oc(Cs,n)){var s=Cs[n];if(s===da&&(s=pM(n)),typeof s>"u"&&!t)throw new Ra("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Va("intrinsic "+e+" does not exist!")},Bg=function(e,t){if(typeof e!="string"||e.length===0)throw new Ra("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Ra('"allowMissing" argument must be a boolean');if(vM(/^%?[^%]*%?$/,e)===null)throw new Va("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=yM(e),i=n.length>0?n[0]:"",s=xM("%"+i+"%",t),a=s.name,o=s.value,l=!1,u=s.alias;u&&(i=u[0],mM(n,gM([0,1],u)));for(var c=1,f=!0;c<n.length;c+=1){var h=n[c],d=Ic(h,0,1),p=Ic(h,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new Va("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(l=!0),i+="."+h,a="%"+i+"%",Oc(Cs,a))o=Cs[a];else if(o!=null){if(!(h in o)){if(!t)throw new Ra("base intrinsic for "+e+" exists, but the property is not available.");return}if(yl&&c+1>=n.length){var v=yl(o,h);f=!!v,f&&"get"in v&&!("originalValue"in v.get)?o=v.get:o=o[h]}else f=Oc(o,h),o=o[h];f&&!l&&(Cs[a]=o)}}return o},H1=Bg,V1=Og,wM=V1([H1("%String.prototype.indexOf%")]),To=function(e,t){var n=H1(e,!!t);return typeof n=="function"&&wM(e,".prototype.")>-1?V1([n]):n},SM=ff(),TM=To,op=TM("Object.prototype.toString"),df=function(e){return SM&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:op(e)==="[object Arguments]"},W1=function(e){return df(e)?!0:e!==null&&typeof e=="object"&&"length"in e&&typeof e.length=="number"&&e.length>=0&&op(e)!=="[object Array]"&&"callee"in e&&op(e.callee)==="[object Function]"},EM=function(){return df(arguments)}();df.isLegacyArguments=W1;var AM=EM?df:W1,n_=To,CM=ff(),PM=G1(),RM=So,lp;if(CM){var kM=n_("RegExp.prototype.exec"),i_={},th=function(){throw i_},s_={toString:th,valueOf:th};typeof Symbol.toPrimitive=="symbol"&&(s_[Symbol.toPrimitive]=th),lp=function(e){if(!e||typeof e!="object")return!1;var t=RM(e,"lastIndex"),n=t&&PM(t,"value");if(!n)return!1;try{kM(e,s_)}catch(i){return i===i_}}}else{var MM=n_("Object.prototype.toString"),OM="[object RegExp]";lp=function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:MM(e)===OM}}var IM=lp,BM=To,FM=IM,DM=BM("RegExp.prototype.exec"),LM=Nl,UM=function(e){if(!FM(e))throw new LM("`regex` must be a RegExp");return function(n){return DM(e,n)!==null}},rh,a_;function NM(){if(a_)return rh;a_=1;const r=function*(){}.constructor;return rh=()=>r,rh}var q1=To,GM=UM,zM=GM(/^\s*(?:function)?\*/),jM=ff(),o_=Ig(),HM=q1("Object.prototype.toString"),VM=q1("Function.prototype.toString"),WM=NM(),qM=function(e){if(typeof e!="function")return!1;if(zM(VM(e)))return!0;if(!jM){var t=HM(e);return t==="[object GeneratorFunction]"}if(!o_)return!1;var n=WM();return n&&o_(e)===n.prototype},X1=Function.prototype.toString,ya=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,up,tc;if(typeof ya=="function"&&typeof Object.defineProperty=="function")try{up=Object.defineProperty({},"length",{get:function(){throw tc}}),tc={},ya(function(){throw 42},null,up)}catch(r){r!==tc&&(ya=null)}else ya=null;var XM=/^\s*class\b/,cp=function(e){try{var t=X1.call(e);return XM.test(t)}catch{return!1}},nh=function(e){try{return cp(e)?!1:(X1.call(e),!0)}catch{return!1}},rc=Object.prototype.toString,YM="[object Object]",$M="[object Function]",KM="[object GeneratorFunction]",ZM="[object HTMLAllCollection]",JM="[object HTML document.all class]",QM="[object HTMLCollection]",e8=typeof Symbol=="function"&&!!Symbol.toStringTag,t8=!(0 in[,]),fp=function(){return!1};if(typeof document=="object"){var r8=document.all;rc.call(r8)===rc.call(document.all)&&(fp=function(e){if((t8||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=rc.call(e);return(t===ZM||t===JM||t===QM||t===YM)&&e("")==null}catch{}return!1})}var n8=ya?function(e){if(fp(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{ya(e,null,up)}catch(t){if(t!==tc)return!1}return!cp(e)&&nh(e)}:function(e){if(fp(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(e8)return nh(e);if(cp(e))return!1;var t=rc.call(e);return t!==$M&&t!==KM&&!/^\[object HTML/.test(t)?!1:nh(e)},i8=n8,s8=Object.prototype.toString,Y1=Object.prototype.hasOwnProperty,a8=function(e,t,n){for(var i=0,s=e.length;i<s;i++)Y1.call(e,i)&&(n==null?t(e[i],i,e):t.call(n,e[i],i,e))},o8=function(e,t,n){for(var i=0,s=e.length;i<s;i++)n==null?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)},l8=function(e,t,n){for(var i in e)Y1.call(e,i)&&(n==null?t(e[i],i,e):t.call(n,e[i],i,e))};function u8(r){return s8.call(r)==="[object Array]"}var c8=function(e,t,n){if(!i8(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),u8(e)?a8(e,t,i):typeof e=="string"?o8(e,t,i):l8(e,t,i)},f8=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],ih=f8,h8=typeof globalThis>"u"?Qi:globalThis,d8=function(){for(var e=[],t=0;t<ih.length;t++)typeof h8[ih[t]]=="function"&&(e[e.length]=ih[t]);return e},$1={exports:{}},l_=hf,p8=D1,aa=Nl,u_=So,K1=function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new aa("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new aa("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new aa("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new aa("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new aa("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new aa("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,l=!!u_&&u_(e,t);if(l_)l_(e,t,{configurable:a===null&&l?l.configurable:!a,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:s===null&&l?l.writable:!s});else if(o||!i&&!s&&!a)e[t]=n;else throw new p8("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},hp=hf,Z1=function(){return!!hp};Z1.hasArrayLengthDefineBug=function(){if(!hp)return null;try{return hp([],"length",{value:1}).length!==1}catch{return!0}};var J1=Z1,g8=Bg,c_=K1,m8=J1(),f_=So,h_=Nl,v8=g8("%Math.floor%"),_8=function(e,t){if(typeof e!="function")throw new h_("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||v8(t)!==t)throw new h_("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&f_){var a=f_(e,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(s=!1)}return(i||s||!n)&&(m8?c_(e,"length",t,!0,!0):c_(e,"length",t)),e},b8=Gl(),y8=Mg(),x8=N1,w8=function(){return x8(b8,y8,arguments)};(function(r){var e=_8,t=hf,n=Og,i=w8;r.exports=function(a){var o=n(arguments),l=a.length-(arguments.length-1);return e(o,1+(l>0?l:0),!0)},t?t(r.exports,"apply",{value:i}):r.exports.apply=i})($1);var pf=$1.exports,Bc=c8,S8=d8,d_=pf,Fg=To,nc=So,_u=Ig(),T8=Fg("Object.prototype.toString"),Q1=ff(),p_=typeof globalThis>"u"?Qi:globalThis,dp=S8(),Dg=Fg("String.prototype.slice"),E8=Fg("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},Fc={__proto__:null};Q1&&nc&&_u?Bc(dp,function(r){var e=new p_[r];if(Symbol.toStringTag in e&&_u){var t=_u(e),n=nc(t,Symbol.toStringTag);if(!n&&t){var i=_u(t);n=nc(i,Symbol.toStringTag)}if(n&&n.get){var s=d_(n.get);Fc["$"+r]=s}}}):Bc(dp,function(r){var e=new p_[r],t=e.slice||e.set;if(t){var n=d_(t);Fc["$"+r]=n}});var A8=function(e){var t=!1;return Bc(Fc,function(n,i){if(!t)try{"$"+n(e)===i&&(t=Dg(i,1))}catch{}}),t},C8=function(e){var t=!1;return Bc(Fc,function(n,i){if(!t)try{n(e),t=Dg(i,1)}catch{}}),t},ew=function(e){if(!e||typeof e!="object")return!1;if(!Q1){var t=Dg(T8(e),8,-1);return E8(dp,t)>-1?t:t!=="Object"?!1:C8(e)}return nc?A8(e):null},P8=ew,R8=function(e){return!!P8(e)};(function(r){var e=AM,t=qM,n=ew,i=R8;function s(se){return se.call.bind(se)}var a=typeof BigInt<"u",o=typeof Symbol<"u",l=s(Object.prototype.toString),u=s(Number.prototype.valueOf),c=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(a)var h=s(BigInt.prototype.valueOf);if(o)var d=s(Symbol.prototype.valueOf);function p(se,Te){if(typeof se!="object")return!1;try{return Te(se),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=t,r.isTypedArray=i;function v(se){return typeof Promise<"u"&&se instanceof Promise||se!==null&&typeof se=="object"&&typeof se.then=="function"&&typeof se.catch=="function"}r.isPromise=v;function m(se){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(se):i(se)||N(se)}r.isArrayBufferView=m;function g(se){return n(se)==="Uint8Array"}r.isUint8Array=g;function _(se){return n(se)==="Uint8ClampedArray"}r.isUint8ClampedArray=_;function b(se){return n(se)==="Uint16Array"}r.isUint16Array=b;function w(se){return n(se)==="Uint32Array"}r.isUint32Array=w;function S(se){return n(se)==="Int8Array"}r.isInt8Array=S;function T(se){return n(se)==="Int16Array"}r.isInt16Array=T;function E(se){return n(se)==="Int32Array"}r.isInt32Array=E;function O(se){return n(se)==="Float32Array"}r.isFloat32Array=O;function P(se){return n(se)==="Float64Array"}r.isFloat64Array=P;function V(se){return n(se)==="BigInt64Array"}r.isBigInt64Array=V;function W(se){return n(se)==="BigUint64Array"}r.isBigUint64Array=W;function D(se){return l(se)==="[object Map]"}D.working=typeof Map<"u"&&D(new Map);function j(se){return typeof Map>"u"?!1:D.working?D(se):se instanceof Map}r.isMap=j;function I(se){return l(se)==="[object Set]"}I.working=typeof Set<"u"&&I(new Set);function q(se){return typeof Set>"u"?!1:I.working?I(se):se instanceof Set}r.isSet=q;function $(se){return l(se)==="[object WeakMap]"}$.working=typeof WeakMap<"u"&&$(new WeakMap);function K(se){return typeof WeakMap>"u"?!1:$.working?$(se):se instanceof WeakMap}r.isWeakMap=K;function ae(se){return l(se)==="[object WeakSet]"}ae.working=typeof WeakSet<"u"&&ae(new WeakSet);function k(se){return ae(se)}r.isWeakSet=k;function H(se){return l(se)==="[object ArrayBuffer]"}H.working=typeof ArrayBuffer<"u"&&H(new ArrayBuffer);function ie(se){return typeof ArrayBuffer>"u"?!1:H.working?H(se):se instanceof ArrayBuffer}r.isArrayBuffer=ie;function X(se){return l(se)==="[object DataView]"}X.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&X(new DataView(new ArrayBuffer(1),0,1));function N(se){return typeof DataView>"u"?!1:X.working?X(se):se instanceof DataView}r.isDataView=N;var M=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function F(se){return l(se)==="[object SharedArrayBuffer]"}function A(se){return typeof M>"u"?!1:(typeof F.working>"u"&&(F.working=F(new M)),F.working?F(se):se instanceof M)}r.isSharedArrayBuffer=A;function L(se){return l(se)==="[object AsyncFunction]"}r.isAsyncFunction=L;function Y(se){return l(se)==="[object Map Iterator]"}r.isMapIterator=Y;function te(se){return l(se)==="[object Set Iterator]"}r.isSetIterator=te;function fe(se){return l(se)==="[object Generator]"}r.isGeneratorObject=fe;function B(se){return l(se)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=B;function G(se){return p(se,u)}r.isNumberObject=G;function Q(se){return p(se,c)}r.isStringObject=Q;function oe(se){return p(se,f)}r.isBooleanObject=oe;function _e(se){return a&&p(se,h)}r.isBigIntObject=_e;function me(se){return o&&p(se,d)}r.isSymbolObject=me;function Pe(se){return G(se)||Q(se)||oe(se)||_e(se)||me(se)}r.isBoxedPrimitive=Pe;function Ue(se){return typeof Uint8Array<"u"&&(ie(se)||A(se))}r.isAnyArrayBuffer=Ue,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(se){Object.defineProperty(r,se,{enumerable:!1,value:function(){throw new Error(se+" is not supported in userland")}})})})(F1);var k8=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"};(function(r){var e={},t=Object.getOwnPropertyDescriptors||function(M){for(var F=Object.keys(M),A={},L=0;L<F.length;L++)A[F[L]]=Object.getOwnPropertyDescriptor(M,F[L]);return A},n=/%[sdj%]/g;r.format=function(N){if(!T(N)){for(var M=[],F=0;F<arguments.length;F++)M.push(o(arguments[F]));return M.join(" ")}for(var F=1,A=arguments,L=A.length,Y=String(N).replace(n,function(fe){if(fe==="%%")return"%";if(F>=L)return fe;switch(fe){case"%s":return String(A[F++]);case"%d":return Number(A[F++]);case"%j":try{return JSON.stringify(A[F++])}catch{return"[Circular]"}default:return fe}}),te=A[F];F<L;te=A[++F])b(te)||!V(te)?Y+=" "+te:Y+=" "+o(te);return Y},r.deprecate=function(N,M){if(typeof Ge<"u"&&Ge.noDeprecation===!0)return N;if(typeof Ge>"u")return function(){return r.deprecate(N,M).apply(this,arguments)};var F=!1;function A(){if(!F){if(Ge.throwDeprecation)throw new Error(M);Ge.traceDeprecation?console.trace(M):console.error(M),F=!0}return N.apply(this,arguments)}return A};var i={},s=/^$/;if(e.NODE_DEBUG){var a=e.NODE_DEBUG;a=a.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+a+"$","i")}r.debuglog=function(N){if(N=N.toUpperCase(),!i[N])if(s.test(N)){var M=Ge.pid;i[N]=function(){var F=r.format.apply(r,arguments);console.error("%s %d: %s",N,M,F)}}else i[N]=function(){};return i[N]};function o(N,M){var F={seen:[],stylize:u};return arguments.length>=3&&(F.depth=arguments[2]),arguments.length>=4&&(F.colors=arguments[3]),_(M)?F.showHidden=M:M&&r._extend(F,M),O(F.showHidden)&&(F.showHidden=!1),O(F.depth)&&(F.depth=2),O(F.colors)&&(F.colors=!1),O(F.customInspect)&&(F.customInspect=!0),F.colors&&(F.stylize=l),f(F,N,F.depth)}r.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(N,M){var F=o.styles[M];return F?"\x1B["+o.colors[F][0]+"m"+N+"\x1B["+o.colors[F][1]+"m":N}function u(N,M){return N}function c(N){var M={};return N.forEach(function(F,A){M[F]=!0}),M}function f(N,M,F){if(N.customInspect&&M&&j(M.inspect)&&M.inspect!==r.inspect&&!(M.constructor&&M.constructor.prototype===M)){var A=M.inspect(F,N);return T(A)||(A=f(N,A,F)),A}var L=h(N,M);if(L)return L;var Y=Object.keys(M),te=c(Y);if(N.showHidden&&(Y=Object.getOwnPropertyNames(M)),D(M)&&(Y.indexOf("message")>=0||Y.indexOf("description")>=0))return d(M);if(Y.length===0){if(j(M)){var fe=M.name?": "+M.name:"";return N.stylize("[Function"+fe+"]","special")}if(P(M))return N.stylize(RegExp.prototype.toString.call(M),"regexp");if(W(M))return N.stylize(Date.prototype.toString.call(M),"date");if(D(M))return d(M)}var B="",G=!1,Q=["{","}"];if(g(M)&&(G=!0,Q=["[","]"]),j(M)){var oe=M.name?": "+M.name:"";B=" [Function"+oe+"]"}if(P(M)&&(B=" "+RegExp.prototype.toString.call(M)),W(M)&&(B=" "+Date.prototype.toUTCString.call(M)),D(M)&&(B=" "+d(M)),Y.length===0&&(!G||M.length==0))return Q[0]+B+Q[1];if(F<0)return P(M)?N.stylize(RegExp.prototype.toString.call(M),"regexp"):N.stylize("[Object]","special");N.seen.push(M);var _e;return G?_e=p(N,M,F,te,Y):_e=Y.map(function(me){return v(N,M,F,te,me,G)}),N.seen.pop(),m(_e,B,Q)}function h(N,M){if(O(M))return N.stylize("undefined","undefined");if(T(M)){var F="'"+JSON.stringify(M).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return N.stylize(F,"string")}if(S(M))return N.stylize(""+M,"number");if(_(M))return N.stylize(""+M,"boolean");if(b(M))return N.stylize("null","null")}function d(N){return"["+Error.prototype.toString.call(N)+"]"}function p(N,M,F,A,L){for(var Y=[],te=0,fe=M.length;te<fe;++te)k(M,String(te))?Y.push(v(N,M,F,A,String(te),!0)):Y.push("");return L.forEach(function(B){B.match(/^\d+$/)||Y.push(v(N,M,F,A,B,!0))}),Y}function v(N,M,F,A,L,Y){var te,fe,B;if(B=Object.getOwnPropertyDescriptor(M,L)||{value:M[L]},B.get?B.set?fe=N.stylize("[Getter/Setter]","special"):fe=N.stylize("[Getter]","special"):B.set&&(fe=N.stylize("[Setter]","special")),k(A,L)||(te="["+L+"]"),fe||(N.seen.indexOf(B.value)<0?(b(F)?fe=f(N,B.value,null):fe=f(N,B.value,F-1),fe.indexOf(`
`)>-1&&(Y?fe=fe.split(`
`).map(function(G){return"  "+G}).join(`
`).slice(2):fe=`
`+fe.split(`
`).map(function(G){return"   "+G}).join(`
`))):fe=N.stylize("[Circular]","special")),O(te)){if(Y&&L.match(/^\d+$/))return fe;te=JSON.stringify(""+L),te.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(te=te.slice(1,-1),te=N.stylize(te,"name")):(te=te.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),te=N.stylize(te,"string"))}return te+": "+fe}function m(N,M,F){var A=N.reduce(function(L,Y){return Y.indexOf(`
`)>=0,L+Y.replace(/\u001b\[\d\d?m/g,"").length+1},0);return A>60?F[0]+(M===""?"":M+`
 `)+" "+N.join(`,
  `)+" "+F[1]:F[0]+M+" "+N.join(", ")+" "+F[1]}r.types=F1;function g(N){return Array.isArray(N)}r.isArray=g;function _(N){return typeof N=="boolean"}r.isBoolean=_;function b(N){return N===null}r.isNull=b;function w(N){return N==null}r.isNullOrUndefined=w;function S(N){return typeof N=="number"}r.isNumber=S;function T(N){return typeof N=="string"}r.isString=T;function E(N){return typeof N=="symbol"}r.isSymbol=E;function O(N){return N===void 0}r.isUndefined=O;function P(N){return V(N)&&q(N)==="[object RegExp]"}r.isRegExp=P,r.types.isRegExp=P;function V(N){return typeof N=="object"&&N!==null}r.isObject=V;function W(N){return V(N)&&q(N)==="[object Date]"}r.isDate=W,r.types.isDate=W;function D(N){return V(N)&&(q(N)==="[object Error]"||N instanceof Error)}r.isError=D,r.types.isNativeError=D;function j(N){return typeof N=="function"}r.isFunction=j;function I(N){return N===null||typeof N=="boolean"||typeof N=="number"||typeof N=="string"||typeof N=="symbol"||typeof N>"u"}r.isPrimitive=I,r.isBuffer=k8;function q(N){return Object.prototype.toString.call(N)}function $(N){return N<10?"0"+N.toString(10):N.toString(10)}var K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ae(){var N=new Date,M=[$(N.getHours()),$(N.getMinutes()),$(N.getSeconds())].join(":");return[N.getDate(),K[N.getMonth()],M].join(" ")}r.log=function(){console.log("%s - %s",ae(),r.format.apply(r,arguments))},r.inherits=$s,r._extend=function(N,M){if(!M||!V(M))return N;for(var F=Object.keys(M),A=F.length;A--;)N[F[A]]=M[F[A]];return N};function k(N,M){return Object.prototype.hasOwnProperty.call(N,M)}var H=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(M){if(typeof M!="function")throw new TypeError('The "original" argument must be of type Function');if(H&&M[H]){var F=M[H];if(typeof F!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(F,H,{value:F,enumerable:!1,writable:!1,configurable:!0}),F}function F(){for(var A,L,Y=new Promise(function(B,G){A=B,L=G}),te=[],fe=0;fe<arguments.length;fe++)te.push(arguments[fe]);te.push(function(B,G){B?L(B):A(G)});try{M.apply(this,te)}catch(B){L(B)}return Y}return Object.setPrototypeOf(F,Object.getPrototypeOf(M)),H&&Object.defineProperty(F,H,{value:F,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(F,t(M))},r.promisify.custom=H;function ie(N,M){if(!N){var F=new Error("Promise was rejected with a falsy value");F.reason=N,N=F}return M(N)}function X(N){if(typeof N!="function")throw new TypeError('The "original" argument must be of type Function');function M(){for(var F=[],A=0;A<arguments.length;A++)F.push(arguments[A]);var L=F.pop();if(typeof L!="function")throw new TypeError("The last argument must be of type Function");var Y=this,te=function(){return L.apply(Y,arguments)};N.apply(this,F).then(function(fe){Ge.nextTick(te.bind(null,null,fe))},function(fe){Ge.nextTick(ie.bind(null,fe,te))})}return Object.setPrototypeOf(M,Object.getPrototypeOf(N)),Object.defineProperties(M,t(N)),M}r.callbackify=X})(Pi);var sh,g_;function M8(){if(g_)return sh;g_=1;function r(p,v){var m=Object.keys(p);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(p);v&&(g=g.filter(function(_){return Object.getOwnPropertyDescriptor(p,_).enumerable})),m.push.apply(m,g)}return m}function e(p){for(var v=1;v<arguments.length;v++){var m=arguments[v]!=null?arguments[v]:{};v%2?r(Object(m),!0).forEach(function(g){t(p,g,m[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(m)):r(Object(m)).forEach(function(g){Object.defineProperty(p,g,Object.getOwnPropertyDescriptor(m,g))})}return p}function t(p,v,m){return v=a(v),v in p?Object.defineProperty(p,v,{value:m,enumerable:!0,configurable:!0,writable:!0}):p[v]=m,p}function n(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")}function i(p,v){for(var m=0;m<v.length;m++){var g=v[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(p,a(g.key),g)}}function s(p,v,m){return v&&i(p.prototype,v),Object.defineProperty(p,"prototype",{writable:!1}),p}function a(p){var v=o(p,"string");return typeof v=="symbol"?v:String(v)}function o(p,v){if(typeof p!="object"||p===null)return p;var m=p[Symbol.toPrimitive];if(m!==void 0){var g=m.call(p,v);if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}var l=Ha,u=l.Buffer,c=Pi,f=c.inspect,h=f&&f.custom||"inspect";function d(p,v,m){u.prototype.copy.call(p,v,m)}return sh=function(){function p(){n(this,p),this.head=null,this.tail=null,this.length=0}return s(p,[{key:"push",value:function(m){var g={data:m,next:null};this.length>0?this.tail.next=g:this.head=g,this.tail=g,++this.length}},{key:"unshift",value:function(m){var g={data:m,next:this.head};this.length===0&&(this.tail=g),this.head=g,++this.length}},{key:"shift",value:function(){if(this.length!==0){var m=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,m}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(m){if(this.length===0)return"";for(var g=this.head,_=""+g.data;g=g.next;)_+=m+g.data;return _}},{key:"concat",value:function(m){if(this.length===0)return u.alloc(0);for(var g=u.allocUnsafe(m>>>0),_=this.head,b=0;_;)d(_.data,g,b),b+=_.data.length,_=_.next;return g}},{key:"consume",value:function(m,g){var _;return m<this.head.data.length?(_=this.head.data.slice(0,m),this.head.data=this.head.data.slice(m)):m===this.head.data.length?_=this.shift():_=g?this._getString(m):this._getBuffer(m),_}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(m){var g=this.head,_=1,b=g.data;for(m-=b.length;g=g.next;){var w=g.data,S=m>w.length?w.length:m;if(S===w.length?b+=w:b+=w.slice(0,m),m-=S,m===0){S===w.length?(++_,g.next?this.head=g.next:this.head=this.tail=null):(this.head=g,g.data=w.slice(S));break}++_}return this.length-=_,b}},{key:"_getBuffer",value:function(m){var g=u.allocUnsafe(m),_=this.head,b=1;for(_.data.copy(g),m-=_.data.length;_=_.next;){var w=_.data,S=m>w.length?w.length:m;if(w.copy(g,g.length-m,0,S),m-=S,m===0){S===w.length?(++b,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=w.slice(S));break}++b}return this.length-=b,g}},{key:h,value:function(m,g){return f(this,e(e({},g),{},{depth:0,customInspect:!1}))}}]),p}(),sh}var ah,m_;function tw(){if(m_)return ah;m_=1;function r(a,o){var l=this,u=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return u||c?(o?o(a):a&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ge.nextTick(i,this,a)):Ge.nextTick(i,this,a)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(f){!o&&f?l._writableState?l._writableState.errorEmitted?Ge.nextTick(t,l):(l._writableState.errorEmitted=!0,Ge.nextTick(e,l,f)):Ge.nextTick(e,l,f):o?(Ge.nextTick(t,l),o(f)):Ge.nextTick(t,l)}),this)}function e(a,o){i(a,o),t(a)}function t(a){a._writableState&&!a._writableState.emitClose||a._readableState&&!a._readableState.emitClose||a.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(a,o){a.emit("error",o)}function s(a,o){var l=a._readableState,u=a._writableState;l&&l.autoDestroy||u&&u.autoDestroy?a.destroy(o):a.emit("error",o)}return ah={destroy:r,undestroy:n,errorOrDestroy:s},ah}var oh={},v_;function Eo(){if(v_)return oh;v_=1;function r(o,l){o.prototype=Object.create(l.prototype),o.prototype.constructor=o,o.__proto__=l}var e={};function t(o,l,u){u||(u=Error);function c(h,d,p){return typeof l=="string"?l:l(h,d,p)}var f=function(h){r(d,h);function d(p,v,m){return h.call(this,c(p,v,m))||this}return d}(u);f.prototype.name=u.name,f.prototype.code=o,e[o]=f}function n(o,l){if(Array.isArray(o)){var u=o.length;return o=o.map(function(c){return String(c)}),u>2?"one of ".concat(l," ").concat(o.slice(0,u-1).join(", "),", or ")+o[u-1]:u===2?"one of ".concat(l," ").concat(o[0]," or ").concat(o[1]):"of ".concat(l," ").concat(o[0])}else return"of ".concat(l," ").concat(String(o))}function i(o,l,u){return o.substr(0,l.length)===l}function s(o,l,u){return(u===void 0||u>o.length)&&(u=o.length),o.substring(u-l.length,u)===l}function a(o,l,u){return typeof u!="number"&&(u=0),u+l.length>o.length?!1:o.indexOf(l,u)!==-1}return t("ERR_INVALID_OPT_VALUE",function(o,l){return'The value "'+l+'" is invalid for option "'+o+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(o,l,u){var c;typeof l=="string"&&i(l,"not ")?(c="must not be",l=l.replace(/^not /,"")):c="must be";var f;if(s(o," argument"))f="The ".concat(o," ").concat(c," ").concat(n(l,"type"));else{var h=a(o,".")?"property":"argument";f='The "'.concat(o,'" ').concat(h," ").concat(c," ").concat(n(l,"type"))}return f+=". Received type ".concat(typeof u),f},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(o){return"The "+o+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(o){return"Cannot call "+o+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(o){return"Unknown encoding: "+o},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),oh.codes=e,oh}var lh,__;function rw(){if(__)return lh;__=1;var r=Eo().codes.ERR_INVALID_OPT_VALUE;function e(n,i,s){return n.highWaterMark!=null?n.highWaterMark:i?n[s]:null}function t(n,i,s,a){var o=e(i,a,s);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var l=a?s:"highWaterMark";throw new r(l,o)}return Math.floor(o)}return n.objectMode?16:16*1024}return lh={getHighWaterMark:t},lh}var uh,b_;function O8(){if(b_)return uh;b_=1,uh=r;function r(t,n){if(e("noDeprecation"))return t;var i=!1;function s(){if(!i){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),i=!0}return t.apply(this,arguments)}return s}function e(t){try{if(!Qi.localStorage)return!1}catch{return!1}var n=Qi.localStorage[t];return n==null?!1:String(n).toLowerCase()==="true"}return uh}var ch,y_;function nw(){if(y_)return ch;y_=1,ch=O;function r(A){var L=this;this.next=null,this.entry=null,this.finish=function(){F(L,A)}}var e;O.WritableState=T;var t={deprecate:O8()},n=B1(),i=Ha.Buffer,s=(typeof Qi<"u"?Qi:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function a(A){return i.from(A)}function o(A){return i.isBuffer(A)||A instanceof s}var l=tw(),u=rw(),c=u.getHighWaterMark,f=Eo().codes,h=f.ERR_INVALID_ARG_TYPE,d=f.ERR_METHOD_NOT_IMPLEMENTED,p=f.ERR_MULTIPLE_CALLBACK,v=f.ERR_STREAM_CANNOT_PIPE,m=f.ERR_STREAM_DESTROYED,g=f.ERR_STREAM_NULL_VALUES,_=f.ERR_STREAM_WRITE_AFTER_END,b=f.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;$s(O,n);function S(){}function T(A,L,Y){e=e||Wa(),A=A||{},typeof Y!="boolean"&&(Y=L instanceof e),this.objectMode=!!A.objectMode,Y&&(this.objectMode=this.objectMode||!!A.writableObjectMode),this.highWaterMark=c(this,A,"writableHighWaterMark",Y),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var te=A.decodeStrings===!1;this.decodeStrings=!te,this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(fe){$(L,fe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=A.emitClose!==!1,this.autoDestroy=!!A.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}T.prototype.getBuffer=function(){for(var L=this.bufferedRequest,Y=[];L;)Y.push(L),L=L.next;return Y},function(){try{Object.defineProperty(T.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var E;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(E=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(L){return E.call(this,L)?!0:this!==O?!1:L&&L._writableState instanceof T}})):E=function(L){return L instanceof this};function O(A){e=e||Wa();var L=this instanceof e;if(!L&&!E.call(O,this))return new O(A);this._writableState=new T(A,this,L),this.writable=!0,A&&(typeof A.write=="function"&&(this._write=A.write),typeof A.writev=="function"&&(this._writev=A.writev),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.final=="function"&&(this._final=A.final)),n.call(this)}O.prototype.pipe=function(){w(this,new v)};function P(A,L){var Y=new _;w(A,Y),Ge.nextTick(L,Y)}function V(A,L,Y,te){var fe;return Y===null?fe=new g:typeof Y!="string"&&!L.objectMode&&(fe=new h("chunk",["string","Buffer"],Y)),fe?(w(A,fe),Ge.nextTick(te,fe),!1):!0}O.prototype.write=function(A,L,Y){var te=this._writableState,fe=!1,B=!te.objectMode&&o(A);return B&&!i.isBuffer(A)&&(A=a(A)),typeof L=="function"&&(Y=L,L=null),B?L="buffer":L||(L=te.defaultEncoding),typeof Y!="function"&&(Y=S),te.ending?P(this,Y):(B||V(this,te,A,Y))&&(te.pendingcb++,fe=D(this,te,B,A,L,Y)),fe},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,!A.writing&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&k(this,A))},O.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=L.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((L+"").toLowerCase())>-1))throw new b(L);return this._writableState.defaultEncoding=L,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function W(A,L,Y){return!A.objectMode&&A.decodeStrings!==!1&&typeof L=="string"&&(L=i.from(L,Y)),L}Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function D(A,L,Y,te,fe,B){if(!Y){var G=W(L,te,fe);te!==G&&(Y=!0,fe="buffer",te=G)}var Q=L.objectMode?1:te.length;L.length+=Q;var oe=L.length<L.highWaterMark;if(oe||(L.needDrain=!0),L.writing||L.corked){var _e=L.lastBufferedRequest;L.lastBufferedRequest={chunk:te,encoding:fe,isBuf:Y,callback:B,next:null},_e?_e.next=L.lastBufferedRequest:L.bufferedRequest=L.lastBufferedRequest,L.bufferedRequestCount+=1}else j(A,L,!1,Q,te,fe,B);return oe}function j(A,L,Y,te,fe,B,G){L.writelen=te,L.writecb=G,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new m("write")):Y?A._writev(fe,L.onwrite):A._write(fe,B,L.onwrite),L.sync=!1}function I(A,L,Y,te,fe){--L.pendingcb,Y?(Ge.nextTick(fe,te),Ge.nextTick(N,A,L),A._writableState.errorEmitted=!0,w(A,te)):(fe(te),A._writableState.errorEmitted=!0,w(A,te),N(A,L))}function q(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0}function $(A,L){var Y=A._writableState,te=Y.sync,fe=Y.writecb;if(typeof fe!="function")throw new p;if(q(Y),L)I(A,Y,te,L,fe);else{var B=H(Y)||A.destroyed;!B&&!Y.corked&&!Y.bufferProcessing&&Y.bufferedRequest&&k(A,Y),te?Ge.nextTick(K,A,Y,B,fe):K(A,Y,B,fe)}}function K(A,L,Y,te){Y||ae(A,L),L.pendingcb--,te(),N(A,L)}function ae(A,L){L.length===0&&L.needDrain&&(L.needDrain=!1,A.emit("drain"))}function k(A,L){L.bufferProcessing=!0;var Y=L.bufferedRequest;if(A._writev&&Y&&Y.next){var te=L.bufferedRequestCount,fe=new Array(te),B=L.corkedRequestsFree;B.entry=Y;for(var G=0,Q=!0;Y;)fe[G]=Y,Y.isBuf||(Q=!1),Y=Y.next,G+=1;fe.allBuffers=Q,j(A,L,!0,L.length,fe,"",B.finish),L.pendingcb++,L.lastBufferedRequest=null,B.next?(L.corkedRequestsFree=B.next,B.next=null):L.corkedRequestsFree=new r(L),L.bufferedRequestCount=0}else{for(;Y;){var oe=Y.chunk,_e=Y.encoding,me=Y.callback,Pe=L.objectMode?1:oe.length;if(j(A,L,!1,Pe,oe,_e,me),Y=Y.next,L.bufferedRequestCount--,L.writing)break}Y===null&&(L.lastBufferedRequest=null)}L.bufferedRequest=Y,L.bufferProcessing=!1}O.prototype._write=function(A,L,Y){Y(new d("_write()"))},O.prototype._writev=null,O.prototype.end=function(A,L,Y){var te=this._writableState;return typeof A=="function"?(Y=A,A=null,L=null):typeof L=="function"&&(Y=L,L=null),A!=null&&this.write(A,L),te.corked&&(te.corked=1,this.uncork()),te.ending||M(this,te,Y),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function H(A){return A.ending&&A.length===0&&A.bufferedRequest===null&&!A.finished&&!A.writing}function ie(A,L){A._final(function(Y){L.pendingcb--,Y&&w(A,Y),L.prefinished=!0,A.emit("prefinish"),N(A,L)})}function X(A,L){!L.prefinished&&!L.finalCalled&&(typeof A._final=="function"&&!L.destroyed?(L.pendingcb++,L.finalCalled=!0,Ge.nextTick(ie,A,L)):(L.prefinished=!0,A.emit("prefinish")))}function N(A,L){var Y=H(L);if(Y&&(X(A,L),L.pendingcb===0&&(L.finished=!0,A.emit("finish"),L.autoDestroy))){var te=A._readableState;(!te||te.autoDestroy&&te.endEmitted)&&A.destroy()}return Y}function M(A,L,Y){L.ending=!0,N(A,L),Y&&(L.finished?Ge.nextTick(Y):A.once("finish",Y)),L.ended=!0,A.writable=!1}function F(A,L,Y){var te=A.entry;for(A.entry=null;te;){var fe=te.callback;L.pendingcb--,fe(Y),te=te.next}L.corkedRequestsFree.next=A}return Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(L){this._writableState&&(this._writableState.destroyed=L)}}),O.prototype.destroy=l.destroy,O.prototype._undestroy=l.undestroy,O.prototype._destroy=function(A,L){L(A)},ch}var fh,x_;function Wa(){if(x_)return fh;x_=1;var r=Object.keys||function(u){var c=[];for(var f in u)c.push(f);return c};fh=a;var e=iw(),t=nw();$s(a,e);for(var n=r(t.prototype),i=0;i<n.length;i++){var s=n[i];a.prototype[s]||(a.prototype[s]=t.prototype[s])}function a(u){if(!(this instanceof a))return new a(u);e.call(this,u),t.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function o(){this._writableState.ended||Ge.nextTick(l,this)}function l(u){u.end()}return Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),fh}var hh={},bu={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var w_;function I8(){return w_||(w_=1,function(r,e){var t=Ha,n=t.Buffer;function i(a,o){for(var l in a)o[l]=a[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(i(t,e),e.Buffer=s);function s(a,o,l){return n(a,o,l)}s.prototype=Object.create(n.prototype),i(n,s),s.from=function(a,o,l){if(typeof a=="number")throw new TypeError("Argument must not be a number");return n(a,o,l)},s.alloc=function(a,o,l){if(typeof a!="number")throw new TypeError("Argument must be a number");var u=n(a);return o!==void 0?typeof l=="string"?u.fill(o,l):u.fill(o):u.fill(0),u},s.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return n(a)},s.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(a)}}(bu,bu.exports)),bu.exports}var S_;function T_(){if(S_)return hh;S_=1;var r=I8().Buffer,e=r.isEncoding||function(g){switch(g=""+g,g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(g){if(!g)return"utf8";for(var _;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(_)return;g=(""+g).toLowerCase(),_=!0}}function n(g){var _=t(g);if(typeof _!="string"&&(r.isEncoding===e||!e(g)))throw new Error("Unknown encoding: "+g);return _||g}hh.StringDecoder=i;function i(g){this.encoding=n(g);var _;switch(this.encoding){case"utf16le":this.text=f,this.end=h,_=4;break;case"utf8":this.fillLast=l,_=4;break;case"base64":this.text=d,this.end=p,_=3;break;default:this.write=v,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(_)}i.prototype.write=function(g){if(g.length===0)return"";var _,b;if(this.lastNeed){if(_=this.fillLast(g),_===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<g.length?_?_+this.text(g,b):this.text(g,b):_||""},i.prototype.end=c,i.prototype.text=u,i.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};function s(g){return g<=127?0:g>>5===6?2:g>>4===14?3:g>>3===30?4:g>>6===2?-1:-2}function a(g,_,b){var w=_.length-1;if(w<b)return 0;var S=s(_[w]);return S>=0?(S>0&&(g.lastNeed=S-1),S):--w<b||S===-2?0:(S=s(_[w]),S>=0?(S>0&&(g.lastNeed=S-2),S):--w<b||S===-2?0:(S=s(_[w]),S>=0?(S>0&&(S===2?S=0:g.lastNeed=S-3),S):0))}function o(g,_,b){if((_[0]&192)!==128)return g.lastNeed=0,"ï¿½";if(g.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return g.lastNeed=1,"ï¿½";if(g.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return g.lastNeed=2,"ï¿½"}}function l(g){var _=this.lastTotal-this.lastNeed,b=o(this,g);if(b!==void 0)return b;if(this.lastNeed<=g.length)return g.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,_,0,g.length),this.lastNeed-=g.length}function u(g,_){var b=a(this,g,_);if(!this.lastNeed)return g.toString("utf8",_);this.lastTotal=b;var w=g.length-(b-this.lastNeed);return g.copy(this.lastChar,0,w),g.toString("utf8",_,w)}function c(g){var _=g&&g.length?this.write(g):"";return this.lastNeed?_+"ï¿½":_}function f(g,_){if((g.length-_)%2===0){var b=g.toString("utf16le",_);if(b){var w=b.charCodeAt(b.length-1);if(w>=55296&&w<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",_,g.length-1)}function h(g){var _=g&&g.length?this.write(g):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,b)}return _}function d(g,_){var b=(g.length-_)%3;return b===0?g.toString("base64",_):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",_,g.length-b))}function p(g){var _=g&&g.length?this.write(g):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function v(g){return g.toString(this.encoding)}function m(g){return g&&g.length?this.write(g):""}return hh}var dh,E_;function Lg(){if(E_)return dh;E_=1;var r=Eo().codes.ERR_STREAM_PREMATURE_CLOSE;function e(s){var a=!1;return function(){if(!a){a=!0;for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];s.apply(this,l)}}}function t(){}function n(s){return s.setHeader&&typeof s.abort=="function"}function i(s,a,o){if(typeof a=="function")return i(s,null,a);a||(a={}),o=e(o||t);var l=a.readable||a.readable!==!1&&s.readable,u=a.writable||a.writable!==!1&&s.writable,c=function(){s.writable||h()},f=s._writableState&&s._writableState.finished,h=function(){u=!1,f=!0,l||o.call(s)},d=s._readableState&&s._readableState.endEmitted,p=function(){l=!1,d=!0,u||o.call(s)},v=function(b){o.call(s,b)},m=function(){var b;if(l&&!d)return(!s._readableState||!s._readableState.ended)&&(b=new r),o.call(s,b);if(u&&!f)return(!s._writableState||!s._writableState.ended)&&(b=new r),o.call(s,b)},g=function(){s.req.on("finish",h)};return n(s)?(s.on("complete",h),s.on("abort",m),s.req?g():s.on("request",g)):u&&!s._writableState&&(s.on("end",c),s.on("close",c)),s.on("end",p),s.on("finish",h),a.error!==!1&&s.on("error",v),s.on("close",m),function(){s.removeListener("complete",h),s.removeListener("abort",m),s.removeListener("request",g),s.req&&s.req.removeListener("finish",h),s.removeListener("end",c),s.removeListener("close",c),s.removeListener("finish",h),s.removeListener("end",p),s.removeListener("error",v),s.removeListener("close",m)}}return dh=i,dh}var ph,A_;function B8(){if(A_)return ph;A_=1;var r;function e(b,w,S){return w=t(w),w in b?Object.defineProperty(b,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):b[w]=S,b}function t(b){var w=n(b,"string");return typeof w=="symbol"?w:String(w)}function n(b,w){if(typeof b!="object"||b===null)return b;var S=b[Symbol.toPrimitive];if(S!==void 0){var T=S.call(b,w);if(typeof T!="object")return T;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(b)}var i=Lg(),s=Symbol("lastResolve"),a=Symbol("lastReject"),o=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),c=Symbol("handlePromise"),f=Symbol("stream");function h(b,w){return{value:b,done:w}}function d(b){var w=b[s];if(w!==null){var S=b[f].read();S!==null&&(b[u]=null,b[s]=null,b[a]=null,w(h(S,!1)))}}function p(b){Ge.nextTick(d,b)}function v(b,w){return function(S,T){b.then(function(){if(w[l]){S(h(void 0,!0));return}w[c](S,T)},T)}}var m=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((r={get stream(){return this[f]},next:function(){var w=this,S=this[o];if(S!==null)return Promise.reject(S);if(this[l])return Promise.resolve(h(void 0,!0));if(this[f].destroyed)return new Promise(function(P,V){Ge.nextTick(function(){w[o]?V(w[o]):P(h(void 0,!0))})});var T=this[u],E;if(T)E=new Promise(v(T,this));else{var O=this[f].read();if(O!==null)return Promise.resolve(h(O,!1));E=new Promise(this[c])}return this[u]=E,E}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var w=this;return new Promise(function(S,T){w[f].destroy(null,function(E){if(E){T(E);return}S(h(void 0,!0))})})}),r),m),_=function(w){var S,T=Object.create(g,(S={},e(S,f,{value:w,writable:!0}),e(S,s,{value:null,writable:!0}),e(S,a,{value:null,writable:!0}),e(S,o,{value:null,writable:!0}),e(S,l,{value:w._readableState.endEmitted,writable:!0}),e(S,c,{value:function(O,P){var V=T[f].read();V?(T[u]=null,T[s]=null,T[a]=null,O(h(V,!1))):(T[s]=O,T[a]=P)},writable:!0}),S));return T[u]=null,i(w,function(E){if(E&&E.code!=="ERR_STREAM_PREMATURE_CLOSE"){var O=T[a];O!==null&&(T[u]=null,T[s]=null,T[a]=null,O(E)),T[o]=E;return}var P=T[s];P!==null&&(T[u]=null,T[s]=null,T[a]=null,P(h(void 0,!0))),T[l]=!0}),w.on("readable",p.bind(null,T)),T};return ph=_,ph}var gh,C_;function F8(){return C_||(C_=1,gh=function(){throw new Error("Readable.from is not available in the browser")}),gh}var mh,P_;function iw(){if(P_)return mh;P_=1,mh=P;var r;P.ReadableState=O,Cg.EventEmitter;var e=function(G,Q){return G.listeners(Q).length},t=B1(),n=Ha.Buffer,i=(typeof Qi<"u"?Qi:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function s(B){return n.from(B)}function a(B){return n.isBuffer(B)||B instanceof i}var o=Pi,l;o&&o.debuglog?l=o.debuglog("stream"):l=function(){};var u=M8(),c=tw(),f=rw(),h=f.getHighWaterMark,d=Eo().codes,p=d.ERR_INVALID_ARG_TYPE,v=d.ERR_STREAM_PUSH_AFTER_EOF,m=d.ERR_METHOD_NOT_IMPLEMENTED,g=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,_,b,w;$s(P,t);var S=c.errorOrDestroy,T=["error","close","destroy","pause","resume"];function E(B,G,Q){if(typeof B.prependListener=="function")return B.prependListener(G,Q);!B._events||!B._events[G]?B.on(G,Q):Array.isArray(B._events[G])?B._events[G].unshift(Q):B._events[G]=[Q,B._events[G]]}function O(B,G,Q){r=r||Wa(),B=B||{},typeof Q!="boolean"&&(Q=G instanceof r),this.objectMode=!!B.objectMode,Q&&(this.objectMode=this.objectMode||!!B.readableObjectMode),this.highWaterMark=h(this,B,"readableHighWaterMark",Q),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=B.emitClose!==!1,this.autoDestroy=!!B.autoDestroy,this.destroyed=!1,this.defaultEncoding=B.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,B.encoding&&(_||(_=T_().StringDecoder),this.decoder=new _(B.encoding),this.encoding=B.encoding)}function P(B){if(r=r||Wa(),!(this instanceof P))return new P(B);var G=this instanceof r;this._readableState=new O(B,this,G),this.readable=!0,B&&(typeof B.read=="function"&&(this._read=B.read),typeof B.destroy=="function"&&(this._destroy=B.destroy)),t.call(this)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(G){this._readableState&&(this._readableState.destroyed=G)}}),P.prototype.destroy=c.destroy,P.prototype._undestroy=c.undestroy,P.prototype._destroy=function(B,G){G(B)},P.prototype.push=function(B,G){var Q=this._readableState,oe;return Q.objectMode?oe=!0:typeof B=="string"&&(G=G||Q.defaultEncoding,G!==Q.encoding&&(B=n.from(B,G),G=""),oe=!0),V(this,B,G,!1,oe)},P.prototype.unshift=function(B){return V(this,B,null,!0,!1)};function V(B,G,Q,oe,_e){l("readableAddChunk",G);var me=B._readableState;if(G===null)me.reading=!1,$(B,me);else{var Pe;if(_e||(Pe=D(me,G)),Pe)S(B,Pe);else if(me.objectMode||G&&G.length>0)if(typeof G!="string"&&!me.objectMode&&Object.getPrototypeOf(G)!==n.prototype&&(G=s(G)),oe)me.endEmitted?S(B,new g):W(B,me,G,!0);else if(me.ended)S(B,new v);else{if(me.destroyed)return!1;me.reading=!1,me.decoder&&!Q?(G=me.decoder.write(G),me.objectMode||G.length!==0?W(B,me,G,!1):k(B,me)):W(B,me,G,!1)}else oe||(me.reading=!1,k(B,me))}return!me.ended&&(me.length<me.highWaterMark||me.length===0)}function W(B,G,Q,oe){G.flowing&&G.length===0&&!G.sync?(G.awaitDrain=0,B.emit("data",Q)):(G.length+=G.objectMode?1:Q.length,oe?G.buffer.unshift(Q):G.buffer.push(Q),G.needReadable&&K(B)),k(B,G)}function D(B,G){var Q;return!a(G)&&typeof G!="string"&&G!==void 0&&!B.objectMode&&(Q=new p("chunk",["string","Buffer","Uint8Array"],G)),Q}P.prototype.isPaused=function(){return this._readableState.flowing===!1},P.prototype.setEncoding=function(B){_||(_=T_().StringDecoder);var G=new _(B);this._readableState.decoder=G,this._readableState.encoding=this._readableState.decoder.encoding;for(var Q=this._readableState.buffer.head,oe="";Q!==null;)oe+=G.write(Q.data),Q=Q.next;return this._readableState.buffer.clear(),oe!==""&&this._readableState.buffer.push(oe),this._readableState.length=oe.length,this};var j=1073741824;function I(B){return B>=j?B=j:(B--,B|=B>>>1,B|=B>>>2,B|=B>>>4,B|=B>>>8,B|=B>>>16,B++),B}function q(B,G){return B<=0||G.length===0&&G.ended?0:G.objectMode?1:B!==B?G.flowing&&G.length?G.buffer.head.data.length:G.length:(B>G.highWaterMark&&(G.highWaterMark=I(B)),B<=G.length?B:G.ended?G.length:(G.needReadable=!0,0))}P.prototype.read=function(B){l("read",B),B=parseInt(B,10);var G=this._readableState,Q=B;if(B!==0&&(G.emittedReadable=!1),B===0&&G.needReadable&&((G.highWaterMark!==0?G.length>=G.highWaterMark:G.length>0)||G.ended))return l("read: emitReadable",G.length,G.ended),G.length===0&&G.ended?Y(this):K(this),null;if(B=q(B,G),B===0&&G.ended)return G.length===0&&Y(this),null;var oe=G.needReadable;l("need readable",oe),(G.length===0||G.length-B<G.highWaterMark)&&(oe=!0,l("length less than watermark",oe)),G.ended||G.reading?(oe=!1,l("reading or ended",oe)):oe&&(l("do read"),G.reading=!0,G.sync=!0,G.length===0&&(G.needReadable=!0),this._read(G.highWaterMark),G.sync=!1,G.reading||(B=q(Q,G)));var _e;return B>0?_e=L(B,G):_e=null,_e===null?(G.needReadable=G.length<=G.highWaterMark,B=0):(G.length-=B,G.awaitDrain=0),G.length===0&&(G.ended||(G.needReadable=!0),Q!==B&&G.ended&&Y(this)),_e!==null&&this.emit("data",_e),_e};function $(B,G){if(l("onEofChunk"),!G.ended){if(G.decoder){var Q=G.decoder.end();Q&&Q.length&&(G.buffer.push(Q),G.length+=G.objectMode?1:Q.length)}G.ended=!0,G.sync?K(B):(G.needReadable=!1,G.emittedReadable||(G.emittedReadable=!0,ae(B)))}}function K(B){var G=B._readableState;l("emitReadable",G.needReadable,G.emittedReadable),G.needReadable=!1,G.emittedReadable||(l("emitReadable",G.flowing),G.emittedReadable=!0,Ge.nextTick(ae,B))}function ae(B){var G=B._readableState;l("emitReadable_",G.destroyed,G.length,G.ended),!G.destroyed&&(G.length||G.ended)&&(B.emit("readable"),G.emittedReadable=!1),G.needReadable=!G.flowing&&!G.ended&&G.length<=G.highWaterMark,A(B)}function k(B,G){G.readingMore||(G.readingMore=!0,Ge.nextTick(H,B,G))}function H(B,G){for(;!G.reading&&!G.ended&&(G.length<G.highWaterMark||G.flowing&&G.length===0);){var Q=G.length;if(l("maybeReadMore read 0"),B.read(0),Q===G.length)break}G.readingMore=!1}P.prototype._read=function(B){S(this,new m("_read()"))},P.prototype.pipe=function(B,G){var Q=this,oe=this._readableState;switch(oe.pipesCount){case 0:oe.pipes=B;break;case 1:oe.pipes=[oe.pipes,B];break;default:oe.pipes.push(B);break}oe.pipesCount+=1,l("pipe count=%d opts=%j",oe.pipesCount,G);var _e=(!G||G.end!==!1)&&B!==Ge.stdout&&B!==Ge.stderr,me=_e?Ue:de;oe.endEmitted?Ge.nextTick(me):Q.once("end",me),B.on("unpipe",Pe);function Pe(we,xe){l("onunpipe"),we===Q&&xe&&xe.hasUnpiped===!1&&(xe.hasUnpiped=!0,Be())}function Ue(){l("onend"),B.end()}var se=ie(Q);B.on("drain",se);var Te=!1;function Be(){l("cleanup"),B.removeListener("close",Z),B.removeListener("finish",ne),B.removeListener("drain",se),B.removeListener("error",Ce),B.removeListener("unpipe",Pe),Q.removeListener("end",Ue),Q.removeListener("end",de),Q.removeListener("data",Ee),Te=!0,oe.awaitDrain&&(!B._writableState||B._writableState.needDrain)&&se()}Q.on("data",Ee);function Ee(we){l("ondata");var xe=B.write(we);l("dest.write",xe),xe===!1&&((oe.pipesCount===1&&oe.pipes===B||oe.pipesCount>1&&fe(oe.pipes,B)!==-1)&&!Te&&(l("false write response, pause",oe.awaitDrain),oe.awaitDrain++),Q.pause())}function Ce(we){l("onerror",we),de(),B.removeListener("error",Ce),e(B,"error")===0&&S(B,we)}E(B,"error",Ce);function Z(){B.removeListener("finish",ne),de()}B.once("close",Z);function ne(){l("onfinish"),B.removeListener("close",Z),de()}B.once("finish",ne);function de(){l("unpipe"),Q.unpipe(B)}return B.emit("pipe",Q),oe.flowing||(l("pipe resume"),Q.resume()),B};function ie(B){return function(){var Q=B._readableState;l("pipeOnDrain",Q.awaitDrain),Q.awaitDrain&&Q.awaitDrain--,Q.awaitDrain===0&&e(B,"data")&&(Q.flowing=!0,A(B))}}P.prototype.unpipe=function(B){var G=this._readableState,Q={hasUnpiped:!1};if(G.pipesCount===0)return this;if(G.pipesCount===1)return B&&B!==G.pipes?this:(B||(B=G.pipes),G.pipes=null,G.pipesCount=0,G.flowing=!1,B&&B.emit("unpipe",this,Q),this);if(!B){var oe=G.pipes,_e=G.pipesCount;G.pipes=null,G.pipesCount=0,G.flowing=!1;for(var me=0;me<_e;me++)oe[me].emit("unpipe",this,{hasUnpiped:!1});return this}var Pe=fe(G.pipes,B);return Pe===-1?this:(G.pipes.splice(Pe,1),G.pipesCount-=1,G.pipesCount===1&&(G.pipes=G.pipes[0]),B.emit("unpipe",this,Q),this)},P.prototype.on=function(B,G){var Q=t.prototype.on.call(this,B,G),oe=this._readableState;return B==="data"?(oe.readableListening=this.listenerCount("readable")>0,oe.flowing!==!1&&this.resume()):B==="readable"&&!oe.endEmitted&&!oe.readableListening&&(oe.readableListening=oe.needReadable=!0,oe.flowing=!1,oe.emittedReadable=!1,l("on readable",oe.length,oe.reading),oe.length?K(this):oe.reading||Ge.nextTick(N,this)),Q},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(B,G){var Q=t.prototype.removeListener.call(this,B,G);return B==="readable"&&Ge.nextTick(X,this),Q},P.prototype.removeAllListeners=function(B){var G=t.prototype.removeAllListeners.apply(this,arguments);return(B==="readable"||B===void 0)&&Ge.nextTick(X,this),G};function X(B){var G=B._readableState;G.readableListening=B.listenerCount("readable")>0,G.resumeScheduled&&!G.paused?G.flowing=!0:B.listenerCount("data")>0&&B.resume()}function N(B){l("readable nexttick read 0"),B.read(0)}P.prototype.resume=function(){var B=this._readableState;return B.flowing||(l("resume"),B.flowing=!B.readableListening,M(this,B)),B.paused=!1,this};function M(B,G){G.resumeScheduled||(G.resumeScheduled=!0,Ge.nextTick(F,B,G))}function F(B,G){l("resume",G.reading),G.reading||B.read(0),G.resumeScheduled=!1,B.emit("resume"),A(B),G.flowing&&!G.reading&&B.read(0)}P.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function A(B){var G=B._readableState;for(l("flow",G.flowing);G.flowing&&B.read()!==null;);}P.prototype.wrap=function(B){var G=this,Q=this._readableState,oe=!1;B.on("end",function(){if(l("wrapped end"),Q.decoder&&!Q.ended){var Pe=Q.decoder.end();Pe&&Pe.length&&G.push(Pe)}G.push(null)}),B.on("data",function(Pe){if(l("wrapped data"),Q.decoder&&(Pe=Q.decoder.write(Pe)),!(Q.objectMode&&Pe==null)&&!(!Q.objectMode&&(!Pe||!Pe.length))){var Ue=G.push(Pe);Ue||(oe=!0,B.pause())}});for(var _e in B)this[_e]===void 0&&typeof B[_e]=="function"&&(this[_e]=function(Ue){return function(){return B[Ue].apply(B,arguments)}}(_e));for(var me=0;me<T.length;me++)B.on(T[me],this.emit.bind(this,T[me]));return this._read=function(Pe){l("wrapped _read",Pe),oe&&(oe=!1,B.resume())},this},typeof Symbol=="function"&&(P.prototype[Symbol.asyncIterator]=function(){return b===void 0&&(b=B8()),b(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(G){this._readableState&&(this._readableState.flowing=G)}}),P._fromList=L,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function L(B,G){if(G.length===0)return null;var Q;return G.objectMode?Q=G.buffer.shift():!B||B>=G.length?(G.decoder?Q=G.buffer.join(""):G.buffer.length===1?Q=G.buffer.first():Q=G.buffer.concat(G.length),G.buffer.clear()):Q=G.buffer.consume(B,G.decoder),Q}function Y(B){var G=B._readableState;l("endReadable",G.endEmitted),G.endEmitted||(G.ended=!0,Ge.nextTick(te,G,B))}function te(B,G){if(l("endReadableNT",B.endEmitted,B.length),!B.endEmitted&&B.length===0&&(B.endEmitted=!0,G.readable=!1,G.emit("end"),B.autoDestroy)){var Q=G._writableState;(!Q||Q.autoDestroy&&Q.finished)&&G.destroy()}}typeof Symbol=="function"&&(P.from=function(B,G){return w===void 0&&(w=F8()),w(P,B,G)});function fe(B,G){for(var Q=0,oe=B.length;Q<oe;Q++)if(B[Q]===G)return Q;return-1}return mh}var vh,R_;function sw(){if(R_)return vh;R_=1,vh=o;var r=Eo().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,n=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=r.ERR_TRANSFORM_WITH_LENGTH_0,s=Wa();$s(o,s);function a(c,f){var h=this._transformState;h.transforming=!1;var d=h.writecb;if(d===null)return this.emit("error",new t);h.writechunk=null,h.writecb=null,f!=null&&this.push(f),d(c);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function o(c){if(!(this instanceof o))return new o(c);s.call(this,c),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",l)}function l(){var c=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,h){u(c,f,h)}):u(this,null,null)}o.prototype.push=function(c,f){return this._transformState.needTransform=!1,s.prototype.push.call(this,c,f)},o.prototype._transform=function(c,f,h){h(new e("_transform()"))},o.prototype._write=function(c,f,h){var d=this._transformState;if(d.writecb=h,d.writechunk=c,d.writeencoding=f,!d.transforming){var p=this._readableState;(d.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},o.prototype._read=function(c){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},o.prototype._destroy=function(c,f){s.prototype._destroy.call(this,c,function(h){f(h)})};function u(c,f,h){if(f)return c.emit("error",f);if(h!=null&&c.push(h),c._writableState.length)throw new i;if(c._transformState.transforming)throw new n;return c.push(null)}return vh}var _h,k_;function D8(){if(k_)return _h;k_=1,_h=e;var r=sw();$s(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,n,i){i(null,t)},_h}var bh,M_;function L8(){if(M_)return bh;M_=1;var r;function e(h){var d=!1;return function(){d||(d=!0,h.apply(void 0,arguments))}}var t=Eo().codes,n=t.ERR_MISSING_ARGS,i=t.ERR_STREAM_DESTROYED;function s(h){if(h)throw h}function a(h){return h.setHeader&&typeof h.abort=="function"}function o(h,d,p,v){v=e(v);var m=!1;h.on("close",function(){m=!0}),r===void 0&&(r=Lg()),r(h,{readable:d,writable:p},function(_){if(_)return v(_);m=!0,v()});var g=!1;return function(_){if(!m&&!g){if(g=!0,a(h))return h.abort();if(typeof h.destroy=="function")return h.destroy();v(_||new i("pipe"))}}}function l(h){h()}function u(h,d){return h.pipe(d)}function c(h){return!h.length||typeof h[h.length-1]!="function"?s:h.pop()}function f(){for(var h=arguments.length,d=new Array(h),p=0;p<h;p++)d[p]=arguments[p];var v=c(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new n("streams");var m,g=d.map(function(_,b){var w=b<d.length-1,S=b>0;return o(_,w,S,function(T){m||(m=T),T&&g.forEach(l),!w&&(g.forEach(l),v(m))})});return d.reduce(u)}return bh=f,bh}var U8=un,Ug=Cg.EventEmitter,N8=$s;N8(un,Ug);un.Readable=iw();un.Writable=nw();un.Duplex=Wa();un.Transform=sw();un.PassThrough=D8();un.finished=Lg();un.pipeline=L8();un.Stream=un;function un(){Ug.call(this)}un.prototype.pipe=function(r,e){var t=this;function n(c){r.writable&&r.write(c)===!1&&t.pause&&t.pause()}t.on("data",n);function i(){t.readable&&t.resume&&t.resume()}r.on("drain",i),!r._isStdio&&(!e||e.end!==!1)&&(t.on("end",a),t.on("close",o));var s=!1;function a(){s||(s=!0,r.end())}function o(){s||(s=!0,typeof r.destroy=="function"&&r.destroy())}function l(c){if(u(),Ug.listenerCount(this,"error")===0)throw c}t.on("error",l),r.on("error",l);function u(){t.removeListener("data",n),r.removeListener("drain",i),t.removeListener("end",a),t.removeListener("close",o),t.removeListener("error",l),r.removeListener("error",l),t.removeListener("end",u),t.removeListener("close",u),r.removeListener("close",u)}return t.on("end",u),t.on("close",u),r.on("close",u),r.emit("pipe",t),r};var aw={},yh={exports:{}},xh={},O_;function ow(){if(O_)return xh;O_=1;function r(_){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},r(_)}function e(_,b,w){return Object.defineProperty(_,"prototype",{writable:!1}),_}function t(_,b){if(!(_ instanceof b))throw new TypeError("Cannot call a class as a function")}function n(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(b&&b.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),b&&i(_,b)}function i(_,b){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,T){return S.__proto__=T,S},i(_,b)}function s(_){var b=l();return function(){var S=u(_),T;if(b){var E=u(this).constructor;T=Reflect.construct(S,arguments,E)}else T=S.apply(this,arguments);return a(this,T)}}function a(_,b){if(b&&(r(b)==="object"||typeof b=="function"))return b;if(b!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o(_)}function o(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function l(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function u(_){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(w){return w.__proto__||Object.getPrototypeOf(w)},u(_)}var c={},f,h;function d(_,b,w){w||(w=Error);function S(E,O,P){return typeof b=="string"?b:b(E,O,P)}var T=function(E){n(P,E);var O=s(P);function P(V,W,D){var j;return t(this,P),j=O.call(this,S(V,W,D)),j.code=_,j}return e(P)}(w);c[_]=T}function p(_,b){if(Array.isArray(_)){var w=_.length;return _=_.map(function(S){return String(S)}),w>2?"one of ".concat(b," ").concat(_.slice(0,w-1).join(", "),", or ")+_[w-1]:w===2?"one of ".concat(b," ").concat(_[0]," or ").concat(_[1]):"of ".concat(b," ").concat(_[0])}else return"of ".concat(b," ").concat(String(_))}function v(_,b,w){return _.substr(0,b.length)===b}function m(_,b,w){return(w===void 0||w>_.length)&&(w=_.length),_.substring(w-b.length,w)===b}function g(_,b,w){return typeof w!="number"&&(w=0),w+b.length>_.length?!1:_.indexOf(b,w)!==-1}return d("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),d("ERR_INVALID_ARG_TYPE",function(_,b,w){f===void 0&&(f=Dc()),f(typeof _=="string","'name' must be a string");var S;typeof b=="string"&&v(b,"not ")?(S="must not be",b=b.replace(/^not /,"")):S="must be";var T;if(m(_," argument"))T="The ".concat(_," ").concat(S," ").concat(p(b,"type"));else{var E=g(_,".")?"property":"argument";T='The "'.concat(_,'" ').concat(E," ").concat(S," ").concat(p(b,"type"))}return T+=". Received type ".concat(r(w)),T},TypeError),d("ERR_INVALID_ARG_VALUE",function(_,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";h===void 0&&(h=Pi);var S=h.inspect(b);return S.length>128&&(S="".concat(S.slice(0,128),"...")),"The argument '".concat(_,"' ").concat(w,". Received ").concat(S)},TypeError),d("ERR_INVALID_RETURN_VALUE",function(_,b,w){var S;return w&&w.constructor&&w.constructor.name?S="instance of ".concat(w.constructor.name):S="type ".concat(r(w)),"Expected ".concat(_,' to be returned from the "').concat(b,'"')+" function but got ".concat(S,".")},TypeError),d("ERR_MISSING_ARGS",function(){for(var _=arguments.length,b=new Array(_),w=0;w<_;w++)b[w]=arguments[w];f===void 0&&(f=Dc()),f(b.length>0,"At least one arg needs to be specified");var S="The ",T=b.length;switch(b=b.map(function(E){return'"'.concat(E,'"')}),T){case 1:S+="".concat(b[0]," argument");break;case 2:S+="".concat(b[0]," and ").concat(b[1]," arguments");break;default:S+=b.slice(0,T-1).join(", "),S+=", and ".concat(b[T-1]," arguments");break}return"".concat(S," must be specified")},TypeError),xh.codes=c,xh}var wh,I_;function G8(){if(I_)return wh;I_=1;function r(k,H){var ie=Object.keys(k);if(Object.getOwnPropertySymbols){var X=Object.getOwnPropertySymbols(k);H&&(X=X.filter(function(N){return Object.getOwnPropertyDescriptor(k,N).enumerable})),ie.push.apply(ie,X)}return ie}function e(k){for(var H=1;H<arguments.length;H++){var ie=arguments[H]!=null?arguments[H]:{};H%2?r(Object(ie),!0).forEach(function(X){t(k,X,ie[X])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(ie)):r(Object(ie)).forEach(function(X){Object.defineProperty(k,X,Object.getOwnPropertyDescriptor(ie,X))})}return k}function t(k,H,ie){return H=a(H),H in k?Object.defineProperty(k,H,{value:ie,enumerable:!0,configurable:!0,writable:!0}):k[H]=ie,k}function n(k,H){if(!(k instanceof H))throw new TypeError("Cannot call a class as a function")}function i(k,H){for(var ie=0;ie<H.length;ie++){var X=H[ie];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(k,a(X.key),X)}}function s(k,H,ie){return H&&i(k.prototype,H),Object.defineProperty(k,"prototype",{writable:!1}),k}function a(k){var H=o(k,"string");return _(H)==="symbol"?H:String(H)}function o(k,H){if(_(k)!=="object"||k===null)return k;var ie=k[Symbol.toPrimitive];if(ie!==void 0){var X=ie.call(k,H);if(_(X)!=="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)}function l(k,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(H&&H.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),H&&m(k,H)}function u(k){var H=p();return function(){var X=g(k),N;if(H){var M=g(this).constructor;N=Reflect.construct(X,arguments,M)}else N=X.apply(this,arguments);return c(this,N)}}function c(k,H){if(H&&(_(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(k)}function f(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function h(k){var H=typeof Map=="function"?new Map:void 0;return h=function(X){if(X===null||!v(X))return X;if(typeof X!="function")throw new TypeError("Super expression must either be null or a function");if(typeof H<"u"){if(H.has(X))return H.get(X);H.set(X,N)}function N(){return d(X,arguments,g(this).constructor)}return N.prototype=Object.create(X.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),m(N,X)},h(k)}function d(k,H,ie){return p()?d=Reflect.construct.bind():d=function(N,M,F){var A=[null];A.push.apply(A,M);var L=Function.bind.apply(N,A),Y=new L;return F&&m(Y,F.prototype),Y},d.apply(null,arguments)}function p(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v(k){return Function.toString.call(k).indexOf("[native code]")!==-1}function m(k,H){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(X,N){return X.__proto__=N,X},m(k,H)}function g(k){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ie){return ie.__proto__||Object.getPrototypeOf(ie)},g(k)}function _(k){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},_(k)}var b=Pi,w=b.inspect,S=ow(),T=S.codes.ERR_INVALID_ARG_TYPE;function E(k,H,ie){return(ie===void 0||ie>k.length)&&(ie=k.length),k.substring(ie-H.length,ie)===H}function O(k,H){if(H=Math.floor(H),k.length==0||H==0)return"";var ie=k.length*H;for(H=Math.floor(Math.log(H)/Math.log(2));H;)k+=k,H--;return k+=k.substring(0,ie-k.length),k}var P="",V="",W="",D="",j={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},I=10;function q(k){var H=Object.keys(k),ie=Object.create(Object.getPrototypeOf(k));return H.forEach(function(X){ie[X]=k[X]}),Object.defineProperty(ie,"message",{value:k.message}),ie}function $(k){return w(k,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function K(k,H,ie){var X="",N="",M=0,F="",A=!1,L=$(k),Y=L.split(`
`),te=$(H).split(`
`),fe=0,B="";if(ie==="strictEqual"&&_(k)==="object"&&_(H)==="object"&&k!==null&&H!==null&&(ie="strictEqualObject"),Y.length===1&&te.length===1&&Y[0]!==te[0]){var G=Y[0].length+te[0].length;if(G<=I){if((_(k)!=="object"||k===null)&&(_(H)!=="object"||H===null)&&(k!==0||H!==0))return"".concat(j[ie],`

`)+"".concat(Y[0]," !== ").concat(te[0],`
`)}else if(ie!=="strictEqualObject"){var Q=Ge.stderr&&Ge.stderr.isTTY?Ge.stderr.columns:80;if(G<Q){for(;Y[0][fe]===te[0][fe];)fe++;fe>2&&(B=`
  `.concat(O(" ",fe),"^"),fe=0)}}}for(var oe=Y[Y.length-1],_e=te[te.length-1];oe===_e&&(fe++<2?F=`
  `.concat(oe).concat(F):X=oe,Y.pop(),te.pop(),!(Y.length===0||te.length===0));)oe=Y[Y.length-1],_e=te[te.length-1];var me=Math.max(Y.length,te.length);if(me===0){var Pe=L.split(`
`);if(Pe.length>30)for(Pe[26]="".concat(P,"...").concat(D);Pe.length>27;)Pe.pop();return"".concat(j.notIdentical,`

`).concat(Pe.join(`
`),`
`)}fe>3&&(F=`
`.concat(P,"...").concat(D).concat(F),A=!0),X!==""&&(F=`
  `.concat(X).concat(F),X="");var Ue=0,se=j[ie]+`
`.concat(V,"+ actual").concat(D," ").concat(W,"- expected").concat(D),Te=" ".concat(P,"...").concat(D," Lines skipped");for(fe=0;fe<me;fe++){var Be=fe-M;if(Y.length<fe+1)Be>1&&fe>2&&(Be>4?(N+=`
`.concat(P,"...").concat(D),A=!0):Be>3&&(N+=`
  `.concat(te[fe-2]),Ue++),N+=`
  `.concat(te[fe-1]),Ue++),M=fe,X+=`
`.concat(W,"-").concat(D," ").concat(te[fe]),Ue++;else if(te.length<fe+1)Be>1&&fe>2&&(Be>4?(N+=`
`.concat(P,"...").concat(D),A=!0):Be>3&&(N+=`
  `.concat(Y[fe-2]),Ue++),N+=`
  `.concat(Y[fe-1]),Ue++),M=fe,N+=`
`.concat(V,"+").concat(D," ").concat(Y[fe]),Ue++;else{var Ee=te[fe],Ce=Y[fe],Z=Ce!==Ee&&(!E(Ce,",")||Ce.slice(0,-1)!==Ee);Z&&E(Ee,",")&&Ee.slice(0,-1)===Ce&&(Z=!1,Ce+=","),Z?(Be>1&&fe>2&&(Be>4?(N+=`
`.concat(P,"...").concat(D),A=!0):Be>3&&(N+=`
  `.concat(Y[fe-2]),Ue++),N+=`
  `.concat(Y[fe-1]),Ue++),M=fe,N+=`
`.concat(V,"+").concat(D," ").concat(Ce),X+=`
`.concat(W,"-").concat(D," ").concat(Ee),Ue+=2):(N+=X,X="",(Be===1||fe===0)&&(N+=`
  `.concat(Ce),Ue++))}if(Ue>20&&fe<me-2)return"".concat(se).concat(Te,`
`).concat(N,`
`).concat(P,"...").concat(D).concat(X,`
`)+"".concat(P,"...").concat(D)}return"".concat(se).concat(A?Te:"",`
`).concat(N).concat(X).concat(F).concat(B)}var ae=function(k,H){l(X,k);var ie=u(X);function X(N){var M;if(n(this,X),_(N)!=="object"||N===null)throw new T("options","Object",N);var F=N.message,A=N.operator,L=N.stackStartFn,Y=N.actual,te=N.expected,fe=Error.stackTraceLimit;if(Error.stackTraceLimit=0,F!=null)M=ie.call(this,String(F));else if(Ge.stderr&&Ge.stderr.isTTY&&(Ge.stderr&&Ge.stderr.getColorDepth&&Ge.stderr.getColorDepth()!==1?(P="\x1B[34m",V="\x1B[32m",D="\x1B[39m",W="\x1B[31m"):(P="",V="",D="",W="")),_(Y)==="object"&&Y!==null&&_(te)==="object"&&te!==null&&"stack"in Y&&Y instanceof Error&&"stack"in te&&te instanceof Error&&(Y=q(Y),te=q(te)),A==="deepStrictEqual"||A==="strictEqual")M=ie.call(this,K(Y,te,A));else if(A==="notDeepStrictEqual"||A==="notStrictEqual"){var B=j[A],G=$(Y).split(`
`);if(A==="notStrictEqual"&&_(Y)==="object"&&Y!==null&&(B=j.notStrictEqualObject),G.length>30)for(G[26]="".concat(P,"...").concat(D);G.length>27;)G.pop();G.length===1?M=ie.call(this,"".concat(B," ").concat(G[0])):M=ie.call(this,"".concat(B,`

`).concat(G.join(`
`),`
`))}else{var Q=$(Y),oe="",_e=j[A];A==="notDeepEqual"||A==="notEqual"?(Q="".concat(j[A],`

`).concat(Q),Q.length>1024&&(Q="".concat(Q.slice(0,1021),"..."))):(oe="".concat($(te)),Q.length>512&&(Q="".concat(Q.slice(0,509),"...")),oe.length>512&&(oe="".concat(oe.slice(0,509),"...")),A==="deepEqual"||A==="equal"?Q="".concat(_e,`

`).concat(Q,`

should equal

`):oe=" ".concat(A," ").concat(oe)),M=ie.call(this,"".concat(Q).concat(oe))}return Error.stackTraceLimit=fe,M.generatedMessage=!F,Object.defineProperty(f(M),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),M.code="ERR_ASSERTION",M.actual=Y,M.expected=te,M.operator=A,Error.captureStackTrace&&Error.captureStackTrace(f(M),L),M.stack,M.name="AssertionError",c(M)}return s(X,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:H,value:function(M,F){return w(this,e(e({},F),{},{customInspect:!1,depth:0}))}}]),X}(h(Error),w.custom);return wh=ae,wh}var B_=Object.prototype.toString,lw=function(e){var t=B_.call(e),n=t==="[object Arguments]";return n||(n=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&B_.call(e.callee)==="[object Function]"),n},Sh,F_;function z8(){if(F_)return Sh;F_=1;var r;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=lw,i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),a=i.call(function(){},"prototype"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(h){var d=h.constructor;return d&&d.prototype===h},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},c=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!u["$"+h]&&e.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{l(window[h])}catch{return!0}}catch{return!0}return!1}(),f=function(h){if(typeof window>"u"||!c)return l(h);try{return l(h)}catch{return!1}};r=function(d){var p=d!==null&&typeof d=="object",v=t.call(d)==="[object Function]",m=n(d),g=p&&t.call(d)==="[object String]",_=[];if(!p&&!v&&!m)throw new TypeError("Object.keys called on a non-object");var b=a&&v;if(g&&d.length>0&&!e.call(d,0))for(var w=0;w<d.length;++w)_.push(String(w));if(m&&d.length>0)for(var S=0;S<d.length;++S)_.push(String(S));else for(var T in d)!(b&&T==="prototype")&&e.call(d,T)&&_.push(String(T));if(s)for(var E=f(d),O=0;O<o.length;++O)!(E&&o[O]==="constructor")&&e.call(d,o[O])&&_.push(o[O]);return _}}return Sh=r,Sh}var j8=Array.prototype.slice,H8=lw,D_=Object.keys,ic=D_?function(e){return D_(e)}:z8(),L_=Object.keys;ic.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(n){return H8(n)?L_(j8.call(n)):L_(n)})}else Object.keys=ic;return Object.keys||ic};var uw=ic,V8=uw,cw=Pg(),fw=To,sc=Rg,W8=fw("Array.prototype.push"),U_=fw("Object.prototype.propertyIsEnumerable"),q8=cw?sc.getOwnPropertySymbols:null,X8=function(e,t){if(e==null)throw new TypeError("target must be an object");var n=sc(e);if(arguments.length===1)return n;for(var i=1;i<arguments.length;++i){var s=sc(arguments[i]),a=V8(s),o=cw&&(sc.getOwnPropertySymbols||q8);if(o)for(var l=o(s),u=0;u<l.length;++u){var c=l[u];U_(s,c)&&W8(a,c)}for(var f=0;f<a.length;++f){var h=a[f];if(U_(s,h)){var d=s[h];n[h]=d}}}return n},Th=X8,Y8=function(){if(!Object.assign)return!1;for(var r="abcdefghijklmnopqrst",e=r.split(""),t={},n=0;n<e.length;++n)t[e[n]]=e[n];var i=Object.assign({},t),s="";for(var a in i)s+=a;return r!==s},$8=function(){if(!Object.assign||!Object.preventExtensions)return!1;var r=Object.preventExtensions({1:2});try{Object.assign(r,"xy")}catch{return r[1]==="y"}return!1},K8=function(){return!Object.assign||Y8()||$8()?Th:Object.assign},N_=function(r){return r!==r},hw=function(e,t){return e===0&&t===0?1/e===1/t:!!(e===t||N_(e)&&N_(t))},Z8=hw,Ng=function(){return typeof Object.is=="function"?Object.is:Z8},dw=Bg,pw=pf,J8=pw(dw("String.prototype.indexOf")),Q8=function(e,t){var n=dw(e,!!t);return typeof n=="function"&&J8(e,".prototype.")>-1?pw(n):n},Eh,G_;function gf(){if(G_)return Eh;G_=1;var r=uw,e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",t=Object.prototype.toString,n=Array.prototype.concat,i=K1,s=function(u){return typeof u=="function"&&t.call(u)==="[object Function]"},a=J1(),o=function(u,c,f,h){if(c in u){if(h===!0){if(u[c]===f)return}else if(!s(h)||!h())return}a?i(u,c,f,!0):i(u,c,f)},l=function(u,c){var f=arguments.length>2?arguments[2]:{},h=r(c);e&&(h=n.call(h,Object.getOwnPropertySymbols(c)));for(var d=0;d<h.length;d+=1)o(u,h[d],c[h[d]],f[h[d]])};return l.supportsDescriptors=!!a,Eh=l,Eh}var Ah,z_;function eO(){if(z_)return Ah;z_=1;var r=Ng,e=gf();return Ah=function(){var n=r();return e(Object,{is:n},{is:function(){return Object.is!==n}}),n},Ah}var Ch,j_;function tO(){if(j_)return Ch;j_=1;var r=gf(),e=pf,t=hw,n=Ng,i=eO(),s=e(n(),Object);return r(s,{getPolyfill:n,implementation:t,shim:i}),Ch=s,Ch}var Ph,H_;function gw(){return H_||(H_=1,Ph=function(e){return e!==e}),Ph}var Rh,V_;function mw(){if(V_)return Rh;V_=1;var r=gw();return Rh=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r},Rh}var kh,W_;function rO(){if(W_)return kh;W_=1;var r=gf(),e=mw();return kh=function(){var n=e();return r(Number,{isNaN:n},{isNaN:function(){return Number.isNaN!==n}}),n},kh}var Mh,q_;function nO(){if(q_)return Mh;q_=1;var r=pf,e=gf(),t=gw(),n=mw(),i=rO(),s=r(n(),Number);return e(s,{getPolyfill:n,implementation:t,shim:i}),Mh=s,Mh}var Oh,X_;function iO(){if(X_)return Oh;X_=1;function r(Z,ne){return s(Z)||i(Z,ne)||t(Z,ne)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t(Z,ne){if(Z){if(typeof Z=="string")return n(Z,ne);var de=Object.prototype.toString.call(Z).slice(8,-1);if(de==="Object"&&Z.constructor&&(de=Z.constructor.name),de==="Map"||de==="Set")return Array.from(Z);if(de==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(de))return n(Z,ne)}}function n(Z,ne){(ne==null||ne>Z.length)&&(ne=Z.length);for(var de=0,we=new Array(ne);de<ne;de++)we[de]=Z[de];return we}function i(Z,ne){var de=Z==null?null:typeof Symbol<"u"&&Z[Symbol.iterator]||Z["@@iterator"];if(de!=null){var we,xe,ke,C,y=[],x=!0,U=!1;try{if(ke=(de=de.call(Z)).next,ne!==0)for(;!(x=(we=ke.call(de)).done)&&(y.push(we.value),y.length!==ne);x=!0);}catch(J){U=!0,xe=J}finally{try{if(!x&&de.return!=null&&(C=de.return(),Object(C)!==C))return}finally{if(U)throw xe}}return y}}function s(Z){if(Array.isArray(Z))return Z}function a(Z){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne},a(Z)}var o=/a/g.flags!==void 0,l=function(ne){var de=[];return ne.forEach(function(we){return de.push(we)}),de},u=function(ne){var de=[];return ne.forEach(function(we,xe){return de.push([xe,we])}),de},c=Object.is?Object.is:tO(),f=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},h=Number.isNaN?Number.isNaN:nO();function d(Z){return Z.call.bind(Z)}var p=d(Object.prototype.hasOwnProperty),v=d(Object.prototype.propertyIsEnumerable),m=d(Object.prototype.toString),g=Pi.types,_=g.isAnyArrayBuffer,b=g.isArrayBufferView,w=g.isDate,S=g.isMap,T=g.isRegExp,E=g.isSet,O=g.isNativeError,P=g.isBoxedPrimitive,V=g.isNumberObject,W=g.isStringObject,D=g.isBooleanObject,j=g.isBigIntObject,I=g.isSymbolObject,q=g.isFloat32Array,$=g.isFloat64Array;function K(Z){if(Z.length===0||Z.length>10)return!0;for(var ne=0;ne<Z.length;ne++){var de=Z.charCodeAt(ne);if(de<48||de>57)return!0}return Z.length===10&&Z>=Math.pow(2,32)}function ae(Z){return Object.keys(Z).filter(K).concat(f(Z).filter(Object.prototype.propertyIsEnumerable.bind(Z)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function k(Z,ne){if(Z===ne)return 0;for(var de=Z.length,we=ne.length,xe=0,ke=Math.min(de,we);xe<ke;++xe)if(Z[xe]!==ne[xe]){de=Z[xe],we=ne[xe];break}return de<we?-1:we<de?1:0}var H=!0,ie=!1,X=0,N=1,M=2,F=3;function A(Z,ne){return o?Z.source===ne.source&&Z.flags===ne.flags:RegExp.prototype.toString.call(Z)===RegExp.prototype.toString.call(ne)}function L(Z,ne){if(Z.byteLength!==ne.byteLength)return!1;for(var de=0;de<Z.byteLength;de++)if(Z[de]!==ne[de])return!1;return!0}function Y(Z,ne){return Z.byteLength!==ne.byteLength?!1:k(new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength),new Uint8Array(ne.buffer,ne.byteOffset,ne.byteLength))===0}function te(Z,ne){return Z.byteLength===ne.byteLength&&k(new Uint8Array(Z),new Uint8Array(ne))===0}function fe(Z,ne){return V(Z)?V(ne)&&c(Number.prototype.valueOf.call(Z),Number.prototype.valueOf.call(ne)):W(Z)?W(ne)&&String.prototype.valueOf.call(Z)===String.prototype.valueOf.call(ne):D(Z)?D(ne)&&Boolean.prototype.valueOf.call(Z)===Boolean.prototype.valueOf.call(ne):j(Z)?j(ne)&&BigInt.prototype.valueOf.call(Z)===BigInt.prototype.valueOf.call(ne):I(ne)&&Symbol.prototype.valueOf.call(Z)===Symbol.prototype.valueOf.call(ne)}function B(Z,ne,de,we){if(Z===ne)return Z!==0?!0:de?c(Z,ne):!0;if(de){if(a(Z)!=="object")return typeof Z=="number"&&h(Z)&&h(ne);if(a(ne)!=="object"||Z===null||ne===null||Object.getPrototypeOf(Z)!==Object.getPrototypeOf(ne))return!1}else{if(Z===null||a(Z)!=="object")return ne===null||a(ne)!=="object"?Z==ne:!1;if(ne===null||a(ne)!=="object")return!1}var xe=m(Z),ke=m(ne);if(xe!==ke)return!1;if(Array.isArray(Z)){if(Z.length!==ne.length)return!1;var C=ae(Z),y=ae(ne);return C.length!==y.length?!1:Q(Z,ne,de,we,N,C)}if(xe==="[object Object]"&&(!S(Z)&&S(ne)||!E(Z)&&E(ne)))return!1;if(w(Z)){if(!w(ne)||Date.prototype.getTime.call(Z)!==Date.prototype.getTime.call(ne))return!1}else if(T(Z)){if(!T(ne)||!A(Z,ne))return!1}else if(O(Z)||Z instanceof Error){if(Z.message!==ne.message||Z.name!==ne.name)return!1}else if(b(Z)){if(!de&&(q(Z)||$(Z))){if(!L(Z,ne))return!1}else if(!Y(Z,ne))return!1;var x=ae(Z),U=ae(ne);return x.length!==U.length?!1:Q(Z,ne,de,we,X,x)}else{if(E(Z))return!E(ne)||Z.size!==ne.size?!1:Q(Z,ne,de,we,M);if(S(Z))return!S(ne)||Z.size!==ne.size?!1:Q(Z,ne,de,we,F);if(_(Z)){if(!te(Z,ne))return!1}else if(P(Z)&&!fe(Z,ne))return!1}return Q(Z,ne,de,we,X)}function G(Z,ne){return ne.filter(function(de){return v(Z,de)})}function Q(Z,ne,de,we,xe,ke){if(arguments.length===5){ke=Object.keys(Z);var C=Object.keys(ne);if(ke.length!==C.length)return!1}for(var y=0;y<ke.length;y++)if(!p(ne,ke[y]))return!1;if(de&&arguments.length===5){var x=f(Z);if(x.length!==0){var U=0;for(y=0;y<x.length;y++){var J=x[y];if(v(Z,J)){if(!v(ne,J))return!1;ke.push(J),U++}else if(v(ne,J))return!1}var ue=f(ne);if(x.length!==ue.length&&G(ne,ue).length!==U)return!1}else{var he=f(ne);if(he.length!==0&&G(ne,he).length!==0)return!1}}if(ke.length===0&&(xe===X||xe===N&&Z.length===0||Z.size===0))return!0;if(we===void 0)we={val1:new Map,val2:new Map,position:0};else{var De=we.val1.get(Z);if(De!==void 0){var $e=we.val2.get(ne);if($e!==void 0)return De===$e}we.position++}we.val1.set(Z,we.position),we.val2.set(ne,we.position);var nt=Be(Z,ne,de,ke,we,xe);return we.val1.delete(Z),we.val2.delete(ne),nt}function oe(Z,ne,de,we){for(var xe=l(Z),ke=0;ke<xe.length;ke++){var C=xe[ke];if(B(ne,C,de,we))return Z.delete(C),!0}return!1}function _e(Z){switch(a(Z)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":Z=+Z;case"number":if(h(Z))return!1}return!0}function me(Z,ne,de){var we=_e(de);return we??(ne.has(we)&&!Z.has(we))}function Pe(Z,ne,de,we,xe){var ke=_e(de);if(ke!=null)return ke;var C=ne.get(ke);return C===void 0&&!ne.has(ke)||!B(we,C,!1,xe)?!1:!Z.has(ke)&&B(we,C,!1,xe)}function Ue(Z,ne,de,we){for(var xe=null,ke=l(Z),C=0;C<ke.length;C++){var y=ke[C];if(a(y)==="object"&&y!==null)xe===null&&(xe=new Set),xe.add(y);else if(!ne.has(y)){if(de||!me(Z,ne,y))return!1;xe===null&&(xe=new Set),xe.add(y)}}if(xe!==null){for(var x=l(ne),U=0;U<x.length;U++){var J=x[U];if(a(J)==="object"&&J!==null){if(!oe(xe,J,de,we))return!1}else if(!de&&!Z.has(J)&&!oe(xe,J,de,we))return!1}return xe.size===0}return!0}function se(Z,ne,de,we,xe,ke){for(var C=l(Z),y=0;y<C.length;y++){var x=C[y];if(B(de,x,xe,ke)&&B(we,ne.get(x),xe,ke))return Z.delete(x),!0}return!1}function Te(Z,ne,de,we){for(var xe=null,ke=u(Z),C=0;C<ke.length;C++){var y=r(ke[C],2),x=y[0],U=y[1];if(a(x)==="object"&&x!==null)xe===null&&(xe=new Set),xe.add(x);else{var J=ne.get(x);if(J===void 0&&!ne.has(x)||!B(U,J,de,we)){if(de||!Pe(Z,ne,x,U,we))return!1;xe===null&&(xe=new Set),xe.add(x)}}}if(xe!==null){for(var ue=u(ne),he=0;he<ue.length;he++){var De=r(ue[he],2),$e=De[0],nt=De[1];if(a($e)==="object"&&$e!==null){if(!se(xe,Z,$e,nt,de,we))return!1}else if(!de&&(!Z.has($e)||!B(Z.get($e),nt,!1,we))&&!se(xe,Z,$e,nt,!1,we))return!1}return xe.size===0}return!0}function Be(Z,ne,de,we,xe,ke){var C=0;if(ke===M){if(!Ue(Z,ne,de,xe))return!1}else if(ke===F){if(!Te(Z,ne,de,xe))return!1}else if(ke===N)for(;C<Z.length;C++)if(p(Z,C)){if(!p(ne,C)||!B(Z[C],ne[C],de,xe))return!1}else{if(p(ne,C))return!1;for(var y=Object.keys(Z);C<y.length;C++){var x=y[C];if(!p(ne,x)||!B(Z[x],ne[x],de,xe))return!1}return y.length===Object.keys(ne).length}for(C=0;C<we.length;C++){var U=we[C];if(!B(Z[U],ne[U],de,xe))return!1}return!0}function Ee(Z,ne){return B(Z,ne,ie)}function Ce(Z,ne){return B(Z,ne,H)}return Oh={isDeepEqual:Ee,isDeepStrictEqual:Ce},Oh}var Y_;function Dc(){if(Y_)return yh.exports;Y_=1;function r(M){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},r(M)}function e(M,F,A){return Object.defineProperty(M,"prototype",{writable:!1}),M}function t(M,F){if(!(M instanceof F))throw new TypeError("Cannot call a class as a function")}var n=ow(),i=n.codes,s=i.ERR_AMBIGUOUS_ARGUMENT,a=i.ERR_INVALID_ARG_TYPE,o=i.ERR_INVALID_ARG_VALUE,l=i.ERR_INVALID_RETURN_VALUE,u=i.ERR_MISSING_ARGS,c=G8(),f=Pi,h=f.inspect,d=Pi.types,p=d.isPromise,v=d.isRegExp,m=K8(),g=Ng(),_=Q8("RegExp.prototype.test"),b,w;function S(){var M=iO();b=M.isDeepEqual,w=M.isDeepStrictEqual}var T=!1,E=yh.exports=D,O={};function P(M){throw M.message instanceof Error?M.message:new c(M)}function V(M,F,A,L,Y){var te=arguments.length,fe;if(te===0)fe="Failed";else if(te===1)A=M,M=void 0;else{if(T===!1){T=!0;var B=Ge.emitWarning?Ge.emitWarning:console.warn.bind(console);B("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}te===2&&(L="!=")}if(A instanceof Error)throw A;var G={actual:M,expected:F,operator:L===void 0?"fail":L,stackStartFn:Y||V};A!==void 0&&(G.message=A);var Q=new c(G);throw fe&&(Q.message=fe,Q.generatedMessage=!0),Q}E.fail=V,E.AssertionError=c;function W(M,F,A,L){if(!A){var Y=!1;if(F===0)Y=!0,L="No value argument passed to `assert.ok()`";else if(L instanceof Error)throw L;var te=new c({actual:A,expected:!0,message:L,operator:"==",stackStartFn:M});throw te.generatedMessage=Y,te}}function D(){for(var M=arguments.length,F=new Array(M),A=0;A<M;A++)F[A]=arguments[A];W.apply(void 0,[D,F.length].concat(F))}E.ok=D,E.equal=function M(F,A,L){if(arguments.length<2)throw new u("actual","expected");F!=A&&P({actual:F,expected:A,message:L,operator:"==",stackStartFn:M})},E.notEqual=function M(F,A,L){if(arguments.length<2)throw new u("actual","expected");F==A&&P({actual:F,expected:A,message:L,operator:"!=",stackStartFn:M})},E.deepEqual=function M(F,A,L){if(arguments.length<2)throw new u("actual","expected");b===void 0&&S(),b(F,A)||P({actual:F,expected:A,message:L,operator:"deepEqual",stackStartFn:M})},E.notDeepEqual=function M(F,A,L){if(arguments.length<2)throw new u("actual","expected");b===void 0&&S(),b(F,A)&&P({actual:F,expected:A,message:L,operator:"notDeepEqual",stackStartFn:M})},E.deepStrictEqual=function M(F,A,L){if(arguments.length<2)throw new u("actual","expected");b===void 0&&S(),w(F,A)||P({actual:F,expected:A,message:L,operator:"deepStrictEqual",stackStartFn:M})},E.notDeepStrictEqual=j;function j(M,F,A){if(arguments.length<2)throw new u("actual","expected");b===void 0&&S(),w(M,F)&&P({actual:M,expected:F,message:A,operator:"notDeepStrictEqual",stackStartFn:j})}E.strictEqual=function M(F,A,L){if(arguments.length<2)throw new u("actual","expected");g(F,A)||P({actual:F,expected:A,message:L,operator:"strictEqual",stackStartFn:M})},E.notStrictEqual=function M(F,A,L){if(arguments.length<2)throw new u("actual","expected");g(F,A)&&P({actual:F,expected:A,message:L,operator:"notStrictEqual",stackStartFn:M})};var I=e(function M(F,A,L){var Y=this;t(this,M),A.forEach(function(te){te in F&&(L!==void 0&&typeof L[te]=="string"&&v(F[te])&&_(F[te],L[te])?Y[te]=L[te]:Y[te]=F[te])})});function q(M,F,A,L,Y,te){if(!(A in M)||!w(M[A],F[A])){if(!L){var fe=new I(M,Y),B=new I(F,Y,M),G=new c({actual:fe,expected:B,operator:"deepStrictEqual",stackStartFn:te});throw G.actual=M,G.expected=F,G.operator=te.name,G}P({actual:M,expected:F,message:L,operator:te.name,stackStartFn:te})}}function $(M,F,A,L){if(typeof F!="function"){if(v(F))return _(F,M);if(arguments.length===2)throw new a("expected",["Function","RegExp"],F);if(r(M)!=="object"||M===null){var Y=new c({actual:M,expected:F,message:A,operator:"deepStrictEqual",stackStartFn:L});throw Y.operator=L.name,Y}var te=Object.keys(F);if(F instanceof Error)te.push("name","message");else if(te.length===0)throw new o("error",F,"may not be an empty object");return b===void 0&&S(),te.forEach(function(fe){typeof M[fe]=="string"&&v(F[fe])&&_(F[fe],M[fe])||q(M,F,fe,A,te,L)}),!0}return F.prototype!==void 0&&M instanceof F?!0:Error.isPrototypeOf(F)?!1:F.call({},M)===!0}function K(M){if(typeof M!="function")throw new a("fn","Function",M);try{M()}catch(F){return F}return O}function ae(M){return p(M)||M!==null&&r(M)==="object"&&typeof M.then=="function"&&typeof M.catch=="function"}function k(M){return Promise.resolve().then(function(){var F;if(typeof M=="function"){if(F=M(),!ae(F))throw new l("instance of Promise","promiseFn",F)}else if(ae(M))F=M;else throw new a("promiseFn",["Function","Promise"],M);return Promise.resolve().then(function(){return F}).then(function(){return O}).catch(function(A){return A})})}function H(M,F,A,L){if(typeof A=="string"){if(arguments.length===4)throw new a("error",["Object","Error","Function","RegExp"],A);if(r(F)==="object"&&F!==null){if(F.message===A)throw new s("error/message",'The error message "'.concat(F.message,'" is identical to the message.'))}else if(F===A)throw new s("error/message",'The error "'.concat(F,'" is identical to the message.'));L=A,A=void 0}else if(A!=null&&r(A)!=="object"&&typeof A!="function")throw new a("error",["Object","Error","Function","RegExp"],A);if(F===O){var Y="";A&&A.name&&(Y+=" (".concat(A.name,")")),Y+=L?": ".concat(L):".";var te=M.name==="rejects"?"rejection":"exception";P({actual:void 0,expected:A,operator:M.name,message:"Missing expected ".concat(te).concat(Y),stackStartFn:M})}if(A&&!$(F,A,L,M))throw F}function ie(M,F,A,L){if(F!==O){if(typeof A=="string"&&(L=A,A=void 0),!A||$(F,A)){var Y=L?": ".concat(L):".",te=M.name==="doesNotReject"?"rejection":"exception";P({actual:F,expected:A,operator:M.name,message:"Got unwanted ".concat(te).concat(Y,`
`)+'Actual message: "'.concat(F&&F.message,'"'),stackStartFn:M})}throw F}}E.throws=function M(F){for(var A=arguments.length,L=new Array(A>1?A-1:0),Y=1;Y<A;Y++)L[Y-1]=arguments[Y];H.apply(void 0,[M,K(F)].concat(L))},E.rejects=function M(F){for(var A=arguments.length,L=new Array(A>1?A-1:0),Y=1;Y<A;Y++)L[Y-1]=arguments[Y];return k(F).then(function(te){return H.apply(void 0,[M,te].concat(L))})},E.doesNotThrow=function M(F){for(var A=arguments.length,L=new Array(A>1?A-1:0),Y=1;Y<A;Y++)L[Y-1]=arguments[Y];ie.apply(void 0,[M,K(F)].concat(L))},E.doesNotReject=function M(F){for(var A=arguments.length,L=new Array(A>1?A-1:0),Y=1;Y<A;Y++)L[Y-1]=arguments[Y];return k(F).then(function(te){return ie.apply(void 0,[M,te].concat(L))})},E.ifError=function M(F){if(F!=null){var A="ifError got unwanted exception: ";r(F)==="object"&&typeof F.message=="string"?F.message.length===0&&F.constructor?A+=F.constructor.name:A+=F.message:A+=h(F);var L=new c({actual:F,expected:null,operator:"ifError",message:A,stackStartFn:M}),Y=F.stack;if(typeof Y=="string"){var te=Y.split(`
`);te.shift();for(var fe=L.stack.split(`
`),B=0;B<te.length;B++){var G=fe.indexOf(te[B]);if(G!==-1){fe=fe.slice(0,G);break}}L.stack="".concat(fe.join(`
`),`
`).concat(te.join(`
`))}throw L}};function X(M,F,A,L,Y){if(!v(F))throw new a("regexp","RegExp",F);var te=Y==="match";if(typeof M!="string"||_(F,M)!==te){if(A instanceof Error)throw A;var fe=!A;A=A||(typeof M!="string"?'The "string" argument must be of type string. Received type '+"".concat(r(M)," (").concat(h(M),")"):(te?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(h(F),`. Input:

`).concat(h(M),`
`));var B=new c({actual:M,expected:F,message:A,operator:Y,stackStartFn:L});throw B.generatedMessage=fe,B}}E.match=function M(F,A,L){X(F,A,L,M,"match")},E.doesNotMatch=function M(F,A,L){X(F,A,L,M,"doesNotMatch")};function N(){for(var M=arguments.length,F=new Array(M),A=0;A<M;A++)F[A]=arguments[A];W.apply(void 0,[N,F.length].concat(F))}return E.strict=m(N,E,{equal:E.strictEqual,deepEqual:E.deepStrictEqual,notEqual:E.notStrictEqual,notDeepEqual:E.notDeepStrictEqual}),E.strict.strict=E.strict,yh.exports}function sO(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var aO=sO,ni={},Hl={};(function(r){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function t(s,a){return Object.prototype.hasOwnProperty.call(s,a)}r.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var o=a.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)t(o,l)&&(s[l]=o[l])}}return s},r.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var n={arraySet:function(s,a,o,l,u){if(a.subarray&&s.subarray){s.set(a.subarray(o,o+l),u);return}for(var c=0;c<l;c++)s[u+c]=a[o+c]},flattenChunks:function(s){var a,o,l,u,c,f;for(l=0,a=0,o=s.length;a<o;a++)l+=s[a].length;for(f=new Uint8Array(l),u=0,a=0,o=s.length;a<o;a++)c=s[a],f.set(c,u),u+=c.length;return f}},i={arraySet:function(s,a,o,l,u){for(var c=0;c<l;c++)s[u+c]=a[o+c]},flattenChunks:function(s){return[].concat.apply([],s)}};r.setTyped=function(s){s?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,n)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,i))},r.setTyped(e)})(Hl);var Ao={},oO=Hl,lO=4,$_=0,K_=1,uO=2;function Co(r){for(var e=r.length;--e>=0;)r[e]=0}var cO=0,vw=1,fO=2,hO=3,dO=258,Gg=29,Vl=256,xl=Vl+1+Gg,ka=30,zg=19,_w=2*xl+1,xs=15,Ih=16,pO=7,jg=256,bw=16,yw=17,xw=18,pp=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ac=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],gO=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ww=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],mO=512,ui=new Array((xl+2)*2);Co(ui);var ol=new Array(ka*2);Co(ol);var wl=new Array(mO);Co(wl);var Sl=new Array(dO-hO+1);Co(Sl);var Hg=new Array(Gg);Co(Hg);var Lc=new Array(ka);Co(Lc);function Bh(r,e,t,n,i){this.static_tree=r,this.extra_bits=e,this.extra_base=t,this.elems=n,this.max_length=i,this.has_stree=r&&r.length}var Sw,Tw,Ew;function Fh(r,e){this.dyn_tree=r,this.max_code=0,this.stat_desc=e}function Aw(r){return r<256?wl[r]:wl[256+(r>>>7)]}function Tl(r,e){r.pending_buf[r.pending++]=e&255,r.pending_buf[r.pending++]=e>>>8&255}function xr(r,e,t){r.bi_valid>Ih-t?(r.bi_buf|=e<<r.bi_valid&65535,Tl(r,r.bi_buf),r.bi_buf=e>>Ih-r.bi_valid,r.bi_valid+=t-Ih):(r.bi_buf|=e<<r.bi_valid&65535,r.bi_valid+=t)}function Hn(r,e,t){xr(r,t[e*2],t[e*2+1])}function Cw(r,e){var t=0;do t|=r&1,r>>>=1,t<<=1;while(--e>0);return t>>>1}function vO(r){r.bi_valid===16?(Tl(r,r.bi_buf),r.bi_buf=0,r.bi_valid=0):r.bi_valid>=8&&(r.pending_buf[r.pending++]=r.bi_buf&255,r.bi_buf>>=8,r.bi_valid-=8)}function _O(r,e){var t=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length,u,c,f,h,d,p,v=0;for(h=0;h<=xs;h++)r.bl_count[h]=0;for(t[r.heap[r.heap_max]*2+1]=0,u=r.heap_max+1;u<_w;u++)c=r.heap[u],h=t[t[c*2+1]*2+1]+1,h>l&&(h=l,v++),t[c*2+1]=h,!(c>n)&&(r.bl_count[h]++,d=0,c>=o&&(d=a[c-o]),p=t[c*2],r.opt_len+=p*(h+d),s&&(r.static_len+=p*(i[c*2+1]+d)));if(v!==0){do{for(h=l-1;r.bl_count[h]===0;)h--;r.bl_count[h]--,r.bl_count[h+1]+=2,r.bl_count[l]--,v-=2}while(v>0);for(h=l;h!==0;h--)for(c=r.bl_count[h];c!==0;)f=r.heap[--u],!(f>n)&&(t[f*2+1]!==h&&(r.opt_len+=(h-t[f*2+1])*t[f*2],t[f*2+1]=h),c--)}}function Pw(r,e,t){var n=new Array(xs+1),i=0,s,a;for(s=1;s<=xs;s++)n[s]=i=i+t[s-1]<<1;for(a=0;a<=e;a++){var o=r[a*2+1];o!==0&&(r[a*2]=Cw(n[o]++,o))}}function bO(){var r,e,t,n,i,s=new Array(xs+1);for(t=0,n=0;n<Gg-1;n++)for(Hg[n]=t,r=0;r<1<<pp[n];r++)Sl[t++]=n;for(Sl[t-1]=n,i=0,n=0;n<16;n++)for(Lc[n]=i,r=0;r<1<<ac[n];r++)wl[i++]=n;for(i>>=7;n<ka;n++)for(Lc[n]=i<<7,r=0;r<1<<ac[n]-7;r++)wl[256+i++]=n;for(e=0;e<=xs;e++)s[e]=0;for(r=0;r<=143;)ui[r*2+1]=8,r++,s[8]++;for(;r<=255;)ui[r*2+1]=9,r++,s[9]++;for(;r<=279;)ui[r*2+1]=7,r++,s[7]++;for(;r<=287;)ui[r*2+1]=8,r++,s[8]++;for(Pw(ui,xl+1,s),r=0;r<ka;r++)ol[r*2+1]=5,ol[r*2]=Cw(r,5);Sw=new Bh(ui,pp,Vl+1,xl,xs),Tw=new Bh(ol,ac,0,ka,xs),Ew=new Bh(new Array(0),gO,0,zg,pO)}function Rw(r){var e;for(e=0;e<xl;e++)r.dyn_ltree[e*2]=0;for(e=0;e<ka;e++)r.dyn_dtree[e*2]=0;for(e=0;e<zg;e++)r.bl_tree[e*2]=0;r.dyn_ltree[jg*2]=1,r.opt_len=r.static_len=0,r.last_lit=r.matches=0}function kw(r){r.bi_valid>8?Tl(r,r.bi_buf):r.bi_valid>0&&(r.pending_buf[r.pending++]=r.bi_buf),r.bi_buf=0,r.bi_valid=0}function yO(r,e,t,n){kw(r),Tl(r,t),Tl(r,~t),oO.arraySet(r.pending_buf,r.window,e,t,r.pending),r.pending+=t}function Z_(r,e,t,n){var i=e*2,s=t*2;return r[i]<r[s]||r[i]===r[s]&&n[e]<=n[t]}function Dh(r,e,t){for(var n=r.heap[t],i=t<<1;i<=r.heap_len&&(i<r.heap_len&&Z_(e,r.heap[i+1],r.heap[i],r.depth)&&i++,!Z_(e,n,r.heap[i],r.depth));)r.heap[t]=r.heap[i],t=i,i<<=1;r.heap[t]=n}function J_(r,e,t){var n,i,s=0,a,o;if(r.last_lit!==0)do n=r.pending_buf[r.d_buf+s*2]<<8|r.pending_buf[r.d_buf+s*2+1],i=r.pending_buf[r.l_buf+s],s++,n===0?Hn(r,i,e):(a=Sl[i],Hn(r,a+Vl+1,e),o=pp[a],o!==0&&(i-=Hg[a],xr(r,i,o)),n--,a=Aw(n),Hn(r,a,t),o=ac[a],o!==0&&(n-=Lc[a],xr(r,n,o)));while(s<r.last_lit);Hn(r,jg,e)}function gp(r,e){var t=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems,a,o,l=-1,u;for(r.heap_len=0,r.heap_max=_w,a=0;a<s;a++)t[a*2]!==0?(r.heap[++r.heap_len]=l=a,r.depth[a]=0):t[a*2+1]=0;for(;r.heap_len<2;)u=r.heap[++r.heap_len]=l<2?++l:0,t[u*2]=1,r.depth[u]=0,r.opt_len--,i&&(r.static_len-=n[u*2+1]);for(e.max_code=l,a=r.heap_len>>1;a>=1;a--)Dh(r,t,a);u=s;do a=r.heap[1],r.heap[1]=r.heap[r.heap_len--],Dh(r,t,1),o=r.heap[1],r.heap[--r.heap_max]=a,r.heap[--r.heap_max]=o,t[u*2]=t[a*2]+t[o*2],r.depth[u]=(r.depth[a]>=r.depth[o]?r.depth[a]:r.depth[o])+1,t[a*2+1]=t[o*2+1]=u,r.heap[1]=u++,Dh(r,t,1);while(r.heap_len>=2);r.heap[--r.heap_max]=r.heap[1],_O(r,e),Pw(t,l,r.bl_count)}function Q_(r,e,t){var n,i=-1,s,a=e[0*2+1],o=0,l=7,u=4;for(a===0&&(l=138,u=3),e[(t+1)*2+1]=65535,n=0;n<=t;n++)s=a,a=e[(n+1)*2+1],!(++o<l&&s===a)&&(o<u?r.bl_tree[s*2]+=o:s!==0?(s!==i&&r.bl_tree[s*2]++,r.bl_tree[bw*2]++):o<=10?r.bl_tree[yw*2]++:r.bl_tree[xw*2]++,o=0,i=s,a===0?(l=138,u=3):s===a?(l=6,u=3):(l=7,u=4))}function eb(r,e,t){var n,i=-1,s,a=e[0*2+1],o=0,l=7,u=4;for(a===0&&(l=138,u=3),n=0;n<=t;n++)if(s=a,a=e[(n+1)*2+1],!(++o<l&&s===a)){if(o<u)do Hn(r,s,r.bl_tree);while(--o!==0);else s!==0?(s!==i&&(Hn(r,s,r.bl_tree),o--),Hn(r,bw,r.bl_tree),xr(r,o-3,2)):o<=10?(Hn(r,yw,r.bl_tree),xr(r,o-3,3)):(Hn(r,xw,r.bl_tree),xr(r,o-11,7));o=0,i=s,a===0?(l=138,u=3):s===a?(l=6,u=3):(l=7,u=4)}}function xO(r){var e;for(Q_(r,r.dyn_ltree,r.l_desc.max_code),Q_(r,r.dyn_dtree,r.d_desc.max_code),gp(r,r.bl_desc),e=zg-1;e>=3&&r.bl_tree[ww[e]*2+1]===0;e--);return r.opt_len+=3*(e+1)+5+5+4,e}function wO(r,e,t,n){var i;for(xr(r,e-257,5),xr(r,t-1,5),xr(r,n-4,4),i=0;i<n;i++)xr(r,r.bl_tree[ww[i]*2+1],3);eb(r,r.dyn_ltree,e-1),eb(r,r.dyn_dtree,t-1)}function SO(r){var e=4093624447,t;for(t=0;t<=31;t++,e>>>=1)if(e&1&&r.dyn_ltree[t*2]!==0)return $_;if(r.dyn_ltree[9*2]!==0||r.dyn_ltree[10*2]!==0||r.dyn_ltree[13*2]!==0)return K_;for(t=32;t<Vl;t++)if(r.dyn_ltree[t*2]!==0)return K_;return $_}var tb=!1;function TO(r){tb||(bO(),tb=!0),r.l_desc=new Fh(r.dyn_ltree,Sw),r.d_desc=new Fh(r.dyn_dtree,Tw),r.bl_desc=new Fh(r.bl_tree,Ew),r.bi_buf=0,r.bi_valid=0,Rw(r)}function Mw(r,e,t,n){xr(r,(cO<<1)+(n?1:0),3),yO(r,e,t)}function EO(r){xr(r,vw<<1,3),Hn(r,jg,ui),vO(r)}function AO(r,e,t,n){var i,s,a=0;r.level>0?(r.strm.data_type===uO&&(r.strm.data_type=SO(r)),gp(r,r.l_desc),gp(r,r.d_desc),a=xO(r),i=r.opt_len+3+7>>>3,s=r.static_len+3+7>>>3,s<=i&&(i=s)):i=s=t+5,t+4<=i&&e!==-1?Mw(r,e,t,n):r.strategy===lO||s===i?(xr(r,(vw<<1)+(n?1:0),3),J_(r,ui,ol)):(xr(r,(fO<<1)+(n?1:0),3),wO(r,r.l_desc.max_code+1,r.d_desc.max_code+1,a+1),J_(r,r.dyn_ltree,r.dyn_dtree)),Rw(r),n&&kw(r)}function CO(r,e,t){return r.pending_buf[r.d_buf+r.last_lit*2]=e>>>8&255,r.pending_buf[r.d_buf+r.last_lit*2+1]=e&255,r.pending_buf[r.l_buf+r.last_lit]=t&255,r.last_lit++,e===0?r.dyn_ltree[t*2]++:(r.matches++,e--,r.dyn_ltree[(Sl[t]+Vl+1)*2]++,r.dyn_dtree[Aw(e)*2]++),r.last_lit===r.lit_bufsize-1}Ao._tr_init=TO;Ao._tr_stored_block=Mw;Ao._tr_flush_block=AO;Ao._tr_tally=CO;Ao._tr_align=EO;function PO(r,e,t,n){for(var i=r&65535|0,s=r>>>16&65535|0,a=0;t!==0;){a=t>2e3?2e3:t,t-=a;do i=i+e[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0}var Ow=PO;function RO(){for(var r,e=[],t=0;t<256;t++){r=t;for(var n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;e[t]=r}return e}var kO=RO();function MO(r,e,t,n){var i=kO,s=n+t;r^=-1;for(var a=n;a<s;a++)r=r>>>8^i[(r^e[a])&255];return r^-1}var Iw=MO,OO={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},dr=Hl,sn=Ao,Bw=Ow,Bi=Iw,IO=OO,Ks=0,BO=1,FO=3,Hi=4,rb=5,Vn=0,nb=1,an=-2,DO=-3,Lh=-5,LO=-1,UO=1,yu=2,NO=3,GO=4,zO=0,jO=2,mf=8,HO=9,VO=15,WO=8,qO=29,XO=256,mp=XO+1+qO,YO=30,$O=19,KO=2*mp+1,ZO=15,tt=3,Ui=258,Sn=Ui+tt+1,JO=32,vf=42,vp=69,oc=73,lc=91,uc=103,ws=113,Zo=666,Ht=1,Wl=2,Us=3,Po=4,QO=3;function Ni(r,e){return r.msg=IO[e],e}function ib(r){return(r<<1)-(r>4?9:0)}function Li(r){for(var e=r.length;--e>=0;)r[e]=0}function Fi(r){var e=r.state,t=e.pending;t>r.avail_out&&(t=r.avail_out),t!==0&&(dr.arraySet(r.output,e.pending_buf,e.pending_out,t,r.next_out),r.next_out+=t,e.pending_out+=t,r.total_out+=t,r.avail_out-=t,e.pending-=t,e.pending===0&&(e.pending_out=0))}function rr(r,e){sn._tr_flush_block(r,r.block_start>=0?r.block_start:-1,r.strstart-r.block_start,e),r.block_start=r.strstart,Fi(r.strm)}function ut(r,e){r.pending_buf[r.pending++]=e}function No(r,e){r.pending_buf[r.pending++]=e>>>8&255,r.pending_buf[r.pending++]=e&255}function eI(r,e,t,n){var i=r.avail_in;return i>n&&(i=n),i===0?0:(r.avail_in-=i,dr.arraySet(e,r.input,r.next_in,i,t),r.state.wrap===1?r.adler=Bw(r.adler,e,i,t):r.state.wrap===2&&(r.adler=Bi(r.adler,e,i,t)),r.next_in+=i,r.total_in+=i,i)}function Fw(r,e){var t=r.max_chain_length,n=r.strstart,i,s,a=r.prev_length,o=r.nice_match,l=r.strstart>r.w_size-Sn?r.strstart-(r.w_size-Sn):0,u=r.window,c=r.w_mask,f=r.prev,h=r.strstart+Ui,d=u[n+a-1],p=u[n+a];r.prev_length>=r.good_match&&(t>>=2),o>r.lookahead&&(o=r.lookahead);do if(i=e,!(u[i+a]!==p||u[i+a-1]!==d||u[i]!==u[n]||u[++i]!==u[n+1])){n+=2,i++;do;while(u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&n<h);if(s=Ui-(h-n),n=h-Ui,s>a){if(r.match_start=e,a=s,s>=o)break;d=u[n+a-1],p=u[n+a]}}while((e=f[e&c])>l&&--t!==0);return a<=r.lookahead?a:r.lookahead}function Ns(r){var e=r.w_size,t,n,i,s,a;do{if(s=r.window_size-r.lookahead-r.strstart,r.strstart>=e+(e-Sn)){dr.arraySet(r.window,r.window,e,e,0),r.match_start-=e,r.strstart-=e,r.block_start-=e,n=r.hash_size,t=n;do i=r.head[--t],r.head[t]=i>=e?i-e:0;while(--n);n=e,t=n;do i=r.prev[--t],r.prev[t]=i>=e?i-e:0;while(--n);s+=e}if(r.strm.avail_in===0)break;if(n=eI(r.strm,r.window,r.strstart+r.lookahead,s),r.lookahead+=n,r.lookahead+r.insert>=tt)for(a=r.strstart-r.insert,r.ins_h=r.window[a],r.ins_h=(r.ins_h<<r.hash_shift^r.window[a+1])&r.hash_mask;r.insert&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[a+tt-1])&r.hash_mask,r.prev[a&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=a,a++,r.insert--,!(r.lookahead+r.insert<tt)););}while(r.lookahead<Sn&&r.strm.avail_in!==0)}function tI(r,e){var t=65535;for(t>r.pending_buf_size-5&&(t=r.pending_buf_size-5);;){if(r.lookahead<=1){if(Ns(r),r.lookahead===0&&e===Ks)return Ht;if(r.lookahead===0)break}r.strstart+=r.lookahead,r.lookahead=0;var n=r.block_start+t;if((r.strstart===0||r.strstart>=n)&&(r.lookahead=r.strstart-n,r.strstart=n,rr(r,!1),r.strm.avail_out===0)||r.strstart-r.block_start>=r.w_size-Sn&&(rr(r,!1),r.strm.avail_out===0))return Ht}return r.insert=0,e===Hi?(rr(r,!0),r.strm.avail_out===0?Us:Po):(r.strstart>r.block_start&&(rr(r,!1),r.strm.avail_out===0),Ht)}function Uh(r,e){for(var t,n;;){if(r.lookahead<Sn){if(Ns(r),r.lookahead<Sn&&e===Ks)return Ht;if(r.lookahead===0)break}if(t=0,r.lookahead>=tt&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+tt-1])&r.hash_mask,t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),t!==0&&r.strstart-t<=r.w_size-Sn&&(r.match_length=Fw(r,t)),r.match_length>=tt)if(n=sn._tr_tally(r,r.strstart-r.match_start,r.match_length-tt),r.lookahead-=r.match_length,r.match_length<=r.max_lazy_match&&r.lookahead>=tt){r.match_length--;do r.strstart++,r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+tt-1])&r.hash_mask,t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart;while(--r.match_length!==0);r.strstart++}else r.strstart+=r.match_length,r.match_length=0,r.ins_h=r.window[r.strstart],r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+1])&r.hash_mask;else n=sn._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++;if(n&&(rr(r,!1),r.strm.avail_out===0))return Ht}return r.insert=r.strstart<tt-1?r.strstart:tt-1,e===Hi?(rr(r,!0),r.strm.avail_out===0?Us:Po):r.last_lit&&(rr(r,!1),r.strm.avail_out===0)?Ht:Wl}function oa(r,e){for(var t,n,i;;){if(r.lookahead<Sn){if(Ns(r),r.lookahead<Sn&&e===Ks)return Ht;if(r.lookahead===0)break}if(t=0,r.lookahead>=tt&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+tt-1])&r.hash_mask,t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart),r.prev_length=r.match_length,r.prev_match=r.match_start,r.match_length=tt-1,t!==0&&r.prev_length<r.max_lazy_match&&r.strstart-t<=r.w_size-Sn&&(r.match_length=Fw(r,t),r.match_length<=5&&(r.strategy===UO||r.match_length===tt&&r.strstart-r.match_start>4096)&&(r.match_length=tt-1)),r.prev_length>=tt&&r.match_length<=r.prev_length){i=r.strstart+r.lookahead-tt,n=sn._tr_tally(r,r.strstart-1-r.prev_match,r.prev_length-tt),r.lookahead-=r.prev_length-1,r.prev_length-=2;do++r.strstart<=i&&(r.ins_h=(r.ins_h<<r.hash_shift^r.window[r.strstart+tt-1])&r.hash_mask,t=r.prev[r.strstart&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=r.strstart);while(--r.prev_length!==0);if(r.match_available=0,r.match_length=tt-1,r.strstart++,n&&(rr(r,!1),r.strm.avail_out===0))return Ht}else if(r.match_available){if(n=sn._tr_tally(r,0,r.window[r.strstart-1]),n&&rr(r,!1),r.strstart++,r.lookahead--,r.strm.avail_out===0)return Ht}else r.match_available=1,r.strstart++,r.lookahead--}return r.match_available&&(n=sn._tr_tally(r,0,r.window[r.strstart-1]),r.match_available=0),r.insert=r.strstart<tt-1?r.strstart:tt-1,e===Hi?(rr(r,!0),r.strm.avail_out===0?Us:Po):r.last_lit&&(rr(r,!1),r.strm.avail_out===0)?Ht:Wl}function rI(r,e){for(var t,n,i,s,a=r.window;;){if(r.lookahead<=Ui){if(Ns(r),r.lookahead<=Ui&&e===Ks)return Ht;if(r.lookahead===0)break}if(r.match_length=0,r.lookahead>=tt&&r.strstart>0&&(i=r.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){s=r.strstart+Ui;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);r.match_length=Ui-(s-i),r.match_length>r.lookahead&&(r.match_length=r.lookahead)}if(r.match_length>=tt?(t=sn._tr_tally(r,1,r.match_length-tt),r.lookahead-=r.match_length,r.strstart+=r.match_length,r.match_length=0):(t=sn._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++),t&&(rr(r,!1),r.strm.avail_out===0))return Ht}return r.insert=0,e===Hi?(rr(r,!0),r.strm.avail_out===0?Us:Po):r.last_lit&&(rr(r,!1),r.strm.avail_out===0)?Ht:Wl}function nI(r,e){for(var t;;){if(r.lookahead===0&&(Ns(r),r.lookahead===0)){if(e===Ks)return Ht;break}if(r.match_length=0,t=sn._tr_tally(r,0,r.window[r.strstart]),r.lookahead--,r.strstart++,t&&(rr(r,!1),r.strm.avail_out===0))return Ht}return r.insert=0,e===Hi?(rr(r,!0),r.strm.avail_out===0?Us:Po):r.last_lit&&(rr(r,!1),r.strm.avail_out===0)?Ht:Wl}function Dn(r,e,t,n,i){this.good_length=r,this.max_lazy=e,this.nice_length=t,this.max_chain=n,this.func=i}var xa;xa=[new Dn(0,0,0,0,tI),new Dn(4,4,8,4,Uh),new Dn(4,5,16,8,Uh),new Dn(4,6,32,32,Uh),new Dn(4,4,16,16,oa),new Dn(8,16,32,32,oa),new Dn(8,16,128,128,oa),new Dn(8,32,128,256,oa),new Dn(32,128,258,1024,oa),new Dn(32,258,258,4096,oa)];function iI(r){r.window_size=2*r.w_size,Li(r.head),r.max_lazy_match=xa[r.level].max_lazy,r.good_match=xa[r.level].good_length,r.nice_match=xa[r.level].nice_length,r.max_chain_length=xa[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=tt-1,r.match_available=0,r.ins_h=0}function sI(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=mf,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new dr.Buf16(KO*2),this.dyn_dtree=new dr.Buf16((2*YO+1)*2),this.bl_tree=new dr.Buf16((2*$O+1)*2),Li(this.dyn_ltree),Li(this.dyn_dtree),Li(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new dr.Buf16(ZO+1),this.heap=new dr.Buf16(2*mp+1),Li(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new dr.Buf16(2*mp+1),Li(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Dw(r){var e;return!r||!r.state?Ni(r,an):(r.total_in=r.total_out=0,r.data_type=jO,e=r.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?vf:ws,r.adler=e.wrap===2?0:1,e.last_flush=Ks,sn._tr_init(e),Vn)}function Lw(r){var e=Dw(r);return e===Vn&&iI(r.state),e}function aI(r,e){return!r||!r.state||r.state.wrap!==2?an:(r.state.gzhead=e,Vn)}function Uw(r,e,t,n,i,s){if(!r)return an;var a=1;if(e===LO&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>HO||t!==mf||n<8||n>15||e<0||e>9||s<0||s>GO)return Ni(r,an);n===8&&(n=9);var o=new sI;return r.state=o,o.strm=r,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+tt-1)/tt),o.window=new dr.Buf8(o.w_size*2),o.head=new dr.Buf16(o.hash_size),o.prev=new dr.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new dr.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=t,Lw(r)}function oI(r,e){return Uw(r,e,mf,VO,WO,zO)}function lI(r,e){var t,n,i,s;if(!r||!r.state||e>rb||e<0)return r?Ni(r,an):an;if(n=r.state,!r.output||!r.input&&r.avail_in!==0||n.status===Zo&&e!==Hi)return Ni(r,r.avail_out===0?Lh:an);if(n.strm=r,t=n.last_flush,n.last_flush=e,n.status===vf)if(n.wrap===2)r.adler=0,ut(n,31),ut(n,139),ut(n,8),n.gzhead?(ut(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ut(n,n.gzhead.time&255),ut(n,n.gzhead.time>>8&255),ut(n,n.gzhead.time>>16&255),ut(n,n.gzhead.time>>24&255),ut(n,n.level===9?2:n.strategy>=yu||n.level<2?4:0),ut(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(ut(n,n.gzhead.extra.length&255),ut(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(r.adler=Bi(r.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=vp):(ut(n,0),ut(n,0),ut(n,0),ut(n,0),ut(n,0),ut(n,n.level===9?2:n.strategy>=yu||n.level<2?4:0),ut(n,QO),n.status=ws);else{var a=mf+(n.w_bits-8<<4)<<8,o=-1;n.strategy>=yu||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,a|=o<<6,n.strstart!==0&&(a|=JO),a+=31-a%31,n.status=ws,No(n,a),n.strstart!==0&&(No(n,r.adler>>>16),No(n,r.adler&65535)),r.adler=1}if(n.status===vp)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(r.adler=Bi(r.adler,n.pending_buf,n.pending-i,i)),Fi(r),i=n.pending,n.pending===n.pending_buf_size));)ut(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(r.adler=Bi(r.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=oc)}else n.status=oc;if(n.status===oc)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(r.adler=Bi(r.adler,n.pending_buf,n.pending-i,i)),Fi(r),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,ut(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(r.adler=Bi(r.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.gzindex=0,n.status=lc)}else n.status=lc;if(n.status===lc)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(r.adler=Bi(r.adler,n.pending_buf,n.pending-i,i)),Fi(r),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,ut(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(r.adler=Bi(r.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.status=uc)}else n.status=uc;if(n.status===uc&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Fi(r),n.pending+2<=n.pending_buf_size&&(ut(n,r.adler&255),ut(n,r.adler>>8&255),r.adler=0,n.status=ws)):n.status=ws),n.pending!==0){if(Fi(r),r.avail_out===0)return n.last_flush=-1,Vn}else if(r.avail_in===0&&ib(e)<=ib(t)&&e!==Hi)return Ni(r,Lh);if(n.status===Zo&&r.avail_in!==0)return Ni(r,Lh);if(r.avail_in!==0||n.lookahead!==0||e!==Ks&&n.status!==Zo){var l=n.strategy===yu?nI(n,e):n.strategy===NO?rI(n,e):xa[n.level].func(n,e);if((l===Us||l===Po)&&(n.status=Zo),l===Ht||l===Us)return r.avail_out===0&&(n.last_flush=-1),Vn;if(l===Wl&&(e===BO?sn._tr_align(n):e!==rb&&(sn._tr_stored_block(n,0,0,!1),e===FO&&(Li(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Fi(r),r.avail_out===0))return n.last_flush=-1,Vn}return e!==Hi?Vn:n.wrap<=0?nb:(n.wrap===2?(ut(n,r.adler&255),ut(n,r.adler>>8&255),ut(n,r.adler>>16&255),ut(n,r.adler>>24&255),ut(n,r.total_in&255),ut(n,r.total_in>>8&255),ut(n,r.total_in>>16&255),ut(n,r.total_in>>24&255)):(No(n,r.adler>>>16),No(n,r.adler&65535)),Fi(r),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Vn:nb)}function uI(r){var e;return!r||!r.state?an:(e=r.state.status,e!==vf&&e!==vp&&e!==oc&&e!==lc&&e!==uc&&e!==ws&&e!==Zo?Ni(r,an):(r.state=null,e===ws?Ni(r,DO):Vn))}function cI(r,e){var t=e.length,n,i,s,a,o,l,u,c;if(!r||!r.state||(n=r.state,a=n.wrap,a===2||a===1&&n.status!==vf||n.lookahead))return an;for(a===1&&(r.adler=Bw(r.adler,e,t,0)),n.wrap=0,t>=n.w_size&&(a===0&&(Li(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new dr.Buf8(n.w_size),dr.arraySet(c,e,t-n.w_size,n.w_size,0),e=c,t=n.w_size),o=r.avail_in,l=r.next_in,u=r.input,r.avail_in=t,r.next_in=0,r.input=e,Ns(n);n.lookahead>=tt;){i=n.strstart,s=n.lookahead-(tt-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+tt-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--s);n.strstart=i,n.lookahead=tt-1,Ns(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=tt-1,n.match_available=0,r.next_in=l,r.input=u,r.avail_in=o,n.wrap=a,Vn}ni.deflateInit=oI;ni.deflateInit2=Uw;ni.deflateReset=Lw;ni.deflateResetKeep=Dw;ni.deflateSetHeader=aI;ni.deflate=lI;ni.deflateEnd=uI;ni.deflateSetDictionary=cI;ni.deflateInfo="pako deflate (from Nodeca project)";var On={},xu=30,fI=12,hI=function(e,t){var n,i,s,a,o,l,u,c,f,h,d,p,v,m,g,_,b,w,S,T,E,O,P,V,W;n=e.state,i=e.next_in,V=e.input,s=i+(e.avail_in-5),a=e.next_out,W=e.output,o=a-(t-e.avail_out),l=a+(e.avail_out-257),u=n.dmax,c=n.wsize,f=n.whave,h=n.wnext,d=n.window,p=n.hold,v=n.bits,m=n.lencode,g=n.distcode,_=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{v<15&&(p+=V[i++]<<v,v+=8,p+=V[i++]<<v,v+=8),w=m[p&_];t:for(;;){if(S=w>>>24,p>>>=S,v-=S,S=w>>>16&255,S===0)W[a++]=w&65535;else if(S&16){T=w&65535,S&=15,S&&(v<S&&(p+=V[i++]<<v,v+=8),T+=p&(1<<S)-1,p>>>=S,v-=S),v<15&&(p+=V[i++]<<v,v+=8,p+=V[i++]<<v,v+=8),w=g[p&b];r:for(;;){if(S=w>>>24,p>>>=S,v-=S,S=w>>>16&255,S&16){if(E=w&65535,S&=15,v<S&&(p+=V[i++]<<v,v+=8,v<S&&(p+=V[i++]<<v,v+=8)),E+=p&(1<<S)-1,E>u){e.msg="invalid distance too far back",n.mode=xu;break e}if(p>>>=S,v-=S,S=a-o,E>S){if(S=E-S,S>f&&n.sane){e.msg="invalid distance too far back",n.mode=xu;break e}if(O=0,P=d,h===0){if(O+=c-S,S<T){T-=S;do W[a++]=d[O++];while(--S);O=a-E,P=W}}else if(h<S){if(O+=c+h-S,S-=h,S<T){T-=S;do W[a++]=d[O++];while(--S);if(O=0,h<T){S=h,T-=S;do W[a++]=d[O++];while(--S);O=a-E,P=W}}}else if(O+=h-S,S<T){T-=S;do W[a++]=d[O++];while(--S);O=a-E,P=W}for(;T>2;)W[a++]=P[O++],W[a++]=P[O++],W[a++]=P[O++],T-=3;T&&(W[a++]=P[O++],T>1&&(W[a++]=P[O++]))}else{O=a-E;do W[a++]=W[O++],W[a++]=W[O++],W[a++]=W[O++],T-=3;while(T>2);T&&(W[a++]=W[O++],T>1&&(W[a++]=W[O++]))}}else if(S&64){e.msg="invalid distance code",n.mode=xu;break e}else{w=g[(w&65535)+(p&(1<<S)-1)];continue r}break}}else if(S&64)if(S&32){n.mode=fI;break e}else{e.msg="invalid literal/length code",n.mode=xu;break e}else{w=m[(w&65535)+(p&(1<<S)-1)];continue t}break}}while(i<s&&a<l);T=v>>3,i-=T,v-=T<<3,p&=(1<<v)-1,e.next_in=i,e.next_out=a,e.avail_in=i<s?5+(s-i):5-(i-s),e.avail_out=a<l?257+(l-a):257-(a-l),n.hold=p,n.bits=v},sb=Hl,la=15,ab=852,ob=592,lb=0,Nh=1,ub=2,dI=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],pI=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],gI=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],mI=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],vI=function(e,t,n,i,s,a,o,l){var u=l.bits,c=0,f=0,h=0,d=0,p=0,v=0,m=0,g=0,_=0,b=0,w,S,T,E,O,P=null,V=0,W,D=new sb.Buf16(la+1),j=new sb.Buf16(la+1),I=null,q=0,$,K,ae;for(c=0;c<=la;c++)D[c]=0;for(f=0;f<i;f++)D[t[n+f]]++;for(p=u,d=la;d>=1&&D[d]===0;d--);if(p>d&&(p=d),d===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<d&&D[h]===0;h++);for(p<h&&(p=h),g=1,c=1;c<=la;c++)if(g<<=1,g-=D[c],g<0)return-1;if(g>0&&(e===lb||d!==1))return-1;for(j[1]=0,c=1;c<la;c++)j[c+1]=j[c]+D[c];for(f=0;f<i;f++)t[n+f]!==0&&(o[j[t[n+f]]++]=f);if(e===lb?(P=I=o,W=19):e===Nh?(P=dI,V-=257,I=pI,q-=257,W=256):(P=gI,I=mI,W=-1),b=0,f=0,c=h,O=a,v=p,m=0,T=-1,_=1<<p,E=_-1,e===Nh&&_>ab||e===ub&&_>ob)return 1;for(;;){$=c-m,o[f]<W?(K=0,ae=o[f]):o[f]>W?(K=I[q+o[f]],ae=P[V+o[f]]):(K=96,ae=0),w=1<<c-m,S=1<<v,h=S;do S-=w,s[O+(b>>m)+S]=$<<24|K<<16|ae|0;while(S!==0);for(w=1<<c-1;b&w;)w>>=1;if(w!==0?(b&=w-1,b+=w):b=0,f++,--D[c]===0){if(c===d)break;c=t[n+o[f]]}if(c>p&&(b&E)!==T){for(m===0&&(m=p),O+=h,v=c-m,g=1<<v;v+m<d&&(g-=D[v+m],!(g<=0));)v++,g<<=1;if(_+=1<<v,e===Nh&&_>ab||e===ub&&_>ob)return 1;T=b&E,s[T]=p<<24|v<<16|O-a|0}}return b!==0&&(s[O+b]=c-m<<24|64<<16|0),l.bits=p,0},Fr=Hl,_p=Ow,Ln=Iw,_I=hI,ll=vI,bI=0,Nw=1,Gw=2,cb=4,yI=5,wu=6,Gs=0,xI=1,wI=2,cn=-2,zw=-3,jw=-4,SI=-5,fb=8,Hw=1,hb=2,db=3,pb=4,gb=5,mb=6,vb=7,_b=8,bb=9,yb=10,Uc=11,si=12,Gh=13,xb=14,zh=15,wb=16,Sb=17,Tb=18,Eb=19,Su=20,Tu=21,Ab=22,Cb=23,Pb=24,Rb=25,kb=26,jh=27,Mb=28,Ob=29,Pt=30,Vw=31,TI=32,EI=852,AI=592,CI=15,PI=CI;function Ib(r){return(r>>>24&255)+(r>>>8&65280)+((r&65280)<<8)+((r&255)<<24)}function RI(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Fr.Buf16(320),this.work=new Fr.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ww(r){var e;return!r||!r.state?cn:(e=r.state,r.total_in=r.total_out=e.total=0,r.msg="",e.wrap&&(r.adler=e.wrap&1),e.mode=Hw,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Fr.Buf32(EI),e.distcode=e.distdyn=new Fr.Buf32(AI),e.sane=1,e.back=-1,Gs)}function qw(r){var e;return!r||!r.state?cn:(e=r.state,e.wsize=0,e.whave=0,e.wnext=0,Ww(r))}function Xw(r,e){var t,n;return!r||!r.state||(n=r.state,e<0?(t=0,e=-e):(t=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?cn:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=t,n.wbits=e,qw(r))}function Yw(r,e){var t,n;return r?(n=new RI,r.state=n,n.window=null,t=Xw(r,e),t!==Gs&&(r.state=null),t):cn}function kI(r){return Yw(r,PI)}var Bb=!0,Hh,Vh;function MI(r){if(Bb){var e;for(Hh=new Fr.Buf32(512),Vh=new Fr.Buf32(32),e=0;e<144;)r.lens[e++]=8;for(;e<256;)r.lens[e++]=9;for(;e<280;)r.lens[e++]=7;for(;e<288;)r.lens[e++]=8;for(ll(Nw,r.lens,0,288,Hh,0,r.work,{bits:9}),e=0;e<32;)r.lens[e++]=5;ll(Gw,r.lens,0,32,Vh,0,r.work,{bits:5}),Bb=!1}r.lencode=Hh,r.lenbits=9,r.distcode=Vh,r.distbits=5}function $w(r,e,t,n){var i,s=r.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Fr.Buf8(s.wsize)),n>=s.wsize?(Fr.arraySet(s.window,e,t-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),Fr.arraySet(s.window,e,t-n,i,s.wnext),n-=i,n?(Fr.arraySet(s.window,e,t-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function OI(r,e){var t,n,i,s,a,o,l,u,c,f,h,d,p,v,m=0,g,_,b,w,S,T,E,O,P=new Fr.Buf8(4),V,W,D=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!r||!r.state||!r.output||!r.input&&r.avail_in!==0)return cn;t=r.state,t.mode===si&&(t.mode=Gh),a=r.next_out,i=r.output,l=r.avail_out,s=r.next_in,n=r.input,o=r.avail_in,u=t.hold,c=t.bits,f=o,h=l,O=Gs;e:for(;;)switch(t.mode){case Hw:if(t.wrap===0){t.mode=Gh;break}for(;c<16;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(t.wrap&2&&u===35615){t.check=0,P[0]=u&255,P[1]=u>>>8&255,t.check=Ln(t.check,P,2,0),u=0,c=0,t.mode=hb;break}if(t.flags=0,t.head&&(t.head.done=!1),!(t.wrap&1)||(((u&255)<<8)+(u>>8))%31){r.msg="incorrect header check",t.mode=Pt;break}if((u&15)!==fb){r.msg="unknown compression method",t.mode=Pt;break}if(u>>>=4,c-=4,E=(u&15)+8,t.wbits===0)t.wbits=E;else if(E>t.wbits){r.msg="invalid window size",t.mode=Pt;break}t.dmax=1<<E,r.adler=t.check=1,t.mode=u&512?yb:si,u=0,c=0;break;case hb:for(;c<16;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(t.flags=u,(t.flags&255)!==fb){r.msg="unknown compression method",t.mode=Pt;break}if(t.flags&57344){r.msg="unknown header flags set",t.mode=Pt;break}t.head&&(t.head.text=u>>8&1),t.flags&512&&(P[0]=u&255,P[1]=u>>>8&255,t.check=Ln(t.check,P,2,0)),u=0,c=0,t.mode=db;case db:for(;c<32;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}t.head&&(t.head.time=u),t.flags&512&&(P[0]=u&255,P[1]=u>>>8&255,P[2]=u>>>16&255,P[3]=u>>>24&255,t.check=Ln(t.check,P,4,0)),u=0,c=0,t.mode=pb;case pb:for(;c<16;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}t.head&&(t.head.xflags=u&255,t.head.os=u>>8),t.flags&512&&(P[0]=u&255,P[1]=u>>>8&255,t.check=Ln(t.check,P,2,0)),u=0,c=0,t.mode=gb;case gb:if(t.flags&1024){for(;c<16;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}t.length=u,t.head&&(t.head.extra_len=u),t.flags&512&&(P[0]=u&255,P[1]=u>>>8&255,t.check=Ln(t.check,P,2,0)),u=0,c=0}else t.head&&(t.head.extra=null);t.mode=mb;case mb:if(t.flags&1024&&(d=t.length,d>o&&(d=o),d&&(t.head&&(E=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),Fr.arraySet(t.head.extra,n,s,d,E)),t.flags&512&&(t.check=Ln(t.check,n,d,s)),o-=d,s+=d,t.length-=d),t.length))break e;t.length=0,t.mode=vb;case vb:if(t.flags&2048){if(o===0)break e;d=0;do E=n[s+d++],t.head&&E&&t.length<65536&&(t.head.name+=String.fromCharCode(E));while(E&&d<o);if(t.flags&512&&(t.check=Ln(t.check,n,d,s)),o-=d,s+=d,E)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=_b;case _b:if(t.flags&4096){if(o===0)break e;d=0;do E=n[s+d++],t.head&&E&&t.length<65536&&(t.head.comment+=String.fromCharCode(E));while(E&&d<o);if(t.flags&512&&(t.check=Ln(t.check,n,d,s)),o-=d,s+=d,E)break e}else t.head&&(t.head.comment=null);t.mode=bb;case bb:if(t.flags&512){for(;c<16;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(u!==(t.check&65535)){r.msg="header crc mismatch",t.mode=Pt;break}u=0,c=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),r.adler=t.check=0,t.mode=si;break;case yb:for(;c<32;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}r.adler=t.check=Ib(u),u=0,c=0,t.mode=Uc;case Uc:if(t.havedict===0)return r.next_out=a,r.avail_out=l,r.next_in=s,r.avail_in=o,t.hold=u,t.bits=c,wI;r.adler=t.check=1,t.mode=si;case si:if(e===yI||e===wu)break e;case Gh:if(t.last){u>>>=c&7,c-=c&7,t.mode=jh;break}for(;c<3;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}switch(t.last=u&1,u>>>=1,c-=1,u&3){case 0:t.mode=xb;break;case 1:if(MI(t),t.mode=Su,e===wu){u>>>=2,c-=2;break e}break;case 2:t.mode=Sb;break;case 3:r.msg="invalid block type",t.mode=Pt}u>>>=2,c-=2;break;case xb:for(u>>>=c&7,c-=c&7;c<32;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){r.msg="invalid stored block lengths",t.mode=Pt;break}if(t.length=u&65535,u=0,c=0,t.mode=zh,e===wu)break e;case zh:t.mode=wb;case wb:if(d=t.length,d){if(d>o&&(d=o),d>l&&(d=l),d===0)break e;Fr.arraySet(i,n,s,d,a),o-=d,s+=d,l-=d,a+=d,t.length-=d;break}t.mode=si;break;case Sb:for(;c<14;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(t.nlen=(u&31)+257,u>>>=5,c-=5,t.ndist=(u&31)+1,u>>>=5,c-=5,t.ncode=(u&15)+4,u>>>=4,c-=4,t.nlen>286||t.ndist>30){r.msg="too many length or distance symbols",t.mode=Pt;break}t.have=0,t.mode=Tb;case Tb:for(;t.have<t.ncode;){for(;c<3;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}t.lens[D[t.have++]]=u&7,u>>>=3,c-=3}for(;t.have<19;)t.lens[D[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,V={bits:t.lenbits},O=ll(bI,t.lens,0,19,t.lencode,0,t.work,V),t.lenbits=V.bits,O){r.msg="invalid code lengths set",t.mode=Pt;break}t.have=0,t.mode=Eb;case Eb:for(;t.have<t.nlen+t.ndist;){for(;m=t.lencode[u&(1<<t.lenbits)-1],g=m>>>24,_=m>>>16&255,b=m&65535,!(g<=c);){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(b<16)u>>>=g,c-=g,t.lens[t.have++]=b;else{if(b===16){for(W=g+2;c<W;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(u>>>=g,c-=g,t.have===0){r.msg="invalid bit length repeat",t.mode=Pt;break}E=t.lens[t.have-1],d=3+(u&3),u>>>=2,c-=2}else if(b===17){for(W=g+3;c<W;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}u>>>=g,c-=g,E=0,d=3+(u&7),u>>>=3,c-=3}else{for(W=g+7;c<W;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}u>>>=g,c-=g,E=0,d=11+(u&127),u>>>=7,c-=7}if(t.have+d>t.nlen+t.ndist){r.msg="invalid bit length repeat",t.mode=Pt;break}for(;d--;)t.lens[t.have++]=E}}if(t.mode===Pt)break;if(t.lens[256]===0){r.msg="invalid code -- missing end-of-block",t.mode=Pt;break}if(t.lenbits=9,V={bits:t.lenbits},O=ll(Nw,t.lens,0,t.nlen,t.lencode,0,t.work,V),t.lenbits=V.bits,O){r.msg="invalid literal/lengths set",t.mode=Pt;break}if(t.distbits=6,t.distcode=t.distdyn,V={bits:t.distbits},O=ll(Gw,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,V),t.distbits=V.bits,O){r.msg="invalid distances set",t.mode=Pt;break}if(t.mode=Su,e===wu)break e;case Su:t.mode=Tu;case Tu:if(o>=6&&l>=258){r.next_out=a,r.avail_out=l,r.next_in=s,r.avail_in=o,t.hold=u,t.bits=c,_I(r,h),a=r.next_out,i=r.output,l=r.avail_out,s=r.next_in,n=r.input,o=r.avail_in,u=t.hold,c=t.bits,t.mode===si&&(t.back=-1);break}for(t.back=0;m=t.lencode[u&(1<<t.lenbits)-1],g=m>>>24,_=m>>>16&255,b=m&65535,!(g<=c);){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(_&&!(_&240)){for(w=g,S=_,T=b;m=t.lencode[T+((u&(1<<w+S)-1)>>w)],g=m>>>24,_=m>>>16&255,b=m&65535,!(w+g<=c);){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}u>>>=w,c-=w,t.back+=w}if(u>>>=g,c-=g,t.back+=g,t.length=b,_===0){t.mode=kb;break}if(_&32){t.back=-1,t.mode=si;break}if(_&64){r.msg="invalid literal/length code",t.mode=Pt;break}t.extra=_&15,t.mode=Ab;case Ab:if(t.extra){for(W=t.extra;c<W;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,c-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Cb;case Cb:for(;m=t.distcode[u&(1<<t.distbits)-1],g=m>>>24,_=m>>>16&255,b=m&65535,!(g<=c);){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(!(_&240)){for(w=g,S=_,T=b;m=t.distcode[T+((u&(1<<w+S)-1)>>w)],g=m>>>24,_=m>>>16&255,b=m&65535,!(w+g<=c);){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}u>>>=w,c-=w,t.back+=w}if(u>>>=g,c-=g,t.back+=g,_&64){r.msg="invalid distance code",t.mode=Pt;break}t.offset=b,t.extra=_&15,t.mode=Pb;case Pb:if(t.extra){for(W=t.extra;c<W;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,c-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){r.msg="invalid distance too far back",t.mode=Pt;break}t.mode=Rb;case Rb:if(l===0)break e;if(d=h-l,t.offset>d){if(d=t.offset-d,d>t.whave&&t.sane){r.msg="invalid distance too far back",t.mode=Pt;break}d>t.wnext?(d-=t.wnext,p=t.wsize-d):p=t.wnext-d,d>t.length&&(d=t.length),v=t.window}else v=i,p=a-t.offset,d=t.length;d>l&&(d=l),l-=d,t.length-=d;do i[a++]=v[p++];while(--d);t.length===0&&(t.mode=Tu);break;case kb:if(l===0)break e;i[a++]=t.length,l--,t.mode=Tu;break;case jh:if(t.wrap){for(;c<32;){if(o===0)break e;o--,u|=n[s++]<<c,c+=8}if(h-=l,r.total_out+=h,t.total+=h,h&&(r.adler=t.check=t.flags?Ln(t.check,i,h,a-h):_p(t.check,i,h,a-h)),h=l,(t.flags?u:Ib(u))!==t.check){r.msg="incorrect data check",t.mode=Pt;break}u=0,c=0}t.mode=Mb;case Mb:if(t.wrap&&t.flags){for(;c<32;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(u!==(t.total&4294967295)){r.msg="incorrect length check",t.mode=Pt;break}u=0,c=0}t.mode=Ob;case Ob:O=xI;break e;case Pt:O=zw;break e;case Vw:return jw;case TI:default:return cn}return r.next_out=a,r.avail_out=l,r.next_in=s,r.avail_in=o,t.hold=u,t.bits=c,(t.wsize||h!==r.avail_out&&t.mode<Pt&&(t.mode<jh||e!==cb))&&$w(r,r.output,r.next_out,h-r.avail_out),f-=r.avail_in,h-=r.avail_out,r.total_in+=f,r.total_out+=h,t.total+=h,t.wrap&&h&&(r.adler=t.check=t.flags?Ln(t.check,i,h,r.next_out-h):_p(t.check,i,h,r.next_out-h)),r.data_type=t.bits+(t.last?64:0)+(t.mode===si?128:0)+(t.mode===Su||t.mode===zh?256:0),(f===0&&h===0||e===cb)&&O===Gs&&(O=SI),O}function II(r){if(!r||!r.state)return cn;var e=r.state;return e.window&&(e.window=null),r.state=null,Gs}function BI(r,e){var t;return!r||!r.state||(t=r.state,!(t.wrap&2))?cn:(t.head=e,e.done=!1,Gs)}function FI(r,e){var t=e.length,n,i,s;return!r||!r.state||(n=r.state,n.wrap!==0&&n.mode!==Uc)?cn:n.mode===Uc&&(i=1,i=_p(i,e,t,0),i!==n.check)?zw:(s=$w(r,e,t,t),s?(n.mode=Vw,jw):(n.havedict=1,Gs))}On.inflateReset=qw;On.inflateReset2=Xw;On.inflateResetKeep=Ww;On.inflateInit=kI;On.inflateInit2=Yw;On.inflate=OI;On.inflateEnd=II;On.inflateGetHeader=BI;On.inflateSetDictionary=FI;On.inflateInfo="pako inflate (from Nodeca project)";var DI={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};(function(r){var e=Dc(),t=aO,n=ni,i=On,s=DI;for(var a in s)r[a]=s[a];r.NONE=0,r.DEFLATE=1,r.INFLATE=2,r.GZIP=3,r.GUNZIP=4,r.DEFLATERAW=5,r.INFLATERAW=6,r.UNZIP=7;var o=31,l=139;function u(c){if(typeof c!="number"||c<r.DEFLATE||c>r.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=c,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}u.prototype.close=function(){if(this.write_in_progress){this.pending_close=!0;return}this.pending_close=!1,e(this.init_done,"close before init"),e(this.mode<=r.UNZIP),this.mode===r.DEFLATE||this.mode===r.GZIP||this.mode===r.DEFLATERAW?n.deflateEnd(this.strm):(this.mode===r.INFLATE||this.mode===r.GUNZIP||this.mode===r.INFLATERAW||this.mode===r.UNZIP)&&i.inflateEnd(this.strm),this.mode=r.NONE,this.dictionary=null},u.prototype.write=function(c,f,h,d,p,v,m){return this._write(!0,c,f,h,d,p,v,m)},u.prototype.writeSync=function(c,f,h,d,p,v,m){return this._write(!1,c,f,h,d,p,v,m)},u.prototype._write=function(c,f,h,d,p,v,m,g){if(e.equal(arguments.length,8),e(this.init_done,"write before init"),e(this.mode!==r.NONE,"already finalized"),e.equal(!1,this.write_in_progress,"write already in progress"),e.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,e.equal(!1,f===void 0,"must provide flush value"),this.write_in_progress=!0,f!==r.Z_NO_FLUSH&&f!==r.Z_PARTIAL_FLUSH&&f!==r.Z_SYNC_FLUSH&&f!==r.Z_FULL_FLUSH&&f!==r.Z_FINISH&&f!==r.Z_BLOCK)throw new Error("Invalid flush value");if(h==null&&(h=b1.alloc(0),p=0,d=0),this.strm.avail_in=p,this.strm.input=h,this.strm.next_in=d,this.strm.avail_out=g,this.strm.output=v,this.strm.next_out=m,this.flush=f,!c)return this._process(),this._checkError()?this._afterSync():void 0;var _=this;return Ge.nextTick(function(){_._process(),_._after()}),this},u.prototype._afterSync=function(){var c=this.strm.avail_out,f=this.strm.avail_in;return this.write_in_progress=!1,[f,c]},u.prototype._process=function(){var c=null;switch(this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=n.deflate(this.strm,this.flush);break;case r.UNZIP:switch(this.strm.avail_in>0&&(c=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(c===null)break;if(this.strm.input[c]===o){if(this.gzip_id_bytes_read=1,c++,this.strm.avail_in===1)break}else{this.mode=r.INFLATE;break}case 1:if(c===null)break;this.strm.input[c]===l?(this.gzip_id_bytes_read=2,this.mode=r.GUNZIP):this.mode=r.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:for(this.err=i.inflate(this.strm,this.flush),this.err===r.Z_NEED_DICT&&this.dictionary&&(this.err=i.inflateSetDictionary(this.strm,this.dictionary),this.err===r.Z_OK?this.err=i.inflate(this.strm,this.flush):this.err===r.Z_DATA_ERROR&&(this.err=r.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===r.GUNZIP&&this.err===r.Z_STREAM_END&&this.strm.next_in[0]!==0;)this.reset(),this.err=i.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},u.prototype._checkError=function(){switch(this.err){case r.Z_OK:case r.Z_BUF_ERROR:if(this.strm.avail_out!==0&&this.flush===r.Z_FINISH)return this._error("unexpected end of file"),!1;break;case r.Z_STREAM_END:break;case r.Z_NEED_DICT:return this.dictionary==null?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},u.prototype._after=function(){if(this._checkError()){var c=this.strm.avail_out,f=this.strm.avail_in;this.write_in_progress=!1,this.callback(f,c),this.pending_close&&this.close()}},u.prototype._error=function(c){this.strm.msg&&(c=this.strm.msg),this.onerror(c,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},u.prototype.init=function(c,f,h,d,p){e(arguments.length===4||arguments.length===5,"init(windowBits, level, memLevel, strategy, [dictionary])"),e(c>=8&&c<=15,"invalid windowBits"),e(f>=-1&&f<=9,"invalid compression level"),e(h>=1&&h<=9,"invalid memlevel"),e(d===r.Z_FILTERED||d===r.Z_HUFFMAN_ONLY||d===r.Z_RLE||d===r.Z_FIXED||d===r.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(f,c,h,d,p),this._setDictionary()},u.prototype.params=function(){throw new Error("deflateParams Not supported")},u.prototype.reset=function(){this._reset(),this._setDictionary()},u.prototype._init=function(c,f,h,d,p){switch(this.level=c,this.windowBits=f,this.memLevel=h,this.strategy=d,this.flush=r.Z_NO_FLUSH,this.err=r.Z_OK,(this.mode===r.GZIP||this.mode===r.GUNZIP)&&(this.windowBits+=16),this.mode===r.UNZIP&&(this.windowBits+=32),(this.mode===r.DEFLATERAW||this.mode===r.INFLATERAW)&&(this.windowBits=-1*this.windowBits),this.strm=new t,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=n.deflateInit2(this.strm,this.level,r.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:case r.UNZIP:this.err=i.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==r.Z_OK&&this._error("Init error"),this.dictionary=p,this.write_in_progress=!1,this.init_done=!0},u.prototype._setDictionary=function(){if(this.dictionary!=null){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:this.err=n.deflateSetDictionary(this.strm,this.dictionary);break}this.err!==r.Z_OK&&this._error("Failed to set dictionary")}},u.prototype._reset=function(){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:case r.GZIP:this.err=n.deflateReset(this.strm);break;case r.INFLATE:case r.INFLATERAW:case r.GUNZIP:this.err=i.inflateReset(this.strm);break}this.err!==r.Z_OK&&this._error("Failed to reset stream")},r.Zlib=u})(aw);(function(r){var e=Ha.Buffer,t=U8.Transform,n=aw,i=Pi,s=Dc().ok,a=Ha.kMaxLength,o="Cannot create final Buffer. It would be larger than 0x"+a.toString(16)+" bytes";n.Z_MIN_WINDOWBITS=8,n.Z_MAX_WINDOWBITS=15,n.Z_DEFAULT_WINDOWBITS=15,n.Z_MIN_CHUNK=64,n.Z_MAX_CHUNK=1/0,n.Z_DEFAULT_CHUNK=16*1024,n.Z_MIN_MEMLEVEL=1,n.Z_MAX_MEMLEVEL=9,n.Z_DEFAULT_MEMLEVEL=8,n.Z_MIN_LEVEL=-1,n.Z_MAX_LEVEL=9,n.Z_DEFAULT_LEVEL=n.Z_DEFAULT_COMPRESSION;for(var l=Object.keys(n),u=0;u<l.length;u++){var c=l[u];c.match(/^Z/)&&Object.defineProperty(r,c,{enumerable:!0,value:n[c],writable:!1})}for(var f={Z_OK:n.Z_OK,Z_STREAM_END:n.Z_STREAM_END,Z_NEED_DICT:n.Z_NEED_DICT,Z_ERRNO:n.Z_ERRNO,Z_STREAM_ERROR:n.Z_STREAM_ERROR,Z_DATA_ERROR:n.Z_DATA_ERROR,Z_MEM_ERROR:n.Z_MEM_ERROR,Z_BUF_ERROR:n.Z_BUF_ERROR,Z_VERSION_ERROR:n.Z_VERSION_ERROR},h=Object.keys(f),d=0;d<h.length;d++){var p=h[d];f[f[p]]=p}Object.defineProperty(r,"codes",{enumerable:!0,value:Object.freeze(f),writable:!1}),r.Deflate=g,r.Inflate=_,r.Gzip=b,r.Gunzip=w,r.DeflateRaw=S,r.InflateRaw=T,r.Unzip=E,r.createDeflate=function(D){return new g(D)},r.createInflate=function(D){return new _(D)},r.createDeflateRaw=function(D){return new S(D)},r.createInflateRaw=function(D){return new T(D)},r.createGzip=function(D){return new b(D)},r.createGunzip=function(D){return new w(D)},r.createUnzip=function(D){return new E(D)},r.deflate=function(D,j,I){return typeof j=="function"&&(I=j,j={}),v(new g(j),D,I)},r.deflateSync=function(D,j){return m(new g(j),D)},r.gzip=function(D,j,I){return typeof j=="function"&&(I=j,j={}),v(new b(j),D,I)},r.gzipSync=function(D,j){return m(new b(j),D)},r.deflateRaw=function(D,j,I){return typeof j=="function"&&(I=j,j={}),v(new S(j),D,I)},r.deflateRawSync=function(D,j){return m(new S(j),D)},r.unzip=function(D,j,I){return typeof j=="function"&&(I=j,j={}),v(new E(j),D,I)},r.unzipSync=function(D,j){return m(new E(j),D)},r.inflate=function(D,j,I){return typeof j=="function"&&(I=j,j={}),v(new _(j),D,I)},r.inflateSync=function(D,j){return m(new _(j),D)},r.gunzip=function(D,j,I){return typeof j=="function"&&(I=j,j={}),v(new w(j),D,I)},r.gunzipSync=function(D,j){return m(new w(j),D)},r.inflateRaw=function(D,j,I){return typeof j=="function"&&(I=j,j={}),v(new T(j),D,I)},r.inflateRawSync=function(D,j){return m(new T(j),D)};function v(D,j,I){var q=[],$=0;D.on("error",ae),D.on("end",k),D.end(j),K();function K(){for(var H;(H=D.read())!==null;)q.push(H),$+=H.length;D.once("readable",K)}function ae(H){D.removeListener("end",k),D.removeListener("readable",K),I(H)}function k(){var H,ie=null;$>=a?ie=new RangeError(o):H=e.concat(q,$),q=[],D.close(),I(ie,H)}}function m(D,j){if(typeof j=="string"&&(j=e.from(j)),!e.isBuffer(j))throw new TypeError("Not a string or buffer");var I=D._finishFlushFlag;return D._processChunk(j,I)}function g(D){if(!(this instanceof g))return new g(D);P.call(this,D,n.DEFLATE)}function _(D){if(!(this instanceof _))return new _(D);P.call(this,D,n.INFLATE)}function b(D){if(!(this instanceof b))return new b(D);P.call(this,D,n.GZIP)}function w(D){if(!(this instanceof w))return new w(D);P.call(this,D,n.GUNZIP)}function S(D){if(!(this instanceof S))return new S(D);P.call(this,D,n.DEFLATERAW)}function T(D){if(!(this instanceof T))return new T(D);P.call(this,D,n.INFLATERAW)}function E(D){if(!(this instanceof E))return new E(D);P.call(this,D,n.UNZIP)}function O(D){return D===n.Z_NO_FLUSH||D===n.Z_PARTIAL_FLUSH||D===n.Z_SYNC_FLUSH||D===n.Z_FULL_FLUSH||D===n.Z_FINISH||D===n.Z_BLOCK}function P(D,j){var I=this;if(this._opts=D=D||{},this._chunkSize=D.chunkSize||r.Z_DEFAULT_CHUNK,t.call(this,D),D.flush&&!O(D.flush))throw new Error("Invalid flush flag: "+D.flush);if(D.finishFlush&&!O(D.finishFlush))throw new Error("Invalid flush flag: "+D.finishFlush);if(this._flushFlag=D.flush||n.Z_NO_FLUSH,this._finishFlushFlag=typeof D.finishFlush<"u"?D.finishFlush:n.Z_FINISH,D.chunkSize&&(D.chunkSize<r.Z_MIN_CHUNK||D.chunkSize>r.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+D.chunkSize);if(D.windowBits&&(D.windowBits<r.Z_MIN_WINDOWBITS||D.windowBits>r.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+D.windowBits);if(D.level&&(D.level<r.Z_MIN_LEVEL||D.level>r.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+D.level);if(D.memLevel&&(D.memLevel<r.Z_MIN_MEMLEVEL||D.memLevel>r.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+D.memLevel);if(D.strategy&&D.strategy!=r.Z_FILTERED&&D.strategy!=r.Z_HUFFMAN_ONLY&&D.strategy!=r.Z_RLE&&D.strategy!=r.Z_FIXED&&D.strategy!=r.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+D.strategy);if(D.dictionary&&!e.isBuffer(D.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new n.Zlib(j);var q=this;this._hadError=!1,this._handle.onerror=function(ae,k){V(q),q._hadError=!0;var H=new Error(ae);H.errno=k,H.code=r.codes[k],q.emit("error",H)};var $=r.Z_DEFAULT_COMPRESSION;typeof D.level=="number"&&($=D.level);var K=r.Z_DEFAULT_STRATEGY;typeof D.strategy=="number"&&(K=D.strategy),this._handle.init(D.windowBits||r.Z_DEFAULT_WINDOWBITS,$,D.memLevel||r.Z_DEFAULT_MEMLEVEL,K,D.dictionary),this._buffer=e.allocUnsafe(this._chunkSize),this._offset=0,this._level=$,this._strategy=K,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!I._handle},configurable:!0,enumerable:!0})}i.inherits(P,t),P.prototype.params=function(D,j,I){if(D<r.Z_MIN_LEVEL||D>r.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+D);if(j!=r.Z_FILTERED&&j!=r.Z_HUFFMAN_ONLY&&j!=r.Z_RLE&&j!=r.Z_FIXED&&j!=r.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+j);if(this._level!==D||this._strategy!==j){var q=this;this.flush(n.Z_SYNC_FLUSH,function(){s(q._handle,"zlib binding closed"),q._handle.params(D,j),q._hadError||(q._level=D,q._strategy=j,I&&I())})}else Ge.nextTick(I)},P.prototype.reset=function(){return s(this._handle,"zlib binding closed"),this._handle.reset()},P.prototype._flush=function(D){this._transform(e.alloc(0),"",D)},P.prototype.flush=function(D,j){var I=this,q=this._writableState;(typeof D=="function"||D===void 0&&!j)&&(j=D,D=n.Z_FULL_FLUSH),q.ended?j&&Ge.nextTick(j):q.ending?j&&this.once("end",j):q.needDrain?j&&this.once("drain",function(){return I.flush(D,j)}):(this._flushFlag=D,this.write(e.alloc(0),"",j))},P.prototype.close=function(D){V(this,D),Ge.nextTick(W,this)};function V(D,j){j&&Ge.nextTick(j),D._handle&&(D._handle.close(),D._handle=null)}function W(D){D.emit("close")}P.prototype._transform=function(D,j,I){var q,$=this._writableState,K=$.ending||$.ended,ae=K&&(!D||$.length===D.length);if(D!==null&&!e.isBuffer(D))return I(new Error("invalid input"));if(!this._handle)return I(new Error("zlib binding closed"));ae?q=this._finishFlushFlag:(q=this._flushFlag,D.length>=$.length&&(this._flushFlag=this._opts.flush||n.Z_NO_FLUSH)),this._processChunk(D,q,I)},P.prototype._processChunk=function(D,j,I){var q=D&&D.length,$=this._chunkSize-this._offset,K=0,ae=this,k=typeof I=="function";if(!k){var H=[],ie=0,X;this.on("error",function(L){X=L}),s(this._handle,"zlib binding closed");do var N=this._handle.writeSync(j,D,K,q,this._buffer,this._offset,$);while(!this._hadError&&A(N[0],N[1]));if(this._hadError)throw X;if(ie>=a)throw V(this),new RangeError(o);var M=e.concat(H,ie);return V(this),M}s(this._handle,"zlib binding closed");var F=this._handle.write(j,D,K,q,this._buffer,this._offset,$);F.buffer=D,F.callback=A;function A(L,Y){if(this&&(this.buffer=null,this.callback=null),!ae._hadError){var te=$-Y;if(s(te>=0,"have should not go down"),te>0){var fe=ae._buffer.slice(ae._offset,ae._offset+te);ae._offset+=te,k?ae.push(fe):(H.push(fe),ie+=fe.length)}if((Y===0||ae._offset>=ae._chunkSize)&&($=ae._chunkSize,ae._offset=0,ae._buffer=e.allocUnsafe(ae._chunkSize)),Y===0){if(K+=q-L,q=L,!k)return!0;var B=ae._handle.write(j,D,K,q,ae._buffer,ae._offset,ae._chunkSize);B.callback=A,B.buffer=D;return}if(!k)return!1;I()}}},i.inherits(g,P),i.inherits(_,P),i.inherits(b,P),i.inherits(w,P),i.inherits(S,P),i.inherits(T,P),i.inherits(E,P)})(E1);const LI="https://gql.twitch.tv/gql",UI="kimne78kx3ncx6brgo4mv6wki5h1ko";class je{channel;options;channelId;clientId;deviceId;OAuthToken;constructor(e,t){this.channel=e,this.options=t,this.channelId=t?.channelId,this.clientId=t?.clientId??UI,this.deviceId=t?.deviceId,this.OAuthToken=t?.OAuthToken}async gql(e,t){let n=new Headers;return n.set("Client-Id",this.clientId),n.set("Accept","application/json"),n.set("User-Agent","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/132.0.0.0 Safari/537.36"),(t||this.deviceId)&&(n.set("X-Device-Id",t??this.deviceId),n.set("Device-Id",t??this.deviceId)),this.OAuthToken&&n.set("Authorization",`OAuth ${this.OAuthToken}`),this.options?.headers&&(n=new Headers(this.options.headers)),await(await fetch(LI,{headers:n,method:"POST",body:JSON.stringify(e),signal:AbortSignal.timeout(1e4)})).json()}async streamInfo(){const e=await this.gql([je.request.StreamMetadata(this.channel),je.request.UseViewCount(this.channel),je.request.ComscoreStreamingQuery(this.channel)]);return{online:e[0].data.user?.stream?.type==="live",viewers:e[1].data.user?.stream?.viewersCount??0,category:e[2].data.user?.stream?.game?.name??"No Category",title:e[2].data.user?.broadcastSettings?.title??"No Title",start_time:new Date(e[2].data.user?.stream?.createdAt).getTime(),preview:`https://static-cdn.jtvnw.net/previews-ttv/live_user_${this.channel}.jpg?ts=${Date.now()}`,channel_url:`https://www.twitch.tv/${this.channel}`,id:e[0].data.user?.stream?.id??"",category_slug:e[0].data.user?.stream?.game?.slug??"No Category",category_id:e[0].data.user?.stream?.game?.id??"No Category",channel_team:e[0].data.user?.stream?.primaryTeam??null,channel_avatar_url:e[0].data.user?.profileImageURL??"",channel_primary_color:e[0].data.user?.primaryColorHex??null}}async categoryInfoBySlug(e){const t=await this.gql([je.request.Directory_DirectoryBanner(e)]);if(!t||t.length===0)return null;const n=t[0].data.game;return{id:n.id,slug:n.slug,name:n.name,avatar_url:n.avatarURL,description:n.description,viewers:n.viewersCount,followers:n.followersCount,igdbURL:n.igdbURL}}async topClips(e="ALL_TIME",t=20){return(await this.gql([je.request.ClipsCards__User(this.channel,e,t)]))[0].data.user?.clips?.edges.map(i=>({title:i.node.title,url:i.node.url,author:i.node.curator.displayName,created_at:new Date(i.node.createdAt).getTime(),preview:i.node.thumbnailURL,slug:i.node.slug,views:i.node.viewCount,game:i.node.game?.name??"unknown"}))}async vods(e="TIME",t=30,n=null,i){const[s]=await this.gql([je.request.FilterableVideoTower_Videos(this.channel,e,t,n,i)]);return s.data.user?.videos?.edges.map(({node:a,cursor:o})=>({cursor:o,title:a.title,id:a.id,url:`https://www.twitch.tv/videos/${a.id}`,animated_preview:a.animatedPreviewURL,preview:a.previewThumbnailURL,length:a.lengthSeconds,created_at:new Date(a.publishedAt).getTime(),views:a.viewCount,category:a.game?.name??"No Category",category_cover_url:a.game?.boxArtURL,category_id:a.game?.id,category_slug:a.game?.slug}))}async clipMetadata(e){return(await this.gql(e.map(n=>je.request.ShareClipRenderStatus(n)))).map(n=>{const i=new URLSearchParams({sig:n.data.clip.playbackAccessToken.signature,token:n.data.clip.playbackAccessToken.value});return{title:n.data.clip.title,url:n.data.clip.url,author:n.data.clip.curator.displayName,created_at:new Date(n.data.clip.createdAt).getTime(),game:n.data.clip.game?.name??"unknown",slug:n.data.clip.slug,thumbnail:n.data.clip.thumbnailURL,download:n.data.clip.assets[0].videoQualities.map(s=>({quality:s.quality,url:`${s.sourceURL}?${i}`}))}})}async drops(){this.channelId||await this.getChannelId();const[e]=await this.gql([je.request.DropsHighlightService_AvailableDrops(this.channelId)]);return e.data.channel.viewerDropCampaigns?e.data.channel.viewerDropCampaigns?.map(t=>({name:t.name,details_url:t.detailsURL,game:t.game?.name,game_id:t.game?.id,start_at:new Date(t.startAt).getTime(),end_at:new Date(t.endAt).getTime(),drops:t.timeBasedDrops.map(n=>({name:n.name,minutes:n.requiredMinutesWatched,subs:null,start_at:new Date(n.startAt).getTime(),end_at:new Date(n.endAt).getTime(),benefits:n.benefitEdges.map(i=>({name:i.benefit.name,image_url:i.benefit.imageAssetURL,id:i.benefit.id}))})).sort((n,i)=>n.minutes-i.minutes)})):[]}async inventory(){const e=await this.gql([je.request.Inventory()]);if(!e.at(0).data.currentUser)return{inProgressCampaigns:[],completedCampaigns:[]};const t=n=>({name:n.name,details_url:n.detailsURL,game:n.game?.name,game_id:n.game?.id,start_at:new Date(n.startAt).getTime(),end_at:new Date(n.endAt).getTime(),drops:n.timeBasedDrops.map(i=>({name:i.name,minutes:i.requiredMinutesWatched,subs:i.requiredSubs,start_at:new Date(i.startAt).getTime(),end_at:new Date(i.endAt).getTime(),benefits:i.benefitEdges.map(s=>({name:s.benefit.name,image_url:s.benefit.imageAssetURL,id:s.benefit.id}))})).sort((i,s)=>i.minutes-s.minutes)});return{inProgressCampaigns:e[0].data.currentUser.inventory.dropCampaignsInProgress?.map(t)??[],completedCampaigns:e[0].data.currentUser.inventory.completedRewardCampaigns?.map(t)??[]}}async sendSpadeEvent(e,t){if(!this.channelId)throw new Error("Channel ID is not set");const n=[{event:"minute-watched",properties:{broadcast_id:e,channel_id:this.channelId,channel:this.channel,hidden:!1,live:!0,location:"channel",logged_in:!0,muted:!1,player:"site",user_id:t}}],a={data:E1.gzipSync(y1.from(JSON.stringify(n))).toString("base64"),repository:"twilight",encoding:"GZIP_B64"},[o]=await this.gql([je.request.SendSpadeEvents(a)]);return o}async viewers(){const[e]=await this.gql([je.request.CommunityTab(this.channel)]);return e.data.user?.channel?.chatters?.viewers.map(t=>t.login)}async*vodChat(e,t=0,n=1/0){let i="",s=!1,a=-1/0;for(;!s;){const[o]=await this.gql([i===""?je.request.VideoCommentsByOffset(e,t):je.request.VideoCommentsByCursor(e,i)]);for(const{node:l,cursor:u}of o.data.video.comments.edges){if(l.contentOffsetSeconds>n||l.contentOffsetSeconds<a){s=!0;break}i=u,a=l.contentOffsetSeconds;let c="";const f=[];for(const h of l.message.fragments)h.emote&&f.push({id:h.emote.emoteID,text:h.text}),c+=h.text;yield{offset:l.contentOffsetSeconds,created_at:l.createdAt,user_login:l.commenter?.login,user_name:l.commenter?.displayName,user_id:l.id,user_color:l.message.userColor,badges:l.message.userBadges.map(h=>`${h.setID}${h.version}`),message:c,emotes:f}}if(o.data.video.comments.pageInfo.hasNextPage!==!0)break}}async vodChatOffset(e){const[t]=await this.gql([je.request.VideoCommentsByOffset(e,0)]);return t.data.video.comments}async vodChatCursor(e,t){const[n]=await this.gql([je.request.VideoCommentsByCursor(e,t)]);return n.data.video.comments}async getChannelId(){const[e]=await this.gql([je.request.ComscoreStreamingQuery(this.channel)]);return this.channelId=e.data.user?.id,e.data.user?.id}async playbackAccessTokenVod(e){const[t]=await this.gql([je.request.PlaybackAccessToken(this.channel,e)]);return{sig:t.data.videoPlaybackAccessToken.signature,token:t.data.videoPlaybackAccessToken.value}}async playbackAccessTokenLive(e){const[t]=await this.gql([je.request.PlaybackAccessToken_Template(this.channel)],e);return{sig:t.data.streamPlaybackAccessToken.signature,token:t.data.streamPlaybackAccessToken.value}}async liveHLSMetadata(e){const t=/#EXT-X-STREAM-INF:BANDWIDTH=(\d+),RESOLUTION=(\w+),CODECS="(.+)",VIDEO="(\w+)",FRAME-RATE=([\w+\.]+)\s*(https?:\/\/[^\s]+)/gm,{sig:n,token:i}=await this.playbackAccessTokenLive(e),s=new URLSearchParams({allow_source:"true",browser_family:"chrome",browser_version:"131.0",cdm:"wv",os_name:"Windows",os_version:"NT 10.0",p:"3141898",platform:"web",player_backend:"mediaplayer",player_version:"1.36.0-rc.1",playlist_include_framerate:"true",reassignments_supported:"true",sig:n,supported_codecs:"av1,h265,h264",token:i,transcode_mode:"cbr_v1"}),o=await(await fetch(`https://usher.ttvnw.net/api/channel/hls/${this.channel}.m3u8?${s}`)).text(),l=[];for(let[,u,c,f,h,d,p]of o.matchAll(t))h==="chunked"&&(h=`${c.split("x")[1]}p${parseInt(d)}`),l.push({bandwidth:parseInt(u),codecs:f,resolution:c,video:h,framerate:d,url:p});return l.sort((u,c)=>{const f=parseInt(u.video),h=parseInt(c.video);if(f!==h)return h-f;const d=parseInt(u.resolution);return parseInt(c.resolution)-d}),l}async vodHLSMetadata(e){const t=/#EXT-X-STREAM-INF:BANDWIDTH=(\d+),CODECS="(.+)",RESOLUTION=(\w+),VIDEO="(\w+)",FRAME-RATE=([\w+\.]+)\s*(https?:\/\/[^\s]+)/gm,{sig:n,token:i}=await this.playbackAccessTokenVod(e),s=new URLSearchParams({allow_source:"true",browser_family:"chrome",browser_version:"131.0",cdm:"wv",os_name:"Windows",os_version:"NT 10.0",p:"3141898",platform:"web",player_backend:"mediaplayer",player_version:"1.36.0-rc.1",playlist_include_framerate:"true",reassignments_supported:"true",sig:n,supported_codecs:"av1,h265,h264",token:i,transcode_mode:"cbr_v1"}),o=await(await fetch(`https://usher.ttvnw.net/vod/${e}.m3u8?${s}`)).text(),l=[];for(let[,u,c,f,h,d,p]of o.matchAll(t))h==="chunked"&&(h=`${f.split("x")[1]}p${parseInt(d)}`),l.push({bandwidth:parseInt(u),codecs:c,resolution:f,video:h,framerate:d,url:p});return l}async downloadVodById(e,t,n,i=10,s){const o=(await this.vodHLSMetadata(e)).find(l=>l.video===t||l.resolution===t);if(!o)throw new Error(`No format found for ${t} in vod ${e}`);return this.downloadVodByFormat(o,n,i,s)}async downloadVodByFormat(e,t,n=10,i){const s=/#EXTINF:(.+?),\s(.+)?\s/gm,a=e.url.split("/"),o=a.slice(0,a.length-1).join("/")+"/",f=(await(await fetch(e.url)).text()).matchAll(s).toArray().map(h=>`${o}${h[2]}`);await U4(f,t,n,i)}async searchGames(e,t="300Ñ400"){return(await this.gql(e.map(i=>je.request.SearchResultsPage_SearchResults(i)))).map(i=>i.data.searchFor?.games?.edges.map(s=>({name:s.item.name,id:s.item.id,thumbnail:s.item.boxArtURL?.replace("90x120",t),tags:s.item.tags.map(a=>a.tagName)})))}async vodChapters(e){const[t]=await this.gql([je.request.VideoPlayer_ChapterSelectButtonVideo(e)]);return{metadata:{vod_id:e,length:t.data.video.moments.edges.at(0)?.node.video.lengthSeconds},items:t.data.video.moments.edges.map(n=>({id:n.node.id,description:n.node.description,type:n.node.type,duration_ms:n.node.durationMilliseconds,offset_ms:n.node.positionMilliseconds,category:n.node.details?.game?.displayName,category_id:n.node.details?.game?.id,category_cover:n.node.details?.game?.boxArtURL}))}}async getMessageBufferChatHistory(){const[e]=await this.gql([je.request.MessageBufferChatHistory(this.channel)]);return e}async getMessageBufferChannel(){const[e]=await this.gql([je.request.MessageBuffer_Channel(this.channel)]);return e}static ext(e,t=1){return{extensions:{persistedQuery:{version:t,sha256Hash:e}}}}static request={MessageBufferChatHistory:e=>({operationName:"MessageBufferChatHistory",variables:{channelLogin:e},...je.ext("33dba0e0c249135052e930cbd6c4a66daa32249ba00d1c8def75857fa3f3431d")}),MessageBuffer_Channel:e=>({operationName:"MessageBuffer_Channel",variables:{channelLogin:e},...je.ext("bfc959904f55b5003ae4674d4bea83ebdcd8867ad76e12f38957d433902d2fcc")}),SearchTray_SearchSuggestions:e=>({operationName:"SearchTray_SearchSuggestions",variables:{requestID:crypto.randomUUID(),queryFragment:e,withOfflineChannelContent:!1,includeIsDJ:!0},...je.ext("360f802c8c88309005c6869fda5c8976ebb944481485afec07768b1f23630c7a")}),SearchResultsPage_SearchResults:e=>({operationName:"SearchResultsPage_SearchResults",variables:{includeIsDJ:!0,options:{shouldSkipDiscoveryControl:!1,targets:null},platform:"web",query:e,requestID:crypto.randomUUID()},...je.ext("e7d0aef192ba05cf7c4f7d0998a6d3948f74e338371c0465c00981453d760a11")}),VideoPreviewOverlay:e=>({operationName:"VideoPreviewOverlay",variables:{login:e},...je.ext("3006e77e51b128d838fa4e835723ca4dc9a05c5efd4466c1085215c6e437e65c")}),Directory_DirectoryBanner:e=>({operationName:"Directory_DirectoryBanner",variables:{slug:e},...je.ext("822ecf40c2a77568d2b223fd5bc4dfdc9c863f081dd1ca7611803a5330e88277")}),VideoPlayerStatusOverlayChannel:e=>({operationName:"VideoPlayerStatusOverlayChannel",variables:{channel:e},...je.ext("938d155c890df88b5da53592e327d36ae9b851d2ee38bdb13342a1402fc24ad2")}),UseViewCount:e=>({operationName:"UseViewCount",variables:{channelLogin:e},...je.ext("00b11c9c428f79ae228f30080a06ffd8226a1f068d6f52fbc057cbde66e994c2")}),ComscoreStreamingQuery:e=>({operationName:"ComscoreStreamingQuery",variables:{channel:e,clipSlug:"",isClip:!1,isLive:!0,isVodOrCollection:!1,vodID:""},...je.ext("e1edae8122517d013405f237ffcc124515dc6ded82480a88daef69c83b53ac01")}),NielsenContentMetadata:e=>({operationName:"NielsenContentMetadata",variables:{isCollectionContent:!1,isLiveContent:!0,isVODContent:!1,collectionID:"",login:e,vodID:""},...je.ext("2dbf505ee929438369e68e72319d1106bb3c142e295332fac157c90638968586")}),ClipsCards__User:(e,t="ALL_TIME",n=20)=>({operationName:"ClipsCards__User",variables:{login:e,limit:n,criteria:{filter:t,shouldFilterByDiscoverySetting:!0},cursor:null},...je.ext("4eb8f85fc41a36c481d809e8e99b2a32127fdb7647c336d27743ec4a88c4ea44")}),PlaybackAccessToken:(e,t="")=>({operationName:"PlaybackAccessToken",variables:{isLive:t==="",login:t!==""?"":e,isVod:t!=="",vodID:t,playerType:t!==""?"channel_home_live":"site",platform:"web"},...je.ext("ed230aa1e33e07eebb8928504583da78a5173989fadfb1ac94be06a04f3cdbe9")}),PlaybackAccessToken_Template:e=>({operationName:"PlaybackAccessToken_Template",query:'query PlaybackAccessToken_Template($login: String!, $isLive: Boolean!, $vodID: ID!, $isVod: Boolean!, $playerType: String!, $platform: String!) {  streamPlaybackAccessToken(channelName: $login, params: {platform: $platform, playerBackend: "mediaplayer", playerType: $playerType}) @include(if: $isLive) {    value    signature   authorization { isForbidden forbiddenReasonCode }   __typename  }  videoPlaybackAccessToken(id: $vodID, params: {platform: $platform, playerBackend: "mediaplayer", playerType: $playerType}) @include(if: $isVod) {    value    signature   __typename  }}',variables:{isLive:!0,login:e,isVod:!1,vodID:"",playerType:"site",platform:"web"}}),VideoAccessToken_Clip:e=>({operationName:"VideoAccessToken_Clip",variables:{platform:"web",slug:e},...je.ext("6fd3af2b22989506269b9ac02dd87eb4a6688392d67d94e41a6886f1e9f5c00f")}),ShareClipRenderStatus:e=>({operationName:"ShareClipRenderStatus",variables:{slug:e},...je.ext("f130048a462a0ac86bb54d653c968c514e9ab9ca94db52368c1179e97b0f16eb")}),DropsHighlightService_AvailableDrops:e=>({operationName:"DropsHighlightService_AvailableDrops",variables:{channelID:e},...je.ext("eff13f4a43157238e40b4cd74b0dac3a41b5f8fb31de1a3b19347fae84e60b92")}),Inventory:()=>({operationName:"Inventory",variables:{fetchRewardCampaigns:!0},...je.ext("d86775d0ef16a63a33ad52e80eaff963b2d5b72fada7c991504a57496e1d8e4b")}),CommunityTab:e=>({operationName:"CommunityTab",variables:{login:e},...je.ext("2e71a3399875770c1e5d81a9774d9803129c44cf8f6bad64973aa0d239a88caf")}),StreamMetadata:e=>({operationName:"StreamMetadata",variables:{channelLogin:e,includeIsDJ:!0},...je.ext("b57f9b910f8cd1a4659d894fe7550ccc81ec9052c01e438b290fd66a040b9b93")}),FilterableVideoTower_Videos:(e,t="TIME",n=30,i=null,s)=>({operationName:"FilterableVideoTower_Videos",variables:{includePreviewBlur:!1,limit:n,channelOwnerLogin:e,cursor:s,broadcastType:i,videoSort:t},...je.ext("67004f7881e65c297936f32c75246470629557a393788fb5a69d6d9a25a8fd5f")}),VideoCommentsByOffset:(e,t)=>({operationName:"VideoCommentsByOffsetOrCursor",variables:{videoID:e,contentOffsetSeconds:t},...je.ext("b70a3591ff0f4e0313d126c6a1502d79a1c02baebb288227c582044aa76adf6a")}),VideoCommentsByCursor:(e,t)=>({operationName:"VideoCommentsByOffsetOrCursor",variables:{videoID:e,cursor:t},...je.ext("b70a3591ff0f4e0313d126c6a1502d79a1c02baebb288227c582044aa76adf6a")}),VideoPlayer_ChapterSelectButtonVideo:e=>({operationName:"VideoPlayer_ChapterSelectButtonVideo",variables:{includePrivate:!1,videoID:e},...je.ext("71835d5ef425e154bf282453a926d99b328cdc5e32f36d3a209d0f4778b41203")}),SendSpadeEvents:e=>({query:`
  mutation SendEvents($input: SendSpadeEventsInput!) {
    sendSpadeEvents(input: $input) {
      statusCode
    }
  }
`,variables:{input:e}})}}const NI=new je("welovegames");async function GI(r,e="285x380"){return(await NI.searchGames(r,e)).map(n=>n.map(i=>({name:i.name,cover:i.thumbnail,tags:[]})))}var zI=pe("<div> <button>ð</button></div>"),jI=pe('<div class="loader svelte-179a95o"></div>'),HI=pe('<li class="option svelte-179a95o" role="option" aria-selected="false"> </li>'),VI=pe('<ul class="options svelte-179a95o" role="listbox" aria-multiselectable="false"></ul>'),WI=pe('<div class="container svelte-179a95o"><div><div class="tags svelte-179a95o"><!> <div class="input-container svelte-179a95o"><input type="text" placeholder="Ð²Ð²ÐµÐ´Ð¸ÑÐµ ÐºÐ°ÑÐµÐ³Ð¾ÑÐ¸Ñ..." class="input svelte-179a95o"/> <!></div></div> <!></div></div>');function qI(r,e){He(e,!1);const t=()=>Ie(T,"$tags",o),n=()=>Ie(u(),"$categories",o),i=()=>Ie(b,"$root",o),s=()=>Ie(w,"$tag",o),a=()=>Ie(S,"$deleteTrigger",o),[o,l]=Mt();let u=ge(e,"categories",8),c=ge(e,"selected",28,()=>[]),f=pt([]),h=pt(!1),d=pt(!1),p=pt(""),v="",m=null,g=0;const _=500,{elements:{root:b,tag:w,deleteTrigger:S},states:{tags:T}}=zR({defaultTags:[],remove:A=>(D(A.id),!0),add(A){return{id:(++g).toString(),value:A}}});c().length>0&&T.set(c().map((A,L)=>(g=L,{id:L.toString(),value:A.name})));function E(A){const L=A.target.dataset.value,Y=A.target.dataset.src;V(L,Y),setTimeout(()=>{ve(h,!1),ve(f,[]),ve(p,""),v=""},50)}async function O(){if(z(p)===v||z(p)==="")return;ve(d,!0),v=z(p);const A=await GI([z(p)]);ve(f,A[0].filter(L=>L.name!="Nothing found").filter(L=>!t().find(Y=>Y.value===L.name)).map(L=>({name:L.name,src:L.cover}))),ve(d,!1),ve(h,!0)}async function P(){if(!z(p)||z(p).length<3){ve(h,!1);return}m&&clearTimeout(m),m=setTimeout(async()=>await O(),_)}function V(A,L){c().push({name:A,src:L,id:++g}),u().set({...n(),src:c().map(Y=>Y.src),names:c().map(Y=>Y.name)}),T.update(Y=>(Y.push({id:g.toString(),value:A}),Y))}function W(A,L="manual"){A&&V(L,A)}function D(A){c(c().filter(L=>L.id!==Number(A))),u().set({...n(),src:c().map(L=>L.src),names:c().map(L=>L.name)})}function j(){setTimeout(()=>{z(h)&&(ve(f,[]),ve(h,!1),ve(p,""),v="")},300)}Ut(()=>z(p),()=>{z(p)&&P()}),Xs();var I={addManualCategory:W};Ar();var q=WI(),$=ye(q);Nt($,()=>({...i(),class:"root"}),void 0,void 0,void 0,"svelte-179a95o");var K=ye($),ae=ye(K);Is(ae,1,t,Os,(A,L)=>{var Y=zI();Nt(Y,B=>({...B,class:"tag"}),[()=>s()(z(L))],void 0,void 0,"svelte-179a95o");var te=ye(Y),fe=ee(te);Nt(fe,B=>({...B,class:"delete"}),[()=>a()(z(L))],void 0,void 0,"svelte-179a95o"),ur(fe,B=>S?.(B)),ur(Y,B=>w?.(B)),qe(()=>kt(te,`${z(L),R(()=>z(L).value)??""} `)),_l(3,Y,()=>a1,()=>({duration:150})),le(A,Y)});var k=ee(ae,2),H=ye(k),ie=ee(H,2);{var X=A=>{var L=jI();le(A,L)};Ze(ie,A=>{z(d)&&A(X)})}var N=ee(K,2);{var M=A=>{var L=VI();Is(L,5,()=>z(f),Os,(Y,te)=>{var fe=HI(),B=ye(fe);qe(()=>{Qe(fe,"data-value",(z(te),R(()=>z(te).name))),Qe(fe,"data-src",(z(te),R(()=>z(te).src))),kt(B,(z(te),R(()=>z(te).name)))}),We("click",fe,E),le(Y,fe)}),_l(3,L,()=>bg,()=>({duration:250})),le(A,L)};Ze(N,A=>{z(h)&&A(M)})}ur($,A=>b?.(A)),go(H,()=>z(p),A=>ve(p,A)),We("change",H,P),We("focusout",H,j),le(r,q),zA(e,"addManualCategory",W);var F=Ve(I);return l(),F}const Vg="data:image/jpeg;base64,/9j/2wCEAAUDBAQEAwUEBAQFBQUGBwwIBwcHBw8LCwkMEQ8SEhEPERETFhwXExQaFRERGCEYGh0dHx8fExciJCIeJBweHx4BBQUFBwYHDggIDh4UERQeHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHh4eHv/AABEIAXwBHQMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APna5z5Ylx7mq8yArvXoetXYyHiMbdCMVUQFGaBu3SoR6TRQmXByOoNdFpE4mgU9xwaxZ0qTSpzBcbSeCaKkeZF0J8kjr7V9hBFaCsGwaxoZAQCKv2sv8JrhaPZjJM7bwbciOQxEjBrrzyK820W48q4Rs+1d/Y3AlhVge1clRWZcldEN2nUVw/jXSo7qPdjB713d4a57WkDxkHvWlObi7owcL7niuqadc2rsYS20dxUOnalKj+XOA3oa7bUbYB2BGa5PWdMZHMkK8e1elCopqzOWrQlT96Br2l0WICxs30rTt5c8Hg+hrO8BzJJqSx3CgHGOa9E1DTbK/wDKXy1Dhs5XgnFYVLRdjWnXlZXOWSTHSrcE5zg11kfhmwli/wBUVPqpqhb+EGn1OS3junRFxjIrDni0dUcQr2K1pLkitq3kG0VpWHw11FmBi1DAPqma17j4aa9a6a12l7bzbOqFCp/Os3Z7HRHFU1uyHSr1Y0GD0q3LrsqEqr8elLo/w58SX8O+G5tY89pCRXR2fwc1l4c3OqQ+ae0eSo/E0lC5NTE0I7yOUl1y4kG0zMB6A4qrJqKryXzXZ6T8MRa3bxazJ9odGIIRiFrqbT4faAsZD6fHIOuGJP60+UwljaMfM8hS8uLn5La3mnPpGpNaMPhDUbu1+03ciW0ZXPPLV7TZ2VjaaeVhgitoEQ/KoAAFfPXiD4zS6v8Ab9C8O6K8siyvFFeb/wB2yg43Y61cINnPPGOekEeW+M726Gu3Wk20nmpDJ5YKj73qf/rVueAPB15ebrycuqpwPQn0rovCPg6S2jN9qMKz3kxyNwzljyTXq2m6Otjp8UCoFwuTgd+9OtXSXLE3jQcFzT3OKNk8FqYOcVp6FblcA1oapABPwM1Lp8GGBArgnK5rHY07OMgitRVO2orGHgHFXCuKyM5MpSrVC9YJEzN2Fak44rjvHGrR6bplxcO4CxIWPv7VUIuTsS5WWp4T8VtSGp+NUgUgx2zBT9c81m6w20L7rWfbO17qct9Jy0spP61Y8QvtWI/WvdjHlSiea5Xbkc7OQJvVia66yhP2WM+qiuSRfMuVJ9a7i1GLeMf7Iq6myMqa1ZyqfJJjtSXycLKvBHBp0gygbuKlQCSLB6EYqiSg2HXNVZgVOR2q0Mo5jb1qKdasg19HuxLEAT8w4NbELY5zXF2cxt7gN2711FpMHQENmuarTtqehhqt1Zm7ZzHcOa7bw7fBoApNedQykYroNBvDG4GeDXHUhc7os7maQMOtY2ruBEakW5DLnNUNRmDgr1rKKE9DndSG5iax7hRggjIrbuhkEVkXSkZxXVBjvoZQtnhm8+1cpJ2q7o+v6npd+tzqTy3MYOPlHQfQVCjkPyK0LZEkGGAIPrWrkramf1dT2dj0jQvFuhXtsrR30QY9VY4I/A1reGL+zv8AU52t5o5cMB8pz2rySbRrS4Q7oVz2IHNV9JsNf8Oar/aGgzKrEYKPyp9iO9YunCSdnYVTC1YO6V/Q+tNEcYUV088sZ0WdSR90fzr5gs/i54wsYVjufC1vNKP445iAfw5pmt/HHxVcaa9rZ6DHYyyDDSO5kwB6DA5pU6MkcNWEn0f3H1RoksEMYGQK6KK7jSLduHAr4s0r44eKogq3Wjx3DgAAxsyZPuOavX/xh+I2o2/lWdjBp0bcbwpZv16flWqpuO5n7GU3omfTepeIdMh1nybm7hjklOUDMAWrm/H3xY8PeGdPmitZU1HUyhENpA25i2ON2OgzXy9/Y2sa/qv9o69qd1dTMO8h4HoPQV6D4P8ADUFqoEFmkYPVtvLfU96xm4xe9z06OVzkk56Ia+t/EnxN4ZOnavqMGmxXQxN5EeZNh/h68cVf8M+FbDR4o4bO22quMk8lvcmuu07R3+VpE2x9zWtDa+bKkESDA4GBXNUrSeiPSpYejRV0tQ8Oacbq7jnkQBIRkCt69iABwKv2FklpbCNRz3PqabdRZQ8VFjir1ueWhwmpRkT/AI1b02A8HHFW9Vtv3gIFWbKLCDisGxKVkWbZNq9Kc9O+6uKjcgDNIzbuVL+QRws3tXzp8dPFYnuP7FtXyoO6Yg9fQV6p8VPFcWiaLNLvAbG1FzyTXylfX02palLdTHc8jZNengcPf32ceKq8q5TotIj2WkDHqzZ/Wm+JjhIR9f6Vbij8pLeL0Aqh4mJMsK9gpNdy1kYPSJmabGZLsD05rs42wgHoK5zQ4QuZT1J4/CtrzMcUTd2OkrIxHXqKZathihqeUfOar/dmBqzIh1FMOsg79ahbDpkVeu08y3I7jkVQhPVapbEsqTqQc1c0q8MbCJjx2qC4U5NV+nTqKprmQoycXdHXwyZANaVjPsYHNcppd/0jlbnsa2oZj1BrjqU7M9OlVUkdraXO+MfN2qO7cg5zwaxNOuiOCa1TIJI65XGzOm9yrOd1UZ0z2q3IeaiK5q0NIybiIE+hpbV2ifDE4rQlg3VXeAqeRV3uVF8rualhIWA5yK2bRdw5xXMWrPA+RyPSuh065DoDWU4nqYesmjct7eEoAVBJ9qtw6RaurExLk98VStZsAEVqW10yJyBmsG2jqTjuUbDw7FJdHcoAz2rZ/wCEZgjkCtnae2KSyuZN2/gHNaX26aRxvwccUpSYm1fQuaT4csozuXJI5ANdPptpDFtyBgVg2k7cVt6aJJcAkgVKfc5q8pdy/eHzSI4Bx6CtjQtP8hPMkHzmmabYqhViMn19a3IlwOlC1Z5lerZWQ0rVe4A2kVbk4FVpeRRLY4o6mHfQ72waIU2Lg1fljBNQTBQOuDXMzVMgbpWPruow2NlNNPIsaIpYsewrQvJxChZjgCvmz49/EA6hctoOmTfuUP791PX/AGa6cNQdWViKtRU43ZxnxU8Xy+J9bfy3P2SIkIP73vXL6NEJtSiQ8gnmqp5ra8Lwf6UJT2PFe8oqnCyPJcnUndnSMP8ASF9qydaPmXh9FUCtaQ4kLHoBWJdPvnYn+I1jHc6J7FqyO2EADAFTeZnvUC/JEo7nmkzRa407IbL1zVeb1FWG5SoJhwKpGTJl5T6ismYeXMQOxrUiPyCqGoLic+4qo7ilsRzDPNVJFAPFWlOY/pxUEg5q0QyAkqMitbSr7cBHI3PasphmkVSpBBoceZDhNwd0djBLjBBrYs7nKjmuN06+OAknX1rctJ+mDXFUp2PUo1VI2pDlsilSqkcu4daswnNYs7FqWBHkVILUSDBFTWibjWlDD7Vk52BoxTp8gGcZHtU9pauDleK34LfPGKtCwUncFxR7QcW1sUrRJTt/d8f7Na9vC79Inz7iprS2IwAK29PtzkZFZuSN1iJozbW2lAx5LZ9xWrYWcjkb4/zratrMHHFaNtZcjis3IPrUivYWPAwq/Wun0y3SNRxk+uKis7I8cVsW1qVxxUpNnNVxDe5PbpuxirqIQMYpkUQUCrKLheetaJWOKcrlaVciqzrV51qpcELSkEWUbj5QcdazbmRUBZjVjULhUBLMAPWvEvi98T0sFl0vRpA8+Csko6KfQe9TTpOpKyLlNRV2Uvjl8R006KXRtKn3XTriRlP3B/jXzlI7ySM7sWZjkknrVzUbia6uJJ53aSRzlmJ61TxzXvUKMaUbI8qtUc5Cou4/jXWaJAIkjXHO3J+tc/psQeYZHA5NdRpXKGQ9+B9KdV6WHRjrcTUZggZc9qyrUGWbJ6Zp2pzl5HIPBNT6dHtiDevNQlZGjfNIWdv3n04po5psp+cmhCcUrBcXIKVFJ0FOJwmKiJzimhMlj+7+NVdSHzqfarSdKgvhuKfSqW5L2KUQ5NNlFShcUySqJKxFSKmYxRt5qaKMsCPTmrJ6kSLhq1bCduFY1RCVPCMYxWU1c2pycXobsE+AOav2s43DmsKAmrsEhU1yzgejSrX3Ov011bFbduoIrkdHulWQK54PeumtZwMc8Vw1ItM7U00a1uAOgrUs9hwCKxoJQcEGtixOcVkwRv2FnDIQSv4it+x06AgcVg6ZIUIGcj0rp9PnXjtWbvcmRqWNjCB92tSGzh4wgBqnayKBWnaSA1pFHPNsnit1UghRVpI/amoc4xVuFQVyeK0SRzNjY4+5qXgClyqjFVp5gO9DENuZAuaxdSvY4Y3klkVFAySTUXifXbPSbJ7m6mVFUetfP3xE8d32uO9vaO8Fp0IBwWpxpubLXu6ssfFr4kSz+ZpmjSlU6PKDz+FeE6k7SSMzMWJOSSa39Q53E8muevfvGvTo01BWRhWk2Z8gqELk1PJ0p1lD506p6munocTV2WbZfJtQcfNIcCtxG+z6e2OCBgfWsuDFxf8Ay/6qHhau3rfu1T8TWUtTeOiMuU7plX3raRdkH4YrIt13Xi/WtmfiIUpdEKHVlGY/NirNvECmTVGRs3AWtWAYjApSKjqZcp6CmVNKhzTRGcZxTRLQK3NRz/Mw9BWvougXuoyBkGyLu7dK7LT/AIeWk6Dzbyfceu0Cs514QerOiGEq1FdI8wIqJlzXrWofCOWSBpdL1DMgGRHMvX8RXm2s6XfaRePZ6jbvBOh5Uj+VXTrQn8LMqmHqUviRmBOas2425OO1RqOatW8ZatbmKRCFqaJamuItpU46ilhSobNEh8S4qyo4pI481MiYqGbxVhYpWjPPStvTNR6I547GslU3DBFJ5ckR3LkisJwTOylUa3O6sLjJBByDXR6bIDgivPNFvssEJwfSu00mcEA5rjnCx1RkmdlYsMCtqykxjmua0+bgCti2mAxzXPJBJnWWUylASRWtZuPWuSs7nHRq2rK6HHNJSMZI6qCRdgFWfPAUDOMVhwXahclgBVXU9esrOEvLMox6HmtkznlA6GS5XHJrifGvjnT9GVoIm8+5xwq8gfWuV8R+NLy5Dw2OYY+hc9TXn96Wd2kkYsxOSTWsYX3JtYi8U63qOuXLTXkmEzlY1PArlb84rXu2ycDpWNf9DXTBWEzEvTwc1z98csa3tQ4jY1zl03Jrrgc1Qqv0qzb/ALi0ab+J/lX+tVgpdgo6k4q3en95HCv3UAFaMwXcu6RHst892OTS3rfMfpVizXbAB68VRvn/AHr+3FZbs1ekRmmjdd/StW6+6Ky9FGZ3PpWhqLFY2I7KaJbij8Jlo2+cyDpvwK3YTmMfSsG1GLRW9H/pW9bcwqQe1KY4ELR+1aOgad9pud0iZiX9TSLbl2A7dzXRaR5caKigDFc1SpZaHoYbD88rvY3NNiSNVVVAA6ACul0o5cAA1z1iVJGSMV0mk3UG5Ui+c+iDcf0rzpXZ7F4xR1mlxEgDFZPxa8F2Wu+D7y8aMLfWkJlikHU45IP4V0eix3MqKy2s+On+rNa+uaZqt/4av7Gy06Z557d449wwMkYHNKmpxkmjhxNSm002fEscbFelXLIE/L3r1bTv2e/iPLgSWtjAOn7y4/wFbdh+zd43Rw015pa/SQn+le1zo8K6TPHzp801i1yFJWM4NVoo+a+k9F+A+u21tPbXeo2DJKP4Qx5/Ks9f2btWWQv/AG9Z4J+55LcfjUe0RcZxPCoY8ipBGc9K95T9nfUMgjXreMAd4Cf60N+z3qQPHiKyI94WFR7RGqqQ7nhKoR2qzEuRgivZ5PgFrKthNWtJB6hSP50N8BdcUZTUIXPtgfzNS5JmqqwXU8aNmN2+PKt7Vr6VqE9uQsoDAd+hr0wfA/xTF92e2P8AwIf40h+D/i+PraWM/wDwP/69Q7MtYiK2ZlaTfQvEreYMn1NayXkajJkUfjRH8LPF0ZA/sWz+om/+vWnafDPxIq/6Rplt9BPmsZU0afWY9ylFq8CnHmqT6A5q7b607D92Mj1q0nw+1eAhho8Skd1wTSTeHtbhUh9NmwPRazdJA68XsyK51q7KYRyKwr2eSZy8zl29607jTtQjyJLG5XHrGayLtHXIZSp9xitIpIm9zOupMAgCsm7YtmtG7461my4NbIlmbOhzWTfrya3J/YVj6guAauJLOa1Q4QiuZumzIa6PV2wGNcrI2WJrsprQ5KrLOnLmYyHotDN5l5+NSWnywE+2agtPnuOPWqM+yOhtgPLB9qw7t8yPz3Nbq4jhx6CubmbO5vU5rOGrNKmiL+h/ff6irercwP8A7pqnobYJz3NX9WX/AEZ8elEviFH4DPtVzp0uOqsDWtpb77UexxWbo4ElrcR9yP6U/TLtbdZFc8EgilLUIu1jqIgVjUHriuq8CeGdQ8SaisFswijz80jf0rl5yFfA4r0v4d64NEeB1GY1wWX1rzqknY9nn5IaHsHhT4RaDawJJqJe8cDJ8w4X8q7vTtE0LTVCWen28e0dQgrE8P8AiSPW7VJI1kihBALFflB+tdHFC0jhUcMMdQawjUT0PNqTqSfvMtxvAn3YkH0WpVvFAwMAe1VGtgrEPMoNMNrI2PKYMDzuNXzy6GDSe7Lj3ZJwDiozckdzVVre5j5IBA6nNNYkjp+tHO+pPKiaS6J7003JxyaqYGeSaY5GeDQpMfIi0ZyR96opJa4H4v8AxG0/4d6HDdz2r3t7duyWlsrbQ5XBZmbBwoyPfkfh4pH8U/jV45kMPhDQJYomOA2nae0u36yvkDqOePWu6hhKtaPMtF3ZjOrCDsz6n80qCx4A6msLWfHnhPRg39p+JNKtSvVXukLdM/dBz09q+cdT+FfxZ1VPtfj/AMZaboMDAuRreuhcDG7/AFaEgcE8cVsab+zz4TtvAl5451T4hS6polkkkkr6LYA71R9rFGdjuAweQMcdTiuuOXwXxT+5GTxPZHoOr/tCfDuxYpDqF7qDDP8Ax62jFenq22six/aW8Gz3SRXOn6zaRMcGZ4kZV+oVicfQV5OviD4A6RFix8BeKfEEoX7+qamLddwPpEehHt+Fc54o1my8aywab4Q+GemaK3nZU6f50079QFZ2O0LyM8DkZyBXQsuo21v6tmf1ibelj7StdZgvbSG8s7iOe3mQSRSxtlXUjIIPpStqD9mI/GuG+G+mXPh7wHo+jXrhrm1twsu05AYksRnvjOPwreaevnZ6SaTuj1IxutUbX9qSj/lo350LrDDrKfxANYEkp9arSSN2NLmfcrkR1B1dGbDtCQf70dMdrG5G2aLTZlPZkrkndvWovMYd6Odh7NHQXvhbwtfL+90K1/3oJNh/TFYl98MfCVwC0Umo2TH0kDAfmKiN20Sl/M2BRkknAAryrxB8fbaxvnttI0+TUIo22m4lm8tHx/dGCSPc4rooU61Z2pq5FScaesnY7TVfg87Bm0jxBBMe0dxGUP5jP8q898VfDvxnpoYvos1xGD9+2IkB/Lmuz8D/ABesfFcM1u8H2K8iXc0Urg7l/vK3GcHtjNbNv8Rba1uvKTUrSU5wY/PUnP51UnVpS5ZR1RUJc6unc+W/E0V1ZytDeW81vIP4JEKn9a5Zz8xxX2pqeteCfE0PkeItFiYnpIYw+PcHqK4Xxb8CPD/iG3a88FarDDc4yIZD8rex9Pyreli4bS0IqU5bnzlC+LVscnaabpHMxJ9QK2/E/hXXfCWqNpmuWL2s45XPKuPVT3FZEKukoCIxBbsK6eZNaGSi7o2pf9Uw9Qa5xslSK6bUAYrXzMEEiufRQTu7Gpps0qol0htpHPetm9XzLcj2rFtVMRJ7Z4NbcZEkH4UT3uFPaxl6C2y7eI9SP5Uy9j8q6dO2cj6GoVbyNUDej1sX9r9pZHVgpAwfem9GSldWPTprS3c5aFCPpUIHlsxjO0DoBVtmBHWqjc78V47dz0o36nTaT401q10U6NFcBbSRtzLtG7P1rpdA8c6tZbQt0xHoxzXmlvwwrUjYkqRxWagrjnFNHt2j+OhO265G9z1INdPYeLbdwvDJ9a8C0+V0YEMa6jTr6QBfmqlBpnPOMex7YNftZYsKwJNQtfwtyDXnNlqrgAHB+tbVrq8TACSEH3BxVOMmYNRR1RuI2GQwqJ5AelZ0F9p0keGV1bsetWYTauPluVB9+KOSQrxPMv2hfh3f+PdJsJtHmhXUdPZ9sczbVmR8ZG7sQVBGeOteZQ6B+0TcWUWgnVtYtLC3QRov9qpFEF6gZRskDA9cV9Rrao4+WdD9DTv7PLcBgfxruoY2tRhyJJpdzGpQpzd7nxF8UPh5rHgq0sL7XdUtr26v5HULEXcrsAJJdsZ6ivrKHSntP2KTYIIw58KNMdgwDvjMhP1+bn3rxX9tDdBqfhzTUly32eeYx+hZlUH8dpH4V9M+L7eLRf2dNTs5IhAlp4XeAxn+DFttx+detCrOpRhKe7f6nDUiozaifJv7OujaTqej6tc3ulWV7cW91HseeFXKKUPTPuDXtensLaERW8UcEY42RoFH5CvKP2XVsrLwZ4w1/V75LLTbN4PNmfoPlfgDuTkAAckkVHffHLQ0vtlnoOozWu7/AFkk6RuRnqEwR0968vHYSvXxM+RXS/yO/D16dOklLc9ia7YUw3x9RXKX/jDw9/wq9vHtvePJa+aLVbQgLN9pxnyiOgIHzZ6bea8hl+KPjOeJtTg0aJdNjba7i2kaNTnoZM4B5HpXNRy7EVL2VrdzWWKpRtdn0JLqPYMKpz6rsHMoH41zWg6zol98K08e6tqi6baiZrWSAjdI1wv/ACzjA5bIII9AecYNeTx6p42+IuvvpXgvSb5w3/LODl1X+9JJwqD8QPc1VLLq9STW1urHPFUoK+57Vf8AiiysgPtV9DFk8bnArhPFPxmsdPme20q1OoSIcNKzbIs+x5LfpTNS/Z5u9A0ldY+JPxB0Hw0kgO1G33UrN6AZXcevC7q860C+uPDfjl18BND4kkxss57nRVkd+AzMkL79pGDz1wM8V6WHyqktZS5vwX3nJUx0paQVjqBr/wAXPHFnNaaL4cv5rS4QxubHTXZSrfKf3hBAHvkYr6F/ZU+D0fhnwhdal418N2v9uX07BYryKOVoIFGFXuFLHcT7EZr5r8c/Ej4xXU6WXiDxFrdg9wgaO0hItFKk4HyR7cDIxzX3l4Ys18K/DnTrO4lI/srS0WaSQljmOIbmOSSeQTXXOMaUEqaST7HJKUpP3j4t+Ifwu8OxeONcubn4l+A9Espb+d4LO3nknkgXeSI2jRPkIHbPXgVyHiXwz8OdO0WSfSviY+s6kI8x2sWgzRRu/wDdMjsNo684NbnwA+HVl8VPEuuNrF1eW1vbRi5Z7TaN0kkh+U7geCAx49K92tP2dfh1YTebJZahfgEHZcXjY+nybc0V8dTw8uWTba7JF0sNKqrqx5z+zr4LuvF3g6bUL++uoYILtoLcgA71CqT19Ccf/qr3jw14DsNKkWWK4uWcDqxH+FdF4dsNL0vSoNM0mxgsbO3XZHBCu1UH0/r3rXiUY4FfK137etKa0Tex7cJzpU1Dsc74g8EeHfELQvrWnR3zQjCeaOgpLXwN4Us4ljtvDumIq9P9GUn8yK6oCpI4wx6VUabWhzSqyOK1PwV4dvFZJ9D0+RW+8Gtl5/SuL8QfBLwZqULxroVtbM+cSW6+Wyn1GK9tNumMkVHJCoGQK1ipR2I9rfc/Pb4v/D/UfAPiI2FyxmtJV32s+Mb19D7joa5zTHzGFPWvtf8AaP8ABX/CX/Du8W2iVtRsVNzanudvLL+Iz+OK+HtPcpKVbhgcEGu+nNyjruWmt0Qa7EY7oPjG8ZzVq1vQ0C7jyBipddi8ywEoGTGf0NYCOyjANbJcyIk+WR7FY3y3MCupBJFWYDuR/rXD6TeNZXagsfKY4PtXYae+6JyPWvKqU+U9WLuTrw1adqchPpWUD81aloQVSs+opbGvaHGK3LAnaKwbY4xWzp7HaKtHPI3LVuQK1rU9OaxLY8ita0PTmqRzSNe3PStKEmsy1PStKE1tE52XYqu27EEYJH0NZ3mJFGZJXVEXlmY4A+pNWrGeGeMSQTRzRnjfGwYfmK2RPU+bf2oS2rfGrQdIcl1+z20GE5f95M2R9eeK+pf2jZ4bL4D+LmkJCf2Y8I78uQi/qwr5g1RD4l/bK0y1hyRb6raqxj5OIEV2Jz6bTn6V7v8AtpaqNO+Bt7aiQq+pXlvbKAR8w3eY34YjPSvWtpTiccndtnxTaa1qT+Ev+EPs95hvNSW6kjQ8zSBAkan6HJ+pHpX1p47+G/hL4a/svaqlzoel3etJp4Sa/mtleU3UrKhZXIyu0t8uMY2j3r5s/Z802HVvjb4Rsp9pj/tFJmBGQfLBkA/NBX1j+2xNOnwOmigZ/wB/qVrE6qMlxuJAx35A/Kt6z9+MUQtj408D6N4h8Z6vp/gfRpJJBeXnnLEf9XE23DzN6BUHPsPWvsv9oLRdP8G/sp6j4csDGlvaWtrax5AUyN50eWx/eY7mPvmuB+B3hsfCW48MQarDEvjjxneJEIJAGbT9PT55MjszhQPYkf3DXT/t46m1r8LNL0xNw+36qm4jGCsaO2D+O0/hUTlz1IpbDWiPlz4R+E9S+IvjXSPBcd9NDZGSSeRs7lt48AyuqnjcQqj3O2vsf4i694V/Z7+FUcXhvSLdLidvIsbYn5ribbzLK3VsDknvwBjIx8kfs83/AIq0/wCLmjJ4JeJ9Suz9nkW4jJiMLANL5gBztUDOQQflGK9q+L3x78FXniu+8M+Ivh7ZeLdP0i4McF2bgKGmACyMqlThd24feOcCrrRlKaW6Etj5/XW4fG3jc6t8SvE2prFKczXMNv57gdkRMgIv0Bx6GvojwXafCXStCn1LwJc2UsqR+XNeTzE3K57NvwUz7AA0z4Tab+z98YLm90m28BTaBrEUHnGFLmRQUyAWjZG28EgEFR16Gsfxv+yxa6Tqc19F4/0zSfDeMiXVRiaM/wB0nKq31yD7VlXUavuNuJdOXI77nm2lRx+Mf2itBshKt1byapbIWRgQ0aEO+CeDwG+tfbnxp1L+yfhH4r1DzPLaLSbgI23OGZCq8fUivnD4DeHfg3pHxj0ax0TxTrPizX1eV7e4jthBYxFYnJJz8zHGQMEjPNez/tb3hs/gD4j2zCJpxBAv+3umQFfxXNRKKUoQWysOUnNuT6nlH7Bmlf8AEi8U6mYseZcwWyPnqERmIx/wMfnX0dd2oVSXIA96+fv2PJW0/wCFk7pHsa51OVy398BUUH9CPwr2SW9nn+V5DivMxk4yrSPRoYeooJ9CWBNt4wVsqRmtOI4FZls6r+PepzcAcda4eVJ3OmV3oXkYlutXID3rES6HqauwXakcHmqTVzGpBvY1gQetIVUgg9KrRTgjmnmdTwK20ObkaK1zEjqyMAVPBB9K/Oj4jaU2h/EPW9O2FVgvpEAx23HH6V+jcnJNfGv7Y2gJpfxGg1SFNseq2vmPj/nop2n9MVdJ2kbwd1Y8ltts8DRNyGUg1zE8TQzPE3VGINbmnT4IGaXV9Oku5kntwuSuHz7dDXRF8r1KkuZaFi4Hymur8L3Jn0/JPzYwa5Scjaa2vBTt9nkjH96uSqrxPQi/eOlU81qWH3AfeskD5q1bH/Uj61xdS5bGvbVr2HSvPdW8caRpcjQxB72deoiICqfdv8M1kx/FTVAxa10e1MSHLZZ2IHuRgCu6lgK9RXUTz6mKpRdrnt9p94VX8Y+MdK8H6Yl3qAeWWYlYLeLG+Qjr16AdzXnnhf4t6bc3UUGsWTWG4gefG++MH3GMgfnWf8S4z4u+L+g+GbRxKkrW1qpQ5H75wWIx/ssD+Fb0MDP2qjVVluc1WvFw5oM3dP8Aj9ai82XXhuVLfP3orsM4GeuCoHT3r23w7rOm6xoUGt2NyHsZojKsh42gddw7EYOR7VnftiaJ4S8NfBOK307w5pNpcS31vbWkkVoiSRhcscMBn7qEHJ5BNeaeF2u9G/ZZvrpXcyT287x8/cSSTZxg8DBJ+prprYek4RlBWu7HLCpJt3Obig8VfH74oS6LpF0bbSYAzxmQnybaAHHmMo+87HHHvjgA1X8BNd/DX48SeHrXXFv7Cznkt9RlhUrDLGkZaQ7STgoQefVT2r2b9hqwgsfhn4q8RW0Xn6hJdtFsTG4rFCGRBn1Z2/SvlS01u4t11i4kDPfalG0Uk7HlA77pT9Wxt+havQjFPmppaLQx5teZnu/7HNhP4s+OeteNLtCy2kM1ySecSzuQo59F3/lWv+3r4ia813w54MtG3yQo15NGp6ySHy4h9cB/++q9K/Zo8MW3ws+Ck/iDxMwsJ71TqeoNIMGGIL+7Q+4XnHq5FfPHhTU/+FkfHq+8fa5iHS7O4F6yyHhFT5baHPrkLn/dY1HMvaOfSIrX0HfEbwrrXwZ8eeGvGOi2wa0hjt2DhTsFwkYSaNzjjf8AMc99xx0r1fUv2p/h/qulWz6p4J1W7vLaVbmG3lELxRzqDtYOW7EnDbc98VyvxH+KV94hs5dNighi0uQ4kRyHE2OobjpnkV5I+m6YZpJTYwKQeEUjGR6cYIrGNVTivaLVGvsnfQ6Hwd8T77Wv2kdD8eeKrpIo2vliYA/urSBg0aqueirvyT9T1Ne5ftr+F/Eni1vBdh4Z0a91SYzXQYW8ZZEyIsF2+6o68kjoa+Yda0mK9hUwKIpEBVNqfI49PatLS/HXxZ0rSho+n+LdbgsYwI1RbrIjGMAKx+ZR9CMVunGTUou1ujIlBx0PStTTRv2fPBtxpVndRaj8UNbtfKnmgO5dJhfHyr/tHt3Y4PAABo+BvgLY6Z4a/wCE2+Mest4c0ZQHSxDYups8gMeSpPZFBc/7Nct+zlqHh2y+OVjqHj27XYjSslzdybkF3j5HkZvxwx/i2mvVP2nPBHj74ifEGG+0S90u+8LxWsZspG1WGOGAkfvHILZyTzuAOQBjpVNuMuW++7/yILnwb+LGlX3xT0XwJ8MfBNlofhyWWQ3dxJHuuriNI2bcxz8vIH3ix+lZ37ffiG1uNS8N+FoHSS5tVlvbgDkpvwkYPuQHP5etZ/hfW/AH7P2j3dzYarZeNPH15F5RNk+6zs0yDs3jtkAnHzNgDCjmvEbq/wBU8U+J7rxLr9y91eXcxld2/jfsB6KBgAdAABUqMYy9p0X4lJN6HefsnxLD+0boUKbsILpfm6/8e8lfQf7c14Lf4LxW20E3erQR5z02h3z7/dx+NfLXws8SWvgn406R4i1KSZLK1uSbl0j3N5bxsrHaOv3u1ej/ALXfxZ8J/EHTdB0rwndzXsdpPJc3Mr27xBWKhUUbwCerE8elNxcqkZCel0dt+znBf2Xwp0gmzlkhn82ZHUdmkb/CvUIrhsDdDKvsVrzb9nb4s6Tp3hjS/CXiP9ybaOO2tpgnGOgDf419DTLZmMPtRlIyCB1FeJXop1JS7tnrU8Y1FQa2Rxi3BVcmNvyqtd6nFEMySCMe5xXSXgszn7oryT44JO3hm7TTd7TsCsax/eJrnnTSV7mtOs5ytY6IeLtGWby21GAN/vit3TtRt7pQ0NxE4PTa4P8AKvkLw7oviCysEa+srwOclt6Hiux8OanqNhOjxedHg9cEVyy916O56qwsaiXQ+lrrUvs2BnLHoM1c067aVA7Hk15poeqm72vI5Zj3JrudIlAj4PWiNRt6nPWw6gjpYpN1fPP7cNgG8L6DqQX5orl4ifZlz/SvfrTJ57VgfFXwZbePPBd3oNxtWRl328jD7kg6GuqEranmtcsj86baXZJ9K2YLz5KqeKNC1Hw7r13pGpW7Q3NrIY3Vh6d/oaorKQOtehZSVyVLlL80xOQQQa6DwG4aWdc5xisfUrcPGSvDdq0Ph8Cl1NG3WuWpZ02ehG6mrnasOa5nWNS1TWtUh8LeHYJrm5uJRCEgGXmc/wAA9vU/0rT8VagdO0mSVGxNIfLj9ie/4DNe4/sO/DmK30uf4japbhrm6LW+l7xkxxA4klHuxyoPop/vVrl9CKi681tt6nJmOIcf3ceu5N4I+BvgL4X+EJPGfxWmttSuoIxJJBIN1tAx6Ron/LZyeOeCeg715z4i/aX8SnWEbwb4e0bRNBtm2iyezSTz0zwJCANufRMY9TTf2qPHd58Q/ieng7Rpt2k6ROYEAPyy3A4llPqF5UewY96zda8MW8Hw5vdJ0yAvIirNkDLyupBJPqcA4FejOtGm4+11cvwR5lOjKpFtbI9b+LfhLwh8U/gEPijoejwaXrUNi16xtowpcoSJopMD5sEPhjzwD0Jrxj9kjSjrXx50N5QZY7COW7bdg4CRlU6+jMuMdOKPDHxjGi/s/wCsfDMaZM93eySrDeB1EccUjKXUjqW+/j/eHpXbfsC2CzeP/EOpNsJtdMSJcj5gZJAcg9uIyPxroalTpyv8jDdnRf8ABQPUGWx8JaUD8ryXNywDd1VFHH/Am5rY8NaDaXXwusPDt0G+zT6THBJgYYboxk/XJz9a4P8AbzmW5+Jnh3T48+aml5JPT95MwH/oJr16xRobeKJsZRFU/gMV5+LbjSppebOiitWfO3gvxX40/Z68aXdtPYi+0m8I82FyVhu1X7skb4O1wCePfBHQ1rx/EP4DL4xHjj/hX3iBNWWUzjThLCbIyk58zBPBzzjG3POK96ubOz1C1Ntf2lvdwNyY54g6n8CMVhJ8MPh414Ll/CGllxxjyzs/74zt/SrjjYPWa18hOg+jPFviN8TPHXx61iDw1oWlNY6Sj+YbOKUsvH/LW4kwBgdhwB7nFZd6bbw3YL4a0ueV7VJP9Luo1x9qlIwz/wC6vRR6e5Ne5fFLWdG8HeEn0XSLK1s5b6MoIbWJY9qdC2FHWvmWe7lEzSW9wZgEJZZscE+n0odb2itFWRcKfK7svXF55jiWRlRR8oKknJHGCKillEa7ZWRVyC2+XbwO659s1gapqVxJcwxWc7x7wOrBcMeOvQD3rttO+F3hy3tY73xn8WvC2lKwybewlOpXA5HBEZwDz2J/nW0KF1eTFOrZ2RzFjBrXivxTa+GvDKtc3V5KIoQhCeYcZJY9AAAST7GtL4lfD/xp8LNQ08eIjbn7crPC0FwZUfbjcpyAcjcO3fivoX9krwf8Mz4m1HxF4R1PxBrF5pUQtzdX9skFvmXdny1Hzbtq4Oeze/HU/tCr4a1DxRptjrmneB5Ta2bTC88Q600Bh3N91LeM7pPuZJOAegPWtPaKMuRLQwbb1PiLV761vWEq27xS4wxLjB/Cu20L4JeOtY+Hc3ju2sLOPSI7eS6UTThJZYUBLOq46YU4yRntXtel+J/hLb63aaLYXHhjULvUZ47ZINB8HxhfNdlVSJblmGMnnqK96+KmpaV4P+EeuXtzpkN1ptlpzQmxH7pJVYCMR/IPlB3AcDjPam6zhaMUJ6u7PzdspbSEb5oGmYHhd2Ex71qW2vQbdslsQRgZVgRj3BFdg3xS0ezGNB+EvgewwwZJLq2kvXVh15kbGPbFc7408a6r4yMEF5pnh+xSN90aabpcVryRjllG4j2JIraVNTd5L8Rxm47Cz21tdrEHAlBGVkIKke2fpSw6RZR3AaKJztGSXYSBfU4Hai2T7NaxqHy4ULyCM+xp5mESEZA54L4JB9CfSuDnktE9Dq5Vu0W4mYtgOiBPcgEenPavefgp8Q9QvNMOh6hftJKmFtXkbOV/uA9TXz2CHbarGJVHznrtPr9DXQfDvUvsHiWz1bcY7azfe2BkY7gfWuetT54NGkXZ3Z9Z4vZF/ezEewqpJp7SMS3Pua1PDmpabr2mx32m3MM0brkqjhmQ+jAHg/WtBrfHQV4rhLZnqRnFaxOaj01QdrqCPpWnaaPYOMTWkL565QVfa1JGQKms0YttKnI9qjlRp7Z20ZmN4Q0zzPNtA0DdcL0/Kr1tpt5bYEQEqgfQ1sQLgjirsSY7Vooo5515LdlHTJZi/lyxFMeta8YAGaFUEcimuCp4rVOxxznzs+c/2w/h2+p2K+NNIg33Fsuy+jUcvH2f8O9fITMMnNfqDeQRXVvJBcRrJFKpR0YZDAjBBr43+Lf7PniOw8VzTeFbQ3umXTNJGq9Yefun8+K6KFdL3ZDUbo8suKs+FSF1XHTIqnMc5qTw/Jt1ePnrTavFo9Fv3kXPGiz6jrunaNagvNKyoijnMkjBV4/L86+9fE0tt8NPgjemwxHHoWjGO393SPah6dS2Pzr4k8Dxx3f7QnheC4QSRHWLMFW6Y3Kf519Xftm30tl8B9TijGftd1bW7EMRhTIGP1+7jHvXp0oWpUofP7zwsVLmrTfn+R8k/CGy825vdWmJeQHylZuTk/Mx+vSvWLDpXAfCyJY/DEbjrLM7H88f0rvrE8cV5WNm54iX3fcenh4ctGJR8T6Doh0TVNROk2Ju0s5mWbyF3BtjHPTr711H/BPmKP7L4yn2DzA9mm7vjEpxXmHjv4j6dbRahoVnavdu8T28k/mBURiCpxxlsZ9ua9S/4J8/8g/xl/12s/8A0GavSw0KkMPJz62sebiZRc1ynH/t0SGL4zaRMBny9HgfHrieU1h2HjH42eO5J7rwhpF79jjfH/EvslZE/wBkyODuPtn8K9f+OHwxvfiZ+0lpFnIk8Oh2miwy6ndqMBU86bEat03t0HoMntXVfDT4p6LrHxgk+GvgywsoPDOj6bKFmhUATTI6D93jjYMsM87jk/Xpbi4L3btL7jnTa6nhngj4veJ9F8WJ4Z+I9i1uzSLE8stt5E1ux4BdcYZTxzgdc5Ir6IUqql3YKqjLMTgADuT6V5J/wUA0WFW8LeIYolWd/Ps5pAcFgArxj8P3nPvXCfF34kX+seFfD3hDQnlludSsLaTUDCCHld1AWAD/AGjyR3yo9awqYZVXGUFa+5rCpZO5hfHPxzZ6344ml0S6N3BDGII5QT5ZIPO31+tcrd6B47uLJdVl8L659k2hRONNlCHt1219cfCD4S+EfhD4Kfxn42W1m1m3g+03d1OodLEYH7uIdNwOBuHJJwOOK4Lwd8WPiT8Xvjfptj4ZupdD8O2dwLm4t41B/wBFRhuMzY+Zn4XaOAW46E10QUEmorRdWZucu58xXkzyyKZ4fLfGOF2k/nSSQIsAmjkLKeMEYOa+9/2vbWwPwI124nsLeaeIwCCRowWiYzINynqDivgUlRajLc7+noMVrSnzxTjpqK+9z7i/Yf0Qab8GzqbIBLq2oTTbu5RMRqOnqjH8fevn/wDbHvk1D4/ajDvQpZ2ttbZTkj5N5B9wXP6V9f8AwC07+yvgv4RszG8bDS4ZGVjkhnG8/qxr4a+N+ox6n8dvFl7JsniGpyxjbwCsY8sf+gisabvUnL1BLZGx+yjoa6x8e9EUK0kGnmW9c47RqQpOP9tlr6d/bQ1E2PwI1GFZGRr67trYADO794HIPpwhrx39gXThN458R6qyofsunRwgn7wMkmePwj/lXb/t96gYfAfh3TA7j7VqbSkD7rCOJhz+LjH41U9a6XYXQ+OpHBtYo14wWLe57fpXr3xY8I/BXTPAsGp+B/Hc9/rY8sNZSP5vnBsbiQEHlkcnk44x1rivhR4RufiD8QNH8LQEwxTNm4lQcxwr80j/AFxwPcivRv2p/hJ4T+GFtoMvh2+1OSbUZJlkhu5Vk+VAp3AhRjlgMe9buSUlG+omeSQXcyacJ5cswXam5chwDjrXofwa+BviT4paHe69b6raadZwStBE1wjO08gUEgAdFGQM+/TivM7yQJpscLTsWJVhH/CBivvT9knSbzSPgVokV/YvZzzvNc7JF2syPIxRyPdNpGe2KwlL2cXJbtmk3eyPgqOeawkntJ96vGzRsoboQcEfTIrsfhx8OPHnxKfboNgY9ORtkt7O3k2yHpy3V29lBP0rsPhL8IovFWta1408ZzHS/BGmXdxLPPIShu9kjblU9QgxhmH+6Oc47jwV40uPi98btD8M+H7VtH8A+Hib2PT4F8tZlhIMbyqOOZCmE6AZ75NaSaTbitSeZtWOG+J3wQ8Y/B7RbXxpp/iaK4EEqJPLZK8Elu7HAIyTvQnA7dRkV9CfCrxvb+JPhNZ+MtauLez8mJ11GVjtjR4yVZvYHAOB/exWF+3Z4hGn/DLT/D0bL5mr3wLg9fKhG8kenzGP9a+ffFuo6rZ/D3wh8KNIMrz3yJqWoQxk5lnum3QQn2CFGI9WB7Vy1aP1mEebe+/ka0qrpN2Ox8afGrxt478Sr4Z+Flje28LMVieCINd3AHVyTxEmOexHc9qil+APxnvVi1HWvEthZ3dy4REvdbkMrOei5UEE+gBr6I+GXgvw18DvhddahftF9qhtTdaxfhfmlZRnYuf4QflVe556mvk3U9Z8ZfH/AOMFlZrPLB50/wDocKMfL063U5MnH8QHJbqWwB2FaUYwjdU0kl1M5zlL4mbsfi348fCrU7nRNUtb/UFQB/8ATYJLyIL13Ryqeh5zzx6A17v+z38ZrX4mpc6ZfWUena7aR+a0UTFop4sgb0J5GCQCpz1Bye3qngbXNI1zRZBpGoy6lFp1w+mzXEpy0ksOFck/xZPOe+a+SPACL4K/bUvNKRRb21zqN1bKgG1dk6GSMALxjJTA+lYVKVOtGXu2ktS41JJpX0PsTHFNfpUtMkBxXkuKOlMgZc00pntU+046UbfasZQLUj8y3m/OpdFfOqxHPeifTCik7jke9R6chj1CFjn7wH5126WZ6ElJSVzp9I1BdB+Mnh3W5cCKDULS4YtyAodQx454ANfYH7YWlvqfwG1h4txaylgu8LjlVkAb8AGJ/Cvjjx7p7TabBfRqSYBskx/dPf8AA/zr7D+APjXSfi18IpNB1eRZdSgsv7P1a3J+Z0KFBKPZxzns2a76M+ajCa+zo/keRjKfJWku+p8ufCq4WXw6IQRugmZSPr8w/n+ldF4w15PD/hya5Vh9qlBjtl7lyOv0A5/KuL8RaPrXwe+Il9oeq20sttk+VJjaLqHPySoemex9DkVp/DDwR4i+NnjxPMSa10S2YfbLpB8lvH18tCeDI3/1zwKzlgebEOpL4N/+AarFpUFFfFsdV8BvC+laD8IfGPxV8XafbXMLWclnpEd3EHEkhypdQ3dpCqAjnh63/wDgn5qBj1vxXpBlX97a29wExy2xnUnPtvH51zX7SvjW28Sazpfwp8BxIPD+iOtuiQH5J7hRt4PdEGRnuSx9DXPfBnxWPgv8YZ5tdhuZrEwPaXP2dfmaNirJIqkjcMqOM9z3Fd8vfi093rbyOCz3PqL9rnxrP4P+EtzFp8xh1HWZRYQupwyIwJkYf8ABGexYV84/sSHb8c4QDgHS7kY9fuVb/ao+L3hv4nWug6d4YtdSIsZpJZJLmER7mcBQqqCSTx7dutcv4Ynufgz8Z9A1i/gla1ijilmwvLRSxbJsepUl+PVRSpx5afI93cPM91/b+jc+CfDMgUlF1NwzdgTE2P5GvI/2N/DqeIfjVbX13G00GjWr3mWUsokGEiBPbG7I/wBz2r6K/aY0GX4ofBOOfwY6azJFdw3totq4YXC8owB9QJCccfdrzO98Tab+zT4R03wvo0Vjq/jPUJY7zXWZvlijHPlEjkcEqv8AwJyOQDNOX7rkW4Pe5o/t0eItUuLjw58PNKgnlbUG+1yxxDLXDbtkUYA6/NuOPXb6Vj3Wp2/7OHgbSPD1nJbTeNtcuYbzWpV+cW1srgmMe2Nyj1y59KfrX7SfgW71KLxjB4Cv5PGFrZPaWT3UyNb26sScgg56nkhQSCRkV89+KrjxH4omvvGevSyXUt5OPNncY3E8DaOyDAUY4HAq6cHyqMlZfmxeh9yftZRm7/Z78QyQkFVS3mz6qJozX5+Sj/Rw2OPmFfdPgvUoPi9+ytdaRbypLqq6S1hcQg/MtzEv7skcfeKow7c/Wvkn4TfDrXfiJ4xTw5aRyWkULFtQuZIzts0HDbv9rjAU9T7AmjD2imn0Y2foT8Nv+SdeGv8AsE2v/ola/N3xXdHUfGOv6g4WJp765mK9cFpWOB+dfpBHc6Zo/wAOPtOlz/atN0/SibeRJA3mRRxfKQ3Q5C9a/M2zja5WaVyWO3cSeSSeayo6RkykryR9Sf8ABPuFN/jG4z+8/wBETHt+9NQf8FA7xm1Hwhp4mG1Yrqdo+4JMahv0I/Cj/gn2zf2n4wTPy+RaHHvulrmv269QW6+LenWClD9i0mMNtOSC8jtg/hg/jWlv9ob/AK2J6Ev7BkUL/FXWJHRTJHoreWxHK5miBx+Fa3/BQC6lbxT4UsiR5MdlPKoxzuZ1B/RRXi3wf8c3Pw4+IVl4ntrc3MEYaK5t920ywv8AeUHsRgEe4Fe/fFH4jfAD4nf2Jq3iTUNcik0rzGNjFZOstwrAfumcArjKg8MO/IzTd/aqoldA1bQ8n+CfgzShp918T/HibfCWiv8AuoDjdqd0CNsCKfvLnr69OgbH2f8AA7xDfeLPhhpPiXUQiT6l5s3lRjCQr5rhY19lUAfhXwt8YPiPc+PL2zsdP06PRvDOkp5elaVCBthXGC7Y4Ln9Og7k978Lf2ltT8D+AbLwp/wilpfiwjaO2uDdtFkFmb512nPLdiKK1KU1pv8AkCdjU/bH+JcN5qCfDTw0yQaTpjg6iIAFSSYdIgB/CnUj+9/u1t/8E/dOga48XaucGdFtrZeOinex59yq/kK+cbGC41rU7/UbhDuuXkkJJJy7kk4J69TzXv8A+wT4itLHxF4i8MXUkcU9/FFc2+84LtEWVkHqcODj2PpRNKNJwj0Cz0bMX9uLXI9R+Lun6LI7ta6VYRiVVPIaVi747Z2BKd+zVpOofEb9oKXxzNpyx6VpchuHGfkhby/Lt4l9SoCn6Jnjiup+NfwI8VeL/jbq3iOa807SvC90sMs2pz3CjyUSJEcbCc7vlOM4XpzXMeO/jNpXgez0zwT8FCtvpel3Cz3epMu46hKp5Bz99Gx8zfxcBcAckbOCjDe33Aep/t1a3dWXwz0zQ7VZCdY1JUk2clljUuEx3JbZ+VeYJCfgJ8HJJph5PxD8XQ7I1/5aadadz7Nz/wB9Ef3Ksar+1bd6jY2jXHw70SfU7STzre4uJzLHDLgjeiFdynB7Nn3rx3W9U1jx/r2p+J/F2r7rgW0jqSNuSqkxxRr0VQf69SamK9nC09F+ZUISqO0Vc+p/2DrxpvhVqtm23FtrEm055O+KNufxzXmP7Qf/ABTf7XmlayP3Syz6ddkxfeI3CNifc7CPpXZf8E/T/wASHxcP+nu2/wDQHrkf26lWz+Lfh+/txsuDpcblvdJ32/lQl+/ku5PQ+uPN5IzzTlY561xOj+KrS7iRknSbIBLIcjP4V0tjqMU6Aqc+9fORrRloevUw0oK5rrg96MCoElUj0qQGtU0crTR+dutxhY1dRjPBrEiGLlD/ALQ/nXQa0wNsOO9c9LwwYdjmqjse1UPRIVSa12OodGXaykZBHpXM2Y8TeAvEUfiLwjfXFvLESVeLkqp6o69HX6giui0t82cbHuKtn7wasaGKnh5vl1T3RGIw0a69429X/aJ0XxjoMOk/Er4aWOttCdyz2t20DK2Oq5BZM98Ng+lZXib45+Ite8PR+CPh74atvCejuhiNvpxMk7qRgjeANoPOSBk9260ken2F0c3NlbTH1eIE/wAq6PSbe3totttBFCvcRoFH6V6P9pU7aQ19dDzHlzT1kYvws8Er4eQ6hqGyTUpF2gLysC+gPcnufwrtdX8OaH4gVF1jTYbooMI7ZDqD6MMEUW3ata16iuCdepOfO3qb+zjGPKloVfC3gHwhot0l3YaJbrcodyTSlpGQ+xYnFaXj/wAE6T430ZbHUd8M0JLW1zHjfExGPxU9x7Vp2ZOBWnAeKuNWfNzX1OaUVtY+ex8G/iXokjxeGvEkYt5Dkm21CW1z6FlHGeT3NdN8OfgXLba2ut+N7+DU5VfzBaIzSLI/XdK7D5ue3fue1e0xVaiFdrxtWStcx9lFO54f4q0XwXaeJdShXwrpls1rsxIsYCncB/B0B/CsLWorS7tpLSSNGgkXYUHAx7elXPjQxTxLriA4y1uf/Qa8+vb65troMs/zZIcMvDc/zFXFtpNsaihPC+seOfhlrs2peEdQljWUbZNqCSOZRnAkjPBI557ZOCK0/Fnxf+KPi7SrjSJ5o7C0umLXaadZi2NwT/z0f7x+mee+awxr8rbfNiznAODgg/TvThqttMcCXB64YYNdPt3u0rkexXc1k+MPxLi+H3/CACaEaT9j+wj/AEIecIMY2b/93jOM4755rkdMspLa0YSABpDll9B6VsPMrDgg/jVeR8jpSnV5lZKxUKai7kvw68c+L/hlq93feGJoUa6iEUyzQebHIoOVyOxB7+5rM8aeJNe8b+KrjxL4ilSW9nChykYRQqjCqqjoABTpW5PaqcxGar27a217iVFJlSRQ3BGRUYgjz0P51YbFR5rNTktmW4p7k1vGi4CgCtO0gjZgSik+4rLibBzV+2nK9qlt7lHUaaiLjOKbceBJNZvTd6Rex2s7NuKSZC7vUFeRVCzuySMkAV1PhPxPpdpq9vaSyl3dgMqMgH3ojOUHeJM4qS1Ob8aeFPHNhbxReI9alu4duYo3v5Jxt9geB0FYGn6TIrqqRtJKxwOOT7AV9Q+JvCttr1zaTXTM0KQhRGvG7nua8/8AjPd6d4G8Ow2OjWkFtqephlEyj54oh95geoJyAD9fSuWWKq16nsV1O2jSpUaXtZLU8Z1V4rGZoiI3uF4cLjCH0J9faul8F/C/4k+OIFudE8PXX2F/+Xu4It4CO5DPjcP93Ner/DfwD4S+GHwvj+K/xK04alqVwFfSdJlxtywzGCp4LkfMc5Cr2yK84+InxE+JnxE0y+1u+ubmy8NW8ixfZbRzDaIScLH1Blb656ZwBXpU6UI/Dr5v9Dz6uJqVG+i7I+j/ANkXwJd+BJPEllf+JdB1K7uBbNLZabdec1qV8wZkOBgnJGP9k1hftf6T8Pta8Y6NH4l8e/8ACN6lbWDYhXSpbvzI2c7WJQjbyG4NaP7BuifY/hpq2ttHtbUtSKIcEZSJAo/8eZ+n9K8n+IEMHxc/a2l0XzZZNMW5Fi7wvysFuhMpU8gfMHwenNLarKTexzpX0OE1rwvY+G7KbVfDPxX0DUWtwGENnLcW1y2T/CpXB7fxV9J/st+INf8AFnw9e91Nzcz2V49r57cGVQqsCfUjdgn6VT/4ZS8DGZGGv+IfLByyF4ckegOzivafBvhrRvCPh620DQLMWtjbg7FzlmJOSzE8sxPU15+OxFKtTtHV97HZh/aUn5FmDz+jRFce+atKWx0NTbD7UKBzmvKSkbOd+h+dWpSb4ce9Y054qS4vvM4XgVWLhhljXZFNHpykmd34el8zSoOcnaAa1gMRiuW8CyZgljLZ8ts/ga6qQjZXFVVptGkXeKZesDkDFb1n90Vz9gR0rfsj8ooRnM17Q9K1rfqKyLXtWva9qpHNM3LPoOK07foKzbPoK04OgraJySLsNXIgKpw1ciPFaEHz18bxt8Xaru6PJbD/ANBrzjWwPNyfmzkEkcEn1969M+OmB4qvTgH/AEi14/Ba801gJ5xUuOcqxJz19f8AGu+Hwog5yUn5EIBCkAqeoPsaZJyAVfkJjY/+NSyhgUUghQQu09M+xqNAUAkIAKj7rjcD/jWhRDMNm44cAgYKtTHklRnHmSjkAHOadOUyWYKF44VvU+lRTFz5i/vMBhtoAGu5fNlDTYwAOlPa5kLtyhwuenWopTky72YZx2pHG7cFcEbOKAJY5WlkCN5QU87vU0ZG8HJKEndtGcVGm5iEXONuBgdafCrM0cOWUqe5wB+NACCSRWBCgKc4zTwZMJiRmBGSc4FOh2ZRZmVUw3K8nNToNiL5gyHTgt259KAI5Vf5mZ8xnODk7au+D1SXVIA6gssqbW9OahkwiMJFLxspCOc8fQVY8EZGrRYAP76Mf+PUmDPtbRrBrmxgPG0LjNfO37VNsIfivoVtLlrY2UHDfdwZ3DfoBmvqPwnCW0eE47V5l+1T8NL7xd4btde0SB7nVNJVw1sgy08DYLBfVlIyB3ye+K48LKMMVzSNqt54dRRyf7e97cHxP4V0cM0enR2Mk8ePub2cKSB7Ko/OvPPHmuR+Nrrw58NPh1YyzaZZssVuAhU3dwRgykYyFGWJJ9WJxV+9+Kvhzxr4E07wn8UtH1aTUNHPl2etaayfaFUDaRIkmATgAHnkgHg1oeF/i78PPhpp9x/wrbwVf3OtzoY21fXZkLgcdFToM87Rt6DJNewqbSjpdrbt6nmqbSaXU9v+I3iXTfgH8CNO8L6Zcxvrz2ZtrFV6tKeZbgjsoZieepIFcT+xZ4EuLW0vfiBqsbCW+Q2+n7/vGPdmSXn+8wAB9j61xPgH4beM/i54qHjP4h3V3Hp0rh2acbJLpAciOJP+WcfbOAMdMnmvr3Sobazs4bO0hjt7eCMRxRRrtVFAwFA7ACvPxVeMIulF3b3OmhRb99mgBThwc01JF9R+dOyG7ivOSRs0ODjOMUoHtUZZRTlkAGM07IVmfmPFER96p1hQ9QRVvUolivXCjAODioVre56FrF3wVMbXxDJaSMfLuUOw/wC0OR+ma7yUbUHevML1pYQl1bsVmhYOjehFdzoGtwa1pyzJhJk4miz90+v0PauXEwd1NGlGaXus6CxPSt6yJwKwLPtW5YngVgmXLU3bHkZrVtu1ZGnt8uK2LUZqkckzZsyQBg1q278DIrKsxnA9K1bZflFaQOVl+FhxVyI1ShHSrSdeK2sQeDfHdG/4Si7ZRy1xa7ffha8x1oqk+1v4Tz6gHr+H8q9T+Ox/4qRwDgtNbgH8BXlerhRdlGIIGclfve//ANeu6HwogwZxIAquVChx6FSMdqgLeXBuVtjqvyqvIP0qwxwwJYY4GV5BH07VVYZjBKkHb8rJ6Z9K0KIJF3OWOxwccDipCqoW/wBYG8wYz6U5ypYkbXPynng0rDYCzJJgyDBHQUwE3bnbc5HzYGR7UfeO1WJBHYYqU4+9I3G4jLLnt3pvDFFB52+nPtSuBEyK2Fj37+hxwDTPLB2QyRjqQXLfp9KnAL4jCuG6AnigoPlhkRRyf3jHp/jTAjhZQsaSEBQpICL1P1qWLcg+ZVZHUEswyQM1GrCNlSYM8YB+5xz9amiHkqplKmN1BPO44zQAT4VCxLNEwO1iOf8A9VXvAi79XgUAEm4i/wDQqpTOI4JFUHynBYDOWHp9K0fh2D/b1nj/AJ+ov/QqT2Bn3f4OcLocOfetjzlHeuV0nULaz0qFJJVQhckE1n6t480KwjYzahCCvUbq8erP32d1KjKUUXvE/gTwJ4iuHuda8LaXd3D5LTGALIxPcsuCT9ai8PfD/wCH+hTCbS/CmkW8yYKymAO4x3DNkg815zr/AMb9ItQVs1e4f26VxWp/HfWpXItLKKNexJzTVSs1ZXsaLDRT1Pp97mAuMEVIb2GNAd+DXybb/GnX/MLTxI2ey1saf8Z7iWVVvLOQp6o3IrGSqLodEcPF9T6WfU488Gk/tIHox/CvFtN+JWn3SgRicN6MuK6HTfFHnkERnH1rN1WtweEfY9Wjuy6Ag9aUXDetchpmtGRQpUqPrWmL9scEGrVZMweGaZ8H60c3v4YqvjgU+9bzbvNP2fKK9BFS3K8y7o2HqKw7C7utMvhdWj7XQ4I7MO4I7iuhcYUk9hXNzcO4960hrdM5q2jTR654Q1yz1m33QtsnQDzYSeV9/ce9dhY9q+crK4ns7tLq1meGZDlXQ4Ir07wh8RLZilvrqCB+guEXKH/eHUfUcfSuWrhXHWGxpCupL3tz1qwU1u2C9KwNIuILm3S4t5o5oX5V0YMrfQiuhsDnFcyFNmvaLitS36Cs625xWlbjgVvE5ZluHpVmOq8Yq1EK2Rm2eE/tBHf4jtUzj99CMjr0avLdYZVuWTAkTJIwMZ9a9T/aCSM+JLYSNtQyxEnP+y1eWa0QlyVT51DHJP8AF/hXZT+FEHPzMAFK9QwyV64z3FVmPQMCz7DtZTjHPpViY8BQNz5Dehx71WkUNLGp5+QkHGGrUoaSAzAMrZ29R0p7/IWXg/vRyjVHMyo7lfMBCjcCtPVV+Yoqk+auADz0oAkUFS29pB+8IxnOOKH3FhkuBt//AFUMqrkMHLeacjPtSMgLKCHVcdTSAUfOFSXP1LUhdRthcIYwThxycUknzeWpChQeGPb60DCsvmELEST8q5oAdG6K6iRZJYtjAKvAz9acqGJPkIZWALKvJ69KjH7tVZ0eRGDYycVMqsiCSEloyFLhOg+tMBLgeXBIVw8TocqP4T2zWr8NV3a/YEf8/kf8xWTcHy7d3j2ujLhl7Anv7mtz4VJ5nibTkP8Az+JSewM7b4sa1qsfjO9tIr6aOCPaFRWwB8orhZpJZWLSSO5PUls1654v8H3WseN76427YXK/Oen3RWjpPwy0CIBrpJrp+p3OVX8hXlTrQjJo9mlGTpx9DwwoSwUAkngAdat2mh6veSbLfTbpz/1yIH5mvpTT/CWjWe17TS7WJh0ZYxuH49a27TTVyAV4rN4nshtWPnzQvhV4j1Aq0nkWynsxLN+nH616P4f+A1mDFNqOrXDEctGiAfrXrmmWIQgBK3obVh1FYTrTkLnaOCsfg/4YjQNG92rf3t9dFpXw80W1AHm3T47lwP6V1EUe0YqeKRQ2M8is1TvuRUxNVqyZTtPC2kxIAI3OP9qryaHpyjAtxj3JqzG9TBxjrW6pxXQ4J1qt9ZH5sRqSxY9SatbPkFEcYzyKtmPIGK7Wz0LGbeDZaSN7Yrmbv/Wmup1oCOxIzyzAVzN4uGDVtSOSvvYrKealWoR1qdORWrOdGjomu6zoNx5+j38lvk5aPrG/1U8V6t4N+NFluSDxJYvaP0NxbgvH9Sv3h+Ga8aI4qGVc1nKlGe6KUmj7P8MeINH1y3E+k6jbXid/KkBK/UdR+IrprdgQMGvgi2uLmzuFuLS4lt5lPyyROUYfiOa7/wAN/GXx3o21H1GLVIV/gvY95x/vjDfqayeHa2ZLdz7Ghq5GK+d/Dv7SGn/Kmu+HLmA/xSWcwkX/AL5bB/U16BoXxv8AhvqG0Pr5sXPG27t3jxxnrgr+tLkkuhDRxv7RLBfE9mjDKsyZ/BWry3WsJcsY8lMlfm4ye2a9F+N+raZret6dqWj39vfWb4KTQtuVsK2a8917AnLD5eTjH+ea64fCiDnJiePl3bSCqt9emagZl3xBuMqR83Xr61NcZWMfLgZGOcrnPSokkSJgkioykEnccqvNalEVxuE7qgZcY4yGBFI7qpdyVOHGR0qW6XcrOi7GboE+7j29qrlixdFYgZGcjNAFghSu5YmbMhPEntTWGGXcDjH97iq8gVGdldSM9MVLvU7Vbyiqj060gJN6thJMIpPXr1pyuV2+aXeDnhRj6803cEwrsDGRxtXp+NKrOQrFHkUg4UHg0ANbdAyzKUbKn7/P6VKHIKyRZdBtLKflX/69QRgqpZCpPlncOpWrHyu6vCeVKja5zn6UwG3efs0kqY2kYII9fSuj+EK58U6b73a/yrmroq9tK6ZVgAHUkZx/Sur+DCb/ABbpYx/y85/Sk9gZ9L6gmL5uOw/lVi0QHApb+PN6x9l/kKntVVSM4r5yov3kvU9+m/3UfRGppsK9GHGa0YrQK/HIqlayIo4IrVtplZeozTSMZtlm2QKBnqK0kdSOlZW8A5zUqXGK0irHPI0yQBkVDvG8kVWM5YcmonnwevNW2TFM17eTccZq0vA61z0N7sfIwatf2jIf7tOMkTKm2fB4gKnpUgQgVpyW4Haq00W1ScVvc7TnfEbrsSPd8wIOPzrBuF3RnA6c1e1KQz6hK38IbA+g4qs67eK6YKyOGpLmkzLI5qeAgim3KbJcDoRkUkJw3sa1exgWwgIqGWMjtViE5/CpHj3rx17VFyrGUy+tRkYq5Kme3NVmFaJkNEfU04JnihR8wqzEnNNsEjv9Lby/CGgR/wAReRh+bf40/XDulLFCpAO0d8e3vVdZli0DQlzyqSN/49UuvNlnMg3EjOM9qaMnuc9IcDfuyxIwRyM59KqgkDcPulWztOQPwq1Iq7sAZyQCejDmqbgbywwxw27bwfarGNmZ2DoWQ4RSO1RybsSBFYMCueetPlGT5e4fcG3d/jTHjBeUBMFWXJU9RQASyDbIykkkjIxTmlyzZY7do4x/Kmz9HMYk+9zmnov712YSFcDIzzQBIGk8sM+9owOFxx70qyNGyz7FK7SSC2D75AoKtFFnazKVxhjx75qNcRhZkdCxjPyn5qAJEfKnyHJcx5ZQP61ZKxs6yxqYpQQu3OSxxVZkV4P3XmErCC4zgVOP3p2n5JM8BeOMdzQAl7h7aRgmx1A3jJ59z/hXZfAtf+Ky033lc/8AjprjLzbJaMW2rIijIHAI9vWu3+A67vGumD0dz/46aT2B7H0He36tdyEsqkHbjPpxToL9M4Mi/nXzb4w8d65a+JtTggv5Qkd1IqjjgBjXP3vxB8WXClRqRRf9hFB/PFeS8JOUr3PVWJhGKR9ex6tbxDMkyKPUmli8ZaHGT/xM7divUK+cV8Sz63rN9KftWp3UvrulNW9I1OezuPmlZo2OGGabwTXUSxMG9UfZ8/xB0KFA32zdn+6M1Tn+KegxcBppD6JHj+Zr5tgvy0askmVI4Oaf9sbOSSaz9lY3UIs+h5/i1pKoWihuZD6FQP61nf8AC34hN+/05vK9Y5MsPz614ULtz0JqVJncc5pOmh8sV0PfLT4saHIfmgu0PYFR/jW1a/EHTZk3JHJj/aNfOlorMwNbdveSxJtVhispRtsXGnF7lKaAk9KztZQ2+mzzf3UJFdJPF85rnfHMgg0Nox96Vwv4dT/KuuOrSMZu0WzztBkkmklHFSKOTSTD5TXUeeUbtcqD6cVWAxV9l3Iw9RkVTxVpkMmhboauxnI471nx8Grlu3alIaC5i/jA+tUJ4+CwrXGCMGqM6bHK9qIsckZ2KswN0pkqYPHSmIdrA1e5C0Ox1VmTR9FccAWxOf8AgVW9QlR4N4KsGTczdRj0qTVIjL4K0WTAIS3IJx0+YnFZEFy8lrtYhChO3HpWkdjF7kD4KiPnGQMHsM8HNVDu3kMSxUNkNwSKssc87gEON2Rkdf51Vfbhly3yhuT0IqhjJBtVvmYJtHPXmmuWfeMqCGXGeCac/lmN2KnYyqflPQ0kudrgv/EMMRQAyVS7y9sEfxU/O1pGAzwON386ZKwZ5CxUMCB060OQGkJRAwwBke1AE5wjB0CM+3OGOadGQNhhYec0fKovIqKNmRv3Mm6Qrk/L04pw+f5QX8wJ8xICg8etAEjJHLCduFIQEmQ/eNWRtdjvwD2Y8AcVXkKuNuERlVQp6ljUrZMrxysUkJzuPJ6fpQA3UWVrcrIQJFxgkH5vpXoP7PaBvG9nkdI3avOdRfEawyIQ6kYYD731Nenfs6oW8ZxMvSO3Yn8cVMthPY8w8Z5bxhq4H/P9N/6GazXQBa2PFqY8W6w3c303/oZrJnPy/WszboMtYxy/rUjrk59KWAfLinmk2FtCSw1Ke0m2cmMn7p7V01ncpcoGjcH1Fce4+cNV3TJWhuEYE4zyM1nOCep0Ua0oux2cCg9auRADpVKMlatRMTg1xs9E1LUbVz3q0CcVSs23Airgz2rFlpm/NETk15/8Q5S17Da54jTcR7mvUhAO9eS+O2D+JLwKchWCj6AV00fiOOs7ROaAw1JKuQac4waQ8iuk5CmDjB9DVZxtcj3q2ww5FVp/9Z+FUiGNWpojhhUQqQChgi6p6Vp6P4eudanXayW8C/flfsPYdz+lZMRyme9aniFJzfCCDcURFU4OB0+tOEbsU5NLQXxrpWg6eETSdQlnmUATI2GUe4Yd/auTkUlgACSeABXTaTpsl7eRW6xB2kcIoIyCSa7rxRY6b4N0wraW0P2xouZQg3MxyAB6Vo1Z6GSnZanU6L4VOp/DKLT3jC3MaB4SRjnGMV4jrFpc6ZqEkE0TJJGSGU+tfUvhKQHwZpcspPnGzj3k9Sdo61w/xJ8JW3iBGurUpFfKO/Ak9j7+9KLtoZJ6nhsc+5d8hHrgfXpimD5xvj4A3bSO/wCFS6rpl1pl00F3C8boejcYqmJQud5zkHGOMVqWiR2UhmUAggBu3NEhIEisWwXGD1FMaUsC7YBwBtNNLrtZgCVLjv0oGSMThwzfxcfLSAuWcfNux1x+dIzcEMThm4OaaSx3Ll8HnOcUCLKuxl3xbg+3071JJEkluCM79mXJ9qqOwf5Qu0bRli3BqzazROyoxVVUcEd6BighkZXUhiFCKox+tOEib3SU9CcMB3x61VluBIrF1MjYwnOMVNZWV/fyLb28btuPCgd6AI7iSV3SJpBNtGEC+9fQX7PPhu60i0ku7+Ex3N3goh+8iD1HbNcr4E8E2ekul/qmy4vBykeMpGff1P6V7F4UfbdpI/c1nKV9CWz5Z8bwSQeLtXjmjaN/tkpwwwcFiRV/wzeaHY2ptdX0oXUjkuXKAlQeg55FdX4yudP174g65p2pwqzrcn7PMnDcAcZ7iuQ8QWNrHqkiyyyWkzchimY3z346Uox7luV0X7nQ/DOqW9xc6HfPazRRmRreQZBx6Z5/ImuLaul8P2ckGpK7yxSQOjI7xvkAEd65uUDeQDkZ4NKSsyoNtETDmr2nw7mBqmFLMAK29MjGAO9RN2RrTWp0EanyI39QM1NAecU+3jH9nNn+EE1FFzgiuFnqU5XRp2RxIPer4IrNtDkgd60VViKye5odnqEqwwtIxwqjJNeKaxd/bNSuLnGPMkJH07V6z4/ZoNCkVSQZDtJ9u9eOzr87EdK6aK0uedUlcq3J/dsR6UicxhvUUXP3CKS05th7Eit2ZJkM4wwNU7g/vAPatCddyms24/1o/wB2riTIUVIp4FRKeK6bwz4cN9D9tv3aC16qO7+/sKdib2G6HpIkhW8vZfJtWOVUDLyY9B2Hua25JbXH+j2cUY9WG5j+JqbUYQkLQ20hm2p8ikfdHvXMxLco7TSTuzkYAB4ArWMbGUpcx0fhvVGi8R2A3Fbf7SgkLcDrVj44TyNrFtH/AMs1TIHqf8k1yNrK0WoW5BwyyqRn1yK634oBtUsUvokJeA5f/dPWn1IOj+Ffiu4udHTTryUtJAm1dx6r0B/pXUXd0GyQa8O8HX7wyqsQzcwMXiXOPMQ/eT69xXpNhrEGpWYnt5MjoR3U+hFS46iaHa9bWuooY7yFZB2J6j6GuE1jwdEzNJY3O0/3JOn512d5cMBlhn3rKnuQc801oNM8+u/Duq2/LWzSKOdyHcKzpYLiMkPFIvOSGSvQ55yOjVUe8kXIDnFVcZwgDn7wyKcqMeAhI+ldmb+TkFgR6ECmnUmX7uM+wFFxnMRWt1NhIrVjj0XrWlb+HtUutvmII1HrgVqDVLg96lS+lbq5+gouA/TfCdlCQ13c7yP4VrrdK+x2ShbKBEOMbu/51zdtI7kdea27FSMZNSxM6jTpDJIpY5roLjW4tK0+S4LgMikjnvXIRXiwx5zjFcd4x1+SeN4UYlAfmPYVKVxWMFNSku/EE965xMbneW9ea7HxLdx2t5ay+RbyK0bL+9XIByDXnfh2GW61mOOMEl2Bb2ANdn4ulU3MMefuoTg/Wre5QW2p2jsd+mWPoSg25rnfEdhpyxyXlgzREMN1uTuAB7qfTPY0kkUbNkoM+orcs9O066txIbfcowHQsevvik0gTscRbLl810GjRF5lAHuau614bWC3bUNNVjCvMsROTH7j2qXw3CMGQ9+BXLVdkdVKz2NiOE/YJRj+A/yrEsJth2Ofl7H0rro4gthKxHARj+lcNETtBrmh71zti+VnS2vJBU10elpG8R8xdxGMGuDtLuWBvlbj0NdJpusssGGUfgKznBnTGSZ6J490hp/D5ZCD8prwm5QqxBGCK+nvF0Ea6dOoGBjpXzl4jRU1OcKMDdXVT0R46d2znrkc02wGY5E9GzU10BtNUVkeKQlDjPWteg+pZcVm3qfv8+1aSktGCepqhdD9/j1IoiD2NjwfoR1Gf7VcqRaRnof+Wjen09a6XXNQknlh02xTMjEKoXv2FWpCLXQreK3VY04TAHbFVfAMST399fSjdNEnyE9Fzn/Ct4rqczYX0H2S0FlGxYjmZ8/ff/AVmpa92GSegroLlFOCRnnNV5pTaKLmJEMm9UG4ZAB4J+tO5Nzb8C/Cu48UImo3F4LO134BC7mcg8gD+tUNVmhtNXvtKdw32eR4mJGN2Dj9a7XwHd3Wl+GbCO0uJFXYzkE5ySxJP5mvD/Eeo3c3ivULqSTMkszs/ocms6cpTbuVJWKGrqljq7fY3KqGDxsp5U+n4V0Ohah9qn+12bpbaj/y2iPEdx/tD0NSeLPD2nWvgfSNbgEq3V1kS5fKnHfB6VyFi7qySKxVweCK1TUkJo9UttXtrki3u1+yXOPuP0b6GquowqrEjj6VR0VxqEUUN5HHMjLn5hyPoah8Ro2leWttNKUc42yNuA+negViG5yM/NWdNIQfvVG15M8jKxGPpUF1IwyRjNMolLk96aWqskrH0oZ2xTAtK49as28qgjNYc0zqeDRFcSl/vUAdhaXKrg5FaKagiLlmAArk9OZnIBY16X4X8O6WuiSavPAbueMFkSc7owQP7oxn8ah6AzFjivdTt3uDILHT0/1l3MMLj/ZH8RrivFGpWNxKlnpcbLZwk/vGPzTN3Y1N4s8RarrVw0d5OPJRsJDGNqIB6CsvQkV9SjVhkYJ/Q09tQR0fghLO2tZL+SVfPJKBe6j6e9Vdd1Pz9SDMSFK8cdOagkkaGaUxgAsqseO+0U66hjmWF3HMmQ2PbpUt21KUbuxLbEOwB79DW1pMv2S4DspaNhtkX1Fc1pTsYOT91iBXUWSKzqD3qiGdLAfsk4ZcSQyD8HU1HcaRFZzLLaD/AEWX5lA/gJ7VcWFF0vbjIjxtz2zV3SP3ljJHINyg8A9qwqw54l0puEipNGF0i6J6LC38q87XgCvTbz5fD+okdfIYV5mvQVxUdmen1HxjNWoneNcKetQW/f61OeKtmi0P/9k=";var XI=pe('<div class="category-select svelte-cfuy64"><!></div> <!>',1),YI=pe("<!> <!> <!> <!>",1),$I=pe("<!> <!> <!> <!> <!>",1),KI=pe("<!> <!> <!>",1);function Kw(r,e){He(e,!0);const t=()=>Ie(e.categories,"$categories",n),[n,i]=Mt(),s=[{name:"Just Chatting",src:Vg,id:0}];let a=null;function o(l){a?.addManualCategory(l,"manual")}hn(r,{title:"ÐÐ°ÑÐµÐ³Ð¾ÑÐ¸Ð¸",children:(l,u)=>{var c=KI(),f=be(c);rt(f,{style:"align-items: flex-start;",children:(p,v)=>{var m=XI(),g=be(m),_=ye(g);as(qI(_,{get categories(){return e.categories},get selected(){return s}}),w=>a=w,()=>a);var b=ee(g,2);m1(b,{onload:o,accept:"image/*",tooltip:"Ð·Ð°Ð³ÑÑÐ·Ð¸ÑÑ"}),le(p,m)},$$slots:{default:!0}});var h=ee(f,2);rt(h,{children:(p,v)=>{var m=YI(),g=be(m);Se(g,{label:"X",get value(){return t().x},set value(S){ce(e.categories,R(t).x=S,R(t))}});var _=ee(g,2);Se(_,{label:"Y",get value(){return t().y},set value(S){ce(e.categories,R(t).y=S,R(t))}});var b=ee(_,2);Se(b,{label:"W",get value(){return t().w},set value(S){ce(e.categories,R(t).w=S,R(t))}});var w=ee(b,2);Se(w,{label:"H",get value(){return t().h},set value(S){ce(e.categories,R(t).h=S,R(t))}}),le(p,m)},$$slots:{default:!0}});var d=ee(h,2);rt(d,{children:(p,v)=>{var m=$I(),g=be(m);Se(g,{label:"blur",step:.1,min:0,get value(){return t().blur},set value(T){ce(e.categories,R(t).blur=T,R(t))}});var _=ee(g,2);Se(_,{label:"margin",min:0,get value(){return t().margin},set value(T){ce(e.categories,R(t).margin=T,R(t))}});var b=ee(_,2);Se(b,{label:"round",min:0,get value(){return t().round},set value(T){ce(e.categories,R(t).round=T,R(t))}});var w=ee(b,2);Se(w,{label:"shadow",min:0,get value(){return t().shadow.value},set value(T){ce(e.categories,R(t).shadow.value=T,R(t))}});var S=ee(w,2);wr(S,{get hex(){return t().shadow.color},set hex(T){ce(e.categories,R(t).shadow.color=T,R(t))}}),le(p,m)},$$slots:{default:!0}}),le(l,c)},$$slots:{default:!0}}),Ve(),i()}var ZI=pe("<textarea></textarea>");function ql(r,e){He(e,!0);let t=ge(e,"value",15,"");var n=ZI();n.__input=function(...i){e.oninput?.apply(this,i)},n.__change=function(...i){e.onchange?.apply(this,i)},qe(()=>{Qe(n,"placeholder",e.placeholder),Qe(n,"tabindex",e.tabindex)}),go(n,t),le(r,n),Ve()}is(["input","change"]);var JI=pe("<!> <!> <!> <!>",1),QI=pe("<!> <!> <!> <!> <!>",1),eB=pe("<!> <!> <!>",1);function Zw(r,e){He(e,!0);const t=()=>Ie(e.title,"$title",n),[n,i]=Mt();hn(r,{title:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº",children:(s,a)=>{var o=eB(),l=be(o);rt(l,{children:(f,h)=>{ql(f,{placeholder:"Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº",tabindex:1,get value(){return t().text},set value(d){ce(e.title,R(t).text=d,R(t))}})},$$slots:{default:!0}});var u=ee(l,2);rt(u,{children:(f,h)=>{var d=JI(),p=be(d);Se(p,{label:"X",get value(){return t().x},set value(_){ce(e.title,R(t).x=_,R(t))}});var v=ee(p,2);Se(v,{label:"Y",get value(){return t().y},set value(_){ce(e.title,R(t).y=_,R(t))}});var m=ee(v,2);Se(m,{label:"shadow",min:0,get value(){return t().shadow.value},set value(_){ce(e.title,R(t).shadow.value=_,R(t))}});var g=ee(m,2);wr(g,{get hex(){return t().shadow.color},set hex(_){ce(e.title,R(t).shadow.color=_,R(t))}}),le(f,d)},$$slots:{default:!0}});var c=ee(u,2);rt(c,{children:(f,h)=>{var d=QI(),p=be(d);zr(p,{placeholder:"Arial",label:"font",width:100,get value(){return t().font.face},set value(b){ce(e.title,R(t).font.face=b,R(t))}});var v=ee(p,2);Se(v,{placeholder:"60",label:"size",min:0,get value(){return t().font.size},set value(b){ce(e.title,R(t).font.size=b,R(t))}});var m=ee(v,2);Se(m,{placeholder:"60",label:"lh",min:0,get value(){return t().font.line_height},set value(b){ce(e.title,R(t).font.line_height=b,R(t))}});var g=ee(m,2);zr(g,{placeholder:"bold",label:"weight",width:40,get value(){return t().font.weight},set value(b){ce(e.title,R(t).font.weight=b,R(t))}});var _=ee(g,2);wr(_,{label:"color",get hex(){return t().font.color},set hex(b){ce(e.title,R(t).font.color=b,R(t))}}),le(f,d)},$$slots:{default:!0}}),le(s,o)},$$slots:{default:!0}}),Ve(),i()}var tB=pe("<!> <!> <!> <!>",1),rB=pe("<!> <!> <!> <!> <!>",1),nB=pe("<!> <!> <!>",1);function iB(r,e){He(e,!0);const t=()=>Ie(e.description,"$description",n),[n,i]=Mt();hn(r,{title:"ÐÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ",children:(s,a)=>{var o=nB(),l=be(o);rt(l,{children:(f,h)=>{ql(f,{placeholder:"Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ",tabindex:2,get value(){return t().text},set value(d){ce(e.description,R(t).text=d,R(t))}})},$$slots:{default:!0}});var u=ee(l,2);rt(u,{children:(f,h)=>{var d=tB(),p=be(d);Se(p,{label:"X",get value(){return t().x},set value(_){ce(e.description,R(t).x=_,R(t))}});var v=ee(p,2);Se(v,{label:"margin",get value(){return t().gap},set value(_){ce(e.description,R(t).gap=_,R(t))}});var m=ee(v,2);Se(m,{label:"shadow",min:0,get value(){return t().shadow.value},set value(_){ce(e.description,R(t).shadow.value=_,R(t))}});var g=ee(m,2);wr(g,{get hex(){return t().shadow.color},set hex(_){ce(e.description,R(t).shadow.color=_,R(t))}}),le(f,d)},$$slots:{default:!0}});var c=ee(u,2);rt(c,{children:(f,h)=>{var d=rB(),p=be(d);zr(p,{placeholder:"Arial",label:"font",width:100,get value(){return t().font.face},set value(b){ce(e.description,R(t).font.face=b,R(t))}});var v=ee(p,2);Se(v,{placeholder:"60",label:"size",min:0,get value(){return t().font.size},set value(b){ce(e.description,R(t).font.size=b,R(t))}});var m=ee(v,2);Se(m,{placeholder:"60",label:"lh",min:0,get value(){return t().font.line_height},set value(b){ce(e.description,R(t).font.line_height=b,R(t))}});var g=ee(m,2);zr(g,{placeholder:"bold",label:"weight",width:40,get value(){return t().font.weight},set value(b){ce(e.description,R(t).font.weight=b,R(t))}});var _=ee(g,2);wr(_,{label:"color",get hex(){return t().font.color},set hex(b){ce(e.description,R(t).font.color=b,R(t))}}),le(f,d)},$$slots:{default:!0}}),le(s,o)},$$slots:{default:!0}}),Ve(),i()}const Jw="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1280' height='720'%3E%3Cdefs%3E%3ClinearGradient id='a' x1='0' x2='0' y1='0' y2='1'%3E%3Cstop offset='0' stop-color='%2380F'/%3E%3Cstop offset='1' stop-color='%23f40'/%3E%3C/linearGradient%3E%3Cpattern id='b' width='24' height='24' patternUnits='userSpaceOnUse'%3E%3Ccircle fill='%23ffffff' cx='12' cy='12' r='12'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='1280' height='720' fill='url(%23a)'/%3E%3Crect width='1280' height='720' fill='url(%23b)' fill-opacity='0.1'/%3E%3C/svg%3E",Qw="data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:svgjs='http://svgjs.dev/svgjs' width='1280' height='720' preserveAspectRatio='none' viewBox='0 0 1280 720'%3e%3cg mask='url(%26quot%3b%23SvgjsMask1035%26quot%3b)' fill='none'%3e%3crect width='1280' height='720' x='0' y='0' fill='url(%26quot%3b%23SvgjsLinearGradient1036%26quot%3b)'%3e%3c/rect%3e%3cpath d='M50 720L770 0L1050.5 0L330.5 720z' fill='url(%26quot%3b%23SvgjsLinearGradient1037%26quot%3b)'%3e%3c/path%3e%3cpath d='M433.40000000000003 720L1153.4 0L1679.9 0L959.9000000000001 720z' fill='url(%26quot%3b%23SvgjsLinearGradient1037%26quot%3b)'%3e%3c/path%3e%3cpath d='M1237 720L517 0L212.5 0L932.5 720z' fill='url(%26quot%3b%23SvgjsLinearGradient1038%26quot%3b)'%3e%3c/path%3e%3cpath d='M783.5999999999999 720L63.59999999999991 0L-36.90000000000009 0L683.0999999999999 720z' fill='url(%26quot%3b%23SvgjsLinearGradient1038%26quot%3b)'%3e%3c/path%3e%3cpath d='M761.1341444415203 720L1280 201.13414444152033L1280 720z' fill='url(%26quot%3b%23SvgjsLinearGradient1037%26quot%3b)'%3e%3c/path%3e%3cpath d='M0 720L518.8658555584797 720L 0 201.13414444152033z' fill='url(%26quot%3b%23SvgjsLinearGradient1038%26quot%3b)'%3e%3c/path%3e%3c/g%3e%3cdefs%3e%3cmask id='SvgjsMask1035'%3e%3crect width='1280' height='720' fill='white'%3e%3c/rect%3e%3c/mask%3e%3clinearGradient x1='10.94%25' y1='-19.44%25' x2='89.06%25' y2='119.44%25' gradientUnits='userSpaceOnUse' id='SvgjsLinearGradient1036'%3e%3cstop stop-color='%230e2a47' offset='0'%3e%3c/stop%3e%3cstop stop-color='rgba(144%2c 71%2c 254%2c 1)' offset='1'%3e%3c/stop%3e%3c/linearGradient%3e%3clinearGradient x1='0%25' y1='100%25' x2='100%25' y2='0%25' id='SvgjsLinearGradient1037'%3e%3cstop stop-color='rgba(15%2c 70%2c 185%2c 0.2)' offset='0'%3e%3c/stop%3e%3cstop stop-opacity='0' stop-color='rgba(15%2c 70%2c 185%2c 0.2)' offset='0.66'%3e%3c/stop%3e%3c/linearGradient%3e%3clinearGradient x1='100%25' y1='100%25' x2='0%25' y2='0%25' id='SvgjsLinearGradient1038'%3e%3cstop stop-color='rgba(15%2c 70%2c 185%2c 0.2)' offset='0'%3e%3c/stop%3e%3cstop stop-opacity='0' stop-color='rgba(15%2c 70%2c 185%2c 0.2)' offset='0.66'%3e%3c/stop%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",e2="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='1280' height='960' viewBox='0 0 1280 960'%3E%3Cdefs%3E%3Cpattern id='polygonPattern' patternUnits='userSpaceOnUse' width='120' height='120'%3E%3Crect fill='%231B7DFF' width='120' height='120'/%3E%3Cpolygon fill='%231CABEE' fill-opacity='1' points='120 120 60 120 90 90 120 60 120 0 120 0 60 60 0 0 0 60 30 90 60 120 120 120'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width='1280' height='960' fill='url(%23polygonPattern)'/%3E%3C/svg%3E",t2="data:image/svg+xml,%3Csvg width='180' height='180' viewBox='0 0 180 180' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg filter='url(%23filter0_b_4708_581)'%3E%3Crect width='180' height='180' fill='%23E0353D'/%3E%3Cpath d='M127.965 100.325C128.202 96.5313 125.591 93.7559 122.915 91.3863C118.215 86.7356 109.585 88.8783 107.713 95.306C107.584 95.3316 107.523 95.2594 107.452 95.2072C106.34 94.3996 105.053 93.8537 103.693 93.6115C103.09 93.4223 102.322 93.6678 101.852 93.1866C100.213 91.5559 98.5517 89.9466 96.9076 88.3211C96.4885 87.8552 95.7153 87.7699 95.2308 88.1855C93.4715 89.8693 91.7662 91.6043 90.0088 93.2905C82.3937 86.6592 85.854 85.7404 78.1322 93.132C77.5571 93.6012 77.3765 94.3686 77.9098 94.937C79.626 96.6487 81.3706 98.3227 83.0868 100.039C81.4574 101.819 79.6175 103.443 77.9241 105.177C77.4737 105.674 77.4746 106.287 77.9269 106.791C79.6004 108.45 81.2881 110.099 82.9702 111.748C83.1489 111.888 83.2072 112.063 83.2162 112.292C83.2883 115.516 85.1026 117.66 87.3554 119.775C85.9995 120.192 84.7567 120.905 83.7195 121.859C82.6823 122.813 81.8773 123.985 81.3645 125.288C65.1695 120.475 57.6705 100.035 66.8477 86.1099C69.9818 81.2034 74.7226 77.5782 78.7404 73.4023C82.0248 76.3375 84.8888 80.785 89.8339 80.7096C98.161 80.915 102.235 70.7648 96.561 65.3556C94.9966 63.7407 93.3539 62.2219 91.7728 60.6219C97.8339 54.6583 103.574 47.5984 112.411 45.8093C127.227 41.9316 143.422 52.4606 145.592 67.2975C148.157 82.9655 138.193 90.4959 128.056 100.355L127.965 100.325ZM117.832 77.6248C117.581 70.9315 107.409 71.2922 107.592 77.8978C107.927 84.5579 117.932 84.093 117.832 77.6248ZM119.823 65.678C119.781 72.203 129.917 72.3689 130.056 65.7767C130.051 59.1241 119.887 59.1497 119.825 65.678H119.823ZM119.823 77.6984C119.736 84.2258 129.957 84.3898 130.059 77.7804C130.003 71.0932 119.902 71.1207 119.825 77.6979L119.823 77.6984ZM112.7 70.7387C119.398 70.7363 119.422 60.7724 112.741 60.6862C106.025 60.696 105.975 70.7107 112.7 70.7387ZM85.36 76.5075C91.2575 81.988 100.227 74.1314 95.4882 67.7885C90.6123 62.6668 85.3533 57.8819 80.3675 52.8557C74.2523 46.7705 65.1538 43.948 56.5891 45.4422C42.162 47.508 31.0804 62.5317 34.6867 77.5027C35.8278 82.4912 38.2044 86.8269 41.8733 90.4498C48.7228 97.1305 55.5087 104.015 62.4236 110.561C59.0733 102.139 60.0376 92.3549 64.8618 84.6688C58.9055 86.245 52.3755 83.6904 49.3391 78.3726C49.0949 77.9821 48.8901 77.5185 49.0963 77.068C49.3941 76.2033 50.6722 76.0365 51.1951 76.7908C53.9955 82.3337 61.7485 84.5579 67.1497 81.0613C67.675 80.7352 68.1875 80.389 68.6293 79.9557C72.0161 76.6818 75.3019 73.2807 78.7433 70.0706C81.0127 72.1369 83.1299 74.3914 85.36 76.5075ZM100.623 96.3086C95.6949 97.5009 94.0934 103.165 96.9725 107.024C92.1791 103.09 84.6977 107.517 86.0351 113.469C86.4527 116.016 88.6539 117.564 90.3563 119.315C91.3993 120.364 92.4963 121.362 93.5018 122.442C82.0206 117.506 78.7309 135.857 91.1708 134.969C95.9917 134.297 98.4573 128.414 95.692 124.528C102.508 128.38 109.462 121 104.826 114.74L104.878 114.667C111.394 119.534 119.303 111.718 114.426 105.253C121.257 110.303 129.374 101.495 123.598 95.422C121.309 92.9061 118.51 90.3529 114.827 91.4669C110.114 92.6051 108.443 98.0553 111.009 101.859C108.023 99.2317 105.25 94.9482 100.623 96.31V96.3086Z' fill='white'/%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_b_4708_581' x='-20.1111' y='-20.1111' width='220.222' height='220.222' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeGaussianBlur in='BackgroundImageFix' stdDeviation='10.0556'/%3E%3CfeComposite in2='SourceAlpha' operator='in' result='effect1_backgroundBlur_4708_581'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='effect1_backgroundBlur_4708_581' result='shape'/%3E%3C/filter%3E%3C/defs%3E%3C/svg%3E",Wg="data:image/svg+xml,%3Csvg width='180' height='146' viewBox='0 0 112 90' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M93.9654 55.3252C94.2024 51.5313 91.5907 48.7559 88.9146 46.3863C84.215 41.7356 75.5854 43.8783 73.7128 50.306C73.5843 50.3316 73.5231 50.2594 73.452 50.2072C72.3396 49.3996 71.0535 48.8537 69.6926 48.6115C69.0896 48.4223 68.3215 48.6678 67.8522 48.1866C66.2129 46.5559 64.5517 44.9466 62.9076 43.3211C62.4885 42.8552 61.7153 42.7699 61.2308 43.1855C59.4715 44.8693 57.7662 46.6043 56.0088 48.2905C48.3937 41.6592 51.854 40.7404 44.1322 48.132C43.5571 48.6012 43.3765 49.3686 43.9098 49.937C45.626 51.6487 47.3706 53.3227 49.0868 55.0387C47.4574 56.8194 45.6175 58.443 43.9241 60.1772C43.4737 60.6743 43.4746 61.2874 43.9269 61.7906C45.6004 63.4497 47.2881 65.0985 48.9702 66.7483C49.1489 66.8881 49.2072 67.0628 49.2162 67.2916C49.2883 70.5161 51.1026 72.6598 53.3554 74.775C51.9995 75.1923 50.7567 75.9047 49.7195 76.8591C48.6823 77.8135 47.8773 78.9854 47.3645 80.2876C31.1695 75.4752 23.6705 55.0354 32.8477 41.1099C35.9818 36.2034 40.7226 32.5782 44.7404 28.4023C48.0248 31.3375 50.8888 35.785 55.8339 35.7096C64.161 35.915 68.2348 25.7648 62.561 20.3556C60.9966 18.7407 59.3539 17.2219 57.7728 15.6219C63.8339 9.65833 69.5741 2.59843 78.4109 0.809348C93.2272 -3.0684 109.422 7.46064 111.592 22.2975C114.157 37.9655 104.193 45.4959 94.0564 55.3555L93.9654 55.3252ZM83.832 32.6248C83.5807 25.9315 73.4094 26.2922 73.5919 32.8978C73.9266 39.5579 83.9315 39.093 83.832 32.6248ZM85.8231 20.678C85.7814 27.203 95.9172 27.3689 96.0556 20.7767C96.0508 14.1241 85.8871 14.1497 85.8245 20.678H85.8231ZM85.8231 32.6984C85.7359 39.2258 95.9575 39.3898 96.0594 32.7804C96.0034 26.0932 85.9023 26.1207 85.8245 32.6979L85.8231 32.6984ZM78.6996 25.7387C85.3978 25.7363 85.4225 15.7724 78.7408 15.6862C72.0246 15.696 71.9748 25.7107 78.6996 25.7387ZM51.36 31.5075C57.2575 36.988 66.2271 29.1314 61.4882 22.7885C56.6123 17.6668 51.3533 12.8819 46.3675 7.85573C40.2523 1.77051 31.1538 -1.05195 22.5891 0.442212C8.16199 2.50805 -2.91958 17.5317 0.68673 32.5027C1.82784 37.4912 4.20439 41.8269 7.87328 45.4498C14.7228 52.1305 21.5087 59.0147 28.4236 65.5612C25.0733 57.139 26.0376 47.3549 30.8618 39.6688C24.9055 41.245 18.3755 38.6904 15.3391 33.3726C15.0949 32.9821 14.8901 32.5185 15.0963 32.068C15.3941 31.2033 16.6722 31.0365 17.1951 31.7908C19.9955 37.3337 27.7485 39.5579 33.1497 36.0613C33.675 35.7352 34.1875 35.389 34.6293 34.9557C38.0161 31.6818 41.3019 28.2807 44.7433 25.0706C47.0127 27.1369 49.1299 29.3914 51.36 31.5075ZM66.6229 51.3086C61.6949 52.5009 60.0934 58.1649 62.9725 62.0245C58.1791 58.0904 50.6977 62.5174 52.0351 68.4689C52.4527 71.0165 54.6539 72.5642 56.3563 74.3151C57.3993 75.3639 58.4963 76.3619 59.5018 77.4423C48.0206 72.5065 44.7309 90.8572 57.1708 89.9687C61.9917 89.2973 64.4573 83.4138 61.692 79.5277C68.5079 83.3798 75.4616 75.9998 70.8256 69.7399L70.8778 69.6668C77.3935 74.5341 85.3026 66.7176 80.4262 60.2526C87.2572 65.3026 95.3743 56.4951 89.5977 50.422C87.3088 47.9061 84.5104 45.3529 80.8273 46.4669C76.114 47.6051 74.4428 53.0553 77.009 56.859C74.0228 54.2317 71.2499 49.9482 66.6229 51.31V51.3086Z' fill='white'/%3E%3C/svg%3E%0A",r2=Wg,n2="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='358' height='146' viewBox='0 0 86 35' fill='none'%3E%3Cpath d='M38.5483 10.3587H40.5521V13.6884C40.0941 14.0176 39.5674 14.2702 38.9719 14.4462C38.3765 14.6223 37.7811 14.7103 37.1856 14.7103C36.3459 14.7103 35.5901 14.5342 34.9184 14.1821C34.2466 13.8224 33.7199 13.3248 33.3382 12.6895C32.9565 12.0542 32.7656 11.3347 32.7656 10.5309C32.7656 9.7272 32.9565 9.00768 33.3382 8.37235C33.7199 7.73703 34.2504 7.24331 34.9298 6.89121C35.6092 6.53144 36.3764 6.35156 37.2314 6.35156C37.9795 6.35156 38.6513 6.47786 39.2468 6.73046C39.8422 6.98306 40.3384 7.34665 40.7353 7.82123L39.2926 9.13015C38.7506 8.5331 38.1017 8.23457 37.3459 8.23457C36.6589 8.23457 36.1054 8.44507 35.6856 8.86607C35.2657 9.27941 35.0558 9.83437 35.0558 10.5309C35.0558 10.9749 35.1512 11.3729 35.342 11.725C35.5329 12.0695 35.8001 12.3412 36.1436 12.5402C36.4871 12.7316 36.8803 12.8273 37.323 12.8273C37.7582 12.8273 38.1666 12.7393 38.5483 12.5632V10.3587Z' fill='white'/%3E%3Cpath d='M47.589 12.988H44.1996L43.5698 14.5495H41.2567L44.795 6.51231H47.0279L50.5776 14.5495H48.2188L47.589 12.988ZM46.9248 11.3117L45.8943 8.73977L44.8637 11.3117H46.9248Z' fill='white'/%3E%3Cpath d='M58.6863 14.5495L58.6634 10.2898L56.6022 13.7573H55.5946L53.5449 10.4046V14.5495H51.4494V6.51231H53.3159L56.1328 11.1509L58.8809 6.51231H60.7474L60.7703 14.5495H58.6863Z' fill='white'/%3E%3Cpath d='M69.0389 12.7928V14.5495H62.6036V6.51231H68.8901V8.26902H64.8479V9.62387H68.4091V11.3232H64.8479V12.7928H69.0389Z' fill='white'/%3E%3Cpath d='M74.03 12.4139H72.7933V14.5495H70.5261V6.51231H74.1903C74.9155 6.51231 75.5453 6.63478 76.0797 6.87972C76.6141 7.11701 77.0263 7.46147 77.3164 7.91308C77.6065 8.35705 77.7515 8.88138 77.7515 9.48609C77.7515 10.0678 77.6141 10.5769 77.3393 11.0132C77.0721 11.4418 76.6866 11.7786 76.1828 12.0236L77.9118 14.5495H75.4843L74.03 12.4139ZM75.4614 9.48609C75.4614 9.11102 75.343 8.82014 75.1064 8.61347C74.8697 8.4068 74.5186 8.30346 74.0529 8.30346H72.7933V10.6572H74.0529C74.5186 10.6572 74.8697 10.5577 75.1064 10.3587C75.343 10.152 75.4614 9.86116 75.4614 9.48609Z' fill='white'/%3E%3Cpath d='M82.0482 14.7103C81.3994 14.7103 80.7696 14.6299 80.1589 14.4692C79.5481 14.3084 79.0519 14.0941 78.6703 13.8262L79.4146 12.1499C79.7733 12.3871 80.1894 12.5785 80.6627 12.7239C81.136 12.8694 81.6017 12.9421 82.0597 12.9421C82.9299 12.9421 83.3651 12.7239 83.3651 12.2876C83.3651 12.058 83.2391 11.8896 82.9872 11.7824C82.7429 11.6676 82.346 11.549 81.7963 11.4265C81.1932 11.2964 80.6894 11.1586 80.2848 11.0132C79.8802 10.8601 79.5329 10.619 79.2428 10.2898C78.9527 9.96067 78.8077 9.5167 78.8077 8.95793C78.8077 8.46804 78.9413 8.0279 79.2084 7.63752C79.4756 7.23949 79.8726 6.92565 80.3993 6.69602C80.9337 6.46638 81.5864 6.35156 82.3574 6.35156C82.8841 6.35156 83.4032 6.4128 83.9147 6.53527C84.4262 6.65009 84.8766 6.82232 85.2659 7.05195L84.5674 8.73977C83.804 8.32643 83.0635 8.11976 82.346 8.11976C81.8956 8.11976 81.5673 8.18865 81.3612 8.32643C81.1551 8.45655 81.052 8.62878 81.052 8.84311C81.052 9.05743 81.1742 9.21818 81.4184 9.32534C81.6627 9.43251 82.0559 9.5435 82.5979 9.65831C83.2086 9.78844 83.7124 9.93005 84.1094 10.0831C84.514 10.2286 84.8613 10.4659 85.1514 10.795C85.4491 11.1165 85.598 11.5566 85.598 12.1154C85.598 12.5976 85.4644 13.034 85.1972 13.4243C84.93 13.8147 84.5292 14.1286 83.9949 14.3658C83.4605 14.5955 82.8116 14.7103 82.0482 14.7103Z' fill='white'/%3E%3Cpath d='M39.3384 24.3521C39.7964 24.5129 40.1552 24.7655 40.4147 25.1099C40.6743 25.4467 40.8041 25.8562 40.8041 26.3385C40.8041 27.0427 40.5216 27.5861 39.9567 27.9689C39.3918 28.3516 38.575 28.543 37.5062 28.543H33.1779V20.5057H37.2772C38.3002 20.5057 39.0788 20.6971 39.6132 21.0798C40.1475 21.4549 40.4147 21.9639 40.4147 22.6069C40.4147 22.9896 40.3193 23.3341 40.1285 23.6402C39.9452 23.9388 39.6819 24.1761 39.3384 24.3521ZM35.4222 22.1476V23.6976H36.9795C37.7429 23.6976 38.1246 23.4374 38.1246 22.9169C38.1246 22.404 37.7429 22.1476 36.9795 22.1476H35.4222ZM37.323 26.9011C38.1169 26.9011 38.5139 26.6293 38.5139 26.0859C38.5139 25.5424 38.1169 25.2707 37.323 25.2707H35.4222V26.9011H37.323Z' fill='white'/%3E%3Cpath d='M47.5778 26.9814H44.1884L43.5586 28.543H41.2455L44.7838 20.5057H47.0167L50.5664 28.543H48.2076L47.5778 26.9814ZM46.9137 25.3051L45.8831 22.7332L44.8525 25.3051H46.9137Z' fill='white'/%3E%3Cpath d='M54.2551 28.7037C53.6062 28.7037 52.9764 28.6233 52.3657 28.4626C51.755 28.3018 51.2588 28.0875 50.8771 27.8196L51.6214 26.1433C51.9802 26.3806 52.3963 26.5719 52.8696 26.7174C53.3429 26.8628 53.8085 26.9355 54.2666 26.9355C55.1368 26.9355 55.5719 26.7174 55.5719 26.281C55.5719 26.0514 55.446 25.883 55.1941 25.7759C54.9498 25.661 54.5528 25.5424 54.0032 25.4199C53.4001 25.2898 52.8963 25.152 52.4917 25.0066C52.0871 24.8535 51.7398 24.6124 51.4497 24.2832C51.1596 23.9541 51.0145 23.5101 51.0145 22.9513C51.0145 22.4614 51.1481 22.0213 51.4153 21.6309C51.6825 21.2329 52.0795 20.9191 52.6062 20.6894C53.1406 20.4598 53.7933 20.345 54.5643 20.345C55.091 20.345 55.6101 20.4062 56.1216 20.5287C56.633 20.6435 57.0834 20.8157 57.4728 21.0454L56.7743 22.7332C56.0109 22.3198 55.2704 22.1132 54.5528 22.1132C54.1024 22.1132 53.7742 22.1821 53.5681 22.3198C53.3619 22.45 53.2589 22.6222 53.2589 22.8365C53.2589 23.0508 53.381 23.2116 53.6253 23.3188C53.8696 23.4259 54.2627 23.5369 54.8047 23.6517C55.4155 23.7819 55.9193 23.9235 56.3162 24.0765C56.7208 24.222 57.0682 24.4593 57.3583 24.7884C57.656 25.1099 57.8048 25.55 57.8048 26.1088C57.8048 26.5911 57.6713 27.0274 57.4041 27.4177C57.1369 27.8081 56.7361 28.122 56.2017 28.3593C55.6674 28.5889 55.0185 28.7037 54.2551 28.7037Z' fill='white'/%3E%3Cpath d='M65.5165 26.7862V28.543H59.0812V20.5057H65.3676V22.2624H61.3255V23.6173H64.8867V25.3166H61.3255V26.7862H65.5165Z' fill='white'/%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M17.8484 32.3762C17.8484 32.3762 21.7337 28.5373 22.5805 23.3751C24.8584 23.3751 26.2654 17.887 23.9871 15.9561C23.9952 15.7834 24.023 15.5248 24.0585 15.1963C24.4399 11.6579 25.6965 0 12.5732 0C-0.548609 0 0.7064 11.655 1.08758 15.195C1.12303 15.5241 1.15092 15.7832 1.15899 15.9561C-1.11914 17.887 0.287659 23.3751 2.56567 23.3751C3.41236 28.5373 7.29775 32.3762 7.29775 32.3762C8.09939 33.1835 10.2768 34.7982 12.5732 34.7982C14.8696 34.7982 17.0469 33.1835 17.8484 32.3762ZM4.26764 19.8591C6.92754 24.2208 10.9345 21.1863 10.9345 21.1863C11.3922 20.8411 11.9318 20.5869 12.5586 20.5924C13.1854 20.5979 13.6858 20.8439 14.1367 21.1845C14.1367 21.1845 18.144 24.2197 20.8043 19.858C23.4638 15.4978 22.392 10.7493 22.392 10.7493C22.2043 9.58662 21.5854 8.81075 20.4175 8.90821C19.2529 9.00528 16.7252 12.0394 16.7252 12.0394C16.5164 12.2894 16.0789 12.4937 15.7541 12.4937L9.31969 12.4948C8.99448 12.4948 8.55736 12.2905 8.34894 12.0405C8.34894 12.0405 5.82085 9.00641 4.65444 8.90933C3.48803 8.81188 2.86765 9.58849 2.68101 10.7504C2.68101 10.7504 1.60773 15.4982 4.26764 19.8591ZM7.20848 18.8402C7.20848 18.4262 7.54475 18.0906 7.95955 18.0906C8.37435 18.0906 8.71062 18.4262 8.71062 18.8402C8.71062 19.2542 8.37435 19.5898 7.95955 19.5898C7.54475 19.5898 7.20848 19.2542 7.20848 18.8402ZM16.8752 18.5073C16.8752 18.8169 17.1267 19.0679 17.4369 19.0679C17.7471 19.0679 17.9986 18.8169 17.9986 18.5073V17.2875H19.2206C19.5308 17.2875 19.7823 17.0365 19.7823 16.7268C19.7823 16.4172 19.5308 16.1662 19.2206 16.1662H17.9986V14.9465C17.9986 14.6369 17.7471 14.3859 17.4369 14.3859C17.1267 14.3859 16.8752 14.6369 16.8752 14.9465V16.1662H15.653C15.3427 16.1662 15.0912 16.4172 15.0912 16.7268C15.0912 17.0365 15.3427 17.2875 15.653 17.2875H16.8752V18.5073ZM7.95971 14.7174C7.54491 14.7174 7.20864 15.053 7.20864 15.467C7.20864 15.881 7.54491 16.2166 7.95971 16.2166C8.37451 16.2166 8.71078 15.881 8.71078 15.467C8.71078 15.053 8.37451 14.7174 7.95971 14.7174ZM6.2698 16.4038C6.6846 16.4038 7.02087 16.7395 7.02087 17.1535C7.02087 17.5675 6.6846 17.9031 6.2698 17.9031C5.855 17.9031 5.51873 17.5675 5.51873 17.1535C5.51873 16.7395 5.855 16.4038 6.2698 16.4038ZM10.4007 17.1535C10.4007 16.7395 10.0644 16.4039 9.64961 16.4039C9.2348 16.4039 8.89854 16.7395 8.89854 17.1535C8.89854 17.5675 9.2348 17.9032 9.64961 17.9032C10.0644 17.9032 10.4007 17.5675 10.4007 17.1535Z' fill='white'/%3E%3C/svg%3E",sB=(r="#f27930")=>`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 378 125'%3E%3Cpath fill='${r.replace("#","%23")}' d='M351.8 23.6 328.7 59.5 326.4 23.6H307.1 301.1 293.2C296.3 13.1 298.7 4.6 298.7 4.6L300 .4H274.5L273.3 4.6 267.8 23.6H246.1C242.5 23.6 240.7 23.6 240.7 23.6 218.4 23.6 205.9 30 200.7 42 197.7 31 187.8 23.6 172.5 23.6 159.3 23.6 147.6 28.5 138.9 36.3 134.4 28.5 125.5 23.6 113.1 23.6 98.9 23.6 86.6 29.3 77.6 38 73.5 29.3 64.2 23.6 50.9 23.6 46.3 23.6 42 24.2 37.9 25.3L39.9 18.4C39.9 18.3 40 18.2 40 18.1L45.1.4H19.7L3.5 56.2C3.1 57.3 2.7 58.4 2.4 59.6 1.7 62.2 1.2 64.7 1 67.1-1.1 82.7 5.7 94.4 24.6 95.2 26.3 95.4 28.1 95.5 30.1 95.5 43.5 95.5 56 89.8 65.2 81.1 69.1 89.8 78.2 95.5 92.3 95.5 104.8 95.5 116.6 90.6 125.5 82.8 129.8 90.6 138.6 95.5 151.7 95.5 180.1 95.5 201.3 95.5 215.3 95.5 235 95.5 246.1 91.6 251.9 83.2 251.9 91.3 256.5 95.5 268.1 95.5 277.5 95.5 290.1 93.4 307.4 89.2L282.3 125H307L377.2 23.6H351.8ZM53.3 59.5C50.9 67.7 43.3 74.3 36.3 74.3 29.3 74.3 25.5 67.7 27.9 59.5 30.3 51.3 37.9 44.7 44.9 44.7 51.9 44.7 55.7 51.3 53.3 59.5ZM115.4 59.5C113 67.7 105.4 74.3 98.4 74.3S87.6 67.7 90 59.5 100 44.7 107 44.7 117.8 51.3 115.4 59.5ZM149.5 59.5C151.9 51.3 159.5 44.7 166.5 44.7S177.3 51.3 174.9 59.5C172.6 67.6 165.1 74.1 158.2 74.3 158 74.3 157.8 74.3 157.6 74.3 150.8 74.1 147.2 67.6 149.5 59.5ZM231.2 71.7C229.9 74.7 219.9 74.2 217.4 74.3 217.4 74.3 210.8 74.3 192.8 74.3 196.1 69.8 198.7 64.8 200.2 59.5 200.4 59 200.5 58.4 200.6 57.9 203.3 61.7 208.9 65.1 219.8 67.3 230.2 69.3 232.1 68.7 231.2 71.7ZM256.3 63.6C254.1 55.2 244.8 51.8 231.7 50.2 226.2 49.5 223.1 49.3 223.8 46.9 224.3 45.1 227.1 44.7 233 44.7 236.7 44.7 241.1 44.7 246.2 44.7H261.8L256.3 63.6ZM281.6 63.7C281.6 63.5 284.1 55.1 287.1 44.7H303.2L305.8 71.6C279.3 77.3 278.7 75.8 281.6 63.7Z'/%3E%3C/svg%3E`,bp=sB,i2={adjustment:{enabled:!1,gamma:1,saturation:1,contrast:1,brightness:1},blur:{enabled:!0,value:.2},tilt_shift:{enabled:!1,blur:5,start:{x:600,y:0},end:{x:600,y:720}},vignetting:{enabled:!1,value:.3,alpha:1,blur:.3},zoom_blur:{enabled:!1,center:{x:900,y:360},value:.03,radius:500},gradient:{enabled:!0,orientation:"horizontal",start:{value:0,color:"#0000008c"},mid:{value:.34,color:"#00000066"},end:{value:.6,color:"#00000000"}}},aB={src:Jw,x:0,y:0,w:1280,h:720,flip_h:!1,flip_v:!1,paste_mode:"aspect"},oB={src:t2,x:1100,y:0,w:180,h:180,blur:0,alpha:1},lB={text:"ÐÐ°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº",x:60,y:58,font:{face:"Gilroy",size:80,weight:"700",color:"#ffffff",line_height:97},shadow:{value:0,color:"#00000088"}},uB={text:"ÐÑÐµÐ½Ñ Ð¸Ð½ÑÐµÑÐµÑÐ½ÑÐ¹ ÑÐµÐºÑÑ",x:60,gap:7,font:{face:"Gilroy",size:50,weight:"600",color:"#ffffff",line_height:60},shadow:{value:0,color:"#00000088"}},cB={src:[Vg],names:["Just Chatting"],x:60,y:432,w:170,h:228,round:12,blur:.1,margin:32,shadow:{value:2,color:"#00000066"}},qa=Xe(structuredClone(i2)),Vi=Xe(structuredClone(aB)),Xl=Xe(structuredClone(oB)),Xa=Xe(structuredClone(lB)),Ya=Xe(structuredClone(uB)),Yl=Xe(structuredClone(cB)),qg=tr([qa,Vi,Xl,Xa,Ya,Yl],([r,e,t,n,i,s])=>({version:0,width:1280,height:720,scale:1,debug:!1,filter:r,background:e,logo:t,title:n,description:i,categories:s})),$a=Xe({background:Jw.split(",")[0],background_loading:!1,background_width:1280,background_height:720,background_aspect:1280/720,logo:t2.split(",")[0],app:void 0}),s2=1;function $r(r){try{return structuredClone(r)}catch{try{return JSON.parse(JSON.stringify(r))}catch{return r}}}function fB(){const r=St($a);return{version:s2,filter:$r(St(qa)),background:$r(St(Vi)),logo:$r(St(Xl)),title:$r(St(Xa)),description:$r(St(Ya)),categories:$r(St(Yl)),app:{background:r.background,background_width:r.background_width,background_height:r.background_height,background_aspect:r.background_aspect,logo:r.logo}}}function hB(r){!r||r.version!==s2||(qa.set($r(r.filter)),Vi.set($r(r.background)),Xl.set($r(r.logo)),Xa.set($r(r.title)),Ya.set($r(r.description)),Yl.set($r(r.categories)),$a.update(e=>({...e,background:r.app?.background??e.background,background_width:r.app?.background_width??e.background_width,background_height:r.app?.background_height??e.background_height,background_aspect:r.app?.background_aspect??e.background_aspect,logo:r.app?.logo??e.logo,background_loading:!1})))}var dB=pe("<!> <!> <!> <!> <!> <!>",1);function pB(r){var e=dB(),t=be(e);Sg(t,{get background(){return Vi},get appstate(){return $a},get datastate(){return qg}});var n=ee(t,2);xg(n,{get logo(){return Xl},get appstate(){return $a}});var i=ee(n,2);yg(i,{get filter(){return qa},get defaults(){return i2}});var s=ee(i,2);Kw(s,{get categories(){return Yl}});var a=ee(s,2);Zw(a,{get title(){return Xa}});var o=ee(a,2);iB(o,{get description(){return Ya}}),le(r,e)}const gB="modulepreload",mB=function(r,e){return new URL(r,e).href},Fb={},Nc=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=Promise.allSettled(t.map(u=>{if(u=mB(u,n),u in Fb)return;Fb[u]=!0;const c=u.endsWith(".css"),f=c?'[rel="stylesheet"]':"";if(!!n)for(let p=a.length-1;p>=0;p--){const v=a[p];if(v.href===u&&(!c||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":gB,c||(d.as="script"),d.crossOrigin="",d.href=u,l&&d.setAttribute("nonce",l),document.head.appendChild(d),c)return new Promise((p,v)=>{d.addEventListener("load",p),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};var re=(r=>(r.Application="application",r.WebGLPipes="webgl-pipes",r.WebGLPipesAdaptor="webgl-pipes-adaptor",r.WebGLSystem="webgl-system",r.WebGPUPipes="webgpu-pipes",r.WebGPUPipesAdaptor="webgpu-pipes-adaptor",r.WebGPUSystem="webgpu-system",r.CanvasSystem="canvas-system",r.CanvasPipesAdaptor="canvas-pipes-adaptor",r.CanvasPipes="canvas-pipes",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r.MaskEffect="mask-effect",r.BlendMode="blend-mode",r.TextureSource="texture-source",r.Environment="environment",r.ShapeBuilder="shape-builder",r.Batcher="batcher",r))(re||{});const yp=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Eu=(r,e)=>yp(r).priority??e,ze={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(yp).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...r){return r.map(yp).forEach(e=>{e.type.forEach(t=>{const n=this._addHandlers,i=this._queue;n[t]?n[t]?.(e):(i[t]=i[t]||[],i[t]?.push(e))})}),this},handle(r,e,t){const n=this._addHandlers,i=this._removeHandlers;if(n[r]||i[r])throw new Error(`Extension type ${r} already has a handler`);n[r]=e,i[r]=t;const s=this._queue;return s[r]&&(s[r]?.forEach(a=>e(a)),delete s[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(r,e,t=-1){return this.handle(r,n=>{e.findIndex(s=>s.name===n.name)>=0||(e.push({name:n.name,value:n.ref}),e.sort((s,a)=>Eu(a.value,t)-Eu(s.value,t)))},n=>{const i=e.findIndex(s=>s.name===n.name);i!==-1&&e.splice(i,1)})},handleByList(r,e,t=-1){return this.handle(r,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>Eu(s,t)-Eu(i,t)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})},mixin(r,...e){for(const t of e)Object.defineProperties(r.prototype,Object.getOwnPropertyDescriptors(t))}},vB={extension:{type:re.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Nc(()=>Promise.resolve().then(()=>rj),void 0,import.meta.url)}},_B={extension:{type:re.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Nc(()=>Promise.resolve().then(()=>nj),void 0,import.meta.url)}};class Qt{constructor(e,t,n){this._x=t||0,this._y=n||0,this._observer=e}clone(e){return new Qt(e??this._observer,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var a2={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,f,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var d=new i(c,f||l,h),p=t?t+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)e.call(c,f)&&u.push(t?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=t?t+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},o.prototype.listenerCount=function(u){var c=t?t+u:u,f=this._events[c];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,c,f,h,d,p){var v=t?t+u:u;if(!this._events[v])return!1;var m=this._events[v],g=arguments.length,_,b;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),g){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,f),!0;case 4:return m.fn.call(m.context,c,f,h),!0;case 5:return m.fn.call(m.context,c,f,h,d),!0;case 6:return m.fn.call(m.context,c,f,h,d,p),!0}for(b=1,_=new Array(g-1);b<g;b++)_[b-1]=arguments[b];m.fn.apply(m.context,_)}else{var w=m.length,S;for(b=0;b<w;b++)switch(m[b].once&&this.removeListener(u,m[b].fn,void 0,!0),g){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,c);break;case 3:m[b].fn.call(m[b].context,c,f);break;case 4:m[b].fn.call(m[b].context,c,f,h);break;default:if(!_)for(S=1,_=new Array(g-1);S<g;S++)_[S-1]=arguments[S];m[b].fn.apply(m[b].context,_)}}return!0},o.prototype.on=function(u,c,f){return s(this,u,c,f,!1)},o.prototype.once=function(u,c,f){return s(this,u,c,f,!0)},o.prototype.removeListener=function(u,c,f,h){var d=t?t+u:u;if(!this._events[d])return this;if(!c)return a(this,d),this;var p=this._events[d];if(p.fn)p.fn===c&&(!h||p.once)&&(!f||p.context===f)&&a(this,d);else{for(var v=0,m=[],g=p.length;v<g;v++)(p[v].fn!==c||h&&!p[v].once||f&&p[v].context!==f)&&m.push(p[v]);m.length?this._events[d]=m.length===1?m[0]:m:a(this,d)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=t?t+u:u,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(a2);var bB=a2.exports;const Vr=Eg(bB),yB=Math.PI*2,xB=180/Math.PI,wB=Math.PI/180;class At{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new At(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return Wh.x=0,Wh.y=0,Wh}}const Wh=new At;class Oe{constructor(e=1,t=0,n=0,i=1,s=0,a=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,i,s,a){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=a,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new At;const n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t}applyInverse(e,t){t=t||new At;const n=this.a,i=this.b,s=this.c,a=this.d,o=this.tx,l=this.ty,u=1/(n*a+s*-i),c=e.x,f=e.y;return t.x=a*u*c+-s*u*f+(l*s-o*a)*u,t.y=n*u*f+-i*u*c+(-l*n+o*i)*u,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,a=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=a*t-this.ty*n,this.ty=a*n+this.ty*t,this}append(e){const t=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}appendFrom(e,t){const n=e.a,i=e.b,s=e.c,a=e.d,o=e.tx,l=e.ty,u=t.a,c=t.b,f=t.c,h=t.d;return this.a=n*u+i*f,this.b=n*c+i*h,this.c=s*u+a*f,this.d=s*c+a*h,this.tx=o*u+l*f+t.tx,this.ty=o*c+l*h+t.ty,this}setTransform(e,t,n,i,s,a,o,l,u){return this.a=Math.cos(o+u)*s,this.b=Math.sin(o+u)*s,this.c=-Math.sin(o-l)*a,this.d=Math.cos(o-l)*a,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,n=this.b,i=this.c,s=this.d,a=e.pivot,o=-Math.atan2(-i,s),l=Math.atan2(n,t),u=Math.abs(o+l);return u<1e-5||Math.abs(yB-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=l),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(a.x*t+a.y*i),e.position.y=this.ty+(a.x*n+a.y*s),e}invert(){const e=this.a,t=this.b,n=this.c,i=this.d,s=this.tx,a=e*i-t*n;return this.a=i/a,this.b=-t/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-i*s)/a,this.ty=-(e*this.ty-t*s)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Oe;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return TB.identity()}static get shared(){return SB.identity()}}const SB=new Oe,TB=new Oe,hs=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ds=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ps=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],gs=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],xp=[],o2=[],Au=Math.sign;function EB(){for(let r=0;r<16;r++){const e=[];xp.push(e);for(let t=0;t<16;t++){const n=Au(hs[r]*hs[t]+ps[r]*ds[t]),i=Au(ds[r]*hs[t]+gs[r]*ds[t]),s=Au(hs[r]*ps[t]+ps[r]*gs[t]),a=Au(ds[r]*ps[t]+gs[r]*gs[t]);for(let o=0;o<16;o++)if(hs[o]===n&&ds[o]===i&&ps[o]===s&&gs[o]===a){e.push(o);break}}}for(let r=0;r<16;r++){const e=new Oe;e.set(hs[r],ds[r],ps[r],gs[r],0,0),o2.push(e)}}EB();const _t={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>hs[r],uY:r=>ds[r],vX:r=>ps[r],vY:r=>gs[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>xp[r][e],sub:(r,e)=>xp[r][_t.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?_t.S:_t.N:Math.abs(e)*2<=Math.abs(r)?r>0?_t.E:_t.W:e>0?r>0?_t.SE:_t.SW:r>0?_t.NE:_t.NW,matrixAppendRotationInv:(r,e,t=0,n=0)=>{const i=o2[_t.inv(e)];i.tx=t,i.ty=n,r.append(i)},transformRectCoords:(r,e,t,n)=>{const{x:i,y:s,width:a,height:o}=r,{x:l,y:u,width:c,height:f}=e;return t===_t.E?(n.set(i+l,s+u,a,o),n):t===_t.S?n.set(c-s-o+l,i+u,o,a):t===_t.W?n.set(c-i-a+l,f-s-o+u,a,o):t===_t.N?n.set(s+l,f-i-a+u,o,a):n.set(i+l,s+u,a,o)}},Cu=[new At,new At,new At,new At];class ft{constructor(e=0,t=0,n=0,i=0){this.type="rectangle",this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(i)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new ft(0,0,0,0)}clone(){return new ft(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}strokeContains(e,t,n,i=.5){const{width:s,height:a}=this;if(s<=0||a<=0)return!1;const o=this.x,l=this.y,u=n*(1-i),c=n-u,f=o-u,h=o+s+u,d=l-u,p=l+a+u,v=o+c,m=o+s-c,g=l+c,_=l+a-c;return e>=f&&e<=h&&t>=d&&t<=p&&!(e>v&&e<m&&t>g&&t<_)}intersects(e,t){if(!t){const O=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=O)return!1;const V=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>V}const n=this.left,i=this.right,s=this.top,a=this.bottom;if(i<=n||a<=s)return!1;const o=Cu[0].set(e.left,e.top),l=Cu[1].set(e.left,e.bottom),u=Cu[2].set(e.right,e.top),c=Cu[3].set(e.right,e.bottom);if(u.x<=o.x||l.y<=o.y)return!1;const f=Math.sign(t.a*t.d-t.b*t.c);if(f===0||(t.apply(o,o),t.apply(l,l),t.apply(u,u),t.apply(c,c),Math.max(o.x,l.x,u.x,c.x)<=n||Math.min(o.x,l.x,u.x,c.x)>=i||Math.max(o.y,l.y,u.y,c.y)<=s||Math.min(o.y,l.y,u.y,c.y)>=a))return!1;const h=f*(l.y-o.y),d=f*(o.x-l.x),p=h*n+d*s,v=h*i+d*s,m=h*n+d*a,g=h*i+d*a;if(Math.max(p,v,m,g)<=h*o.x+d*o.y||Math.min(p,v,m,g)>=h*c.x+d*c.y)return!1;const _=f*(o.y-u.y),b=f*(u.x-o.x),w=_*n+b*s,S=_*i+b*s,T=_*n+b*a,E=_*i+b*a;return!(Math.max(w,S,T,E)<=_*o.x+b*o.y||Math.min(w,S,T,E)>=_*c.x+b*c.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,t=.001){const n=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=i-this.y,this}scale(e,t=e){return this.x*=e,this.y*=t,this.width*=e,this.height*=t,this}enlarge(e){const t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=i,this.height=s-i,this}getBounds(e){return e||(e=new ft),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const t=e.x,n=e.y,i=e.x+e.width,s=e.y+e.height;return t>=this.x&&t<this.x+this.width&&n>=this.y&&n<this.y+this.height&&i>=this.x&&i<this.x+this.width&&s>=this.y&&s<this.y+this.height}set(e,t,n,i){return this.x=e,this.y=t,this.width=n,this.height=i,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const qh={default:-1};function Tt(r="default"){return qh[r]===void 0&&(qh[r]=-1),++qh[r]}const Db=new Set,lt="8.0.0",AB="8.3.4",wa={quiet:!1,noColor:!1},Fe=(r,e,t=3)=>{if(wa.quiet||Db.has(e))return;let n=new Error().stack;const i=`${e}
Deprecated since v${r}`,s=typeof console.groupCollapsed=="function"&&!wa.noColor;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",i):(n=n.split(`
`).splice(t).join(`
`),s?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",i),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",i),console.warn(n))),Db.add(e)};Object.defineProperties(Fe,{quiet:{get:()=>wa.quiet,set:r=>{wa.quiet=r},enumerable:!0,configurable:!1},noColor:{get:()=>wa.noColor,set:r=>{wa.noColor=r},enumerable:!0,configurable:!1}});const l2=()=>{};function Ka(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function Lb(r){return!(r&r-1)&&!!r}function u2(r){const e={};for(const t in r)r[t]!==void 0&&(e[t]=r[t]);return e}const Ub=Object.create(null);function CB(r){const e=Ub[r];return e===void 0&&(Ub[r]=Tt("resource")),e}const c2=class f2 extends Vr{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...f2.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){Fe(lt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=CB(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};c2.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let fn=c2;const h2=class d2 extends Vr{constructor(e={}){super(),this.options=e,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=Tt("textureSource"),this._resourceType="textureSource",this._resourceId=Tt("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...d2.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new fn(u2(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){this.style!==e&&(this._style?.off("change",this._onStyleChange,this),this._style=e,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(e){this._style.maxAnisotropy=e}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Tt("resource"),this.emit("change",this),this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,t,n){n||(n=this._resolution),e||(e=this.width),t||(t=this.height);const i=Math.round(e*n),s=Math.round(t*n);return this.width=i/n,this.height=s/n,this._resolution=n,this.pixelWidth===i&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=i,this.pixelHeight=s,this.emit("resize",this),this._resourceId=Tt("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Lb(this.pixelWidth)&&Lb(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};h2.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Wt=h2;class Xg extends Wt{constructor(e){const t=e.resource||new Float32Array(e.width*e.height*4);let n=e.format;n||(t instanceof Float32Array?n="rgba32float":t instanceof Int32Array||t instanceof Uint32Array?n="rgba32uint":t instanceof Int16Array||t instanceof Uint16Array?n="rgba16uint":(t instanceof Int8Array,n="bgra8unorm")),super({...e,resource:t,format:n}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Xg.extension=re.TextureSource;const Nb=new Oe;class p2{constructor(e,t){this.mapCoord=new Oe,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof t>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=t,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){this.texture!==e&&(this._texture?.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,t){t===void 0&&(t=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],a=e[i+1];t[i]=s*n.a+a*n.c+n.tx,t[i+1]=s*n.b+a*n.d+n.ty}return t}update(){const e=this._texture;this._updateID++;const t=e.uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);const n=e.orig,i=e.trim;i&&(Nb.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Nb));const s=e.source,a=this.uClampFrame,o=this.clampMargin/s._resolution,l=this.clampOffset/s._resolution;return a[0]=(e.frame.x+o+l)/s.width,a[1]=(e.frame.y+o+l)/s.height,a[2]=(e.frame.x+e.frame.width-o+l)/s.width,a[3]=(e.frame.y+e.frame.height-o+l)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}}class Re extends Vr{constructor({source:e,label:t,frame:n,orig:i,trim:s,defaultAnchor:a,defaultBorders:o,rotate:l,dynamic:u}={}){if(super(),this.uid=Tt("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new ft,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=t,this.source=e?.source??new Wt,this.noFrame=!n,n)this.frame.copyFrom(n);else{const{width:c,height:f}=this._source;this.frame.width=c,this.frame.height=f}this.orig=i||this.frame,this.trim=s,this.rotate=l??0,this.defaultAnchor=a,this.defaultBorders=o,this.destroyed=!1,this.dynamic=u||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new p2(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:t}=this,{width:n,height:i}=this._source,s=t.x/n,a=t.y/i,o=t.width/n,l=t.height/i;let u=this.rotate;if(u){const c=o/2,f=l/2,h=s+c,d=a+f;u=_t.add(u,_t.NW),e.x0=h+c*_t.uX(u),e.y0=d+f*_t.uY(u),u=_t.add(u,2),e.x1=h+c*_t.uX(u),e.y1=d+f*_t.uY(u),u=_t.add(u,2),e.x2=h+c*_t.uX(u),e.y2=d+f*_t.uY(u),u=_t.add(u,2),e.x3=h+c*_t.uX(u),e.y3=d+f*_t.uY(u)}else e.x0=s,e.y0=a,e.x1=s+o,e.y1=a,e.x2=s+o,e.y2=a+l,e.x3=s,e.y3=a+l}destroy(e=!1){this._source&&(this._source.off("resize",this.update,this),e&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return Fe(lt,"Texture.baseTexture is now Texture.source"),this._source}}Re.EMPTY=new Re({label:"EMPTY",source:new Wt({label:"EMPTY"})});Re.EMPTY.destroy=l2;Re.WHITE=new Re({source:new Xg({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});Re.WHITE.destroy=l2;function g2(r,e,t){const{width:n,height:i}=t.orig,s=t.trim;if(s){const a=s.width,o=s.height;r.minX=s.x-e._x*n,r.maxX=r.minX+a,r.minY=s.y-e._y*i,r.maxY=r.minY+o}else r.minX=-e._x*n,r.maxX=r.minX+n,r.minY=-e._y*i,r.maxY=r.minY+i}const Gb=new Oe;class hr{constructor(e=1/0,t=1/0,n=-1/0,i=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Gb,this.minX=e,this.minY=t,this.maxX=n,this.maxY=i}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new ft);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=Gb,this}set(e,t,n,i){this.minX=e,this.minY=t,this.maxX=n,this.maxY=i}addFrame(e,t,n,i,s){s||(s=this.matrix);const a=s.a,o=s.b,l=s.c,u=s.d,c=s.tx,f=s.ty;let h=this.minX,d=this.minY,p=this.maxX,v=this.maxY,m=a*e+l*t+c,g=o*e+u*t+f;m<h&&(h=m),g<d&&(d=g),m>p&&(p=m),g>v&&(v=g),m=a*n+l*t+c,g=o*n+u*t+f,m<h&&(h=m),g<d&&(d=g),m>p&&(p=m),g>v&&(v=g),m=a*e+l*i+c,g=o*e+u*i+f,m<h&&(h=m),g<d&&(d=g),m>p&&(p=m),g>v&&(v=g),m=a*n+l*i+c,g=o*n+u*i+f,m<h&&(h=m),g<d&&(d=g),m>p&&(p=m),g>v&&(v=g),this.minX=h,this.minY=d,this.maxX=p,this.maxY=v}addRect(e,t){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,t)}addBounds(e,t){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,t)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const t=this.minX,n=this.minY,i=this.maxX,s=this.maxY,{a,b:o,c:l,d:u,tx:c,ty:f}=e;let h=a*t+l*n+c,d=o*t+u*n+f;this.minX=h,this.minY=d,this.maxX=h,this.maxY=d,h=a*i+l*n+c,d=o*i+u*n+f,this.minX=h<this.minX?h:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=h>this.maxX?h:this.maxX,this.maxY=d>this.maxY?d:this.maxY,h=a*t+l*s+c,d=o*t+u*s+f,this.minX=h<this.minX?h:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=h>this.maxX?h:this.maxX,this.maxY=d>this.maxY?d:this.maxY,h=a*i+l*s+c,d=o*i+u*s+f,this.minX=h<this.minX?h:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=h>this.maxX?h:this.maxX,this.maxY=d>this.maxY?d:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,t,n,i){return this.minX<e&&(this.minX=e),this.maxX>t&&(this.maxX=t),this.minY<n&&(this.minY=n),this.maxY>i&&(this.maxY=i),this}pad(e,t=e){return this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new hr(this.minX,this.minY,this.maxX,this.maxY)}scale(e,t=e){return this.minX*=e,this.minY*=t,this.maxX*=e,this.maxY*=t,this}get x(){return this.minX}set x(e){const t=this.maxX-this.minX;this.minX=e,this.maxX=e+t}get y(){return this.minY}set y(e){const t=this.maxY-this.minY;this.minY=e,this.maxY=e+t}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,t,n,i){let s=this.minX,a=this.minY,o=this.maxX,l=this.maxY;i||(i=this.matrix);const u=i.a,c=i.b,f=i.c,h=i.d,d=i.tx,p=i.ty;for(let v=t;v<n;v+=2){const m=e[v],g=e[v+1],_=u*m+f*g+d,b=c*m+h*g+p;s=_<s?_:s,a=b<a?b:a,o=_>o?_:o,l=b>l?b:l}this.minX=s,this.minY=a,this.maxX=o,this.maxY=l}containsPoint(e,t){return this.minX<=e&&this.minY<=t&&this.maxX>=e&&this.maxY>=t}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var PB={grad:.9,turn:360,rad:360/(2*Math.PI)},ai=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Kt=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},Qr=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},m2=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},zb=function(r){return{r:Qr(r.r,0,255),g:Qr(r.g,0,255),b:Qr(r.b,0,255),a:Qr(r.a)}},Xh=function(r){return{r:Kt(r.r),g:Kt(r.g),b:Kt(r.b),a:Kt(r.a,3)}},RB=/^#([0-9a-f]{3,8})$/i,Pu=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},v2=function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=Math.max(e,t,n),a=s-Math.min(e,t,n),o=a?s===e?(t-n)/a:s===t?2+(n-e)/a:4+(e-t)/a:0;return{h:60*(o<0?o+6:o),s:s?a/s*100:0,v:s/255*100,a:i}},_2=function(r){var e=r.h,t=r.s,n=r.v,i=r.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),a=n*(1-t),o=n*(1-(e-s)*t),l=n*(1-(1-e+s)*t),u=s%6;return{r:255*[n,o,a,a,l,n][u],g:255*[l,n,n,o,a,a][u],b:255*[a,a,l,n,n,o][u],a:i}},jb=function(r){return{h:m2(r.h),s:Qr(r.s,0,100),l:Qr(r.l,0,100),a:Qr(r.a)}},Hb=function(r){return{h:Kt(r.h),s:Kt(r.s),l:Kt(r.l),a:Kt(r.a,3)}},Vb=function(r){return _2((t=(e=r).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},ul=function(r){return{h:(e=v2(r)).h,s:(i=(200-(t=e.s))*(n=e.v)/100)>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,n,i},kB=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,MB=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,OB=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,IB=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wp={string:[[function(r){var e=RB.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Kt(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Kt(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=OB.exec(r)||IB.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:zb({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=kB.exec(r)||MB.exec(r);if(!e)return null;var t,n,i=jb({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(PB[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Vb(i)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=i===void 0?1:i;return ai(e)&&ai(t)&&ai(n)?zb({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(r){var e=r.h,t=r.s,n=r.l,i=r.a,s=i===void 0?1:i;if(!ai(e)||!ai(t)||!ai(n))return null;var a=jb({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return Vb(a)},"hsl"],[function(r){var e=r.h,t=r.s,n=r.v,i=r.a,s=i===void 0?1:i;if(!ai(e)||!ai(t)||!ai(n))return null;var a=function(o){return{h:m2(o.h),s:Qr(o.s,0,100),v:Qr(o.v,0,100),a:Qr(o.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return _2(a)},"hsv"]]},Wb=function(r,e){for(var t=0;t<e.length;t++){var n=e[t][0](r);if(n)return[n,e[t][1]]}return[null,void 0]},BB=function(r){return typeof r=="string"?Wb(r.trim(),wp.string):typeof r=="object"&&r!==null?Wb(r,wp.object):[null,void 0]},Yh=function(r,e){var t=ul(r);return{h:t.h,s:Qr(t.s+100*e,0,100),l:t.l,a:t.a}},$h=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},qb=function(r,e){var t=ul(r);return{h:t.h,s:t.s,l:Qr(t.l+100*e,0,100),a:t.a}},Sp=function(){function r(e){this.parsed=BB(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Kt($h(this.rgba),2)},r.prototype.isDark=function(){return $h(this.rgba)<.5},r.prototype.isLight=function(){return $h(this.rgba)>=.5},r.prototype.toHex=function(){return e=Xh(this.rgba),t=e.r,n=e.g,i=e.b,a=(s=e.a)<1?Pu(Kt(255*s)):"","#"+Pu(t)+Pu(n)+Pu(i)+a;var e,t,n,i,s,a},r.prototype.toRgb=function(){return Xh(this.rgba)},r.prototype.toRgbString=function(){return e=Xh(this.rgba),t=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+i+", "+s+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,s},r.prototype.toHsl=function(){return Hb(ul(this.rgba))},r.prototype.toHslString=function(){return e=Hb(ul(this.rgba)),t=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+s+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,s},r.prototype.toHsv=function(){return e=v2(this.rgba),{h:Kt(e.h),s:Kt(e.s),v:Kt(e.v),a:Kt(e.a,3)};var e},r.prototype.invert=function(){return Un({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),Un(Yh(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),Un(Yh(this.rgba,-e))},r.prototype.grayscale=function(){return Un(Yh(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),Un(qb(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),Un(qb(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?Un({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Kt(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=ul(this.rgba);return typeof e=="number"?Un({h:e,s:t.s,l:t.l,a:t.a}):Kt(t.h)},r.prototype.isEqual=function(e){return this.toHex()===Un(e).toHex()},r}(),Un=function(r){return r instanceof Sp?r:new Sp(r)},Xb=[],FB=function(r){r.forEach(function(e){Xb.indexOf(e)<0&&(e(Sp,wp),Xb.push(e))})};function DB(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in t)n[t[i]]=i;var s={};r.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,l,u=n[this.toHex()];if(u)return u;if(a?.closest){var c=this.toRgb(),f=1/0,h="black";if(!s.length)for(var d in t)s[d]=new r(t[d]).toRgb();for(var p in t){var v=(o=c,l=s[p],Math.pow(o.r-l.r,2)+Math.pow(o.g-l.g,2)+Math.pow(o.b-l.b,2));v<f&&(f=v,h=p)}return h}},e.string.push([function(a){var o=a.toLowerCase(),l=o==="transparent"?"#0000":t[o];return l?new r(l).toRgb():null},"name"])}FB([DB]);const Za=class Jo{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Jo)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,t){const n=typeof e;if(n!==typeof t)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((s,a)=>s===t[a]);if(e!==null&&t!==null){const s=Object.keys(e),a=Object.keys(t);return s.length!==a.length?!1:s.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,n,i]=this._components;return{r:e,g:t,b:n,a:i}}toRgb(){const[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){const[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){const[t,n,i]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(t*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[t,n,i,s]=this._components;return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[t,n,i]=this._components;return e[0]=t,e[1]=n,e[2]=i,e}toNumber(){return this._int}toBgrNumber(){const[e,t,n]=this.toUint8RgbArray();return(n<<16)+(t<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,n,i,s]=Jo._temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let t,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const a=e;t=(a>>16&255)/255,n=(a>>8&255)/255,i=(a&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,n,i,s=255]=e,t/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=Jo.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const a=Un(e);a.isValid()&&({r:t,g:n,b:i,a:s}=a.rgba,t/=255,n/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=n,this._components[2]=i,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,t,n]=this._components;this._int=(e*255<<16)+(t*255<<8)+(n*255|0)}_clamp(e,t=0,n=1){return typeof e=="number"?Math.min(Math.max(e,t),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),n)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof Jo||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Za.shared=new Za;Za._temp=new Za;Za.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ht=Za;const LB={cullArea:null,cullable:!1,cullableChildren:!0};let Kh=0;const Yb=500;function Ne(...r){Kh!==Yb&&(Kh++,Kh===Yb?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...r))}const Ro={_registeredResources:new Set,register(r){this._registeredResources.add(r)},unregister(r){this._registeredResources.delete(r)},release(){this._registeredResources.forEach(r=>r.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(r){return this._registeredResources.has(r)},reset(){this._registeredResources.clear()}};class UB{constructor(e,t){this._pool=[],this._count=0,this._index=0,this._classType=e,t&&this.prepopulate(t)}prepopulate(e){for(let t=0;t<e;t++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){let t;return this._index>0?t=this._pool[--this._index]:(t=new this._classType,this._count++),t.init?.(e),t}return(e){e.reset?.(),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let e=0;e<this._index;e++)this._pool[e].destroy();this._pool.length=0,this._count=0,this._index=0}}class NB{constructor(){this._poolsByClass=new Map}prepopulate(e,t){this.getPool(e).prepopulate(t)}get(e,t){return this.getPool(e).get(t)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new UB(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(t=>{const n=e[t._classType.name]?t._classType.name+t._classType.ID:t._classType.name;e[n]={free:t.totalFree,used:t.totalUsed,size:t.totalSize}}),e}clear(){this._poolsByClass.forEach(e=>e.clear()),this._poolsByClass.clear()}}const jt=new NB;Ro.register(jt);const GB={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(r){typeof r=="boolean"&&r===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(r===!0?{}:r))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(r){Fe("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(r)}};function b2(r,e,t){const n=r.length;let i;if(e>=n||t===0)return;t=e+t>n?n-e:t;const s=n-t;for(i=e;i<s;++i)r[i]=r[i+t];r.length=s}const zB={allowChildren:!0,removeChildren(r=0,e){const t=e??this.children.length,n=t-r,i=[];if(n>0&&n<=t){for(let a=t-1;a>=r;a--){const o=this.children[a];o&&(i.push(o),o.parent=null)}b2(this.children,r,t);const s=this.renderGroup||this.parentRenderGroup;s&&s.removeChildren(i);for(let a=0;a<i.length;++a){const o=i[a];o.parentRenderLayer?.detach(o),this.emit("childRemoved",o,this,a),i[a].emit("removed",this)}return i.length>0&&this._didViewChangeTick++,i}else if(n===0&&this.children.length===0)return i;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(r){const e=this.getChildAt(r);return this.removeChild(e)},getChildAt(r){if(r<0||r>=this.children.length)throw new Error(`getChildAt: Index (${r}) does not exist.`);return this.children[r]},setChildIndex(r,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(r),this.addChildAt(r,e)},getChildIndex(r){const e=this.children.indexOf(r);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(r,e){this.allowChildren||Fe(lt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:t}=this;if(e<0||e>t.length)throw new Error(`${r}addChildAt: The index ${e} supplied is out of bounds ${t.length}`);if(r.parent){const i=r.parent.children.indexOf(r);if(r.parent===this&&i===e)return r;i!==-1&&r.parent.children.splice(i,1)}e===t.length?t.push(r):t.splice(e,0,r),r.parent=this,r.didChange=!0,r._updateFlags=15;const n=this.renderGroup||this.parentRenderGroup;return n&&n.addChild(r),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",r,this,e),r.emit("added",this),r},swapChildren(r,e){if(r===e)return;const t=this.getChildIndex(r),n=this.getChildIndex(e);this.children[t]=e,this.children[n]=r;const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...r){return r.length===1?this.reparentChildAt(r[0],this.children.length):(r.forEach(e=>this.reparentChildAt(e,this.children.length)),r[0])},reparentChildAt(r,e){if(r.parent===this)return this.setChildIndex(r,e),r;const t=r.worldTransform.clone();r.removeFromParent(),this.addChildAt(r,e);const n=this.worldTransform.clone();return n.invert(),t.prepend(n),r.setFromMatrix(t),r},replaceChild(r,e){r.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(r)),e.setFromMatrix(r.localTransform),e.updateLocalTransform(),this.removeChild(r)}},jB={collectRenderables(r,e,t){this.parentRenderLayer&&this.parentRenderLayer!==t||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(r,e,t):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,r):this.collectRenderablesWithEffects(r,e,t))},collectRenderablesSimple(r,e,t){const n=this.children,i=n.length;for(let s=0;s<i;s++)n[s].collectRenderables(r,e,t)},collectRenderablesWithEffects(r,e,t){const{renderPipes:n}=e;for(let i=0;i<this.effects.length;i++){const s=this.effects[i];n[s.pipe].push(s,this,r)}this.collectRenderablesSimple(r,e,t);for(let i=this.effects.length-1;i>=0;i--){const s=this.effects[i];n[s.pipe].pop(s,this,r)}}};class Gc{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class HB{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let t=0;t<this._tests.length;t++){const n=this._tests[t];if(n.test(e))return jt.get(n.maskClass,e)}return e}returnMaskEffect(e){jt.return(e)}}const Tp=new HB;ze.handleByList(re.MaskEffect,Tp._effectClasses);const VB={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const r=this.renderGroup||this.parentRenderGroup;r&&(r.structureDidChange=!0)},addEffect(r){this.effects.indexOf(r)===-1&&(this.effects.push(r),this.effects.sort((t,n)=>t.priority-n.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(r){const e=this.effects.indexOf(r);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(r){const e=this._maskEffect;e?.mask!==r&&(e&&(this.removeEffect(e),Tp.returnMaskEffect(e),this._maskEffect=null),r!=null&&(this._maskEffect=Tp.getMaskEffect(r),this.addEffect(this._maskEffect)))},get mask(){return this._maskEffect?.mask},setMask(r){this._maskOptions={...this._maskOptions,...r},r.mask&&(this.mask=r.mask),this._markStructureAsChanged()},set filters(r){!Array.isArray(r)&&r&&(r=[r]);const e=this._filterEffect||(this._filterEffect=new Gc);r=r;const t=r?.length>0,n=e.filters?.length>0,i=t!==n;r=Array.isArray(r)?r.slice(0):r,e.filters=Object.freeze(r),i&&(t?this.addEffect(e):(this.removeEffect(e),e.filters=r??null))},get filters(){return this._filterEffect?.filters},set filterArea(r){this._filterEffect||(this._filterEffect=new Gc),this._filterEffect.filterArea=r},get filterArea(){return this._filterEffect?.filterArea}},WB={label:null,get name(){return Fe(lt,"Container.name property has been removed, use Container.label instead"),this.label},set name(r){Fe(lt,"Container.name property has been removed, use Container.label instead"),this.label=r},getChildByName(r,e=!1){return this.getChildByLabel(r,e)},getChildByLabel(r,e=!1){const t=this.children;for(let n=0;n<t.length;n++){const i=t[n];if(i.label===r||r instanceof RegExp&&r.test(i.label))return i}if(e)for(let n=0;n<t.length;n++){const s=t[n].getChildByLabel(r,!0);if(s)return s}return null},getChildrenByLabel(r,e=!1,t=[]){const n=this.children;for(let i=0;i<n.length;i++){const s=n[i];(s.label===r||r instanceof RegExp&&r.test(s.label))&&t.push(s)}if(e)for(let i=0;i<n.length;i++)n[i].getChildrenByLabel(r,!0,t);return t}},pr=jt.getPool(Oe),yi=jt.getPool(hr),qB=new Oe,XB={getFastGlobalBounds(r,e){e||(e=new hr),e.clear(),this._getGlobalBoundsRecursive(!!r,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const t=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(t.worldTransform),e},_getGlobalBoundsRecursive(r,e,t){let n=e;if(r&&this.parentRenderLayer&&this.parentRenderLayer!==t||this.localDisplayStatus!==7||!this.measurable)return;const i=!!this.effects.length;if((this.renderGroup||i)&&(n=yi.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const a=this.bounds;n.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}const s=this.children;for(let a=0;a<s.length;a++)s[a]._getGlobalBoundsRecursive(r,n,t)}if(i){let s=!1;const a=this.renderGroup||this.parentRenderGroup;for(let o=0;o<this.effects.length;o++)this.effects[o].addBounds&&(s||(s=!0,n.applyMatrix(a.worldTransform)),this.effects[o].addBounds(n,!0));s&&n.applyMatrix(a.worldTransform.copyTo(qB).invert()),e.addBounds(n),yi.return(n)}else this.renderGroup&&(e.addBounds(n,this.relativeGroupTransform),yi.return(n))}};function Yg(r,e,t){t.clear();let n,i;return r.parent?e?n=r.parent.worldTransform:(i=pr.get().identity(),n=$g(r,i)):n=Oe.IDENTITY,y2(r,t,n,e),i&&pr.return(i),t.isValid||t.set(0,0,0,0),t}function y2(r,e,t,n){if(!r.visible||!r.measurable)return;let i;n?i=r.worldTransform:(r.updateLocalTransform(),i=pr.get(),i.appendFrom(r.localTransform,t));const s=e,a=!!r.effects.length;if(a&&(e=yi.get().clear()),r.boundsArea)e.addRect(r.boundsArea,i);else{const o=r.bounds;o&&!o.isEmpty()&&(e.matrix=i,e.addBounds(o));for(let l=0;l<r.children.length;l++)y2(r.children[l],e,i,n)}if(a){for(let o=0;o<r.effects.length;o++)r.effects[o].addBounds?.(e);s.addBounds(e,Oe.IDENTITY),yi.return(e)}n||pr.return(i)}function $g(r,e){const t=r.parent;return t&&($g(t,e),t.updateLocalTransform(),e.append(t.localTransform)),e}function x2(r,e){if(r===16777215||!e)return e;if(e===16777215||!r)return r;const t=r>>16&255,n=r>>8&255,i=r&255,s=e>>16&255,a=e>>8&255,o=e&255,l=t*s/255|0,u=n*a/255|0,c=i*o/255|0;return(l<<16)+(u<<8)+c}const $b=16777215;function zc(r,e){return r===$b?e:e===$b?r:x2(r,e)}function cc(r){return((r&255)<<16)+(r&65280)+(r>>16&255)}const YB={getGlobalAlpha(r){if(r)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,t=this.parent;for(;t;)e*=t.alpha,t=t.parent;return e},getGlobalTransform(r=new Oe,e){if(e)return r.copyFrom(this.worldTransform);this.updateLocalTransform();const t=$g(this,pr.get().identity());return r.appendFrom(this.localTransform,t),pr.return(t),r},getGlobalTint(r){if(r)return this.renderGroup?cc(this.renderGroup.worldColor):this.parentRenderGroup?cc(zc(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,t=this.parent;for(;t;)e=zc(e,t.localColor),t=t.parent;return cc(e)}};function Kg(r,e,t){return e.clear(),t||(t=Oe.IDENTITY),w2(r,e,t,r,!0),e.isValid||e.set(0,0,0,0),e}function w2(r,e,t,n,i){let s;if(i)s=pr.get(),s=t.copyTo(s);else{if(!r.visible||!r.measurable)return;r.updateLocalTransform();const l=r.localTransform;s=pr.get(),s.appendFrom(l,t)}const a=e,o=!!r.effects.length;if(o&&(e=yi.get().clear()),r.boundsArea)e.addRect(r.boundsArea,s);else{r.renderPipeId&&(e.matrix=s,e.addBounds(r.bounds));const l=r.children;for(let u=0;u<l.length;u++)w2(l[u],e,s,n,!1)}if(o){for(let l=0;l<r.effects.length;l++)r.effects[l].addLocalBounds?.(e,n);a.addBounds(e,Oe.IDENTITY),yi.return(e)}pr.return(s)}function S2(r,e){const t=r.children;for(let n=0;n<t.length;n++){const i=t[n],s=i.uid,a=(i._didViewChangeTick&65535)<<16|i._didContainerChangeTick&65535,o=e.index;(e.data[o]!==s||e.data[o+1]!==a)&&(e.data[e.index]=s,e.data[e.index+1]=a,e.didChange=!0),e.index=o+2,i.children.length&&S2(i,e)}return e.didChange}const $B=new Oe,KB={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(r,e){const t=Math.sign(this.scale.x)||1;e!==0?this.scale.x=r/e*t:this.scale.x=t},_setHeight(r,e){const t=Math.sign(this.scale.y)||1;e!==0?this.scale.y=r/e*t:this.scale.y=t},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new hr});const r=this._localBoundsCacheData;return r.index=1,r.didChange=!1,r.data[0]!==this._didViewChangeTick&&(r.didChange=!0,r.data[0]=this._didViewChangeTick),S2(this,r),r.didChange&&Kg(this,r.localBounds,$B),r.localBounds},getBounds(r,e){return Yg(this,r,e||new hr)}},ZB={_onRender:null,set onRender(r){const e=this.renderGroup||this.parentRenderGroup;if(!r){this._onRender&&e?.removeOnRender(this),this._onRender=null;return}this._onRender||e?.addOnRender(this),this._onRender=r},get onRender(){return this._onRender}},JB={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(r){this._zIndex!==r&&(this._zIndex=r,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(QB))}};function QB(r,e){return r._zIndex-e._zIndex}const e6={getGlobalPosition(r=new At,e=!1){return this.parent?this.parent.toGlobal(this._position,r,e):(r.x=this._position.x,r.y=this._position.y),r},toGlobal(r,e,t=!1){const n=this.getGlobalTransform(pr.get(),t);return e=n.apply(r,e),pr.return(n),e},toLocal(r,e,t,n){e&&(r=e.toGlobal(r,t,n));const i=this.getGlobalTransform(pr.get(),n);return t=i.applyInverse(r,t),pr.return(i),t}};class T2{constructor(){this.uid=Tt("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let t6=0;class r6{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new fn(this.textureOptions)}createTexture(e,t,n){const i=new Wt({...this.textureOptions,width:e,height:t,resolution:1,antialias:n,autoGarbageCollect:!1});return new Re({source:i,label:`texturePool_${t6++}`})}getOptimalTexture(e,t,n=1,i){let s=Math.ceil(e*n-1e-6),a=Math.ceil(t*n-1e-6);s=Ka(s),a=Ka(a);const o=(s<<17)+(a<<1)+(i?1:0);this._texturePool[o]||(this._texturePool[o]=[]);let l=this._texturePool[o].pop();return l||(l=this.createTexture(s,a,i)),l.source._resolution=n,l.source.width=s/n,l.source.height=a/n,l.source.pixelWidth=s,l.source.pixelHeight=a,l.frame.x=0,l.frame.y=0,l.frame.width=e,l.frame.height=t,l.updateUvs(),this._poolKeyHash[l.uid]=o,l}getSameSizeTexture(e,t=!1){const n=e.source;return this.getOptimalTexture(e.width,e.height,n._resolution,t)}returnTexture(e,t=!1){const n=this._poolKeyHash[e.uid];t&&(e.source.style=this.textureStyle),this._texturePool[n].push(e)}clear(e){if(e=e!==!1,e)for(const t in this._texturePool){const n=this._texturePool[t];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this._texturePool={}}}const vt=new r6;Ro.register(vt);class Ep{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Oe,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new T2,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const t=e.children;for(let n=0;n<t.length;n++){const i=t[n];i._updateFlags=15,this.addChild(i)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(vt.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;const e=this._parentCacheAsTextureRenderGroup;e&&!e.textureNeedsUpdate&&e.updateCacheTexture()}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const t=this.childrenToUpdate[e];t.list.fill(null),t.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const t=this.renderGroupChildren.indexOf(e);t>-1&&this.renderGroupChildren.splice(t,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const t=e.children;for(let n=0;n<t.length;n++)this.addChild(t[n])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const t=e.children;for(let n=0;n<t.length;n++)this.removeChild(t[n])}removeChildren(e){for(let t=0;t<e.length;t++)this.removeChild(e[t])}onChildUpdate(e){let t=this.childrenToUpdate[e.relativeRenderGroupDepth];t||(t=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),t.list[t.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let t=0;t<this._onRenderContainers.length;t++)this._onRenderContainers[t]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const t=this.root.children;for(let n=0;n<t.length;n++)this._getChildren(t[n],e);return e}_getChildren(e,t=[]){if(t.push(e),e.renderGroup)return t;const n=e.children;for(let i=0;i<n.length;i++)this._getChildren(n[i],t);return t}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Oe),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Oe),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Oe),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function n6(r,e,t={}){for(const n in e)!t[n]&&e[n]!==void 0&&(r[n]=e[n])}const Zh=new Qt(null),Ru=new Qt(null),Jh=new Qt(null,1,1),ku=new Qt(null),jc=1,Zg=2,cl=4;class et extends Vr{constructor(e={}){super(),this.uid=Tt("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new Oe,this.relativeGroupTransform=new Oe,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Qt(this,0,0),this._scale=Jh,this._pivot=Ru,this._origin=ku,this._skew=Zh,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],n6(this,e,{children:!0,parent:!0,effects:!0}),e.children?.forEach(t=>this.addChild(t)),e.parent?.addChild(this)}static mixin(e){Fe("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),ze.mixin(et,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||Fe(lt,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let i=0;i<e.length;i++)this.addChild(e[i]);return e[0]}const t=e[0],n=this.renderGroup||this.parentRenderGroup;return t.parent===this?(this.children.splice(this.children.indexOf(t),1),this.children.push(t),n&&(n.structureDidChange=!0),t):(t.parent&&t.parent.removeChild(t),this.children.push(t),this.sortableChildren&&(this.sortDirty=!0),t.parent=this,t.didChange=!0,t._updateFlags=15,n&&n.addChild(t),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this),this._didViewChangeTick++,t._zIndex!==0&&t.depthOfChildModified(),t)}removeChild(...e){if(e.length>1){for(let i=0;i<e.length;i++)this.removeChild(e[i]);return e[0]}const t=e[0],n=this.children.indexOf(t);return n>-1&&(this._didViewChangeTick++,this.children.splice(n,1),this.renderGroup?this.renderGroup.removeChild(t):this.parentRenderGroup&&this.parentRenderGroup.removeChild(t),t.parentRenderLayer&&t.parentRenderLayer.detach(t),t.parent=null,this.emit("childRemoved",t,this,n),t.emit("removed",this)),t}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),this.renderGroup=jt.get(Ep,this),this.groupTransform=Oe.IDENTITY,e?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e?.removeChild(this),jt.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Oe),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*xB}set angle(e){this.rotation=e*wB}get pivot(){return this._pivot===Ru&&(this._pivot=new Qt(this,0,0)),this._pivot}set pivot(e){this._pivot===Ru&&(this._pivot=new Qt(this,0,0),this._origin!==ku&&Ne("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===Zh&&(this._skew=new Qt(this,0,0)),this._skew}set skew(e){this._skew===Zh&&(this._skew=new Qt(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===Jh&&(this._scale=new Qt(this,1,1)),this._scale}set scale(e){this._scale===Jh&&(this._scale=new Qt(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===ku&&(this._origin=new Qt(this,0,0)),this._origin}set origin(e){this._origin===ku&&(this._origin=new Qt(this,0,0),this._pivot!==Ru&&Ne("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const t=this.getLocalBounds().width;this._setWidth(e,t)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const t=this.getLocalBounds().height;this._setHeight(e,t)}getSize(e){e||(e={});const t=this.getLocalBounds();return e.width=Math.abs(this.scale.x*t.width),e.height=Math.abs(this.scale.y*t.height),e}setSize(e,t){const n=this.getLocalBounds();typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,n.width),t!==void 0&&this._setHeight(t,n.height)}_updateSkew(){const e=this._rotation,t=this._skew;this._cx=Math.cos(e+t._y),this._sx=Math.sin(e+t._y),this._cy=-Math.sin(e-t._x),this._sy=Math.cos(e-t._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const t=this.localTransform,n=this._scale,i=this._pivot,s=this._origin,a=this._position,o=n._x,l=n._y,u=i._x,c=i._y,f=-s._x,h=-s._y;t.a=this._cx*o,t.b=this._sx*o,t.c=this._cy*l,t.d=this._sy*l,t.tx=a._x-(u*t.a+c*t.c)+(f*t.a+h*t.c)-f,t.ty=a._y-(u*t.b+c*t.d)+(f*t.b+h*t.d)-h}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=jc,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const n=ht.shared.setValue(e??16777215).toBgrNumber();n!==this.localColor&&(this.localColor=n,this._updateFlags|=jc,this._onUpdate())}get tint(){return cc(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Zg,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const t=e?2:0;(this.localDisplayStatus&2)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=cl,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const t=e?0:4;(this.localDisplayStatus&4)!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=cl,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const t=e?1:0;(this.localDisplayStatus&1)!==t&&(this._updateFlags|=cl,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){if(this.destroyed)return;this.destroyed=!0;let t;if(this.children.length&&(t=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e?.children)&&t)for(let i=0;i<t.length;++i)t[i].destroy(e);this.renderGroup?.destroy(),this.renderGroup=null}}ze.mixin(et,zB,XB,e6,ZB,KB,VB,WB,JB,LB,GB,YB,jB);class Jg extends et{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new hr(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=e.autoGarbageCollect??!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const t=this.bounds,{x:n,y:i}=e;return n>=t.minX&&n<=t.maxX&&i>=t.minY&&i<=t.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(e){this.unload(),super.destroy(e),this._bounds=null}collectRenderablesSimple(e,t,n){const{renderPipes:i}=t;i.blendMode.pushBlendMode(this,this.groupBlendMode,e),i[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const a=this.children,o=a.length;for(let l=0;l<o;l++)a[l].collectRenderables(e,t,n);i.blendMode.popBlendMode(e)}}class Rt extends Jg{constructor(e=Re.EMPTY){e instanceof Re&&(e={texture:e});const{texture:t=Re.EMPTY,anchor:n,roundPixels:i,width:s,height:a,...o}=e;super({label:"Sprite",...o}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Qt({_onUpdate:()=>{this.onViewUpdate()}}),n?this.anchor=n:t.defaultAnchor&&(this.anchor=t.defaultAnchor),this.texture=t,this.allowChildren=!1,this.roundPixels=i??!1,s!==void 0&&(this.width=s),a!==void 0&&(this.height=a)}static from(e,t=!1){return e instanceof Re?new Rt(e):new Rt(Re.from(e,t))}set texture(e){e||(e=Re.EMPTY);const t=this._texture;t!==e&&(t&&t.dynamic&&t.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return g2(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return Fe("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,t=this._texture,n=this._bounds,{width:i,height:s}=t.orig;n.minX=-e._x*i,n.maxX=n.minX+i,n.minY=-e._y*s,n.maxY=n.minY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._texture.destroy(n)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),t!==void 0&&this._setHeight(t,this._texture.orig.height)}}const i6=new hr;function E2(r,e,t){const n=i6;r.measurable=!0,Yg(r,t,n),e.addBoundsMask(n),r.measurable=!1}function A2(r,e,t){const n=yi.get();r.measurable=!0;const i=pr.get().identity(),s=C2(r,t,i);Kg(r,n,s),r.measurable=!1,e.addBoundsMask(n),pr.return(i),yi.return(n)}function C2(r,e,t){return r?(r!==e&&(C2(r.parent,e,t),r.updateLocalTransform(),t.append(r.localTransform)),t):(Ne("Mask bounds, renderable is not inside the root container"),t)}class P2{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Rt),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask=null)}addBounds(e,t){this.inverse||E2(this.mask,e,t)}addLocalBounds(e,t){A2(this.mask,e,t)}containsPoint(e,t){const n=this.mask;return t(n,e)}destroy(){this.reset()}static test(e){return e instanceof Rt}}P2.extension=re.MaskEffect;class R2{constructor(e){this.priority=0,this.pipe="colorMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}R2.extension=re.MaskEffect;class k2{constructor(e){this.priority=0,this.pipe="stencilMask",e?.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask!==null&&(this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null)}addBounds(e,t){E2(this.mask,e,t)}addLocalBounds(e,t){A2(this.mask,e,t)}containsPoint(e,t){const n=this.mask;return t(n,e)}destroy(){this.reset()}static test(e){return e instanceof et}}k2.extension=re.MaskEffect;const s6={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};let Kb=s6;const Ye={get(){return Kb},set(r){Kb=r}};class xi extends Wt{constructor(e){e.resource||(e.resource=Ye.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,t=this.height,n=this._resolution){const i=super.resize(e,t,n);return i&&this.resizeCanvas(),i}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}xi.extension=re.TextureSource;class zs extends Wt{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}zs.extension=re.TextureSource;var Ja=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Ja||{});class Qh{constructor(e,t=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=t,this.priority=n,this._once=i}match(e,t=null){return this._fn===e&&this._context===t}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const t=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const M2=class Cr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Qh(null,null,1/0),this.deltaMS=1/Cr.targetFPMS,this.elapsedMS=1/Cr.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=Ja.NORMAL){return this._addListener(new Qh(e,t,n))}addOnce(e,t,n=Ja.NORMAL){return this._addListener(new Qh(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Cr.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,Cr.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Cr._shared){const e=Cr._shared=new Cr;e.autoStart=!0,e._protected=!0}return Cr._shared}static get system(){if(!Cr._system){const e=Cr._system=new Cr;e.autoStart=!0,e._protected=!0}return Cr._system}};M2.targetFPMS=.06;let en=M2,ed;async function O2(){return ed??(ed=(async()=>{const e=Ye.get().createCanvas(1,1).getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const t=await new Promise(a=>{const o=document.createElement("video");o.onloadeddata=()=>a(o),o.onerror=()=>a(null),o.autoplay=!1,o.crossOrigin="anonymous",o.preload="auto",o.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",o.load()});if(!t)return"premultiply-alpha-on-upload";const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const s=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(i),e.deleteTexture(n),e.getExtension("WEBGL_lose_context")?.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),ed}const _f=class I2 extends Wt{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...I2.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=en.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,t=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(t.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await O2(),this._load=new Promise((n,i)=>{this.isValid?n(this):(this._resolve=n,this._reject=i,t.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${t.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(en.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(en.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(en.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};_f.extension=re.TextureSource;_f.defaultOptions={...Wt.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};_f.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let fl=_f;const bn=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(n=>typeof n=="string"||t?e(n):n):r);class a6{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||Ne(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const n=bn(e);let i;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.test(t)){i=u.getCacheableAssets(n,t);break}}const s=new Map(Object.entries(i||{}));i||n.forEach(l=>{s.set(l,t)});const a=[...s.keys()],o={cacheKeys:a,keys:n};n.forEach(l=>{this._cacheMap.set(l,o)}),a.forEach(l=>{const u=i?i[l]:t;this._cache.has(l)&&this._cache.get(l)!==u&&Ne("[Cache] already has key:",l),this._cache.set(l,s.get(l))})}remove(e){if(!this._cacheMap.has(e)){Ne(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(i=>{this._cache.delete(i)}),t.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const yt=new a6,Ap=[];ze.handleByList(re.TextureSource,Ap);function B2(r={}){const e=r&&r.resource,t=e?r.resource:r,n=e?r:{resource:r};for(let i=0;i<Ap.length;i++){const s=Ap[i];if(s.test(t))return new s(n)}throw new Error(`Could not find a source type for resource: ${n.resource}`)}function o6(r={},e=!1){const t=r&&r.resource,n=t?r.resource:r,i=t?r:{resource:r};if(!e&&yt.has(n))return yt.get(n);const s=new Re({source:B2(i)});return s.on("destroy",()=>{yt.has(n)&&yt.remove(n)}),e||yt.set(n,s),s}function l6(r,e=!1){return typeof r=="string"?yt.get(r):r instanceof Wt?new Re({source:r}):o6(r,e)}Re.from=l6;Wt.from=B2;ze.add(P2,R2,k2,fl,zs,xi,Xg);var os=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(os||{});function pn(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Go(r){return r.split("?")[0].split("#")[0]}function u6(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c6(r,e,t){return r.replace(new RegExp(u6(e),"g"),t)}function f6(r,e){let t="",n=0,i=-1,s=0,a=-1;for(let o=0;o<=r.length;++o){if(o<r.length)a=r.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",n=0):(t=t.slice(0,l),n=t.length-1-t.lastIndexOf("/")),i=o,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=o,s=0;continue}}}else t.length>0?t+=`/${r.slice(i+1,o)}`:t=r.slice(i+1,o),n=o-i-1;i=o,s=0}else a===46&&s!==-1?++s:s=-1}return t}const Nr={toPosix(r){return c6(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){pn(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(pn(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const n=Go(this.toPosix(e??Ye.get().getBaseUrl())),i=Go(this.toPosix(t??this.rootname(n)));return r=this.toPosix(r),r.startsWith("/")?Nr.join(i,r.slice(1)):this.isAbsolute(r)?r:this.join(n,r)},normalize(r){if(pn(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const n=r.endsWith("/");return r=f6(r),r.length>0&&n&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return pn(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const n=r[t];if(pn(n),n.length>0)if(e===void 0)e=n;else{const i=r[t-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(pn(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let n=-1,i=!0;const s=this.getProtocol(r),a=r;r=r.slice(s.length);for(let o=r.length-1;o>=1;--o)if(e=r.charCodeAt(o),e===47){if(!i){n=o;break}}else i=!1;return n===-1?t?"/":this.isUrl(a)?s+r:s:t&&n===1?"//":s+r.slice(0,n)},rootname(r){pn(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){pn(r),e&&pn(e),r=Go(this.toPosix(r));let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let a=e.length-1,o=-1;for(s=r.length-1;s>=0;--s){const l=r.charCodeAt(s);if(l===47){if(!i){t=s+1;break}}else o===-1&&(i=!1,o=s+1),a>=0&&(l===e.charCodeAt(a)?--a===-1&&(n=s):(a=-1,n=o))}return t===n?n=o:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){pn(r),r=Go(this.toPosix(r));let e=-1,t=0,n=-1,i=!0,s=0;for(let a=r.length-1;a>=0;--a){const o=r.charCodeAt(a);if(o===47){if(!i){t=a+1;break}continue}n===-1&&(i=!1,n=a+1),o===46?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":r.slice(e,n)},parse(r){pn(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=Go(this.toPosix(r));let t=r.charCodeAt(0);const n=this.isAbsolute(r);let i;e.root=this.rootname(r),n||this.hasProtocol(r)?i=1:i=0;let s=-1,a=0,o=-1,l=!0,u=r.length-1,c=0;for(;u>=i;--u){if(t=r.charCodeAt(u),t===47){if(!l){a=u+1;break}continue}o===-1&&(l=!1,o=u+1),t===46?s===-1?s=u:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||o===-1||c===0||c===1&&s===o-1&&s===a+1?o!==-1&&(a===0&&n?e.base=e.name=r.slice(1,o):e.base=e.name=r.slice(a,o)):(a===0&&n?(e.name=r.slice(1,s),e.base=r.slice(1,o)):(e.name=r.slice(a,s),e.base=r.slice(a,o)),e.ext=r.slice(s,o)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function F2(r,e,t,n,i){const s=e[t];for(let a=0;a<s.length;a++){const o=s[a];t<e.length-1?F2(r.replace(n[t],o),e,t+1,n,i):i.push(r.replace(n[t],o))}}function h6(r){const e=/\{(.*?)\}/g,t=r.match(e),n=[];if(t){const i=[];t.forEach(s=>{const a=s.substring(1,s.length-1).split(",");i.push(a)}),F2(r,i,0,t,n)}else n.push(r);return n}const Hc=r=>!Array.isArray(r);class ko{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}}getAlias(e){const{alias:t,src:n}=e;return bn(t||n,s=>typeof s=="string"?s:Array.isArray(s)?s.map(a=>a?.src??a):s?.src?s.src:s,!0)}addManifest(e){this._manifest&&Ne("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const n=[];let i=t;Array.isArray(t)||(i=Object.entries(t).map(([s,a])=>typeof a=="string"||Array.isArray(a)?{alias:s,src:a}:{alias:s,...a})),i.forEach(s=>{const a=s.src,o=s.alias;let l;if(typeof o=="string"){const u=this._createBundleAssetId(e,o);n.push(u),l=[o,u]}else{const u=o.map(c=>this._createBundleAssetId(e,c));n.push(...u),l=[...o,...u]}this.add({...s,alias:l,src:a})}),this._bundles[e]=n}add(e){const t=[];Array.isArray(e)?t.push(...e):t.push(e);let n;n=s=>{this.hasKey(s)&&Ne(`[Resolver] already has key: ${s} overwriting`)},bn(t).forEach(s=>{const{src:a}=s;let{data:o,format:l,loadParser:u,parser:c}=s;const f=bn(a).map(v=>typeof v=="string"?h6(v):Array.isArray(v)?v:[v]),h=this.getAlias(s);Array.isArray(h)?h.forEach(n):n(h);const d=[],p=v=>({...this._parsers.find(g=>g.test(v))?.parse(v),src:v});f.forEach(v=>{v.forEach(m=>{let g={};if(typeof m!="object"?g=p(m):(o=m.data??o,l=m.format??l,(m.loadParser||m.parser)&&(u=m.loadParser??u,c=m.parser??c),g={...p(m.src),...m}),!h)throw new Error(`[Resolver] alias is undefined for this asset: ${g.src}`);g=this._buildResolvedAsset(g,{aliases:h,data:o,format:l,loadParser:u,parser:c,progressSize:s.progressSize}),d.push(g)})}),h.forEach(v=>{this._assetMap[v]=d})})}resolveBundle(e){const t=Hc(e);e=bn(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const a=this.resolve(s),o={};for(const l in a){const u=a[l];o[this._extractAssetIdFromBundle(i,l)]=u}n[i]=o}}),t?n[e[0]]:n}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const n={};for(const i in t)n[i]=t[i].src;return n}return t.src}resolve(e){const t=Hc(e);e=bn(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const a=this._getPreferredOrder(s);a?.priority.forEach(o=>{a.params[o].forEach(l=>{const u=s.filter(c=>c[o]?c[o]===l:!1);u.length&&(s=u)})}),this._resolverHash[i]=s[0]}else this._resolverHash[i]=this._buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const n=e[t],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}_buildResolvedAsset(e,t){const{aliases:n,data:i,loadParser:s,parser:a,format:o,progressSize:l}=t;return(this._basePath||this._rootPath)&&(e.src=Nr.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.parser=a??e.parser,e.format=o??e.format??d6(e.src),l!==void 0&&(e.progressSize=l),e}}ko.RETINA_PREFIX=/@([0-9\.]+)x/;function d6(r){return r.split(".").pop().split("?").shift().split("#").shift()}const Cp=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r},D2=class Qo{constructor(e,t){this.linkedSheets=[];let n=e;e?.source instanceof Wt&&(n={texture:e,data:t});const{texture:i,data:s,cachePrefix:a=""}=n;this.cachePrefix=a,this._texture=i instanceof Re?i:null,this.textureSource=i.source,this.textures={},this.animations={},this.data=s;const o=parseFloat(s.meta.scale);o?(this.resolution=o,i.source.resolution=this.resolution):this.resolution=i.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Qo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const n=Qo.BATCH_SIZE;for(;t-e<n&&t<this._frameKeys.length;){const i=this._frameKeys[t],s=this._frames[i],a=s.frame;if(a){let o=null,l=null;const u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,c=new ft(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?o=new ft(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):o=new ft(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new ft(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new Re({source:this.textureSource,frame:o,orig:c,trim:l,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:i.toString()})}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){const i=e[t][n];this.animations[t].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Qo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Qo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};D2.BATCH_SIZE=1e3;let Zb=D2;const p6=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function L2(r,e,t){const n={};if(r.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[`${e.cachePrefix}${i}`]=e.textures[i]}),!t){const i=Nr.dirname(r[0]);e.linkedSheets.forEach((s,a)=>{const o=L2([`${i}/${e.data.meta.related_multi_packs[a]}`],s,!0);Object.assign(n,o)})}return n}const g6={extension:re.Asset,cache:{test:r=>r instanceof Zb,getCacheableAssets:(r,e)=>L2(r,e,!1)},resolver:{extension:{type:re.ResolveParser,name:"resolveSpritesheet"},test:r=>{const t=r.split("?")[0].split("."),n=t.pop(),i=t.pop();return n==="json"&&p6.includes(i)},parse:r=>{const e=r.split(".");return{resolution:parseFloat(ko.RETINA_PREFIX.exec(r)?.[1]??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",id:"spritesheet",extension:{type:re.LoadParser,priority:os.Normal,name:"spritesheetLoader"},async testParse(r,e){return Nr.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){const{texture:n,imageFilename:i,textureOptions:s,cachePrefix:a}=e?.data??{};let o=Nr.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let l;if(n instanceof Re)l=n;else{const f=Cp(o+(i??r.meta.image),e.src);l=(await t.load([{src:f,data:s}]))[f]}const u=new Zb({texture:l.source,data:r,cachePrefix:a});await u.parse();const c=r?.meta?.related_multi_packs;if(Array.isArray(c)){const f=[];for(const d of c){if(typeof d!="string")continue;let p=o+d;e.data?.ignoreMultiPack||(p=Cp(p,e.src),f.push(t.load({src:p,data:{textureOptions:s,ignoreMultiPack:!0}})))}const h=await Promise.all(f);u.linkedSheets=h,h.forEach(d=>{d.linkedSheets=[u].concat(u.linkedSheets.filter(p=>p!==d))})}return u},async unload(r,e,t){await t.unload(r.textureSource._sourceOrigin),r.destroy(!1)}}};ze.add(g6);class U2{constructor(e){this._lastTransform="",this._observer=null,this._tickerAttached=!1,this.updateTranslation=()=>{if(!this._canvas)return;const t=this._canvas.getBoundingClientRect(),n=this._canvas.width,i=this._canvas.height,s=t.width/n*this._renderer.resolution,a=t.height/i*this._renderer.resolution,o=t.left,l=t.top,u=`translate(${o}px, ${l}px) scale(${s}, ${a})`;u!==this._lastTransform&&(this._domElement.style.transform=u,this._lastTransform=u)},this._domElement=e.domElement,this._renderer=e.renderer,!(globalThis.OffscreenCanvas&&this._renderer.canvas instanceof OffscreenCanvas)&&(this._canvas=this._renderer.canvas,this._attachObserver())}get canvas(){return this._canvas}ensureAttached(){!this._domElement.parentNode&&this._canvas.parentNode&&(this._canvas.parentNode.appendChild(this._domElement),this.updateTranslation())}_attachObserver(){"ResizeObserver"in globalThis?(this._observer&&(this._observer.disconnect(),this._observer=null),this._observer=new ResizeObserver(e=>{for(const t of e){if(t.target!==this._canvas)continue;const n=this.canvas.width,i=this.canvas.height,s=t.contentRect.width/n*this._renderer.resolution,a=t.contentRect.height/i*this._renderer.resolution;(this._lastScaleX!==s||this._lastScaleY!==a)&&(this.updateTranslation(),this._lastScaleX=s,this._lastScaleY=a)}}),this._observer.observe(this._canvas)):this._tickerAttached||en.shared.add(this.updateTranslation,this,Ja.HIGH)}destroy(){this._observer?(this._observer.disconnect(),this._observer=null):this._tickerAttached&&en.shared.remove(this.updateTranslation),this._domElement=null,this._renderer=null,this._canvas=null,this._tickerAttached=!1,this._lastTransform="",this._lastScaleX=null,this._lastScaleY=null}}class $l{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=$l.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new At,this.page=new At,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var td=/iPhone/i,Jb=/iPod/i,Qb=/iPad/i,e0=/\biOS-universal(?:.+)Mac\b/i,rd=/\bAndroid(?:.+)Mobile\b/i,t0=/Android/i,ua=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Mu=/Silk/i,oi=/Windows Phone/i,r0=/\bWindows(?:.+)ARM\b/i,n0=/BlackBerry/i,i0=/BB10/i,s0=/Opera Mini/i,a0=/\b(CriOS|Chrome)(?:.+)Mobile/i,o0=/Mobile(?:.+)Firefox\b/i,l0=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function m6(r){return function(e){return e.test(r)}}function u0(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=m6(t),s={apple:{phone:i(td)&&!i(oi),ipod:i(Jb),tablet:!i(td)&&(i(Qb)||l0(e))&&!i(oi),universal:i(e0),device:(i(td)||i(Jb)||i(Qb)||i(e0)||l0(e))&&!i(oi)},amazon:{phone:i(ua),tablet:!i(ua)&&i(Mu),device:i(ua)||i(Mu)},android:{phone:!i(oi)&&i(ua)||!i(oi)&&i(rd),tablet:!i(oi)&&!i(ua)&&!i(rd)&&(i(Mu)||i(t0)),device:!i(oi)&&(i(ua)||i(Mu)||i(rd)||i(t0))||i(/\bokhttp\b/i)},windows:{phone:i(oi),tablet:i(r0),device:i(oi)||i(r0)},other:{blackberry:i(n0),blackberry10:i(i0),opera:i(s0),firefox:i(o0),chrome:i(a0),device:i(n0)||i(i0)||i(s0)||i(o0)||i(a0)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const v6=u0.default??u0,_6=v6(globalThis.navigator),b6=9,c0=100,y6=0,x6=0,f0=2,h0=1,w6=-1e3,S6=-1e3,T6=2,Qg=class N2{constructor(e,t=_6){this._mobileInfo=t,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pools={},this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._isRunningTests=!1,this._boundOnKeyDown=this._onKeyDown.bind(this),this._boundOnMouseMove=this._onMouseMove.bind(this),this._hookDiv=null,(t.tablet||t.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}get div(){return this._div}_createTouchHook(){const e=document.createElement("button");e.style.width=`${h0}px`,e.style.height=`${h0}px`,e.style.position="absolute",e.style.top=`${w6}px`,e.style.left=`${S6}px`,e.style.zIndex=T6.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.top=`${y6}px`,this._div.style.left=`${x6}px`,this._div.style.pointerEvents="none",this._div.style.zIndex=f0.toString(),this._canvasObserver=new U2({domElement:this._div,renderer:this._renderer})),this._activateOnTab&&globalThis.addEventListener("keydown",this._boundOnKeyDown,!1),this._deactivateOnMouseMove&&globalThis.document.addEventListener("mousemove",this._boundOnMouseMove,!0);const e=this._renderer.view.canvas;if(e.parentNode)this._canvasObserver.ensureAttached(),this._initAccessibilitySetup();else{const t=new MutationObserver(()=>{e.parentNode&&(t.disconnect(),this._canvasObserver.ensureAttached(),this._initAccessibilitySetup())});t.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._boundOnKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const e of this._children)e._accessibleDiv?.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;for(const e in this._pools)this._pools[e].forEach(n=>{n.parentNode&&n.parentNode.removeChild(n)}),delete this._pools[e];this._div?.parentNode&&this._div.parentNode.removeChild(this._div),this._pools={},this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);const t=e.children;if(t)for(let n=0;n<t.length;n++)this._updateAccessibleObjects(t[n])}init(e){const n={accessibilityOptions:{...N2.defaultOptions,...e?.accessibilityOptions||{}}};this.debug=n.accessibilityOptions.debug,this._activateOnTab=n.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=n.accessibilityOptions.deactivateOnMouseMove,n.accessibilityOptions.enabledByDefault&&this._activate(),this._renderer.runners.postrender.remove(this)}postrender(){const e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,(!this._renderer.renderingToScreen||!this._renderer.view.canvas)&&!this._isRunningTests))return;const t=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const n of this._children)n._renderId===this._renderId&&t.add(this._children.indexOf(n))}for(let n=this._children.length-1;n>=0;n--){const i=this._children[n];t.has(n)||(i._accessibleDiv&&i._accessibleDiv.parentNode&&(i._accessibleDiv.parentNode.removeChild(i._accessibleDiv),this._getPool(i.accessibleType).push(i._accessibleDiv),i._accessibleDiv=null),i._accessibleActive=!1,b2(this._children,n,1))}this._renderer.renderingToScreen&&this._canvasObserver.ensureAttached();for(let n=0;n<this._children.length;n++){const i=this._children[n];if(!i._accessibleActive||!i._accessibleDiv)continue;const s=i._accessibleDiv,a=i.hitArea||i.getBounds().rectangle;if(i.hitArea){const o=i.worldTransform;s.style.left=`${o.tx+a.x*o.a}px`,s.style.top=`${o.ty+a.y*o.d}px`,s.style.width=`${a.width*o.a}px`,s.style.height=`${a.height*o.d}px`}else this._capHitArea(a),s.style.left=`${a.x}px`,s.style.top=`${a.y}px`,s.style.width=`${a.width}px`,s.style.height=`${a.height}px`}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:n}=this._renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}_addChild(e){let n=this._getPool(e.accessibleType).pop();n?(n.innerHTML="",n.removeAttribute("title"),n.removeAttribute("aria-label"),n.tabIndex=0):(e.accessibleType==="button"?n=document.createElement("button"):(n=document.createElement(e.accessibleType),n.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,e.accessibleText&&(n.innerText=e.accessibleText)),n.style.width=`${c0}px`,n.style.height=`${c0}px`,n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=f0.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?n.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(n.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&n.setAttribute("aria-label",e.accessibleHint),e.interactive?n.tabIndex=e.tabIndex:n.tabIndex=0,this.debug&&this._updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv)}_dispatchEvent(e,t){const{container:n}=e.target,i=this._renderer.events.rootBoundary,s=Object.assign(new $l(i),{target:n});i.rootTarget=this._renderer.lastObjectRendered,t.forEach(a=>i.dispatchEvent(s,a))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==b6||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._canvasObserver?.destroy(),this._canvasObserver=null,this._div=null,this._pools=null,this._children=null,this._renderer=null,this._hookDiv=null,globalThis.removeEventListener("keydown",this._boundOnKeyDown),this._boundOnKeyDown=null,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._boundOnMouseMove=null}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}_getPool(e){return this._pools[e]||(this._pools[e]=[]),this._pools[e]}};Qg.extension={type:[re.WebGLSystem,re.WebGPUSystem],name:"accessibility"};Qg.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let E6=Qg;const A6={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1},nd=Object.create(null),d0=Object.create(null);function El(r,e){let t=d0[r];return t===void 0&&(nd[e]===void 0&&(nd[e]=1),d0[r]=t=nd[e]++),t}let Ou;function G2(){return(!Ou||Ou?.isContextLost())&&(Ou=Ye.get().createCanvas().getContext("webgl",{})),Ou}let Iu;function C6(){if(!Iu){Iu="mediump";const r=G2();r&&r.getShaderPrecisionFormat&&(Iu=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision?"highp":"mediump")}return Iu}function P6(r,e,t){return e?r:t?(r=r.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${r}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${r}
        `}function R6(r,e,t){const n=t?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(r.substring(0,9)!=="precision"){let i=t?e.requestedFragmentPrecision:e.requestedVertexPrecision;return i==="highp"&&n!=="highp"&&(i="mediump"),`precision ${i} float;
${r}`}else if(n!=="highp"&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}function k6(r,e){return e?`#version 300 es
${r}`:r}const M6={},O6={};function I6(r,{name:e="pixi-program"},t=!0){e=e.replace(/\s+/g,"-"),e+=t?"-fragment":"-vertex";const n=t?M6:O6;return n[e]?(n[e]++,e+=`-${n[e]}`):n[e]=1,r.indexOf("#define SHADER_NAME")!==-1?r:`${`#define SHADER_NAME ${e}`}
${r}`}function B6(r,e){return e?r.replace("#version 300 es",""):r}const id={stripVersion:B6,ensurePrecision:R6,addProgramDefines:P6,setProgramName:I6,insertVersion:k6},zo=Object.create(null),z2=class Pp{constructor(e){e={...Pp.defaultOptions,...e};const t=e.fragment.indexOf("#version 300 es")!==-1,n={stripVersion:t,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:C6()},setProgramName:{name:e.name},addProgramDefines:t,insertVersion:t};let i=e.fragment,s=e.vertex;Object.keys(id).forEach(a=>{const o=n[a];i=id[a](i,o,!0),s=id[a](s,o,!1)}),this.fragment=i,this.vertex=s,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=El(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,zo[this._cacheKey]=null}static from(e){const t=`${e.vertex}:${e.fragment}`;return zo[t]||(zo[t]=new Pp(e),zo[t]._cacheKey=t),zo[t]}};z2.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let sr=z2;const p0={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function es(r){return p0[r]??p0.float32}const F6={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function D6({source:r,entryPoint:e}){const t={},n=r.indexOf(`fn ${e}`);if(n!==-1){const i=r.indexOf("->",n);if(i!==-1){const s=r.substring(n,i),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let o;for(;(o=a.exec(s))!==null;){const l=F6[o[3]]??"float32";t[o[2]]={location:parseInt(o[1],10),format:l,stride:es(l).stride,offset:0,instance:!1,start:0}}}}return t}function sd(r){const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,t=/@group\((\d+)\)/,n=/@binding\((\d+)\)/,i=/var(<[^>]+>)? (\w+)/,s=/:\s*(\w+)/,a=/struct\s+(\w+)\s*{([^}]+)}/g,o=/(\w+)\s*:\s*([\w\<\>]+)/g,l=/struct\s+(\w+)/,u=r.match(e)?.map(f=>({group:parseInt(f.match(t)[1],10),binding:parseInt(f.match(n)[1],10),name:f.match(i)[2],isUniform:f.match(i)[1]==="<uniform>",type:f.match(s)[1]}));if(!u)return{groups:[],structs:[]};const c=r.match(a)?.map(f=>{const h=f.match(l)[1],d=f.match(o).reduce((p,v)=>{const[m,g]=v.split(":");return p[m.trim()]=g.trim(),p},{});return d?{name:h,members:d}:null}).filter(({name:f})=>u.some(h=>h.type===f))??[];return{groups:u,structs:c}}var el=(r=>(r[r.VERTEX=1]="VERTEX",r[r.FRAGMENT=2]="FRAGMENT",r[r.COMPUTE=4]="COMPUTE",r))(el||{});function L6({groups:r}){const e=[];for(let t=0;t<r.length;t++){const n=r[t];e[n.group]||(e[n.group]=[]),n.isUniform?e[n.group].push({binding:n.binding,visibility:el.VERTEX|el.FRAGMENT,buffer:{type:"uniform"}}):n.type==="sampler"?e[n.group].push({binding:n.binding,visibility:el.FRAGMENT,sampler:{type:"filtering"}}):n.type==="texture_2d"&&e[n.group].push({binding:n.binding,visibility:el.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function U6({groups:r}){const e=[];for(let t=0;t<r.length;t++){const n=r[t];e[n.group]||(e[n.group]={}),e[n.group][n.name]=n.binding}return e}function N6(r,e){const t=new Set,n=new Set,i=[...r.structs,...e.structs].filter(a=>t.has(a.name)?!1:(t.add(a.name),!0)),s=[...r.groups,...e.groups].filter(a=>{const o=`${a.name}-${a.binding}`;return n.has(o)?!1:(n.add(o),!0)});return{structs:i,groups:s}}const jo=Object.create(null);class Jt{constructor(e){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:t,vertex:n,layout:i,gpuLayout:s,name:a}=e;if(this.name=a,this.fragment=t,this.vertex=n,t.source===n.source){const o=sd(t.source);this.structsAndGroups=o}else{const o=sd(n.source),l=sd(t.source);this.structsAndGroups=N6(o,l)}this.layout=i??U6(this.structsAndGroups),this.gpuLayout=s??L6(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:t}=this,n=e.source+t.source+e.entryPoint+t.entryPoint;this._layoutKey=El(n,"program")}get attributeData(){return this._attributeData??(this._attributeData=D6(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,jo[this._cacheKey]=null}static from(e){const t=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return jo[t]||(jo[t]=new Jt(e),jo[t]._cacheKey=t),jo[t]}}const j2=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],G6=j2.reduce((r,e)=>(r[e]=!0,r),{});function z6(r,e){switch(r){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const H2=class V2{constructor(e,t){this._touched=0,this.uid=Tt("uniform"),this._resourceType="uniformGroup",this._resourceId=Tt("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,t={...V2.defaultOptions,...t},this.uniformStructures=e;const n={};for(const i in e){const s=e[i];if(s.name=i,s.size=s.size??1,!G6[s.type]){const a=s.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(a){const[,o,l]=a;throw new Error(`Uniform type ${s.type} is not supported. Use type: '${o}', size: ${l} instead.`)}throw new Error(`Uniform type ${s.type} is not supported. Supported uniform types are: ${j2.join(", ")}`)}s.value??(s.value=z6(s.type,s.size)),n[i]=s.value}this.uniforms=n,this._dirtyId=1,this.ubo=t.ubo,this.isStatic=t.isStatic,this._signature=El(Object.keys(n).map(i=>`${i}-${e[i].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};H2.defaultOptions={ubo:!1,isStatic:!1};let mr=H2;class wi{constructor(e){this.resources=Object.create(null),this._dirty=!0;let t=0;for(const n in e){const i=e[n];this.setResource(i,t++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let t=0;for(const n in this.resources)e[t++]=this.resources[n]._resourceId;this._key=e.join("|")}setResource(e,t){const n=this.resources[t];e!==n&&(n&&e.off?.("change",this.onResourceChange,this),e.on?.("change",this.onResourceChange,this),this.resources[t]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e,t){const n=this.resources;for(const i in n)n[i]._gcLastUsed=e,n[i]._touched=t}destroy(){const e=this.resources;for(const t in e)e[t]?.off?.("change",this.onResourceChange,this);this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const t=this.resources;for(const n in t)t[n]===e&&(t[n]=null)}else this._updateKey()}}var jr=(r=>(r[r.WEBGL=1]="WEBGL",r[r.WEBGPU=2]="WEBGPU",r[r.BOTH=3]="BOTH",r))(jr||{});class dn extends Vr{constructor(e){super(),this.uid=Tt("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:t,glProgram:n,groups:i,resources:s,compatibleRenderers:a,groupMap:o}=e;this.gpuProgram=t,this.glProgram=n,a===void 0&&(a=0,t&&(a|=jr.WEBGPU),n&&(a|=jr.WEBGL)),this.compatibleRenderers=a;const l={};if(!s&&!i&&(s={}),s&&i)throw new Error("[Shader] Cannot have both resources and groups");if(!t&&i&&!o)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!t&&i&&o)for(const u in o)for(const c in o[u]){const f=o[u][c];l[f]={group:u,binding:c,name:f}}else if(t&&i&&!o){const u=t.structsAndGroups.groups;o={},u.forEach(c=>{o[c.group]=o[c.group]||{},o[c.group][c.binding]=c.name,l[c.name]=c})}else if(s){i={},o={},t&&t.structsAndGroups.groups.forEach(f=>{o[f.group]=o[f.group]||{},o[f.group][f.binding]=f.name,l[f.name]=f});let u=0;for(const c in s)l[c]||(i[99]||(i[99]=new wi,this._ownedBindGroups.push(i[99])),l[c]={group:99,binding:u,name:c},o[99]=o[99]||{},o[99][u]=c,u++);for(const c in s){const f=c;let h=s[c];!h.source&&!h._resourceType&&(h=new mr(h));const d=l[f];d&&(i[d.group]||(i[d.group]=new wi,this._ownedBindGroups.push(i[d.group])),i[d.group].setResource(h,d.binding))}}this.groups=i,this._uniformBindMap=o,this.resources=this._buildResourceAccessor(i,l)}addResource(e,t,n){var i,s;(i=this._uniformBindMap)[t]||(i[t]={}),(s=this._uniformBindMap[t])[n]||(s[n]=e),this.groups[t]||(this.groups[t]=new wi,this._ownedBindGroups.push(this.groups[t]))}_buildResourceAccessor(e,t){const n={};for(const i in t){const s=t[i];Object.defineProperty(n,s.name,{get(){return e[s.group].getResource(s.binding)},set(a){e[s.group].setResource(a,s.binding)}})}return n}destroy(e=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),e&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(t=>{t.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(e){const{gpu:t,gl:n,...i}=e;let s,a;return t&&(s=Jt.from(t)),n&&(a=sr.from(n)),new dn({gpuProgram:s,glProgram:a,...i})}}const j6={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},ad=0,od=1,ld=2,ud=3,cd=4,fd=5,Rp=class W2{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<ad)}set blend(e){!!(this.data&1<<ad)!==e&&(this.data^=1<<ad)}get offsets(){return!!(this.data&1<<od)}set offsets(e){!!(this.data&1<<od)!==e&&(this.data^=1<<od)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<ld)}set culling(e){!!(this.data&1<<ld)!==e&&(this.data^=1<<ld)}get depthTest(){return!!(this.data&1<<ud)}set depthTest(e){!!(this.data&1<<ud)!==e&&(this.data^=1<<ud)}get depthMask(){return!!(this.data&1<<fd)}set depthMask(e){!!(this.data&1<<fd)!==e&&(this.data^=1<<fd)}get clockwiseFrontFace(){return!!(this.data&1<<cd)}set clockwiseFrontFace(e){!!(this.data&1<<cd)!==e&&(this.data^=1<<cd)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=j6[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new W2;return e.depthTest=!1,e.blend=!0,e}};Rp.default2d=Rp.for2d();let Pn=Rp;const q2=class kp extends dn{constructor(e){e={...kp.defaultOptions,...e},super(e),this.enabled=!0,this._state=Pn.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1),e.blendRequired&&this.addResource("uBackTexture",0,3)}apply(e,t,n,i){e.applyFilter(this,t,n,i)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){const{gpu:t,gl:n,...i}=e;let s,a;return t&&(s=Jt.from(t)),n&&(a=sr.from(n)),new kp({gpuProgram:s,glProgram:a,...i})}};q2.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let Hr=q2;const Mp=[];ze.handleByNamedList(re.Environment,Mp);async function H6(r){if(!r)for(let e=0;e<Mp.length;e++){const t=Mp[e];if(t.value.test()){await t.value.load();return}}}let Ho;function X2(){if(typeof Ho=="boolean")return Ho;try{Ho=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ho=!1}return Ho}function g0(r,e,t=2){const n=e&&e.length,i=n?e[0]*t:r.length;let s=Y2(r,0,i,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u;if(n&&(s=Y6(r,e,s,t)),r.length>80*t){o=r[0],l=r[1];let c=o,f=l;for(let h=t;h<i;h+=t){const d=r[h],p=r[h+1];d<o&&(o=d),p<l&&(l=p),d>c&&(c=d),p>f&&(f=p)}u=Math.max(c-o,f-l),u=u!==0?32767/u:0}return Al(s,a,t,o,l,u,0),a}function Y2(r,e,t,n,i){let s;if(i===sF(r,e,t,n)>0)for(let a=e;a<t;a+=n)s=m0(a/n|0,r[a],r[a+1],s);else for(let a=t-n;a>=e;a-=n)s=m0(a/n|0,r[a],r[a+1],s);return s&&Qa(s,s.next)&&(Pl(s),s=s.next),s}function js(r,e){if(!r)return r;e||(e=r);let t=r,n;do if(n=!1,!t.steiner&&(Qa(t,t.next)||Bt(t.prev,t,t.next)===0)){if(Pl(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Al(r,e,t,n,i,s,a){if(!r)return;!a&&s&&Q6(r,n,i,s);let o=r;for(;r.prev!==r.next;){const l=r.prev,u=r.next;if(s?W6(r,n,i,s):V6(r)){e.push(l.i,r.i,u.i),Pl(r),r=u.next,o=u.next;continue}if(r=u,r===o){a?a===1?(r=q6(js(r),e),Al(r,e,t,n,i,s,2)):a===2&&X6(r,e,t,n,i,s):Al(js(r),e,t,n,i,s,1);break}}}function V6(r){const e=r.prev,t=r,n=r.next;if(Bt(e,t,n)>=0)return!1;const i=e.x,s=t.x,a=n.x,o=e.y,l=t.y,u=n.y,c=Math.min(i,s,a),f=Math.min(o,l,u),h=Math.max(i,s,a),d=Math.max(o,l,u);let p=n.next;for(;p!==e;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&tl(i,o,s,l,a,u,p.x,p.y)&&Bt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function W6(r,e,t,n){const i=r.prev,s=r,a=r.next;if(Bt(i,s,a)>=0)return!1;const o=i.x,l=s.x,u=a.x,c=i.y,f=s.y,h=a.y,d=Math.min(o,l,u),p=Math.min(c,f,h),v=Math.max(o,l,u),m=Math.max(c,f,h),g=Op(d,p,e,t,n),_=Op(v,m,e,t,n);let b=r.prevZ,w=r.nextZ;for(;b&&b.z>=g&&w&&w.z<=_;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==a&&tl(o,c,l,f,u,h,b.x,b.y)&&Bt(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==i&&w!==a&&tl(o,c,l,f,u,h,w.x,w.y)&&Bt(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=g;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==a&&tl(o,c,l,f,u,h,b.x,b.y)&&Bt(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=_;){if(w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==i&&w!==a&&tl(o,c,l,f,u,h,w.x,w.y)&&Bt(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function q6(r,e){let t=r;do{const n=t.prev,i=t.next.next;!Qa(n,i)&&K2(n,t,t.next,i)&&Cl(n,i)&&Cl(i,n)&&(e.push(n.i,t.i,i.i),Pl(t),Pl(t.next),t=r=i),t=t.next}while(t!==r);return js(t)}function X6(r,e,t,n,i,s){let a=r;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&rF(a,o)){let l=Z2(a,o);a=js(a,a.next),l=js(l,l.next),Al(a,e,t,n,i,s,0),Al(l,e,t,n,i,s,0);return}o=o.next}a=a.next}while(a!==r)}function Y6(r,e,t,n){const i=[];for(let s=0,a=e.length;s<a;s++){const o=e[s]*n,l=s<a-1?e[s+1]*n:r.length,u=Y2(r,o,l,n,!1);u===u.next&&(u.steiner=!0),i.push(tF(u))}i.sort($6);for(let s=0;s<i.length;s++)t=K6(i[s],t);return t}function $6(r,e){let t=r.x-e.x;if(t===0&&(t=r.y-e.y,t===0)){const n=(r.next.y-r.y)/(r.next.x-r.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=n-i}return t}function K6(r,e){const t=Z6(r,e);if(!t)return e;const n=Z2(t,r);return js(n,n.next),js(t,t.next)}function Z6(r,e){let t=e;const n=r.x,i=r.y;let s=-1/0,a;if(Qa(r,t))return t;do{if(Qa(r,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const f=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=n&&f>s&&(s=f,a=t.x<t.next.x?t:t.next,f===n))return a}t=t.next}while(t!==e);if(!a)return null;const o=a,l=a.x,u=a.y;let c=1/0;t=a;do{if(n>=t.x&&t.x>=l&&n!==t.x&&$2(i<u?n:s,i,l,u,i<u?s:n,i,t.x,t.y)){const f=Math.abs(i-t.y)/(n-t.x);Cl(t,r)&&(f<c||f===c&&(t.x>a.x||t.x===a.x&&J6(a,t)))&&(a=t,c=f)}t=t.next}while(t!==o);return a}function J6(r,e){return Bt(r.prev,r,e.prev)<0&&Bt(e.next,r,r.next)<0}function Q6(r,e,t,n){let i=r;do i.z===0&&(i.z=Op(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,eF(i)}function eF(r){let e,t=1;do{let n=r,i;r=null;let s=null;for(e=0;n;){e++;let a=n,o=0;for(let u=0;u<t&&(o++,a=a.nextZ,!!a);u++);let l=t;for(;o>0||l>0&&a;)o!==0&&(l===0||!a||n.z<=a.z)?(i=n,n=n.nextZ,o--):(i=a,a=a.nextZ,l--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;n=a}s.nextZ=null,t*=2}while(e>1);return r}function Op(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function tF(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function $2(r,e,t,n,i,s,a,o){return(i-a)*(e-o)>=(r-a)*(s-o)&&(r-a)*(n-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(i-a)*(n-o)}function tl(r,e,t,n,i,s,a,o){return!(r===a&&e===o)&&$2(r,e,t,n,i,s,a,o)}function rF(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!nF(r,e)&&(Cl(r,e)&&Cl(e,r)&&iF(r,e)&&(Bt(r.prev,r,e.prev)||Bt(r,e.prev,e))||Qa(r,e)&&Bt(r.prev,r,r.next)>0&&Bt(e.prev,e,e.next)>0)}function Bt(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Qa(r,e){return r.x===e.x&&r.y===e.y}function K2(r,e,t,n){const i=Fu(Bt(r,e,t)),s=Fu(Bt(r,e,n)),a=Fu(Bt(t,n,r)),o=Fu(Bt(t,n,e));return!!(i!==s&&a!==o||i===0&&Bu(r,t,e)||s===0&&Bu(r,n,e)||a===0&&Bu(t,r,n)||o===0&&Bu(t,e,n))}function Bu(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Fu(r){return r>0?1:r<0?-1:0}function nF(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&K2(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Cl(r,e){return Bt(r.prev,r,r.next)<0?Bt(r,e,r.next)>=0&&Bt(r,r.prev,e)>=0:Bt(r,e,r.prev)<0||Bt(r,r.next,e)<0}function iF(r,e){let t=r,n=!1;const i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function Z2(r,e){const t=Ip(r.i,r.x,r.y),n=Ip(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function m0(r,e,t,n){const i=Ip(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Pl(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Ip(r,e,t){return{i:r,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function sF(r,e,t,n){let i=0;for(let s=e,a=t-n;s<t;s+=n)i+=(r[a]-r[s])*(r[s+1]+r[a+1]),a=s;return i}const aF=g0.default||g0;var Or=(r=>(r[r.NONE=0]="NONE",r[r.COLOR=16384]="COLOR",r[r.STENCIL=1024]="STENCIL",r[r.DEPTH=256]="DEPTH",r[r.COLOR_DEPTH=16640]="COLOR_DEPTH",r[r.COLOR_STENCIL=17408]="COLOR_STENCIL",r[r.DEPTH_STENCIL=1280]="DEPTH_STENCIL",r[r.ALL=17664]="ALL",r))(Or||{});class J2{constructor(e){this.items=[],this._name=e}emit(e,t,n,i,s,a,o,l){const{name:u,items:c}=this;for(let f=0,h=c.length;f<h;f++)c[f][u](e,t,n,i,s,a,o,l);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&this.items.splice(t,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const oF=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Q2=class eS extends Vr{constructor(e){super(),this.tick=0,this.uid=Tt("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const t=[...oF,...this.config.runners??[]];this._addRunners(...t),this._unsafeEvalCheck()}async init(e={}){const t=e.skipExtensionImports===!0?!0:e.manageImports===!1;await H6(t),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const n in this._systemsHash)e={...this._systemsHash[n].constructor.defaultOptions,...e};e={...eS.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let n=0;n<this.runners.init.items.length;n++)await this.runners.init.items[n].init(e);this._initOptions=e}render(e,t){this.tick++;let n=e;if(n instanceof et&&(n={container:n},t&&(Fe(lt,"passing a second argument is deprecated, please use render options instead"),n.target=t.renderTexture)),n.target||(n.target=this.view.renderTarget),n.target===this.view.renderTarget&&(this._lastObjectRendered=n.container,n.clearColor??(n.clearColor=this.background.colorRgba),n.clear??(n.clear=this.background.clearBeforeRender)),n.clearColor){const i=Array.isArray(n.clearColor)&&n.clearColor.length===4;n.clearColor=i?n.clearColor:ht.shared.setValue(n.clearColor).toArray()}n.transform||(n.container.updateLocalTransform(),n.transform=n.container.localTransform),n.container.visible&&(n.container.enableRenderGroup(),this.runners.prerender.emit(n),this.runners.renderStart.emit(n),this.runners.render.emit(n),this.runners.renderEnd.emit(n),this.runners.postrender.emit(n))}resize(e,t,n){const i=this.view.resolution;this.view.resize(e,t,n),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),n!==void 0&&n!==i&&this.runners.resolutionChange.emit(n)}clear(e={}){const t=this;e.target||(e.target=t.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=Or.ALL);const{clear:n,clearColor:i,target:s}=e;ht.shared.setValue(i??this.background.colorRgba),t.renderTarget.clear(s,n,ht.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(t=>{this.runners[t]=new J2(t)})}_addSystems(e){let t;for(t in e){const n=e[t];this._addSystem(n.value,n.name)}}_addSystem(e,t){const n=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=n,this._systemsHash[t]=n;for(const i in this.runners)this.runners[i].add(n);return this}_addPipes(e,t){const n=t.reduce((i,s)=>(i[s.name]=s.value,i),{});e.forEach(i=>{const s=i.value,a=i.name,o=n[a];this.renderPipes[a]=new s(this,o?new o:null),this.runners.destroy.add(this.renderPipes[a])})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),(e===!0||typeof e=="object"&&e.releaseGlobalResources)&&Ro.release(),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!X2())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Q2.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let bf=Q2,Du;function lF(r){return Du!==void 0||(Du=(()=>{const e={stencil:!0,failIfMajorPerformanceCaveat:r??bf.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ye.get().getWebGLRenderingContext())return!1;let n=Ye.get().createCanvas().getContext("webgl",e);const i=!!n?.getContextAttributes()?.stencil;if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}})()),Du}let Lu;async function uF(r={}){return Lu!==void 0||(Lu=await(async()=>{const e=Ye.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(r)).requestDevice(),!0}catch{return!1}})()),Lu}const v0=["webgl","webgpu","canvas"];async function cF(r){let e=[];r.preference?(e.push(r.preference),v0.forEach(s=>{s!==r.preference&&e.push(s)})):e=v0.slice();let t,n={};for(let s=0;s<e.length;s++){const a=e[s];if(a==="webgpu"&&await uF()){const{WebGPURenderer:o}=await Nc(async()=>{const{WebGPURenderer:l}=await Promise.resolve().then(()=>fN);return{WebGPURenderer:l}},void 0,import.meta.url);t=o,n={...r,...r.webgpu};break}else if(a==="webgl"&&lF(r.failIfMajorPerformanceCaveat??bf.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:o}=await Nc(async()=>{const{WebGLRenderer:l}=await Promise.resolve().then(()=>V7);return{WebGLRenderer:l}},void 0,import.meta.url);t=o,n={...r,...r.webgl};break}else if(a==="canvas")throw n={...r},new Error("CanvasRenderer is not yet implemented")}if(delete n.webgpu,delete n.webgl,!t)throw new Error("No available renderer for the current environment");const i=new t;return await i.init(n),i}const Vc="8.15.0";class tS{static init(){globalThis.__PIXI_APP_INIT__?.(this,Vc)}static destroy(){}}tS.extension=re.Application;class rS{constructor(e){this._renderer=e}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,Vc)}destroy(){this._renderer=null}}rS.extension={type:[re.WebGLSystem,re.WebGPUSystem],name:"initHook",priority:-10};const nS=class Bp{constructor(...e){this.stage=new et,e[0]!==void 0&&Fe(lt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.stage||(this.stage=new et),this.renderer=await cF(e),Bp._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return Fe(lt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,t=!1){const n=Bp._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};nS._plugins=[];let iS=nS;ze.handleByList(re.Application,iS._plugins);ze.add(tS);class sS{static init(e){Object.defineProperty(this,"resizeTo",{configurable:!0,set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let t,n;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;t=i,n=s}this.renderer.resize(t,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}sS.extension=re.Application;class aS{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{configurable:!0,set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Ja.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?en.shared:new en,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}aS.extension=re.Application;class oS extends Vr{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return Fe(lt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return Fe(lt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return Fe(lt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return Fe(lt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return Fe(lt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners();for(const t in this.chars)this.chars[t].texture?.destroy();this.chars=null,e&&(this.pages.forEach(t=>t.texture.destroy(!0)),this.pages=null)}}/**
 * tiny-lru
 *
 * @copyright 2026 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 11.4.7
 */class fF{constructor(e=0,t=0,n=!1){this.first=null,this.items=Object.create(null),this.last=null,this.max=e,this.resetTtl=n,this.size=0,this.ttl=t}clear(){return this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this}delete(e){if(this.has(e)){const t=this.items[e];delete this.items[e],this.size--,t.prev!==null&&(t.prev.next=t.next),t.next!==null&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev)}return this}entries(e=this.keys()){const t=new Array(e.length);for(let n=0;n<e.length;n++){const i=e[n];t[n]=[i,this.get(i)]}return t}evict(e=!1){if(e||this.size>0){const t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}return this}expiresAt(e){let t;return this.has(e)&&(t=this.items[e].expiry),t}get(e){const t=this.items[e];if(t!==void 0){if(this.ttl>0&&t.expiry<=Date.now()){this.delete(e);return}return this.moveToEnd(t),t.value}}has(e){return e in this.items}moveToEnd(e){this.last!==e&&(e.prev!==null&&(e.prev.next=e.next),e.next!==null&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),e.prev=this.last,e.next=null,this.last!==null&&(this.last.next=e),this.last=e,this.first===null&&(this.first=e))}keys(){const e=new Array(this.size);let t=this.first,n=0;for(;t!==null;)e[n++]=t.key,t=t.next;return e}setWithEvicted(e,t,n=this.resetTtl){let i=null;if(this.has(e))this.set(e,t,!0,n);else{this.max>0&&this.size===this.max&&(i={...this.first},this.evict(!0));let s=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t};++this.size===1?this.first=s:this.last.next=s,this.last=s}return i}set(e,t,n=!1,i=this.resetTtl){let s=this.items[e];return n||s!==void 0?(s.value=t,n===!1&&i&&(s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl),this.moveToEnd(s)):(this.max>0&&this.size===this.max&&this.evict(!0),s=this.items[e]={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:e,prev:this.last,next:null,value:t},++this.size===1?this.first=s:this.last.next=s,this.last=s),this}values(e=this.keys()){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=this.get(e[n]);return t}}function lS(r=1e3,e=0,t=!1){if(isNaN(r)||r<0)throw new TypeError("Invalid max value");if(isNaN(e)||e<0)throw new TypeError("Invalid ttl value");if(typeof t!="boolean")throw new TypeError("Invalid resetTtl value");return new fF(r,e,t)}const hF=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function Wc(r){const e=typeof r.fontSize=="number"?`${r.fontSize}px`:r.fontSize;let t=r.fontFamily;Array.isArray(r.fontFamily)||(t=r.fontFamily.split(","));for(let n=t.length-1;n>=0;n--){let i=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!hF.includes(i)&&(i=`"${i}"`),t[n]=i}return`${r.fontStyle} ${r.fontVariant} ${r.fontWeight} ${e} ${t.join(",")}`}const hd={willReadFrequently:!0},In=class Me{static get experimentalLetterSpacingSupported(){let e=Me._experimentalLetterSpacingSupported;if(e===void 0){const t=Ye.get().getCanvasRenderingContext2D().prototype;e=Me._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,n,i,s,a,o,l,u){this.text=e,this.style=t,this.width=n,this.height=i,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=l,this.fontProperties=u}static measureText(e=" ",t,n=Me._canvas,i=t.wordWrap){const s=`${e}-${t.styleKey}-wordWrap-${i}`;if(Me._measurementCache.has(s))return Me._measurementCache.get(s);const a=Wc(t),o=Me.measureFont(a);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);const l=Me.__context;l.font=a;const c=(i?Me._wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),f=new Array(c.length);let h=0;for(let _=0;_<c.length;_++){const b=Me._measureText(c[_],t.letterSpacing,l);f[_]=b,h=Math.max(h,b)}const d=t._stroke?.width||0;let p=h+d;t.dropShadow&&(p+=t.dropShadow.distance);const v=t.lineHeight||o.fontSize;let m=Math.max(v,o.fontSize+d)+(c.length-1)*(v+t.leading);t.dropShadow&&(m+=t.dropShadow.distance);const g=new Me(e,t,p,m,c,f,v+t.leading,h,o);return Me._measurementCache.set(s,g),g}static _measureText(e,t,n){let i=!1;Me.experimentalLetterSpacingSupported&&(Me.experimentalLetterSpacing?(n.letterSpacing=`${t}px`,n.textLetterSpacing=`${t}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));const s=n.measureText(e);let a=s.width;const o=-s.actualBoundingBoxLeft;let u=s.actualBoundingBoxRight-o;if(a>0)if(i)a-=t,u-=t;else{const c=(Me.graphemeSegmenter(e).length-1)*t;a+=c,u+=c}return Math.max(a,u)}static _wordWrap(e,t,n=Me._canvas){const i=n.getContext("2d",hd);let s=0,a="",o="";const l=Object.create(null),{letterSpacing:u,whiteSpace:c}=t,f=Me._collapseSpaces(c),h=Me._collapseNewlines(c);let d=!f;const p=t.wordWrapWidth+u,v=Me._tokenize(e);for(let m=0;m<v.length;m++){let g=v[m];if(Me._isNewline(g)){if(!h){o+=Me._addLine(a),d=!f,a="",s=0;continue}g=" "}if(f){const b=Me.isBreakingSpace(g),w=Me.isBreakingSpace(a[a.length-1]);if(b&&w)continue}const _=Me._getFromCache(g,u,l,i);if(_>p)if(a!==""&&(o+=Me._addLine(a),a="",s=0),Me.canBreakWords(g,t.breakWords)){const b=Me.wordWrapSplit(g);for(let w=0;w<b.length;w++){let S=b[w],T=S,E=1;for(;b[w+E];){const P=b[w+E];if(!Me.canBreakChars(T,P,g,w,t.breakWords))S+=P;else break;T=P,E++}w+=E-1;const O=Me._getFromCache(S,u,l,i);O+s>p&&(o+=Me._addLine(a),d=!1,a="",s=0),a+=S,s+=O}}else{a.length>0&&(o+=Me._addLine(a),a="",s=0);const b=m===v.length-1;o+=Me._addLine(g,!b),d=!1,a="",s=0}else _+s>p&&(d=!1,o+=Me._addLine(a),a="",s=0),(a.length>0||!Me.isBreakingSpace(g)||d)&&(a+=g,s+=_)}return o+=Me._addLine(a,!1),o}static _addLine(e,t=!0){return e=Me._trimRight(e),e=t?`${e}
`:e,e}static _getFromCache(e,t,n,i){let s=n[e];return typeof s!="number"&&(s=Me._measureText(e,t,i)+t,n[e]=s),s}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const n=e[t];if(!Me.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:Me._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Me._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const t=[];let n="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){const s=e[i],a=e[i+1];if(Me.isBreakingSpace(s,a)||Me._isNewline(s)){n!==""&&(t.push(n),n=""),s==="\r"&&a===`
`?(t.push(`\r
`),i++):t.push(s);continue}n+=s}return n!==""&&t.push(n),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,i,s){return!0}static wordWrapSplit(e){return Me.graphemeSegmenter(e)}static measureFont(e){if(Me._fonts[e])return Me._fonts[e];const t=Me._context;t.font=e;const n=t.measureText(Me.METRICS_STRING+Me.BASELINE_SYMBOL),i={ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,fontSize:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent};return Me._fonts[e]=i,i}static clearMetrics(e=""){e?delete Me._fonts[e]:Me._fonts={}}static get _canvas(){if(!Me.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",hd)?.measureText)return Me.__canvas=t,t;e=Ye.get().createCanvas()}catch{e=Ye.get().createCanvas()}e.width=e.height=10,Me.__canvas=e}return Me.__canvas}static get _context(){return Me.__context||(Me.__context=Me._canvas.getContext("2d",hd)),Me.__context}};In.METRICS_STRING="|ÃqÃ";In.BASELINE_SYMBOL="M";In.BASELINE_MULTIPLIER=1.4;In.HEIGHT_MULTIPLIER=2;In.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const r=new Intl.Segmenter;return e=>{const t=r.segment(e),n=[];let i=0;for(const s of t)n[i++]=s.segment;return n}}return r=>[...r]})();In.experimentalLetterSpacing=!1;In._fonts={};In._newlines=[10,13];In._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];In._measurementCache=lS(1e3);let lr=In;const _0=[{offset:0,color:"white"},{offset:1,color:"black"}],em=class Fp{constructor(...e){this.uid=Tt("fillGradient"),this._tick=0,this.type="linear",this.colorStops=[];let t=dF(e);t={...t.type==="radial"?Fp.defaultRadialOptions:Fp.defaultLinearOptions,...u2(t)},this._textureSize=t.textureSize,this._wrapMode=t.wrapMode,t.type==="radial"?(this.center=t.center,this.outerCenter=t.outerCenter??this.center,this.innerRadius=t.innerRadius,this.outerRadius=t.outerRadius,this.scale=t.scale,this.rotation=t.rotation):(this.start=t.start,this.end=t.end),this.textureSpace=t.textureSpace,this.type=t.type,t.colorStops.forEach(i=>{this.addColorStop(i.offset,i.color)})}addColorStop(e,t){return this.colorStops.push({offset:e,color:ht.shared.setValue(t).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:t}=this.start,{x:n,y:i}=this.end,s=n-e,a=i-t;const o=s<0||a<0;if(this._wrapMode==="clamp-to-edge"){if(s<0){const m=e;e=n,n=m,s*=-1}if(a<0){const m=t;t=i,i=m,a*=-1}}const l=this.colorStops.length?this.colorStops:_0,u=this._textureSize,{canvas:c,context:f}=y0(u,1),h=o?f.createLinearGradient(this._textureSize,0,0,0):f.createLinearGradient(0,0,this._textureSize,0);b0(h,l),f.fillStyle=h,f.fillRect(0,0,u,1),this.texture=new Re({source:new zs({resource:c,addressMode:this._wrapMode})});const d=Math.sqrt(s*s+a*a),p=Math.atan2(a,s),v=new Oe;v.scale(d/u,1),v.rotate(p),v.translate(e,t),this.textureSpace==="local"&&v.scale(u,u),this.transform=v}buildGradient(){this.texture||this._tick++,this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:_0,t=this._textureSize,{canvas:n,context:i}=y0(t,t),{x:s,y:a}=this.center,{x:o,y:l}=this.outerCenter,u=this.innerRadius,c=this.outerRadius,f=o-c,h=l-c,d=t/(c*2),p=(s-f)*d,v=(a-h)*d,m=i.createRadialGradient(p,v,u*d,(o-f)*d,(l-h)*d,c*d);b0(m,e),i.fillStyle=e[e.length-1].color,i.fillRect(0,0,t,t),i.fillStyle=m,i.translate(p,v),i.rotate(this.rotation),i.scale(1,this.scale),i.translate(-p,-v),i.fillRect(0,0,t,t),this.texture=new Re({source:new zs({resource:n,addressMode:this._wrapMode})});const g=new Oe;g.scale(1/d,1/d),g.translate(f,h),this.textureSpace==="local"&&g.scale(t,t),this.transform=g}destroy(){this.texture?.destroy(!0),this.texture=null,this.transform=null,this.colorStops=[],this.start=null,this.end=null,this.center=null,this.outerCenter=null}get styleKey(){return`fill-gradient-${this.uid}-${this._tick}`}};em.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};em.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Ri=em;function b0(r,e){for(let t=0;t<e.length;t++){const n=e[t];r.addColorStop(n.offset,n.color)}}function y0(r,e){const t=Ye.get().createCanvas(r,e),n=t.getContext("2d");return{canvas:t,context:n}}function dF(r){let e=r[0]??{};return(typeof e=="number"||r[1])&&(Fe("8.5.2","use options object instead"),e={type:"linear",start:{x:r[0],y:r[1]},end:{x:r[2],y:r[3]},textureSpace:r[4],textureSize:r[5]??Ri.defaultLinearOptions.textureSize}),e}const x0={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class yf{constructor(e,t){this.uid=Tt("fillPattern"),this._tick=0,this.transform=new Oe,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),t&&(e.source.style.addressModeU=x0[t].addressModeU,e.source.style.addressModeV=x0[t].addressModeV)}setTransform(e){const t=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/t.frame.width,1/t.frame.height),this._tick++}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture=e,this._tick++)}get styleKey(){return`fill-pattern-${this.uid}-${this._tick}`}destroy(){this.texture.destroy(!0),this.texture=null}}var pF=mF,dd={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},gF=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function mF(r){var e=[];return r.replace(gF,function(t,n,i){var s=n.toLowerCase();for(i=_F(i),s=="m"&&i.length>2&&(e.push([n].concat(i.splice(0,2))),s="l",n=n=="m"?"l":"L");;){if(i.length==dd[s])return i.unshift(n),e.push(i);if(i.length<dd[s])throw new Error("malformed path data");e.push([n].concat(i.splice(0,dd[s])))}}),e}var vF=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function _F(r){var e=r.match(vF);return e?e.map(Number):[]}const bF=Eg(pF);function yF(r,e){const t=bF(r),n=[];let i=null,s=0,a=0;for(let o=0;o<t.length;o++){const l=t[o],u=l[0],c=l;switch(u){case"M":s=c[1],a=c[2],e.moveTo(s,a);break;case"m":s+=c[1],a+=c[2],e.moveTo(s,a);break;case"H":s=c[1],e.lineTo(s,a);break;case"h":s+=c[1],e.lineTo(s,a);break;case"V":a=c[1],e.lineTo(s,a);break;case"v":a+=c[1],e.lineTo(s,a);break;case"L":s=c[1],a=c[2],e.lineTo(s,a);break;case"l":s+=c[1],a+=c[2],e.lineTo(s,a);break;case"C":s=c[5],a=c[6],e.bezierCurveTo(c[1],c[2],c[3],c[4],s,a);break;case"c":e.bezierCurveTo(s+c[1],a+c[2],s+c[3],a+c[4],s+c[5],a+c[6]),s+=c[5],a+=c[6];break;case"S":s=c[3],a=c[4],e.bezierCurveToShort(c[1],c[2],s,a);break;case"s":e.bezierCurveToShort(s+c[1],a+c[2],s+c[3],a+c[4]),s+=c[3],a+=c[4];break;case"Q":s=c[3],a=c[4],e.quadraticCurveTo(c[1],c[2],s,a);break;case"q":e.quadraticCurveTo(s+c[1],a+c[2],s+c[3],a+c[4]),s+=c[3],a+=c[4];break;case"T":s=c[1],a=c[2],e.quadraticCurveToShort(s,a);break;case"t":s+=c[1],a+=c[2],e.quadraticCurveToShort(s,a);break;case"A":s=c[6],a=c[7],e.arcToSvg(c[1],c[2],c[3],c[4],c[5],s,a);break;case"a":s+=c[6],a+=c[7],e.arcToSvg(c[1],c[2],c[3],c[4],c[5],s,a);break;case"Z":case"z":e.closePath(),n.length>0&&(i=n.pop(),i?(s=i.startX,a=i.startY):(s=0,a=0)),i=null;break;default:Ne(`Unknown SVG path command: ${u}`)}u!=="Z"&&u!=="z"&&i===null&&(i={startX:s,startY:a},n.push(i))}return e}class tm{constructor(e=0,t=0,n=0){this.type="circle",this.x=e,this.y=t,this.radius=n}clone(){return new tm(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=n}strokeContains(e,t,n,i=.5){if(this.radius===0)return!1;const s=this.x-e,a=this.y-t,o=this.radius,l=(1-i)*n,u=Math.sqrt(s*s+a*a);return u<=o+l&&u>o-(n-l)}getBounds(e){return e||(e=new ft),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class rm{constructor(e=0,t=0,n=0,i=0){this.type="ellipse",this.x=e,this.y=t,this.halfWidth=n,this.halfHeight=i}clone(){return new rm(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,t){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let n=(e-this.x)/this.halfWidth,i=(t-this.y)/this.halfHeight;return n*=n,i*=i,n+i<=1}strokeContains(e,t,n,i=.5){const{halfWidth:s,halfHeight:a}=this;if(s<=0||a<=0)return!1;const o=n*(1-i),l=n-o,u=s-l,c=a-l,f=s+o,h=a+o,d=e-this.x,p=t-this.y,v=d*d/(u*u)+p*p/(c*c),m=d*d/(f*f)+p*p/(h*h);return v>1&&m<=1}getBounds(e){return e||(e=new ft),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function xF(r,e,t,n,i,s){const a=r-t,o=e-n,l=i-t,u=s-n,c=a*l+o*u,f=l*l+u*u;let h=-1;f!==0&&(h=c/f);let d,p;h<0?(d=t,p=n):h>1?(d=i,p=s):(d=t+h*l,p=n+h*u);const v=r-d,m=e-p;return v*v+m*m}let wF,SF;class hl{constructor(...e){this.type="polygon";let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const n=[];for(let i=0,s=t.length;i<s;i++)n.push(t[i].x,t[i].y);t=n}this.points=t,this.closePath=!0}isClockwise(){let e=0;const t=this.points,n=t.length;for(let i=0;i<n;i+=2){const s=t[i],a=t[i+1],o=t[(i+2)%n],l=t[(i+3)%n];e+=(o-s)*(l+a)}return e<0}containsPolygon(e){const t=this.getBounds(wF),n=e.getBounds(SF);if(!t.containsRect(n))return!1;const i=e.points;for(let s=0;s<i.length;s+=2){const a=i[s],o=i[s+1];if(!this.contains(a,o))return!1}return!0}clone(){const e=this.points.slice(),t=new hl(e);return t.closePath=this.closePath,t}contains(e,t){let n=!1;const i=this.points.length/2;for(let s=0,a=i-1;s<i;a=s++){const o=this.points[s*2],l=this.points[s*2+1],u=this.points[a*2],c=this.points[a*2+1];l>t!=c>t&&e<(u-o)*((t-l)/(c-l))+o&&(n=!n)}return n}strokeContains(e,t,n,i=.5){const s=n*n,a=s*(1-i),o=s-a,{points:l}=this,u=l.length-(this.closePath?0:2);for(let c=0;c<u;c+=2){const f=l[c],h=l[c+1],d=l[(c+2)%l.length],p=l[(c+3)%l.length],v=xF(e,t,f,h,d,p),m=Math.sign((d-f)*(t-h)-(p-h)*(e-f));if(v<=(m<0?o:a))return!0}return!1}getBounds(e){e||(e=new ft);const t=this.points;let n=1/0,i=-1/0,s=1/0,a=-1/0;for(let o=0,l=t.length;o<l;o+=2){const u=t[o],c=t[o+1];n=u<n?u:n,i=u>i?u:i,s=c<s?c:s,a=c>a?c:a}return e.x=n,e.width=i-n,e.y=s,e.height=a-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return Fe("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return Fe("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const Uu=(r,e,t,n,i,s,a)=>{const o=r-t,l=e-n,u=Math.sqrt(o*o+l*l);return u>=i-s&&u<=i+a};class nm{constructor(e=0,t=0,n=0,i=0,s=20){this.type="roundedRectangle",this.x=e,this.y=t,this.width=n,this.height=i,this.radius=s}getBounds(e){return e||(e=new ft),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new nm(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=t-(this.y+n);const a=n*n;if(i*i+s*s<=a||(i=e-(this.x+this.width-n),i*i+s*s<=a)||(s=t-(this.y+this.height-n),i*i+s*s<=a)||(i=e-(this.x+n),i*i+s*s<=a))return!0}return!1}strokeContains(e,t,n,i=.5){const{x:s,y:a,width:o,height:l,radius:u}=this,c=n*(1-i),f=n-c,h=s+u,d=a+u,p=o-u*2,v=l-u*2,m=s+o,g=a+l;return(e>=s-c&&e<=s+f||e>=m-f&&e<=m+c)&&t>=d&&t<=d+v||(t>=a-c&&t<=a+f||t>=g-f&&t<=g+c)&&e>=h&&e<=h+p?!0:e<h&&t<d&&Uu(e,t,h,d,u,f,c)||e>m-u&&t<d&&Uu(e,t,m-u,d,u,f,c)||e>m-u&&t>g-u&&Uu(e,t,m-u,g-u,u,f,c)||e<h&&t>g-u&&Uu(e,t,h,g-u,u,f,c)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const uS={};function im(r,e,t){let n=2166136261;for(let i=0;i<e;i++)n^=r[i].uid,n=Math.imul(n,16777619),n>>>=0;return uS[n]||TF(r,e,n,t)}function TF(r,e,t,n){const i={};let s=0;for(let o=0;o<n;o++){const l=o<e?r[o]:Re.EMPTY.source;i[s++]=l.source,i[s++]=l.style}const a=new wi(i);return uS[t]=a,a}class Sa{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function Dp(r,e){const t=r.byteLength/8|0,n=new Float64Array(r,0,t);new Float64Array(e,0,t).set(n);const s=r.byteLength-t*8;if(s>0){const a=new Uint8Array(r,t*8,s);new Uint8Array(e,t*8,s).set(a)}}const EF={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var Lt=(r=>(r[r.DISABLED=0]="DISABLED",r[r.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",r[r.MASK_ACTIVE=2]="MASK_ACTIVE",r[r.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",r[r.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",r[r.NONE=5]="NONE",r))(Lt||{});function Rl(r,e){return e.alphaMode==="no-premultiply-alpha"&&EF[r]||r}const AF=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function CF(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function cS(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const n=AF.replace(/%forloop%/gi,CF(r));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}}finally{e.deleteShader(t)}return r}let ca=null;function PF(){if(ca)return ca;const r=G2();return ca=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),ca=cS(ca,r),r.getExtension("WEBGL_lose_context")?.loseContext(),ca}class RF{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const t=this.textures[e];this.textures[e]=null,this.ids[t.uid]=null}this.count=0}}class kF{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new RF,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const dl=[];let qc=0;Ro.register({clear:()=>{if(dl.length>0)for(const r of dl)r&&r.destroy();dl.length=0,qc=0}});function w0(){return qc>0?dl[--qc]:new kF}function S0(r){dl[qc++]=r}let Vo=0;const fS=class hS{constructor(e){this.uid=Tt("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...hS.defaultOptions,...e},e.maxTextures||(Fe("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=PF());const{maxTextures:t,attributesInitialSize:n,indicesInitialSize:i}=e;this.attributeBuffer=new Sa(n*4),this.indexBuffer=new Uint16Array(i),this.maxTextures=t}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)S0(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,t){const n=e._batch.textures.ids[t._source.uid];return!n&&n!==0?!1:(e._textureId=n,e.texture=t,!0)}updateElement(e){this.dirty=!0;const t=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,t.float32View,t.uint32View,e._attributeStart,e._textureId)}break(e){const t=this._elements;if(!t[this.elementStart])return;let n=w0(),i=n.textures;i.clear();const s=t[this.elementStart];let a=Rl(s.blendMode,s.texture._source),o=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const l=this.attributeBuffer.float32View,u=this.attributeBuffer.uint32View,c=this.indexBuffer;let f=this._batchIndexSize,h=this._batchIndexStart,d="startBatch";const p=this.maxTextures;for(let v=this.elementStart;v<this.elementSize;++v){const m=t[v];t[v]=null;const _=m.texture._source,b=Rl(m.blendMode,_),w=a!==b||o!==m.topology;if(_._batchTick===Vo&&!w){m._textureId=_._textureBindLocation,f+=m.indexSize,m.packAsQuad?(this.packQuadAttributes(m,l,u,m._attributeStart,m._textureId),this.packQuadIndex(c,m._indexStart,m._attributeStart/this.vertexSize)):(this.packAttributes(m,l,u,m._attributeStart,m._textureId),this.packIndex(m,c,m._indexStart,m._attributeStart/this.vertexSize)),m._batch=n;continue}_._batchTick=Vo,(i.count>=p||w)&&(this._finishBatch(n,h,f-h,i,a,o,e,d),d="renderBatch",h=f,a=b,o=m.topology,n=w0(),i=n.textures,i.clear(),++Vo),m._textureId=_._textureBindLocation=i.count,i.ids[_.uid]=i.count,i.textures[i.count++]=_,m._batch=n,f+=m.indexSize,m.packAsQuad?(this.packQuadAttributes(m,l,u,m._attributeStart,m._textureId),this.packQuadIndex(c,m._indexStart,m._attributeStart/this.vertexSize)):(this.packAttributes(m,l,u,m._attributeStart,m._textureId),this.packIndex(m,c,m._indexStart,m._attributeStart/this.vertexSize))}i.count>0&&(this._finishBatch(n,h,f-h,i,a,o,e,d),h=f,++Vo),this.elementStart=this.elementSize,this._batchIndexStart=h,this._batchIndexSize=f}_finishBatch(e,t,n,i,s,a,o,l){e.gpuBindGroup=null,e.bindGroup=null,e.action=l,e.batcher=this,e.textures=i,e.blendMode=s,e.topology=a,e.start=t,e.size=n,++Vo,this.batches[this.batchIndex++]=e,o.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const t=Math.max(e,this.attributeBuffer.size*2),n=new Sa(t);Dp(this.attributeBuffer.rawBinaryData,n.rawBinaryData),this.attributeBuffer=n}_resizeIndexBuffer(e){const t=this.indexBuffer;let n=Math.max(e,t.length*1.5);n+=n%2;const i=n>65535?new Uint32Array(n):new Uint16Array(n);if(i.BYTES_PER_ELEMENT!==t.BYTES_PER_ELEMENT)for(let s=0;s<t.length;s++)i[s]=t[s];else Dp(t.buffer,i.buffer);this.indexBuffer=i}packQuadIndex(e,t,n){e[t]=n+0,e[t+1]=n+1,e[t+2]=n+2,e[t+3]=n+0,e[t+4]=n+2,e[t+5]=n+3}packIndex(e,t,n,i){const s=e.indices,a=e.indexSize,o=e.indexOffset,l=e.attributeOffset;for(let u=0;u<a;u++)t[n++]=i+s[u+o]-l}destroy(e={}){if(this.batches!==null){for(let t=0;t<this.batchIndex;t++)S0(this.batches[t]);this.batches=null,this.geometry.destroy(!0),this.geometry=null,e.shader&&(this.shader?.destroy(),this.shader=null);for(let t=0;t<this._elements.length;t++)this._elements[t]&&(this._elements[t]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};fS.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let MF=fS;var at=(r=>(r[r.MAP_READ=1]="MAP_READ",r[r.MAP_WRITE=2]="MAP_WRITE",r[r.COPY_SRC=4]="COPY_SRC",r[r.COPY_DST=8]="COPY_DST",r[r.INDEX=16]="INDEX",r[r.VERTEX=32]="VERTEX",r[r.UNIFORM=64]="UNIFORM",r[r.STORAGE=128]="STORAGE",r[r.INDIRECT=256]="INDIRECT",r[r.QUERY_RESOLVE=512]="QUERY_RESOLVE",r[r.STATIC=1024]="STATIC",r))(at||{});class Gr extends Vr{constructor(e){let{data:t,size:n}=e;const{usage:i,label:s,shrinkToFit:a}=e;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=Tt("buffer"),this._resourceType="buffer",this._resourceId=Tt("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,t instanceof Array&&(t=new Float32Array(t)),this._data=t,n??(n=t?.byteLength);const o=!!t;this.descriptor={size:n,usage:i,mappedAtCreation:o,label:s},this.shrinkToFit=a??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&at.STATIC)}set static(e){e?this.descriptor.usage|=at.STATIC:this.descriptor.usage&=~at.STATIC}setDataWithSize(e,t,n){if(this._updateID++,this._updateSize=t*e.BYTES_PER_ELEMENT,this._data===e){n&&this.emit("update",this);return}const i=this._data;if(this._data=e,this._dataInt32=null,!i||i.length!==e.length){!this.shrinkToFit&&i&&e.byteLength<i.byteLength?n&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Tt("resource"),this.emit("change",this));return}n&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function dS(r,e){if(!(r instanceof Gr)){let t=e?at.INDEX:at.VERTEX;r instanceof Array&&(e?(r=new Uint32Array(r),t=at.INDEX|at.COPY_DST):(r=new Float32Array(r),t=at.VERTEX|at.COPY_DST)),r=new Gr({data:r,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:t})}return r}function OF(r,e,t){const n=r.getAttribute(e);if(!n)return t.minX=0,t.minY=0,t.maxX=0,t.maxY=0,t;const i=n.buffer.data;let s=1/0,a=1/0,o=-1/0,l=-1/0;const u=i.BYTES_PER_ELEMENT,c=(n.offset||0)/u,f=(n.stride||2*4)/u;for(let h=c;h<i.length;h+=f){const d=i[h],p=i[h+1];d>o&&(o=d),p>l&&(l=p),d<s&&(s=d),p<a&&(a=p)}return t.minX=s,t.minY=a,t.maxX=o,t.maxY=l,t}function IF(r){return(r instanceof Gr||Array.isArray(r)||r.BYTES_PER_ELEMENT)&&(r={buffer:r}),r.buffer=dS(r.buffer,!1),r}class Kl extends Vr{constructor(e={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=Tt("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new hr,this._boundsDirty=!0;const{attributes:t,indexBuffer:n,topology:i}=e;if(this.buffers=[],this.attributes={},t)for(const s in t)this.addAttribute(s,t[s]);this.instanceCount=e.instanceCount??1,n&&this.addIndex(n),this.topology=i||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const t=this.attributes[e];return t.buffer.data.length/(t.stride/4||t.size)}return 0}addAttribute(e,t){const n=IF(t);this.buffers.indexOf(n.buffer)===-1&&(this.buffers.push(n.buffer),n.buffer.on("update",this.onBufferUpdate,this),n.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=n}addIndex(e){this.indexBuffer=dS(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,OF(this,"aPosition",this._bounds)):this._bounds}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(t=>t.destroy()),this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const BF=new Float32Array(1),FF=new Uint32Array(1);class DF extends Kl{constructor(){const t=new Gr({data:BF,label:"attribute-batch-buffer",usage:at.VERTEX|at.COPY_DST,shrinkToFit:!1}),n=new Gr({data:FF,label:"index-batch-buffer",usage:at.INDEX|at.COPY_DST,shrinkToFit:!1}),i=6*4;super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:i,offset:0},aUV:{buffer:t,format:"float32x2",stride:i,offset:2*4},aColor:{buffer:t,format:"unorm8x4",stride:i,offset:4*4},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:i,offset:5*4}},indexBuffer:n})}}function T0(r,e,t){if(r)for(const n in r){const i=n.toLocaleLowerCase(),s=e[i];if(s){let a=r[n];n==="header"&&(a=a.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),t&&s.push(`//----${t}----//`),s.push(a)}else Ne(`${n} placement hook does not exist in shader`)}}const LF=/\{\{(.*?)\}\}/g;function E0(r){const e={};return(r.match(LF)?.map(n=>n.replace(/[{()}]/g,""))??[]).forEach(n=>{e[n]=[]}),e}function A0(r,e){let t;const n=/@in\s+([^;]+);/g;for(;(t=n.exec(r))!==null;)e.push(t[1])}function C0(r,e,t=!1){const n=[];A0(e,n),r.forEach(o=>{o.header&&A0(o.header,n)});const i=n;t&&i.sort();const s=i.map((o,l)=>`       @location(${l}) ${o},`).join(`
`);let a=e.replace(/@in\s+[^;]+;\s*/g,"");return a=a.replace("{{in}}",`
${s}
`),a}function P0(r,e){let t;const n=/@out\s+([^;]+);/g;for(;(t=n.exec(r))!==null;)e.push(t[1])}function UF(r){const t=/\b(\w+)\s*:/g.exec(r);return t?t[1]:""}function NF(r){const e=/@.*?\s+/g;return r.replace(e,"")}function GF(r,e){const t=[];P0(e,t),r.forEach(l=>{l.header&&P0(l.header,t)});let n=0;const i=t.sort().map(l=>l.indexOf("builtin")>-1?l:`@location(${n++}) ${l}`).join(`,
`),s=t.sort().map(l=>`       var ${NF(l)};`).join(`
`),a=`return VSOutput(
            ${t.sort().map(l=>` ${UF(l)}`).join(`,
`)});`;let o=e.replace(/@out\s+[^;]+;\s*/g,"");return o=o.replace("{{struct}}",`
${i}
`),o=o.replace("{{start}}",`
${s}
`),o=o.replace("{{return}}",`
${a}
`),o}function R0(r,e){let t=r;for(const n in e){const i=e[n];i.join(`
`).length?t=t.replace(`{{${n}}}`,`//-----${n} START-----//
${i.join(`
`)}
//----${n} FINISH----//`):t=t.replace(`{{${n}}}`,"")}return t}const Gi=Object.create(null),pd=new Map;let zF=0;function jF({template:r,bits:e}){const t=pS(r,e);if(Gi[t])return Gi[t];const{vertex:n,fragment:i}=VF(r,e);return Gi[t]=gS(n,i,e),Gi[t]}function HF({template:r,bits:e}){const t=pS(r,e);return Gi[t]||(Gi[t]=gS(r.vertex,r.fragment,e)),Gi[t]}function VF(r,e){const t=e.map(a=>a.vertex).filter(a=>!!a),n=e.map(a=>a.fragment).filter(a=>!!a);let i=C0(t,r.vertex,!0);i=GF(t,i);const s=C0(n,r.fragment,!0);return{vertex:i,fragment:s}}function pS(r,e){return e.map(t=>(pd.has(t)||pd.set(t,zF++),pd.get(t))).sort((t,n)=>t-n).join("-")+r.vertex+r.fragment}function gS(r,e,t){const n=E0(r),i=E0(e);return t.forEach(s=>{T0(s.vertex,n,s.name),T0(s.fragment,i,s.name)}),{vertex:R0(r,n),fragment:R0(e,i)}}const WF=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,qF=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,XF=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,YF=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,$F={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},KF={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function Zl({bits:r,name:e}){const t=jF({template:{fragment:qF,vertex:WF},bits:[$F,...r]});return Jt.from({name:e,vertex:{source:t.vertex,entryPoint:"main"},fragment:{source:t.fragment,entryPoint:"main"}})}function Jl({bits:r,name:e}){return new sr({name:e,...HF({template:{vertex:XF,fragment:YF},bits:[KF,...r]})})}const sm={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},am={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},gd={};function ZF(r){const e=[];if(r===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let t=0;for(let n=0;n<r;n++)e.push(`@group(1) @binding(${t++}) var textureSource${n+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${t++}) var textureSampler${n+1}: sampler;`)}return e.join(`
`)}function JF(r){const e=[];if(r===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let t=0;t<r;t++)t===r-1?e.push("  default:{"):e.push(`  case ${t}:{`),e.push(`      outColor = textureSampleGrad(textureSource${t+1}, textureSampler${t+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function om(r){return gd[r]||(gd[r]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${ZF(r)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${JF(r)}
            `}}),gd[r]}const md={};function QF(r){const e=[];for(let t=0;t<r;t++)t>0&&e.push("else"),t<r-1&&e.push(`if(vTextureId < ${t}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${t}], vUV);`),e.push("}");return e.join(`
`)}function lm(r){return md[r]||(md[r]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${r}];

            `,main:`

                ${QF(r)}
            `}}),md[r]}const Ql={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},eu={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},k0={};function um(r){let e=k0[r];if(e)return e;const t=new Int32Array(r);for(let n=0;n<r;n++)t[n]=n;return e=k0[r]=new mr({uTextures:{value:t,type:"i32",size:r}},{isStatic:!0}),e}class M0 extends dn{constructor(e){const t=Jl({name:"batch",bits:[am,lm(e),eu]}),n=Zl({name:"batch",bits:[sm,om(e),Ql]});super({glProgram:t,gpuProgram:n,resources:{batchSamplers:um(e)}}),this.maxTextures=e}}let Wo=null;const mS=class vS extends MF{constructor(e){super(e),this.geometry=new DF,this.name=vS.extension.name,this.vertexSize=6,Wo??(Wo=new M0(e.maxTextures)),this.shader=Wo}packAttributes(e,t,n,i,s){const a=s<<16|e.roundPixels&65535,o=e.transform,l=o.a,u=o.b,c=o.c,f=o.d,h=o.tx,d=o.ty,{positions:p,uvs:v}=e,m=e.color,g=e.attributeOffset,_=g+e.attributeSize;for(let b=g;b<_;b++){const w=b*2,S=p[w],T=p[w+1];t[i++]=l*S+c*T+h,t[i++]=f*T+u*S+d,t[i++]=v[w],t[i++]=v[w+1],n[i++]=m,n[i++]=a}}packQuadAttributes(e,t,n,i,s){const a=e.texture,o=e.transform,l=o.a,u=o.b,c=o.c,f=o.d,h=o.tx,d=o.ty,p=e.bounds,v=p.maxX,m=p.minX,g=p.maxY,_=p.minY,b=a.uvs,w=e.color,S=s<<16|e.roundPixels&65535;t[i+0]=l*m+c*_+h,t[i+1]=f*_+u*m+d,t[i+2]=b.x0,t[i+3]=b.y0,n[i+4]=w,n[i+5]=S,t[i+6]=l*v+c*_+h,t[i+7]=f*_+u*v+d,t[i+8]=b.x1,t[i+9]=b.y1,n[i+10]=w,n[i+11]=S,t[i+12]=l*v+c*g+h,t[i+13]=f*g+u*v+d,t[i+14]=b.x2,t[i+15]=b.y2,n[i+16]=w,n[i+17]=S,t[i+18]=l*m+c*g+h,t[i+19]=f*g+u*m+d,t[i+20]=b.x3,t[i+21]=b.y3,n[i+22]=w,n[i+23]=S}_updateMaxTextures(e){this.shader.maxTextures!==e&&(Wo=new M0(e),this.shader=Wo)}destroy(){this.shader=null,super.destroy()}};mS.extension={type:[re.Batcher],name:"default"};let cm=mS;class Wr{constructor(e){this.items=Object.create(null);const{renderer:t,type:n,onUnload:i,priority:s,name:a}=e;this._renderer=t,t.gc.addResourceHash(this,"items",n,s??0),this._onUnload=i,this.name=a}add(e){return this.items[e.uid]?!1:(this.items[e.uid]=e,e.once("unload",this.remove,this),e._gcLastUsed=this._renderer.gc.now,!0)}remove(e,...t){if(!this.items[e.uid])return;const n=e._gpuData[this._renderer.uid];n&&(this._onUnload?.(e,...t),n.destroy(),e._gpuData[this._renderer.uid]=null,this.items[e.uid]=null)}removeAll(...e){Object.values(this.items).forEach(t=>t&&this.remove(t,...e))}destroy(...e){this.removeAll(...e),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}function eD(r,e,t,n,i,s,a,o=null){let l=0;t*=e,i*=s;const u=o.a,c=o.b,f=o.c,h=o.d,d=o.tx,p=o.ty;for(;l<a;){const v=r[t],m=r[t+1];n[i]=u*v+f*m+d,n[i+1]=c*v+h*m+p,i+=s,t+=e,l++}}function tD(r,e,t,n){let i=0;for(e*=t;i<n;)r[e]=0,r[e+1]=0,e+=t,i++}function _S(r,e,t,n,i){const s=e.a,a=e.b,o=e.c,l=e.d,u=e.tx,c=e.ty;t||(t=0),n||(n=2),i||(i=r.length/n-t);let f=t*n;for(let h=0;h<i;h++){const d=r[f],p=r[f+1];r[f]=s*d+o*p+u,r[f+1]=a*d+l*p+c,f+=n}}const rD=new Oe;class fm{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,t=e>>16|e&65280|(e&255)<<16,n=this.renderable;return n?x2(t,n.groupColor)+(this.alpha*n.groupAlpha*255<<24):t+(this.alpha*255<<24)}get transform(){return this.renderable?.groupTransform||rD}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}destroy(){this.renderable=null,this.texture=null,this.geometryData=null,this._batcher=null,this._batch=null}}const kl={extension:{type:re.ShapeBuilder,name:"circle"},build(r,e){let t,n,i,s,a,o;if(r.type==="circle"){const w=r;if(a=o=w.radius,a<=0)return!1;t=w.x,n=w.y,i=s=0}else if(r.type==="ellipse"){const w=r;if(a=w.halfWidth,o=w.halfHeight,a<=0||o<=0)return!1;t=w.x,n=w.y,i=s=0}else{const w=r,S=w.width/2,T=w.height/2;t=w.x+S,n=w.y+T,a=o=Math.max(0,Math.min(w.radius,Math.min(S,T))),i=S-a,s=T-o}if(i<0||s<0)return!1;const l=Math.ceil(2.3*Math.sqrt(a+o)),u=l*8+(i?4:0)+(s?4:0);if(u===0)return!1;if(l===0)return e[0]=e[6]=t+i,e[1]=e[3]=n+s,e[2]=e[4]=t-i,e[5]=e[7]=n-s,!0;let c=0,f=l*4+(i?2:0)+2,h=f,d=u,p=i+a,v=s,m=t+p,g=t-p,_=n+v;if(e[c++]=m,e[c++]=_,e[--f]=_,e[--f]=g,s){const w=n-v;e[h++]=g,e[h++]=w,e[--d]=w,e[--d]=m}for(let w=1;w<l;w++){const S=Math.PI/2*(w/l),T=i+Math.cos(S)*a,E=s+Math.sin(S)*o,O=t+T,P=t-T,V=n+E,W=n-E;e[c++]=O,e[c++]=V,e[--f]=V,e[--f]=P,e[h++]=P,e[h++]=W,e[--d]=W,e[--d]=O}p=i,v=s+o,m=t+p,g=t-p,_=n+v;const b=n-v;return e[c++]=m,e[c++]=_,e[--d]=b,e[--d]=m,i&&(e[c++]=g,e[c++]=_,e[--d]=b,e[--d]=g),!0},triangulate(r,e,t,n,i,s){if(r.length===0)return;let a=0,o=0;for(let c=0;c<r.length;c+=2)a+=r[c],o+=r[c+1];a/=r.length/2,o/=r.length/2;let l=n;e[l*t]=a,e[l*t+1]=o;const u=l++;for(let c=0;c<r.length;c+=2)e[l*t]=r[c],e[l*t+1]=r[c+1],c>0&&(i[s++]=l,i[s++]=u,i[s++]=l-1),l++;i[s++]=u+1,i[s++]=u,i[s++]=l-1}},nD={...kl,extension:{...kl.extension,name:"ellipse"}},iD={...kl,extension:{...kl.extension,name:"roundedRectangle"}},bS=1e-4,O0=1e-4;function sD(r){const e=r.length;if(e<6)return 1;let t=0;for(let n=0,i=r[e-2],s=r[e-1];n<e;n+=2){const a=r[n],o=r[n+1];t+=(a-i)*(o+s),i=a,s=o}return t<0?-1:1}function I0(r,e,t,n,i,s,a,o){const l=r-t*i,u=e-n*i,c=r+t*s,f=e+n*s;let h,d;a?(h=n,d=-t):(h=-n,d=t);const p=l+h,v=u+d,m=c+h,g=f+d;return o.push(p,v),o.push(m,g),2}function us(r,e,t,n,i,s,a,o){const l=t-r,u=n-e;let c=Math.atan2(l,u),f=Math.atan2(i-r,s-e);o&&c<f?c+=Math.PI*2:!o&&c>f&&(f+=Math.PI*2);let h=c;const d=f-c,p=Math.abs(d),v=Math.sqrt(l*l+u*u),m=(15*p*Math.sqrt(v)/Math.PI>>0)+1,g=d/m;if(h+=g,o){a.push(r,e),a.push(t,n);for(let _=1,b=h;_<m;_++,b+=g)a.push(r,e),a.push(r+Math.sin(b)*v,e+Math.cos(b)*v);a.push(r,e),a.push(i,s)}else{a.push(t,n),a.push(r,e);for(let _=1,b=h;_<m;_++,b+=g)a.push(r+Math.sin(b)*v,e+Math.cos(b)*v),a.push(r,e);a.push(i,s),a.push(r,e)}return m*2}function aD(r,e,t,n,i,s){const a=bS;if(r.length===0)return;const o=e;let l=o.alignment;if(e.alignment!==.5){let k=sD(r);l=(l-.5)*k+.5}const u=new At(r[0],r[1]),c=new At(r[r.length-2],r[r.length-1]),f=n,h=Math.abs(u.x-c.x)<a&&Math.abs(u.y-c.y)<a;if(f){r=r.slice(),h&&(r.pop(),r.pop(),c.set(r[r.length-2],r[r.length-1]));const k=(u.x+c.x)*.5,H=(c.y+u.y)*.5;r.unshift(k,H),r.push(k,H)}const d=i,p=r.length/2;let v=r.length;const m=d.length/2,g=o.width/2,_=g*g,b=o.miterLimit*o.miterLimit;let w=r[0],S=r[1],T=r[2],E=r[3],O=0,P=0,V=-(S-E),W=w-T,D=0,j=0,I=Math.sqrt(V*V+W*W);V/=I,W/=I,V*=g,W*=g;const q=l,$=(1-q)*2,K=q*2;f||(o.cap==="round"?v+=us(w-V*($-K)*.5,S-W*($-K)*.5,w-V*$,S-W*$,w+V*K,S+W*K,d,!0)+2:o.cap==="square"&&(v+=I0(w,S,V,W,$,K,!0,d))),d.push(w-V*$,S-W*$),d.push(w+V*K,S+W*K);for(let k=1;k<p-1;++k){w=r[(k-1)*2],S=r[(k-1)*2+1],T=r[k*2],E=r[k*2+1],O=r[(k+1)*2],P=r[(k+1)*2+1],V=-(S-E),W=w-T,I=Math.sqrt(V*V+W*W),V/=I,W/=I,V*=g,W*=g,D=-(E-P),j=T-O,I=Math.sqrt(D*D+j*j),D/=I,j/=I,D*=g,j*=g;const H=T-w,ie=S-E,X=T-O,N=P-E,M=H*X+ie*N,F=ie*X-N*H,A=F<0;if(Math.abs(F)<.001*Math.abs(M)){d.push(T-V*$,E-W*$),d.push(T+V*K,E+W*K),M>=0&&(o.join==="round"?v+=us(T,E,T-V*$,E-W*$,T-D*$,E-j*$,d,!1)+4:v+=2,d.push(T-D*K,E-j*K),d.push(T+D*$,E+j*$));continue}const L=(-V+w)*(-W+E)-(-V+T)*(-W+S),Y=(-D+O)*(-j+E)-(-D+T)*(-j+P),te=(H*Y-X*L)/F,fe=(N*L-ie*Y)/F,B=(te-T)*(te-T)+(fe-E)*(fe-E),G=T+(te-T)*$,Q=E+(fe-E)*$,oe=T-(te-T)*K,_e=E-(fe-E)*K,me=Math.min(H*H+ie*ie,X*X+N*N),Pe=A?$:K,Ue=me+Pe*Pe*_;B<=Ue?o.join==="bevel"||B/_>b?(A?(d.push(G,Q),d.push(T+V*K,E+W*K),d.push(G,Q),d.push(T+D*K,E+j*K)):(d.push(T-V*$,E-W*$),d.push(oe,_e),d.push(T-D*$,E-j*$),d.push(oe,_e)),v+=2):o.join==="round"?A?(d.push(G,Q),d.push(T+V*K,E+W*K),v+=us(T,E,T+V*K,E+W*K,T+D*K,E+j*K,d,!0)+4,d.push(G,Q),d.push(T+D*K,E+j*K)):(d.push(T-V*$,E-W*$),d.push(oe,_e),v+=us(T,E,T-V*$,E-W*$,T-D*$,E-j*$,d,!1)+4,d.push(T-D*$,E-j*$),d.push(oe,_e)):(d.push(G,Q),d.push(oe,_e)):(d.push(T-V*$,E-W*$),d.push(T+V*K,E+W*K),o.join==="round"?A?v+=us(T,E,T+V*K,E+W*K,T+D*K,E+j*K,d,!0)+2:v+=us(T,E,T-V*$,E-W*$,T-D*$,E-j*$,d,!1)+2:o.join==="miter"&&B/_<=b&&(A?(d.push(oe,_e),d.push(oe,_e)):(d.push(G,Q),d.push(G,Q)),v+=2),d.push(T-D*$,E-j*$),d.push(T+D*K,E+j*K),v+=2)}w=r[(p-2)*2],S=r[(p-2)*2+1],T=r[(p-1)*2],E=r[(p-1)*2+1],V=-(S-E),W=w-T,I=Math.sqrt(V*V+W*W),V/=I,W/=I,V*=g,W*=g,d.push(T-V*$,E-W*$),d.push(T+V*K,E+W*K),f||(o.cap==="round"?v+=us(T-V*($-K)*.5,E-W*($-K)*.5,T-V*$,E-W*$,T+V*K,E+W*K,d,!1)+2:o.cap==="square"&&(v+=I0(T,E,V,W,$,K,!1,d)));const ae=O0*O0;for(let k=m;k<v+m-2;++k)w=d[k*2],S=d[k*2+1],T=d[(k+1)*2],E=d[(k+1)*2+1],O=d[(k+2)*2],P=d[(k+2)*2+1],!(Math.abs(w*(E-P)+T*(P-S)+O*(S-E))<ae)&&s.push(k,k+1,k+2)}function oD(r,e,t,n){const i=bS;if(r.length===0)return;const s=r[0],a=r[1],o=r[r.length-2],l=r[r.length-1],u=e||Math.abs(s-o)<i&&Math.abs(a-l)<i,c=t,f=r.length/2,h=c.length/2;for(let d=0;d<f;d++)c.push(r[d*2]),c.push(r[d*2+1]);for(let d=0;d<f-1;d++)n.push(h+d,h+d+1);u&&n.push(h+f-1,h)}function yS(r,e,t,n,i,s,a){const o=aF(r,e,2);if(!o)return;for(let u=0;u<o.length;u+=3)s[a++]=o[u]+i,s[a++]=o[u+1]+i,s[a++]=o[u+2]+i;let l=i*n;for(let u=0;u<r.length;u+=2)t[l]=r[u],t[l+1]=r[u+1],l+=n}const lD=[],uD={extension:{type:re.ShapeBuilder,name:"polygon"},build(r,e){for(let t=0;t<r.points.length;t++)e[t]=r.points[t];return!0},triangulate(r,e,t,n,i,s){yS(r,lD,e,t,n,i,s)}},cD={extension:{type:re.ShapeBuilder,name:"rectangle"},build(r,e){const t=r,n=t.x,i=t.y,s=t.width,a=t.height;return s>0&&a>0?(e[0]=n,e[1]=i,e[2]=n+s,e[3]=i,e[4]=n+s,e[5]=i+a,e[6]=n,e[7]=i+a,!0):!1},triangulate(r,e,t,n,i,s){let a=0;n*=t,e[n+a]=r[0],e[n+a+1]=r[1],a+=t,e[n+a]=r[2],e[n+a+1]=r[3],a+=t,e[n+a]=r[6],e[n+a+1]=r[7],a+=t,e[n+a]=r[4],e[n+a+1]=r[5],a+=t;const o=n/t;i[s++]=o,i[s++]=o+1,i[s++]=o+2,i[s++]=o+1,i[s++]=o+3,i[s++]=o+2}},fD={extension:{type:re.ShapeBuilder,name:"triangle"},build(r,e){return e[0]=r.x,e[1]=r.y,e[2]=r.x2,e[3]=r.y2,e[4]=r.x3,e[5]=r.y3,!0},triangulate(r,e,t,n,i,s){let a=0;n*=t,e[n+a]=r[0],e[n+a+1]=r[1],a+=t,e[n+a]=r[2],e[n+a+1]=r[3],a+=t,e[n+a]=r[4],e[n+a+1]=r[5];const o=n/t;i[s++]=o,i[s++]=o+1,i[s++]=o+2}},hD=new Oe,dD=new ft;function pD(r,e,t,n){const i=e.matrix?r.copyFrom(e.matrix).invert():r.identity();if(e.textureSpace==="local"){const a=t.getBounds(dD);e.width&&a.pad(e.width);const{x:o,y:l}=a,u=1/a.width,c=1/a.height,f=-o*u,h=-l*c,d=i.a,p=i.b,v=i.c,m=i.d;i.a*=u,i.b*=u,i.c*=c,i.d*=c,i.tx=f*d+h*v+i.tx,i.ty=f*p+h*m+i.ty}else i.translate(e.texture.frame.x,e.texture.frame.y),i.scale(1/e.texture.source.width,1/e.texture.source.height);const s=e.texture.source.style;return!(e.fill instanceof Ri)&&s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update()),n&&i.append(hD.copyFrom(n).invert()),i}const xf={};ze.handleByMap(re.ShapeBuilder,xf);ze.add(cD,uD,fD,kl,nD,iD);const gD=new ft,mD=new Oe;function vD(r,e){const{geometryData:t,batches:n}=e;n.length=0,t.indices.length=0,t.vertices.length=0,t.uvs.length=0;for(let i=0;i<r.instructions.length;i++){const s=r.instructions[i];if(s.action==="texture")_D(s.data,n,t);else if(s.action==="fill"||s.action==="stroke"){const a=s.action==="stroke",o=s.data.path.shapePath,l=s.data.style,u=s.data.hole;a&&u&&B0(u.shapePath,l,!0,n,t),u&&(o.shapePrimitives[o.shapePrimitives.length-1].holes=u.shapePath.shapePrimitives),B0(o,l,a,n,t)}}}function _D(r,e,t){const n=[],i=xf.rectangle,s=gD;s.x=r.dx,s.y=r.dy,s.width=r.dw,s.height=r.dh;const a=r.transform;if(!i.build(s,n))return;const{vertices:o,uvs:l,indices:u}=t,c=u.length,f=o.length/2;a&&_S(n,a),i.triangulate(n,o,2,f,u,c);const h=r.image,d=h.uvs;l.push(d.x0,d.y0,d.x1,d.y1,d.x3,d.y3,d.x2,d.y2);const p=jt.get(fm);p.indexOffset=c,p.indexSize=u.length-c,p.attributeOffset=f,p.attributeSize=o.length/2-f,p.baseColor=r.style,p.alpha=r.alpha,p.texture=h,p.geometryData=t,e.push(p)}function B0(r,e,t,n,i){const{vertices:s,uvs:a,indices:o}=i;r.shapePrimitives.forEach(({shape:l,transform:u,holes:c})=>{const f=[],h=xf[l.type];if(!h.build(l,f))return;const d=o.length,p=s.length/2;let v="triangle-list";if(u&&_S(f,u),t){const b=l.closePath??!0,w=e;w.pixelLine?(oD(f,b,s,o),v="line-list"):aD(f,w,!1,b,s,o)}else if(c){const b=[],w=f.slice();bD(c).forEach(T=>{b.push(w.length/2),w.push(...T)}),yS(w,b,s,2,p,o,d)}else h.triangulate(f,s,2,p,o,d);const m=a.length/2,g=e.texture;if(g!==Re.WHITE){const b=pD(mD,e,l,u);eD(s,2,p,a,m,2,s.length/2-p,b)}else tD(a,m,2,s.length/2-p);const _=jt.get(fm);_.indexOffset=d,_.indexSize=o.length-d,_.attributeOffset=p,_.attributeSize=s.length/2-p,_.baseColor=e.color,_.alpha=e.alpha,_.texture=g,_.geometryData=i,_.topology=v,n.push(_)})}function bD(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t].shape,i=[];xf[n.type].build(n,i)&&e.push(i)}return e}class yD{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}reset(){this.batches&&this.batches.forEach(e=>{jt.return(e)}),this.graphicsData&&jt.return(this.graphicsData),this.isBatchable=!1,this.context=null,this.batches.length=0,this.geometryData.indices.length=0,this.geometryData.vertices.length=0,this.geometryData.uvs.length=0,this.graphicsData=null}destroy(){this.reset(),this.batches=null,this.geometryData=null}}class xD{constructor(){this.instructions=new T2}init(e){const t=e.maxTextures;this.batcher?this.batcher._updateMaxTextures(t):this.batcher=new cm({maxTextures:t}),this.instructions.reset()}get geometry(){return Fe(AB,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}destroy(){this.batcher.destroy(),this.instructions.destroy(),this.batcher=null,this.instructions=null}}const hm=class Lp{constructor(e){this._renderer=e,this._managedContexts=new Wr({renderer:e,type:"resource",name:"graphicsContext"})}init(e){Lp.defaultOptions.bezierSmoothness=e?.bezierSmoothness??Lp.defaultOptions.bezierSmoothness}getContextRenderData(e){return e._gpuData[this._renderer.uid].graphicsData||this._initContextRenderData(e)}updateGpuContext(e){const t=!!e._gpuData[this._renderer.uid],n=e._gpuData[this._renderer.uid]||this._initContext(e);if(e.dirty||!t){t&&n.reset(),vD(e,n);const i=e.batchMode;e.customShader||i==="no-batch"?n.isBatchable=!1:i==="auto"?n.isBatchable=n.geometryData.vertices.length<400:n.isBatchable=!0,e.dirty=!1}return n}getGpuContext(e){return e._gpuData[this._renderer.uid]||this._initContext(e)}_initContextRenderData(e){const t=jt.get(xD,{maxTextures:this._renderer.limits.maxBatchableTextures}),n=e._gpuData[this._renderer.uid],{batches:i,geometryData:s}=n;n.graphicsData=t;const a=s.vertices.length,o=s.indices.length;for(let f=0;f<i.length;f++)i[f].applyTransform=!1;const l=t.batcher;l.ensureAttributeBuffer(a),l.ensureIndexBuffer(o),l.begin();for(let f=0;f<i.length;f++){const h=i[f];l.add(h)}l.finish(t.instructions);const u=l.geometry;u.indexBuffer.setDataWithSize(l.indexBuffer,l.indexSize,!0),u.buffers[0].setDataWithSize(l.attributeBuffer.float32View,l.attributeSize,!0);const c=l.batches;for(let f=0;f<c.length;f++){const h=c[f];h.bindGroup=im(h.textures.textures,h.textures.count,this._renderer.limits.maxBatchableTextures)}return t}_initContext(e){const t=new yD;return t.context=e,e._gpuData[this._renderer.uid]=t,this._managedContexts.add(e),t}destroy(){this._managedContexts.destroy(),this._renderer=null}};hm.extension={type:[re.WebGLSystem,re.WebGPUSystem,re.CanvasSystem],name:"graphicsContext"};hm.defaultOptions={bezierSmoothness:.5};let dm=hm;const wD=8,Nu=11920929e-14,SD=1;function xS(r,e,t,n,i,s,a,o,l,u){const f=Math.min(.99,Math.max(0,u??dm.defaultOptions.bezierSmoothness));let h=(SD-f)/1;return h*=h,TD(e,t,n,i,s,a,o,l,r,h),r}function TD(r,e,t,n,i,s,a,o,l,u){Up(r,e,t,n,i,s,a,o,l,u,0),l.push(a,o)}function Up(r,e,t,n,i,s,a,o,l,u,c){if(c>wD)return;const f=(r+t)/2,h=(e+n)/2,d=(t+i)/2,p=(n+s)/2,v=(i+a)/2,m=(s+o)/2,g=(f+d)/2,_=(h+p)/2,b=(d+v)/2,w=(p+m)/2,S=(g+b)/2,T=(_+w)/2;if(c>0){let E=a-r,O=o-e;const P=Math.abs((t-a)*O-(n-o)*E),V=Math.abs((i-a)*O-(s-o)*E);if(P>Nu&&V>Nu){if((P+V)*(P+V)<=u*(E*E+O*O)){l.push(S,T);return}}else if(P>Nu){if(P*P<=u*(E*E+O*O)){l.push(S,T);return}}else if(V>Nu){if(V*V<=u*(E*E+O*O)){l.push(S,T);return}}else if(E=S-(r+a)/2,O=T-(e+o)/2,E*E+O*O<=u){l.push(S,T);return}}Up(r,e,f,h,g,_,S,T,l,u,c+1),Up(S,T,b,w,v,m,a,o,l,u,c+1)}const ED=8,AD=11920929e-14,CD=1;function PD(r,e,t,n,i,s,a,o){const u=Math.min(.99,Math.max(0,o??dm.defaultOptions.bezierSmoothness));let c=(CD-u)/1;return c*=c,RD(e,t,n,i,s,a,r,c),r}function RD(r,e,t,n,i,s,a,o){Np(a,r,e,t,n,i,s,o,0),a.push(i,s)}function Np(r,e,t,n,i,s,a,o,l){if(l>ED)return;const u=(e+n)/2,c=(t+i)/2,f=(n+s)/2,h=(i+a)/2,d=(u+f)/2,p=(c+h)/2;let v=s-e,m=a-t;const g=Math.abs((n-s)*m-(i-a)*v);if(g>AD){if(g*g<=o*(v*v+m*m)){r.push(d,p);return}}else if(v=d-(e+s)/2,m=p-(t+a)/2,v*v+m*m<=o){r.push(d,p);return}Np(r,e,t,u,c,d,p,o,l+1),Np(r,d,p,f,h,s,a,o,l+1)}function wS(r,e,t,n,i,s,a,o){let l=Math.abs(i-s);(!a&&i>s||a&&s>i)&&(l=2*Math.PI-l),o||(o=Math.max(6,Math.floor(6*Math.pow(n,1/3)*(l/Math.PI)))),o=Math.max(o,3);let u=l/o,c=i;u*=a?-1:1;for(let f=0;f<o+1;f++){const h=Math.cos(c),d=Math.sin(c),p=e+h*n,v=t+d*n;r.push(p,v),c+=u}}function kD(r,e,t,n,i,s){const a=r[r.length-2],l=r[r.length-1]-t,u=a-e,c=i-t,f=n-e,h=Math.abs(l*f-u*c);if(h<1e-8||s===0){(r[r.length-2]!==e||r[r.length-1]!==t)&&r.push(e,t);return}const d=l*l+u*u,p=c*c+f*f,v=l*c+u*f,m=s*Math.sqrt(d)/h,g=s*Math.sqrt(p)/h,_=m*v/d,b=g*v/p,w=m*f+g*u,S=m*c+g*l,T=u*(g+_),E=l*(g+_),O=f*(m+b),P=c*(m+b),V=Math.atan2(E-S,T-w),W=Math.atan2(P-S,O-w);wS(r,w+e,S+t,s,V,W,u*c>f*l)}const pl=Math.PI*2,vd={centerX:0,centerY:0,ang1:0,ang2:0},_d=({x:r,y:e},t,n,i,s,a,o,l)=>{r*=t,e*=n;const u=i*r-s*e,c=s*r+i*e;return l.x=u+a,l.y=c+o,l};function MD(r,e){const t=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=e===1.5707963267948966?.551915024494:t,i=Math.cos(r),s=Math.sin(r),a=Math.cos(r+e),o=Math.sin(r+e);return[{x:i-s*n,y:s+i*n},{x:a+o*n,y:o-a*n},{x:a,y:o}]}const F0=(r,e,t,n)=>{const i=r*n-e*t<0?-1:1;let s=r*t+e*n;return s>1&&(s=1),s<-1&&(s=-1),i*Math.acos(s)},OD=(r,e,t,n,i,s,a,o,l,u,c,f,h)=>{const d=Math.pow(i,2),p=Math.pow(s,2),v=Math.pow(c,2),m=Math.pow(f,2);let g=d*p-d*m-p*v;g<0&&(g=0),g/=d*m+p*v,g=Math.sqrt(g)*(a===o?-1:1);const _=g*i/s*f,b=g*-s/i*c,w=u*_-l*b+(r+t)/2,S=l*_+u*b+(e+n)/2,T=(c-_)/i,E=(f-b)/s,O=(-c-_)/i,P=(-f-b)/s,V=F0(1,0,T,E);let W=F0(T,E,O,P);o===0&&W>0&&(W-=pl),o===1&&W<0&&(W+=pl),h.centerX=w,h.centerY=S,h.ang1=V,h.ang2=W};function ID(r,e,t,n,i,s,a,o=0,l=0,u=0){if(s===0||a===0)return;const c=Math.sin(o*pl/360),f=Math.cos(o*pl/360),h=f*(e-n)/2+c*(t-i)/2,d=-c*(e-n)/2+f*(t-i)/2;if(h===0&&d===0)return;s=Math.abs(s),a=Math.abs(a);const p=Math.pow(h,2)/Math.pow(s,2)+Math.pow(d,2)/Math.pow(a,2);p>1&&(s*=Math.sqrt(p),a*=Math.sqrt(p)),OD(e,t,n,i,s,a,l,u,c,f,h,d,vd);let{ang1:v,ang2:m}=vd;const{centerX:g,centerY:_}=vd;let b=Math.abs(m)/(pl/4);Math.abs(1-b)<1e-7&&(b=1);const w=Math.max(Math.ceil(b),1);m/=w;let S=r[r.length-2],T=r[r.length-1];const E={x:0,y:0};for(let O=0;O<w;O++){const P=MD(v,m),{x:V,y:W}=_d(P[0],s,a,f,c,g,_,E),{x:D,y:j}=_d(P[1],s,a,f,c,g,_,E),{x:I,y:q}=_d(P[2],s,a,f,c,g,_,E);xS(r,S,T,V,W,D,j,I,q),S=I,T=q,v+=m}}function BD(r,e,t){const n=(a,o)=>{const l=o.x-a.x,u=o.y-a.y,c=Math.sqrt(l*l+u*u),f=l/c,h=u/c;return{len:c,nx:f,ny:h}},i=(a,o)=>{a===0?r.moveTo(o.x,o.y):r.lineTo(o.x,o.y)};let s=e[e.length-1];for(let a=0;a<e.length;a++){const o=e[a%e.length],l=o.radius??t;if(l<=0){i(a,o),s=o;continue}const u=e[(a+1)%e.length],c=n(o,s),f=n(o,u);if(c.len<1e-4||f.len<1e-4){i(a,o),s=o;continue}let h=Math.asin(c.nx*f.ny-c.ny*f.nx),d=1,p=!1;c.nx*f.nx-c.ny*-f.ny<0?h<0?h=Math.PI+h:(h=Math.PI-h,d=-1,p=!0):h>0&&(d=-1,p=!0);const v=h/2;let m,g=Math.abs(Math.cos(v)*l/Math.sin(v));g>Math.min(c.len/2,f.len/2)?(g=Math.min(c.len/2,f.len/2),m=Math.abs(g*Math.sin(v)/Math.cos(v))):m=l;const _=o.x+f.nx*g+-f.ny*m*d,b=o.y+f.ny*g+f.nx*m*d,w=Math.atan2(c.ny,c.nx)+Math.PI/2*d,S=Math.atan2(f.ny,f.nx)-Math.PI/2*d;a===0&&r.moveTo(_+Math.cos(w)*m,b+Math.sin(w)*m),r.arc(_,b,m,w,S,p),s=o}}function FD(r,e,t,n){const i=(o,l)=>Math.sqrt((o.x-l.x)**2+(o.y-l.y)**2),s=(o,l,u)=>({x:o.x+(l.x-o.x)*u,y:o.y+(l.y-o.y)*u}),a=e.length;for(let o=0;o<a;o++){const l=e[(o+1)%a],u=l.radius??t;if(u<=0){o===0?r.moveTo(l.x,l.y):r.lineTo(l.x,l.y);continue}const c=e[o],f=e[(o+2)%a],h=i(c,l);let d;if(h<1e-4)d=l;else{const m=Math.min(h/2,u);d=s(l,c,m/h)}const p=i(f,l);let v;if(p<1e-4)v=l;else{const m=Math.min(p/2,u);v=s(l,f,m/p)}o===0?r.moveTo(d.x,d.y):r.lineTo(d.x,d.y),r.quadraticCurveTo(l.x,l.y,v.x,v.y,n)}}const DD=new ft;class LD{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new hr,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,t){return this.startPoly(e,t),this}lineTo(e,t){this._ensurePoly();const n=this._currentPoly.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==t)&&n.push(e,t),this}arc(e,t,n,i,s,a){this._ensurePoly(!1);const o=this._currentPoly.points;return wS(o,e,t,n,i,s,a),this}arcTo(e,t,n,i,s){this._ensurePoly();const a=this._currentPoly.points;return kD(a,e,t,n,i,s),this}arcToSvg(e,t,n,i,s,a,o){const l=this._currentPoly.points;return ID(l,this._currentPoly.lastX,this._currentPoly.lastY,a,o,e,t,n,i,s),this}bezierCurveTo(e,t,n,i,s,a,o){this._ensurePoly();const l=this._currentPoly;return xS(this._currentPoly.points,l.lastX,l.lastY,e,t,n,i,s,a,o),this}quadraticCurveTo(e,t,n,i,s){this._ensurePoly();const a=this._currentPoly;return PD(this._currentPoly.points,a.lastX,a.lastY,e,t,n,i,s),this}closePath(){return this.endPoly(!0),this}addPath(e,t){this.endPoly(),t&&!t.isIdentity()&&(e=e.clone(!0),e.transform(t));const n=this.shapePrimitives,i=n.length;for(let s=0;s<e.instructions.length;s++){const a=e.instructions[s];this[a.action](...a.data)}if(e.checkForHoles&&n.length-i>1){let s=null;for(let a=i;a<n.length;a++){const o=n[a];if(o.shape.type==="polygon"){const l=o.shape,u=s?.shape;u&&u.containsPolygon(l)?(s.holes||(s.holes=[]),s.holes.push(o),n.copyWithin(a,a+1),n.length--,a--):s=o}}}return this}finish(e=!1){this.endPoly(e)}rect(e,t,n,i,s){return this.drawShape(new ft(e,t,n,i),s),this}circle(e,t,n,i){return this.drawShape(new tm(e,t,n),i),this}poly(e,t,n){const i=new hl(e);return i.closePath=t,this.drawShape(i,n),this}regularPoly(e,t,n,i,s=0,a){i=Math.max(i|0,3);const o=-1*Math.PI/2+s,l=Math.PI*2/i,u=[];for(let c=0;c<i;c++){const f=o-c*l;u.push(e+n*Math.cos(f),t+n*Math.sin(f))}return this.poly(u,!0,a),this}roundPoly(e,t,n,i,s,a=0,o){if(i=Math.max(i|0,3),s<=0)return this.regularPoly(e,t,n,i,a);const l=n*Math.sin(Math.PI/i)-.001;s=Math.min(s,l);const u=-1*Math.PI/2+a,c=Math.PI*2/i,f=(i-2)*Math.PI/i/2;for(let h=0;h<i;h++){const d=h*c+u,p=e+n*Math.cos(d),v=t+n*Math.sin(d),m=d+Math.PI+f,g=d-Math.PI-f,_=p+s*Math.cos(m),b=v+s*Math.sin(m),w=p+s*Math.cos(g),S=v+s*Math.sin(g);h===0?this.moveTo(_,b):this.lineTo(_,b),this.quadraticCurveTo(p,v,w,S,o)}return this.closePath()}roundShape(e,t,n=!1,i){return e.length<3?this:(n?FD(this,e,t,i):BD(this,e,t),this.closePath())}filletRect(e,t,n,i,s){if(s===0)return this.rect(e,t,n,i);const a=Math.min(n,i)/2,o=Math.min(a,Math.max(-a,s)),l=e+n,u=t+i,c=o<0?-o:0,f=Math.abs(o);return this.moveTo(e,t+f).arcTo(e+c,t+c,e+f,t,f).lineTo(l-f,t).arcTo(l-c,t+c,l,t+f,f).lineTo(l,u-f).arcTo(l-c,u-c,e+n-f,u,f).lineTo(e+f,u).arcTo(e+c,u-c,e,u-f,f).closePath()}chamferRect(e,t,n,i,s,a){if(s<=0)return this.rect(e,t,n,i);const o=Math.min(s,Math.min(n,i)/2),l=e+n,u=t+i,c=[e+o,t,l-o,t,l,t+o,l,u-o,l-o,u,e+o,u,e,u-o,e,t+o];for(let f=c.length-1;f>=2;f-=2)c[f]===c[f-2]&&c[f-1]===c[f-3]&&c.splice(f-1,2);return this.poly(c,!0,a)}ellipse(e,t,n,i,s){return this.drawShape(new rm(e,t,n,i),s),this}roundRect(e,t,n,i,s,a){return this.drawShape(new nm(e,t,n,i,s),a),this}drawShape(e,t){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:t}),this}startPoly(e,t){let n=this._currentPoly;return n&&this.endPoly(),n=new hl,n.points.push(e,t),this._currentPoly=n,this}endPoly(e=!1){const t=this._currentPoly;return t&&t.points.length>2&&(t.closePath=e,this.shapePrimitives.push({shape:t})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new hl,e)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let n=t.shape.x,i=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const s=t.transform,a=n;n=s.a*n+s.c*i+s.tx,i=s.b*a+s.d*i+s.ty}this._currentPoly.points.push(n,i)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let t=0;t<e.instructions.length;t++){const n=e.instructions[t];this[n.action](...n.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const t=this.shapePrimitives;for(let n=0;n<t.length;n++){const i=t[n],s=i.shape.getBounds(DD);i.transform?e.addRect(s,i.transform):e.addRect(s)}return e}}class Si{constructor(e,t=!1){this.instructions=[],this.uid=Tt("graphicsPath"),this._dirty=!0,this.checkForHoles=t,typeof e=="string"?yF(e,this):this.instructions=e?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new LD(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,t){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,t]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,t,n,i,s){const a=this.instructions[this.instructions.length-1],o=this.getLastPoint(At.shared);let l=0,u=0;if(!a||a.action!=="bezierCurveTo")l=o.x,u=o.y;else{l=a.data[2],u=a.data[3];const c=o.x,f=o.y;l=c+(c-l),u=f+(f-u)}return this.instructions.push({action:"bezierCurveTo",data:[l,u,e,t,n,i,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,t,n){const i=this.instructions[this.instructions.length-1],s=this.getLastPoint(At.shared);let a=0,o=0;if(!i||i.action!=="quadraticCurveTo")a=s.x,o=s.y;else{a=i.data[0],o=i.data[1];const l=s.x,u=s.y;a=l+(l-a),o=u+(u-o)}return this.instructions.push({action:"quadraticCurveTo",data:[a,o,e,t,n]}),this._dirty=!0,this}rect(e,t,n,i,s){return this.instructions.push({action:"rect",data:[e,t,n,i,s]}),this._dirty=!0,this}circle(e,t,n,i){return this.instructions.push({action:"circle",data:[e,t,n,i]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,t,n,i,s,a,o){s||(s=i/2);const l=-1*Math.PI/2+a,u=n*2,c=Math.PI*2/u,f=[];for(let h=0;h<u;h++){const d=h%2?s:i,p=h*c+l;f.push(e+d*Math.cos(p),t+d*Math.sin(p))}return this.poly(f,!0,o),this}clone(e=!1){const t=new Si;if(t.checkForHoles=this.checkForHoles,!e)t.instructions=this.instructions.slice();else for(let n=0;n<this.instructions.length;n++){const i=this.instructions[n];t.instructions.push({action:i.action,data:i.data.slice()})}return t}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const t=e.a,n=e.b,i=e.c,s=e.d,a=e.tx,o=e.ty;let l=0,u=0,c=0,f=0,h=0,d=0,p=0,v=0;for(let m=0;m<this.instructions.length;m++){const g=this.instructions[m],_=g.data;switch(g.action){case"moveTo":case"lineTo":l=_[0],u=_[1],_[0]=t*l+i*u+a,_[1]=n*l+s*u+o;break;case"bezierCurveTo":c=_[0],f=_[1],h=_[2],d=_[3],l=_[4],u=_[5],_[0]=t*c+i*f+a,_[1]=n*c+s*f+o,_[2]=t*h+i*d+a,_[3]=n*h+s*d+o,_[4]=t*l+i*u+a,_[5]=n*l+s*u+o;break;case"quadraticCurveTo":c=_[0],f=_[1],l=_[2],u=_[3],_[0]=t*c+i*f+a,_[1]=n*c+s*f+o,_[2]=t*l+i*u+a,_[3]=n*l+s*u+o;break;case"arcToSvg":l=_[5],u=_[6],p=_[0],v=_[1],_[0]=t*p+i*v,_[1]=n*p+s*v,_[5]=t*l+i*u+a,_[6]=n*l+s*u+o;break;case"circle":_[4]=qo(_[3],e);break;case"rect":_[4]=qo(_[4],e);break;case"ellipse":_[8]=qo(_[8],e);break;case"roundRect":_[5]=qo(_[5],e);break;case"addPath":_[0].transform(e);break;case"poly":_[2]=qo(_[2],e);break;default:Ne("unknown transform action",g.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let t=this.instructions.length-1,n=this.instructions[t];if(!n)return e.x=0,e.y=0,e;for(;n.action==="closePath";){if(t--,t<0)return e.x=0,e.y=0,e;n=this.instructions[t]}switch(n.action){case"moveTo":case"lineTo":e.x=n.data[0],e.y=n.data[1];break;case"quadraticCurveTo":e.x=n.data[2],e.y=n.data[3];break;case"bezierCurveTo":e.x=n.data[4],e.y=n.data[5];break;case"arc":case"arcToSvg":e.x=n.data[5],e.y=n.data[6];break;case"addPath":n.data[0].getLastPoint(e);break}return e}}function qo(r,e){return r?r.prepend(e):e.clone()}function Ft(r,e,t){const n=r.getAttribute(e);return n?Number(n):t}function UD(r,e){const t=r.querySelectorAll("defs");for(let n=0;n<t.length;n++){const i=t[n];for(let s=0;s<i.children.length;s++){const a=i.children[s];switch(a.nodeName.toLowerCase()){case"lineargradient":e.defs[a.id]=ND(a);break;case"radialgradient":e.defs[a.id]=GD();break}}}}function ND(r){const e=Ft(r,"x1",0),t=Ft(r,"y1",0),n=Ft(r,"x2",1),i=Ft(r,"y2",0),s=r.getAttribute("gradientUnits")||"objectBoundingBox",a=new Ri(e,t,n,i,s==="objectBoundingBox"?"local":"global");for(let o=0;o<r.children.length;o++){const l=r.children[o],u=Ft(l,"offset",0),c=ht.shared.setValue(l.getAttribute("stop-color")).toNumber();a.addColorStop(u,c)}return a}function GD(r){return Ne("[SVG Parser] Radial gradients are not yet supported"),new Ri(0,0,1,0)}function D0(r){const e=r.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const L0={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function SS(r,e){const t=r.getAttribute("style"),n={},i={},s={strokeStyle:n,fillStyle:i,useFill:!1,useStroke:!1};for(const a in L0){const o=r.getAttribute(a);o&&U0(e,s,a,o.trim())}if(t){const a=t.split(";");for(let o=0;o<a.length;o++){const l=a[o].trim(),[u,c]=l.split(":");L0[u]&&U0(e,s,u,c.trim())}}return{strokeStyle:s.useStroke?n:null,fillStyle:s.useFill?i:null,useFill:s.useFill,useStroke:s.useStroke}}function U0(r,e,t,n){switch(t){case"stroke":if(n!=="none"){if(n.startsWith("url(")){const i=D0(n);e.strokeStyle.fill=r.defs[i]}else e.strokeStyle.color=ht.shared.setValue(n).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(n);break;case"fill":if(n!=="none"){if(n.startsWith("url(")){const i=D0(n);e.fillStyle.fill=r.defs[i]}else e.fillStyle.color=ht.shared.setValue(n).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(n);break;case"stroke-opacity":e.strokeStyle.alpha=Number(n);break;case"opacity":e.fillStyle.alpha=Number(n),e.strokeStyle.alpha=Number(n);break}}function zD(r){if(r.length<=2)return!0;const e=r.map(o=>o.area).sort((o,l)=>l-o),[t,n]=e,i=e[e.length-1],s=t/n,a=n/i;return!(s>3&&a<2)}function jD(r){return r.split(/(?=[Mm])/).filter(n=>n.trim().length>0)}function HD(r){const e=r.match(/[-+]?[0-9]*\.?[0-9]+/g);if(!e||e.length<4)return 0;const t=e.map(Number),n=[],i=[];for(let c=0;c<t.length;c+=2)c+1<t.length&&(n.push(t[c]),i.push(t[c+1]));if(n.length===0||i.length===0)return 0;const s=Math.min(...n),a=Math.max(...n),o=Math.min(...i),l=Math.max(...i);return(a-s)*(l-o)}function N0(r,e){const t=new Si(r,!1);for(const n of t.instructions)e.instructions.push(n)}function VD(r,e){if(typeof r=="string"){const a=document.createElement("div");a.innerHTML=r.trim(),r=a.querySelector("svg")}const t={context:e,defs:{},path:new Si};UD(r,t);const n=r.children,{fillStyle:i,strokeStyle:s}=SS(r,t);for(let a=0;a<n.length;a++){const o=n[a];o.nodeName.toLowerCase()!=="defs"&&TS(o,t,i,s)}return e}function TS(r,e,t,n){const i=r.children,{fillStyle:s,strokeStyle:a}=SS(r,e);s&&t?t={...t,...s}:s&&(t=s),a&&n?n={...n,...a}:a&&(n=a);const o=!t&&!n;o&&(t={color:0});let l,u,c,f,h,d,p,v,m,g,_,b,w,S,T,E,O;switch(r.nodeName.toLowerCase()){case"path":{S=r.getAttribute("d");const P=r.getAttribute("fill-rule"),V=jD(S),W=P==="evenodd",D=V.length>1;if(W&&D){const I=V.map($=>({path:$,area:HD($)}));if(I.sort(($,K)=>K.area-$.area),V.length>3||!zD(I))for(let $=0;$<I.length;$++){const K=I[$],ae=$===0;e.context.beginPath();const k=new Si(void 0,!0);N0(K.path,k),e.context.path(k),ae?(t&&e.context.fill(t),n&&e.context.stroke(n)):e.context.cut()}else for(let $=0;$<I.length;$++){const K=I[$],ae=$%2===1;e.context.beginPath();const k=new Si(void 0,!0);N0(K.path,k),e.context.path(k),ae?e.context.cut():(t&&e.context.fill(t),n&&e.context.stroke(n))}}else{const I=P?P==="evenodd":!0;T=new Si(S,I),e.context.path(T),t&&e.context.fill(t),n&&e.context.stroke(n)}break}case"circle":p=Ft(r,"cx",0),v=Ft(r,"cy",0),m=Ft(r,"r",0),e.context.ellipse(p,v,m,m),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"rect":l=Ft(r,"x",0),u=Ft(r,"y",0),E=Ft(r,"width",0),O=Ft(r,"height",0),g=Ft(r,"rx",0),_=Ft(r,"ry",0),g||_?e.context.roundRect(l,u,E,O,g||_):e.context.rect(l,u,E,O),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"ellipse":p=Ft(r,"cx",0),v=Ft(r,"cy",0),g=Ft(r,"rx",0),_=Ft(r,"ry",0),e.context.beginPath(),e.context.ellipse(p,v,g,_),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"line":c=Ft(r,"x1",0),f=Ft(r,"y1",0),h=Ft(r,"x2",0),d=Ft(r,"y2",0),e.context.beginPath(),e.context.moveTo(c,f),e.context.lineTo(h,d),n&&e.context.stroke(n);break;case"polygon":w=r.getAttribute("points"),b=w.match(/-?\d+/g).map(P=>parseInt(P,10)),e.context.poly(b,!0),t&&e.context.fill(t),n&&e.context.stroke(n);break;case"polyline":w=r.getAttribute("points"),b=w.match(/-?\d+/g).map(P=>parseInt(P,10)),e.context.poly(b,!1),n&&e.context.stroke(n);break;case"g":case"svg":break;default:{Ne(`[SVG parser] <${r.nodeName}> elements unsupported`);break}}o&&(t=null);for(let P=0;P<i.length;P++)TS(i[P],e,t,n)}function WD(r){return ht.isColorLike(r)}function G0(r){return r instanceof yf}function z0(r){return r instanceof Ri}function qD(r){return r instanceof Re}function XD(r,e,t){const n=ht.shared.setValue(e??0);return r.color=n.toNumber(),r.alpha=n.alpha===1?t.alpha:n.alpha,r.texture=Re.WHITE,{...t,...r}}function YD(r,e,t){return r.texture=e,{...t,...r}}function j0(r,e,t){return r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,{...t,...r}}function H0(r,e,t){return e.buildGradient(),r.fill=e,r.color=16777215,r.texture=e.texture,r.matrix=e.transform,r.textureSpace=e.textureSpace,{...t,...r}}function $D(r,e){const t={...e,...r},n=ht.shared.setValue(t.color);return t.alpha*=n.alpha,t.color=n.toNumber(),t}function Ss(r,e){if(r==null)return null;const t={},n=r;return WD(r)?XD(t,r,e):qD(r)?YD(t,r,e):G0(r)?j0(t,r,e):z0(r)?H0(t,r,e):n.fill&&G0(n.fill)?j0(n,n.fill,e):n.fill&&z0(n.fill)?H0(n,n.fill,e):$D(n,e)}function Xc(r,e){const{width:t,alignment:n,miterLimit:i,cap:s,join:a,pixelLine:o,...l}=e,u=Ss(r,l);return u?{width:t,alignment:n,miterLimit:i,cap:s,join:a,pixelLine:o,...u}:null}const KD=new At,V0=new Oe,pm=class Nn extends Vr{constructor(){super(...arguments),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=Tt("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this.destroyed=!1,this._activePath=new Si,this._transform=new Oe,this._fillStyle={...Nn.defaultFillStyle},this._strokeStyle={...Nn.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new hr,this._boundsDirty=!0}clone(){const e=new Nn;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Ss(e,Nn.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Xc(e,Nn.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Ss(e,Nn.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Ss(e,Nn.defaultStrokeStyle),this}texture(e,t,n,i,s,a){return this.instructions.push({action:"texture",data:{image:e,dx:n||0,dy:i||0,dw:s||e.frame.width,dh:a||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:t?ht.shared.setValue(t).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new Si,this}fill(e,t){let n;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i?.action==="stroke"?n=i.data.path:n=this._activePath.clone(),n?(e!=null&&(t!==void 0&&typeof e=="number"&&(Fe(lt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:t}),this._fillStyle=Ss(e,Nn.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:t}=this._activePath.getLastPoint(At.shared);this._activePath.clear(),this._activePath.moveTo(e,t)}stroke(e){let t;const n=this.instructions[this.instructions.length-1];return this._tick===0&&n?.action==="fill"?t=n.data.path:t=this._activePath.clone(),t?(e!=null&&(this._strokeStyle=Xc(e,Nn.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:t}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const t=this.instructions[this.instructions.length-1-e],n=this._activePath.clone();if(t&&(t.action==="stroke"||t.action==="fill"))if(t.data.hole)t.data.hole.addPath(n);else{t.data.hole=n;break}}return this._initNextPathLocation(),this}arc(e,t,n,i,s,a){this._tick++;const o=this._transform;return this._activePath.arc(o.a*e+o.c*t+o.tx,o.b*e+o.d*t+o.ty,n,i,s,a),this}arcTo(e,t,n,i,s){this._tick++;const a=this._transform;return this._activePath.arcTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*n+a.c*i+a.tx,a.b*n+a.d*i+a.ty,s),this}arcToSvg(e,t,n,i,s,a,o){this._tick++;const l=this._transform;return this._activePath.arcToSvg(e,t,n,i,s,l.a*a+l.c*o+l.tx,l.b*a+l.d*o+l.ty),this}bezierCurveTo(e,t,n,i,s,a,o){this._tick++;const l=this._transform;return this._activePath.bezierCurveTo(l.a*e+l.c*t+l.tx,l.b*e+l.d*t+l.ty,l.a*n+l.c*i+l.tx,l.b*n+l.d*i+l.ty,l.a*s+l.c*a+l.tx,l.b*s+l.d*a+l.ty,o),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(e,t,n,i){return this._tick++,this._activePath.ellipse(e,t,n,i,this._transform.clone()),this}circle(e,t,n){return this._tick++,this._activePath.circle(e,t,n,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,t){this._tick++;const n=this._transform;return this._activePath.lineTo(n.a*e+n.c*t+n.tx,n.b*e+n.d*t+n.ty),this}moveTo(e,t){this._tick++;const n=this._transform,i=this._activePath.instructions,s=n.a*e+n.c*t+n.tx,a=n.b*e+n.d*t+n.ty;return i.length===1&&i[0].action==="moveTo"?(i[0].data[0]=s,i[0].data[1]=a,this):(this._activePath.moveTo(s,a),this)}quadraticCurveTo(e,t,n,i,s){this._tick++;const a=this._transform;return this._activePath.quadraticCurveTo(a.a*e+a.c*t+a.tx,a.b*e+a.d*t+a.ty,a.a*n+a.c*i+a.tx,a.b*n+a.d*i+a.ty,s),this}rect(e,t,n,i){return this._tick++,this._activePath.rect(e,t,n,i,this._transform.clone()),this}roundRect(e,t,n,i,s){return this._tick++,this._activePath.roundRect(e,t,n,i,s,this._transform.clone()),this}poly(e,t){return this._tick++,this._activePath.poly(e,t,this._transform.clone()),this}regularPoly(e,t,n,i,s=0,a){return this._tick++,this._activePath.regularPoly(e,t,n,i,s,a),this}roundPoly(e,t,n,i,s,a){return this._tick++,this._activePath.roundPoly(e,t,n,i,s,a),this}roundShape(e,t,n,i){return this._tick++,this._activePath.roundShape(e,t,n,i),this}filletRect(e,t,n,i,s){return this._tick++,this._activePath.filletRect(e,t,n,i,s),this}chamferRect(e,t,n,i,s,a){return this._tick++,this._activePath.chamferRect(e,t,n,i,s,a),this}star(e,t,n,i,s=0,a=0){return this._tick++,this._activePath.star(e,t,n,i,s,a,this._transform.clone()),this}svg(e){return this._tick++,VD(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,t=e){return this._transform.scale(e,t),this}setTransform(e,t,n,i,s,a){return e instanceof Oe?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,t,n,i,s,a),this)}transform(e,t,n,i,s,a){return e instanceof Oe?(this._transform.append(e),this):(V0.set(e,t,n,i,s,a),this._transform.append(V0),this)}translate(e,t=e){return this._transform.translate(e,t),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this._boundsDirty=!0,!this.dirty&&(this.emit("update",this,16),this.dirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;this._boundsDirty=!1;const e=this._bounds;e.clear();for(let t=0;t<this.instructions.length;t++){const n=this.instructions[t],i=n.action;if(i==="fill"){const s=n.data;e.addBounds(s.path.bounds)}else if(i==="texture"){const s=n.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(i==="stroke"){const s=n.data,a=s.style.alignment,o=s.style.width*(1-a),l=s.path.bounds;e.addFrame(l.minX-o,l.minY-o,l.maxX+o,l.maxY+o)}}return e}containsPoint(e){if(!this.bounds.containsPoint(e.x,e.y))return!1;const t=this.instructions;let n=!1;for(let i=0;i<t.length;i++){const s=t[i],a=s.data,o=a.path;if(!s.action||!o)continue;const l=a.style,u=o.shapePath.shapePrimitives;for(let c=0;c<u.length;c++){const f=u[c].shape;if(!l||!f)continue;const h=u[c].transform,d=h?h.applyInverse(e,KD):e;if(s.action==="fill")n=f.contains(d.x,d.y);else{const v=l;n=f.strokeContains(d.x,d.y,v.width,v.alignment)}const p=a.hole;if(p){const v=p.shapePath?.shapePrimitives;if(v)for(let m=0;m<v.length;m++)v[m].shape.contains(d.x,d.y)&&(n=!1)}if(n)return!0}}return n}unload(){this.emit("unload",this);for(const e in this._gpuData)this._gpuData[e]?.destroy();this._gpuData=Object.create(null)}destroy(e=!1){if(this.destroyed)return;if(this.destroyed=!0,this._stateStack.length=0,this._transform=null,this.unload(),this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._fillStyle.texture&&(this._fillStyle.fill&&"uid"in this._fillStyle.fill?this._fillStyle.fill.destroy():this._fillStyle.texture.destroy(n)),this._strokeStyle.texture&&(this._strokeStyle.fill&&"uid"in this._strokeStyle.fill?this._strokeStyle.fill.destroy():this._strokeStyle.texture.destroy(n))}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};pm.defaultFillStyle={color:16777215,alpha:1,texture:Re.WHITE,matrix:null,fill:null,textureSpace:"local"};pm.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:Re.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Kr=pm;const gm=class pa extends Vr{constructor(e={}){super(),this.uid=Tt("textStyle"),this._tick=0,ZD(e);const t={...pa.defaultTextStyle,...e};for(const n in t){const i=n;this[i]=t[n]}this.update(),this._tick=0}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.update())}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.update())}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...pa.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...pa.defaultDropShadow}):null,this.update())}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.update())}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update())}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e.toLowerCase(),this.update())}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.update())}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.update())}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.update())}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.update())}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.update())}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.update())}get filters(){return this._filters}set filters(e){this._filters!==e&&(this._filters=Object.freeze(e),this.update())}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.update())}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.update())}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.update())}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.update())}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.update())}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Kr.defaultFillStyle,...e},()=>{this._fill=Ss({...this._originalFill},Kr.defaultFillStyle)})),this._fill=Ss(e===0?"black":e,Kr.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Kr.defaultStrokeStyle,...e},()=>{this._stroke=Xc({...this._originalStroke},Kr.defaultStrokeStyle)})),this._stroke=Xc(e,Kr.defaultStrokeStyle),this.update())}update(){this._tick++,this.emit("update",this)}reset(){const e=pa.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return`${this.uid}-${this._tick}`}clone(){return new pa({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let t=0;t<this._filters.length;t++)e+=this._filters[t].padding;return Math.max(this._padding,e)}destroy(e=!1){if(this.removeAllListeners(),typeof e=="boolean"?e:e?.texture){const n=typeof e=="boolean"?e:e?.textureSource;this._fill?.texture&&this._fill.texture.destroy(n),this._originalFill?.texture&&this._originalFill.texture.destroy(n),this._stroke?.texture&&this._stroke.texture.destroy(n),this._originalStroke?.texture&&this._originalStroke.texture.destroy(n)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,t){return new Proxy(e,{set:(n,i,s)=>(n[i]===s||(n[i]=s,t?.(i,s),this.update()),!0)})}_isFillStyle(e){return(e??null)!==null&&!(ht.isColorLike(e)||e instanceof Ri||e instanceof yf)}};gm.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};gm.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let ts=gm;function ZD(r){const e=r;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const t=ts.defaultDropShadow;r.dropShadow={alpha:e.dropShadowAlpha??t.alpha,angle:e.dropShadowAngle??t.angle,blur:e.dropShadowBlur??t.blur,color:e.dropShadowColor??t.color,distance:e.dropShadowDistance??t.distance}}if(e.strokeThickness!==void 0){Fe(lt,"strokeThickness is now a part of stroke");const t=e.stroke;let n={};if(ht.isColorLike(t))n.color=t;else if(t instanceof Ri||t instanceof yf)n.fill=t;else if(Object.hasOwnProperty.call(t,"color")||Object.hasOwnProperty.call(t,"fill"))n=t;else throw new Error("Invalid stroke value.");r.stroke={...n,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){if(Fe(lt,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(e.fill)||e.fill.length===0)throw new Error("Invalid fill value. Expected an array of colors for gradient fill.");e.fill.length!==e.fillGradientStops.length&&Ne("The number of fill colors must match the number of fill gradient stops.");const t=new Ri({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),n=e.fillGradientStops.slice(),i=e.fill.map(s=>ht.shared.setValue(s).toNumber());n.forEach((s,a)=>{t.addColorStop(s,i[a])}),r.fill={fill:t}}}class JD{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,t){const n=Ye.get().createCanvas();n.width=e,n.height=t;const i=n.getContext("2d");return{canvas:n,context:i}}getOptimalCanvasAndContext(e,t,n=1){e=Math.ceil(e*n-1e-6),t=Math.ceil(t*n-1e-6),e=Ka(e),t=Ka(t);const i=(e<<17)+(t<<1);this._canvasPool[i]||(this._canvasPool[i]=[]);let s=this._canvasPool[i].pop();return s||(s=this._createCanvasAndContext(e,t)),s}returnCanvasAndContext(e){const t=e.canvas,{width:n,height:i}=t,s=(n<<17)+(i<<1);e.context.resetTransform(),e.context.clearRect(0,0,n,i),this._canvasPool[s].push(e)}clear(){this._canvasPool={}}}const ki=new JD;Ro.register(ki);const W0=1e5;function Yc(r,e,t,n=0){if(r.texture===Re.WHITE&&!r.fill)return ht.shared.setValue(r.color).setAlpha(r.alpha??1).toHexa();if(r.fill){if(r.fill instanceof yf){const i=r.fill,s=e.createPattern(i.texture.source.resource,"repeat"),a=i.transform.copyTo(Oe.shared);return a.scale(i.texture.frame.width,i.texture.frame.height),s.setTransform(a),s}else if(r.fill instanceof Ri){const i=r.fill,s=i.type==="linear",a=i.textureSpace==="local";let o=1,l=1;a&&t&&(o=t.width+n,l=t.height+n);let u,c=!1;if(s){const{start:f,end:h}=i;u=e.createLinearGradient(f.x*o,f.y*l,h.x*o,h.y*l),c=Math.abs(h.x-f.x)<Math.abs((h.y-f.y)*.1)}else{const{center:f,innerRadius:h,outerCenter:d,outerRadius:p}=i;u=e.createRadialGradient(f.x*o,f.y*l,h*o,d.x*o,d.y*l,p*o)}if(c&&a&&t){const f=t.lineHeight/l;for(let h=0;h<t.lines.length;h++){const d=(h*t.lineHeight+n/2)/l;i.colorStops.forEach(p=>{const v=d+p.offset*f;u.addColorStop(Math.floor(v*W0)/W0,ht.shared.setValue(p.color).toHex())})}}else i.colorStops.forEach(f=>{u.addColorStop(f.offset,ht.shared.setValue(f.color).toHex())});return u}}else{const i=e.createPattern(r.texture.source.resource,"repeat"),s=r.matrix.copyTo(Oe.shared);return s.scale(r.texture.frame.width,r.texture.frame.height),i.setTransform(s),i}return Ne("FillStyle not recognised",r),"red"}const ES=class AS extends oS{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const t={...AS.defaultOptions,...e};this._textureSize=t.textureSize,this._mipmap=t.mipmap;const n=t.style.clone();t.overrideFill&&(n._fill.color=16777215,n._fill.alpha=1,n._fill.texture=Re.WHITE,n._fill.fill=null),this.applyFillAsTint=t.overrideFill;const i=n.fontSize;n.fontSize=this.baseMeasurementFontSize;const s=Wc(n);t.overrideSize?n._stroke&&(n._stroke.width*=this.baseRenderedFontSize/i):n.fontSize=this.baseRenderedFontSize=i,this._style=n,this._skipKerning=t.skipKerning??!1,this.resolution=t.resolution??1,this._padding=t.padding??4,t.textureStyle&&(this._textureStyle=t.textureStyle instanceof fn?t.textureStyle:new fn(t.textureStyle)),this.fontMetrics=lr.measureFont(s),this.lineHeight=n.lineHeight||this.fontMetrics.fontSize||n.fontSize}ensureCharacters(e){const t=lr.graphemeSegmenter(e).filter(m=>!this._currentChars.includes(m)).filter((m,g,_)=>_.indexOf(m)===g);if(!t.length)return;this._currentChars=[...this._currentChars,...t];let n;this._currentPageIndex===-1?n=this._nextPage():n=this.pages[this._currentPageIndex];let{canvas:i,context:s}=n.canvasAndContext,a=n.texture.source;const o=this._style;let l=this._currentX,u=this._currentY,c=this._currentMaxCharHeight;const f=this.baseRenderedFontSize/this.baseMeasurementFontSize,h=this._padding*f;let d=!1;const p=i.width/this.resolution,v=i.height/this.resolution;for(let m=0;m<t.length;m++){const g=t[m],_=lr.measureText(g,o,i,!1);_.lineHeight=_.height;const b=_.width*f,w=Math.ceil((o.fontStyle==="italic"?2:1)*b),S=_.height*f,T=w+h*2,E=S+h*2;if(d=!1,g!==`
`&&g!=="\r"&&g!=="	"&&g!==" "&&(d=!0,c=Math.ceil(Math.max(E,c))),l+T>p&&(u+=c,c=E,l=0,u+c>v)){a.update();const P=this._nextPage();i=P.canvasAndContext.canvas,s=P.canvasAndContext.context,a=P.texture.source,l=0,u=0,c=0}const O=b/f-(o.dropShadow?.distance??0)-(o._stroke?.width??0);if(this.chars[g]={id:g.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:O,kerning:{}},d){this._drawGlyph(s,_,l+h,u+h,f,o);const P=a.width*f,V=a.height*f,W=new ft(l/P*a.width,u/V*a.height,T/P*a.width,E/V*a.height);this.chars[g].texture=new Re({source:a,frame:W}),l+=Math.ceil(T)}}a.update(),this._currentX=l,this._currentY=u,this._currentMaxCharHeight=c,this._skipKerning&&this._applyKerning(t,s)}get pageTextures(){return Fe(lt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,t){const n=this._measureCache;for(let i=0;i<e.length;i++){const s=e[i];for(let a=0;a<this._currentChars.length;a++){const o=this._currentChars[a];let l=n[s];l||(l=n[s]=t.measureText(s).width);let u=n[o];u||(u=n[o]=t.measureText(o).width);let c=t.measureText(s+o).width,f=c-(l+u);f&&(this.chars[s].kerning[o]=f),c=t.measureText(s+o).width,f=c-(l+u),f&&(this.chars[o].kerning[s]=f)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,t=ki.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(t.context,this._style,e);const n=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),i=new Re({source:new zs({resource:t.canvas,resolution:n,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(i.source.style=this._textureStyle);const s={canvasAndContext:t,texture:i};return this.pages[this._currentPageIndex]=s,s}_setupContext(e,t,n){t.fontSize=this.baseRenderedFontSize,e.scale(n,n),e.font=Wc(t),t.fontSize=this.baseMeasurementFontSize,e.textBaseline=t.textBaseline;const i=t._stroke,s=i?.width??0;if(i&&(e.lineWidth=s,e.lineJoin=i.join,e.miterLimit=i.miterLimit,e.strokeStyle=Yc(i,e)),t._fill&&(e.fillStyle=Yc(t._fill,e)),t.dropShadow){const a=t.dropShadow,o=ht.shared.setValue(a.color).toArray(),l=a.blur*n,u=a.distance*n;e.shadowColor=`rgba(${o[0]*255},${o[1]*255},${o[2]*255},${a.alpha})`,e.shadowBlur=l,e.shadowOffsetX=Math.cos(a.angle)*u,e.shadowOffsetY=Math.sin(a.angle)*u}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,t,n,i,s,a){const o=t.text,l=t.fontProperties,c=(a._stroke?.width??0)*s,f=n+c/2,h=i-c/2,d=l.descent*s,p=t.lineHeight*s;let v=!1;a.stroke&&c&&(v=!0,e.strokeText(o,f,h+p-d));const{shadowBlur:m,shadowOffsetX:g,shadowOffsetY:_}=e;a._fill&&(v&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(o,f,h+p-d)),v&&(e.shadowBlur=m,e.shadowOffsetX=g,e.shadowOffsetY=_)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:t,texture:n}=this.pages[e];ki.returnCanvasAndContext(t),n.destroy(!0)}this.pages=null}};ES.defaultOptions={textureSize:512,style:new ts,mipmap:!0};let q0=ES;function CS(r,e,t,n){const i={width:0,height:0,offsetY:0,scale:e.fontSize/t.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};i.offsetY=t.baseLineOffset;let s=i.lines[0],a=null,o=!0;const l={width:0,start:0,index:0,positions:[],chars:[]},u=t.baseMeasurementFontSize/e.fontSize,c=e.letterSpacing*u,f=e.wordWrapWidth*u,h=e.lineHeight?e.lineHeight*u:t.lineHeight,d=e.wordWrap&&e.breakWords,p=g=>{const _=s.width;for(let b=0;b<l.index;b++){const w=g.positions[b];s.chars.push(g.chars[b]),s.charPositions.push(w+_)}s.width+=g.width,o=!1,l.width=0,l.index=0,l.chars.length=0},v=()=>{let g=s.chars.length-1;if(n){let _=s.chars[g];for(;_===" ";)s.width-=t.chars[_].xAdvance,_=s.chars[--g]}i.width=Math.max(i.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},o=!0,i.lines.push(s),i.height+=h},m=g=>g-c>f;for(let g=0;g<r.length+1;g++){let _;const b=g===r.length;b||(_=r[g]);const w=t.chars[_]||t.chars[" "];if(/(?:\s)/.test(_)||_==="\r"||_===`
`||b){if(!o&&e.wordWrap&&m(s.width+l.width)?(v(),p(l),b||s.charPositions.push(0)):(l.start=s.width,p(l),b||s.charPositions.push(0)),_==="\r"||_===`
`)v();else if(!b){const O=w.xAdvance+(w.kerning[a]||0)+c;s.width+=O,s.spaceWidth=O,s.spacesIndex.push(s.charPositions.length),s.chars.push(_)}}else{const E=w.kerning[a]||0,O=w.xAdvance+E+c;d&&m(s.width+l.width+O)&&(p(l),v()),l.positions[l.index++]=l.width+E,l.chars.push(_),l.width+=O}a=_}return v(),e.align==="center"?QD(i):e.align==="right"?eL(i):e.align==="justify"&&tL(i),i}function QD(r){for(let e=0;e<r.lines.length;e++){const t=r.lines[e],n=r.width/2-t.width/2;for(let i=0;i<t.charPositions.length;i++)t.charPositions[i]+=n}}function eL(r){for(let e=0;e<r.lines.length;e++){const t=r.lines[e],n=r.width-t.width;for(let i=0;i<t.charPositions.length;i++)t.charPositions[i]+=n}}function tL(r){const e=r.width;for(let t=0;t<r.lines.length;t++){const n=r.lines[t];let i=0,s=n.spacesIndex[i++],a=0;const o=n.spacesIndex.length,u=(e-n.width)/o;for(let c=0;c<n.charPositions.length;c++)c===s&&(s=n.spacesIndex[i++],a+=u),n.charPositions[c]+=a}}function rL(r){if(r==="")return[];typeof r=="string"&&(r=[r]);const e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);if(i[0].length===0||i[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const s=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<s)throw new Error("[BitmapFont]: Invalid character range.");for(let o=s,l=a;o<=l;o++)e.push(String.fromCharCode(o))}else e.push(...Array.from(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let Gu=0;class nL{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null},this.measureCache=lS(1e3)}getFont(e,t){let n=`${t.fontFamily}-bitmap`,i=!0;if(t._fill.fill&&!t._stroke?(n+=t._fill.fill.styleKey,i=!1):(t._stroke||t.dropShadow)&&(n=`${t.styleKey}-bitmap`,i=!1),!yt.has(n)){const a=Object.create(t);a.lineHeight=0;const o=new q0({style:a,overrideFill:i,overrideSize:!0,...this.defaultOptions});Gu++,Gu>50&&Ne("BitmapText",`You have dynamically created ${Gu} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),o.once("destroy",()=>{Gu--,yt.remove(n)}),yt.set(n,o)}const s=yt.get(n);return s.ensureCharacters?.(e),s}getLayout(e,t,n=!0){const i=this.getFont(e,t),s=`${e}-${t.styleKey}-${n}`;if(this.measureCache.has(s))return this.measureCache.get(s);const a=lr.graphemeSegmenter(e),o=CS(a,t,i,n);return this.measureCache.set(s,o),o}measureText(e,t,n=!0){return this.getLayout(e,t,n)}install(...e){let t=e[0];typeof t=="string"&&(t={name:t,style:e[1],chars:e[2]?.chars,resolution:e[2]?.resolution,padding:e[2]?.padding,skipKerning:e[2]?.skipKerning},Fe(lt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const n=t?.name;if(!n)throw new Error("[BitmapFontManager] Property `name` is required.");t={...this.defaultOptions,...t};const i=t.style,s=i instanceof ts?i:new ts(i),a=t.dynamicFill??this._canUseTintForStyle(s),o=new q0({style:s,overrideFill:a,skipKerning:t.skipKerning,padding:t.padding,resolution:t.resolution,overrideSize:!1,textureStyle:t.textureStyle}),l=rL(t.chars);return o.ensureCharacters(l.join("")),yt.set(`${n}-bitmap`,o),o.once("destroy",()=>yt.remove(`${n}-bitmap`)),o}uninstall(e){const t=`${e}-bitmap`,n=yt.get(t);n&&n.destroy()}_canUseTintForStyle(e){return!e._stroke&&(!e.dropShadow||e.dropShadow.color===0)&&!e._fill.fill&&e._fill.color===16777215}}const Gp=new nL;class PS extends oS{constructor(e,t){super();const{textures:n,data:i}=e;Object.keys(i.pages).forEach(s=>{const a=i.pages[parseInt(s,10)],o=n[a.id];this.pages.push({texture:o})}),Object.keys(i.chars).forEach(s=>{const a=i.chars[s],{frame:o,source:l,rotate:u}=n[a.page],c=_t.transformRectCoords(a,o,u,new ft),f=new Re({frame:c,orig:new ft(0,0,a.width,a.height),source:l,rotate:u});this.chars[s]={id:s.codePointAt(0),xOffset:a.xOffset,yOffset:a.yOffset,xAdvance:a.xAdvance,kerning:a.kerning??{},texture:f}}),this.baseRenderedFontSize=i.fontSize,this.baseMeasurementFontSize=i.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:i.fontSize},this.baseLineOffset=i.baseLineOffset,this.lineHeight=i.lineHeight,this.fontFamily=i.fontFamily,this.distanceField=i.distanceField??{type:"none",range:0},this.url=t}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:t}=this.pages[e];t.destroy(!0)}this.pages=null}static install(e){Gp.install(e)}static uninstall(e){Gp.uninstall(e)}}const bd={test(r){return typeof r=="string"&&r.startsWith("info face=")},parse(r){const e=r.match(/^[a-z]+\s+.+$/gm),t={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const f in e){const h=e[f].match(/^[a-z]+/gm)[0],d=e[f].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),p={};for(const v in d){const m=d[v].split("="),g=m[0],_=m[1].replace(/"/gm,""),b=parseFloat(_),w=isNaN(b)?_:b;p[g]=w}t[h].push(p)}const n={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[i]=t.info,[s]=t.common,[a]=t.distanceField??[];a&&(n.distanceField={range:parseInt(a.distanceRange,10),type:a.fieldType}),n.fontSize=parseInt(i.size,10),n.fontFamily=i.face,n.lineHeight=parseInt(s.lineHeight,10);const o=t.page;for(let f=0;f<o.length;f++)n.pages.push({id:parseInt(o[f].id,10)||0,file:o[f].file});const l={};n.baseLineOffset=n.lineHeight-parseInt(s.base,10);const u=t.char;for(let f=0;f<u.length;f++){const h=u[f],d=parseInt(h.id,10);let p=h.letter??h.char??String.fromCharCode(d);p==="space"&&(p=" "),l[d]=p,n.chars[p]={id:d,page:parseInt(h.page,10)||0,x:parseInt(h.x,10),y:parseInt(h.y,10),width:parseInt(h.width,10),height:parseInt(h.height,10),xOffset:parseInt(h.xoffset,10),yOffset:parseInt(h.yoffset,10),xAdvance:parseInt(h.xadvance,10),kerning:{}}}const c=t.kerning||[];for(let f=0;f<c.length;f++){const h=parseInt(c[f].first,10),d=parseInt(c[f].second,10),p=parseInt(c[f].amount,10);n.chars[l[d]].kerning[l[h]]=p}return n}},X0={test(r){const e=r;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(r){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},t=r.getElementsByTagName("info")[0],n=r.getElementsByTagName("common")[0],i=r.getElementsByTagName("distanceField")[0];i&&(e.distanceField={type:i.getAttribute("fieldType"),range:parseInt(i.getAttribute("distanceRange"),10)});const s=r.getElementsByTagName("page"),a=r.getElementsByTagName("char"),o=r.getElementsByTagName("kerning");e.fontSize=parseInt(t.getAttribute("size"),10),e.fontFamily=t.getAttribute("face"),e.lineHeight=parseInt(n.getAttribute("lineHeight"),10);for(let u=0;u<s.length;u++)e.pages.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});const l={};e.baseLineOffset=e.lineHeight-parseInt(n.getAttribute("base"),10);for(let u=0;u<a.length;u++){const c=a[u],f=parseInt(c.getAttribute("id"),10);let h=c.getAttribute("letter")??c.getAttribute("char")??String.fromCharCode(f);h==="space"&&(h=" "),l[f]=h,e.chars[h]={id:f,page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xOffset:parseInt(c.getAttribute("xoffset"),10),yOffset:parseInt(c.getAttribute("yoffset"),10),xAdvance:parseInt(c.getAttribute("xadvance"),10),kerning:{}}}for(let u=0;u<o.length;u++){const c=parseInt(o[u].getAttribute("first"),10),f=parseInt(o[u].getAttribute("second"),10),h=parseInt(o[u].getAttribute("amount"),10);e.chars[l[f]].kerning[l[c]]=h}return e}},Y0={test(r){return typeof r=="string"&&r.match(/<font(\s|>)/)?X0.test(Ye.get().parseXML(r)):!1},parse(r){return X0.parse(Ye.get().parseXML(r))}},iL=[".xml",".fnt"],sL={extension:{type:re.CacheParser,name:"cacheBitmapFont"},test:r=>r instanceof PS,getCacheableAssets(r,e){const t={};return r.forEach(n=>{t[n]=e,t[`${n}-bitmap`]=e}),t[`${e.fontFamily}-bitmap`]=e,t}},aL={extension:{type:re.LoadParser,priority:os.Normal},name:"loadBitmapFont",id:"bitmap-font",test(r){return iL.includes(Nr.extname(r).toLowerCase())},async testParse(r){return bd.test(r)||Y0.test(r)},async parse(r,e,t){const n=bd.test(r)?bd.parse(r):Y0.parse(r),{src:i}=e,{pages:s}=n,a=[],o=n.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let f=0;f<s.length;++f){const h=s[f].file;let d=Nr.join(Nr.dirname(i),h);d=Cp(d,i),a.push({src:d,data:o})}const l=await t.load(a),u=a.map(f=>l[f.src]);return new PS({data:n,textures:u},i)},async load(r,e){return await(await Ye.get().fetch(r)).text()},async unload(r,e,t){await Promise.all(r.pages.map(n=>t.unload(n.texture.source._sourceOrigin))),r.destroy()}};class oL{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const lL={extension:{type:re.CacheParser,name:"cacheTextureArray"},test:r=>Array.isArray(r)&&r.every(e=>e instanceof Re),getCacheableAssets:(r,e)=>{const t={};return r.forEach(n=>{e.forEach((i,s)=>{t[n+(s===0?"":s+1)]=i})}),t}};async function RS(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const uL={extension:{type:re.DetectionParser,priority:1},test:async()=>RS("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")},$0=["png","jpg","jpeg"],cL={extension:{type:re.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...$0],remove:async r=>r.filter(e=>!$0.includes(e))},fL="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function wf(r){return fL?!1:document.createElement("video").canPlayType(r)!==""}const hL={extension:{type:re.DetectionParser,priority:0},test:async()=>wf("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")},dL={extension:{type:re.DetectionParser,priority:0},test:async()=>wf("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")},pL={extension:{type:re.DetectionParser,priority:0},test:async()=>wf("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")},gL={extension:{type:re.DetectionParser,priority:0},test:async()=>RS("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")},kS=class fc{constructor(){this.loadOptions={...fc.defaultOptions},this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const n={promise:null,parser:null};return n.promise=(async()=>{let i=null,s=null;if((t.parser||t.loadParser)&&(s=this._parserHash[t.parser||t.loadParser],t.loadParser&&Ne(`[Assets] "loadParser" is deprecated, use "parser" instead for ${e}`),s||Ne(`[Assets] specified load parser "${t.parser||t.loadParser}" not found while loading ${e}`)),!s){for(let a=0;a<this.parsers.length;a++){const o=this.parsers[a];if(o.load&&o.test?.(e,t,this)){s=o;break}}if(!s)return Ne(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,t,this),n.parser=s;for(let a=0;a<this.parsers.length;a++){const o=this.parsers[a];o.parse&&o.parse&&await o.testParse?.(i,t,this)&&(i=await o.parse(i,t,this)||i,n.parser=o)}return i})(),n}async load(e,t){this._parsersValidated||this._validateParsers();const n=typeof t=="function"?{...fc.defaultOptions,...this.loadOptions,onProgress:t}:{...fc.defaultOptions,...this.loadOptions,...t||{}},{onProgress:i,onError:s,strategy:a,retryCount:o,retryDelay:l}=n;let u=0;const c={},f=Hc(e),h=bn(e,v=>({alias:[v],src:v,data:{}})),d=h.reduce((v,m)=>v+(m.progressSize||1),0),p=h.map(async v=>{const m=Nr.toAbsolute(v.src);c[v.src]||(await this._loadAssetWithRetry(m,v,{onProgress:i,onError:s,strategy:a,retryCount:o,retryDelay:l},c),u+=v.progressSize||1,i&&i(u/d))});return await Promise.all(p),f?c[h[0].src]:c}async unload(e){const n=bn(e,i=>({alias:[i],src:i})).map(async i=>{const s=Nr.toAbsolute(i.src),a=this.promiseCache[s];if(a){const o=await a.promise;delete this.promiseCache[s],await a.parser?.unload?.(o,i,this)}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name||e.id).reduce((e,t)=>(!t.name&&!t.id?Ne("[Assets] parser should have an id"):(e[t.name]||e[t.id])&&Ne(`[Assets] parser id conflict "${t.id}"`),e[t.name]=t,t.id&&(e[t.id]=t),e),{})}async _loadAssetWithRetry(e,t,n,i){let s=0;const{onError:a,strategy:o,retryCount:l,retryDelay:u}=n,c=f=>new Promise(h=>setTimeout(h,f));for(;;)try{this.promiseCache[e]||(this.promiseCache[e]=this._getLoadPromiseAndParser(e,t)),i[t.src]=await this.promiseCache[e].promise;return}catch(f){delete this.promiseCache[e],delete i[t.src],s++;const h=o!=="retry"||s>l;if(o==="retry"&&!h){a&&a(f,t),await c(u);continue}if(o==="skip"){a&&a(f,t);return}a&&a(f,t);const d=new Error(`[Loader.load] Failed to load ${e}.
${f}`);throw f instanceof Error&&f.stack&&(d.stack=f.stack),d}}};kS.defaultOptions={onProgress:void 0,onError:void 0,strategy:"throw",retryCount:3,retryDelay:250};let mL=kS;function Mo(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function Oo(r,e){const t=r.split("?")[0],n=Nr.extname(t).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const vL=".json",_L="application/json",bL={extension:{type:re.LoadParser,priority:os.Low},name:"loadJson",id:"json",test(r){return Mo(r,_L)||Oo(r,vL)},async load(r){return await(await Ye.get().fetch(r)).json()}},yL=".txt",xL="text/plain",wL={name:"loadTxt",id:"text",extension:{type:re.LoadParser,priority:os.Low,name:"loadTxt"},test(r){return Mo(r,xL)||Oo(r,yL)},async load(r){return await(await Ye.get().fetch(r)).text()}},SL=["normal","bold","100","200","300","400","500","600","700","800","900"],TL=[".ttf",".otf",".woff",".woff2"],EL=["font/ttf","font/otf","font/woff","font/woff2"],AL=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function CL(r){const e=Nr.extname(r),i=Nr.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let s=i.length>0;for(const o of i)if(!o.match(AL)){s=!1;break}let a=i.join(" ");return s||(a=`"${a.replace(/[\\"]/g,"\\$&")}"`),a}const PL=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function RL(r){return PL.test(r)?r:encodeURI(r)}const kL={extension:{type:re.LoadParser,priority:os.Low},name:"loadWebFont",id:"web-font",test(r){return Mo(r,EL)||Oo(r,TL)},async load(r,e){const t=Ye.get().getFontFaceSet();if(t){const n=[],i=e.data?.family??CL(r),s=e.data?.weights?.filter(o=>SL.includes(o))??["normal"],a=e.data??{};for(let o=0;o<s.length;o++){const l=s[o],u=new FontFace(i,`url(${RL(r)})`,{...a,weight:l});await u.load(),t.add(u),n.push(u)}return yt.has(`${i}-and-url`)?yt.get(`${i}-and-url`).entries.push({url:r,faces:n}):yt.set(`${i}-and-url`,{entries:[{url:r,faces:n}]}),n.length===1?n[0]:n}return Ne("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){const e=Array.isArray(r)?r:[r],t=e[0].family,n=yt.get(`${t}-and-url`),i=n.entries.find(s=>s.faces.some(a=>e.indexOf(a)!==-1));i.faces=i.faces.filter(s=>e.indexOf(s)===-1),i.faces.length===0&&(n.entries=n.entries.filter(s=>s!==i)),e.forEach(s=>{Ye.get().getFontFaceSet().delete(s)}),n.entries.length===0&&yt.remove(`${t}-and-url`)}};function mm(r,e=1){const t=ko.RETINA_PREFIX?.exec(r);return t?parseFloat(t[1]):e}function vm(r,e,t){r.label=t,r._sourceOrigin=t;const n=new Re({source:r,label:t}),i=()=>{delete e.promiseCache[t],yt.has(t)&&yt.remove(t)};return n.source.once("destroy",()=>{e.promiseCache[t]&&(Ne("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),i())}),n.once("destroy",()=>{r.destroyed||(Ne("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const ML=".svg",OL="image/svg+xml",IL={extension:{type:re.LoadParser,priority:os.Low,name:"loadSVG"},name:"loadSVG",id:"svg",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(r){return Mo(r,OL)||Oo(r,ML)},async load(r,e,t){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?FL(r):BL(r,e,t,this.config.crossOrigin)},unload(r){r.destroy(!0)}};async function BL(r,e,t,n){const i=await Ye.get().fetch(r),s=Ye.get().createImage();s.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(await i.text())}`,s.crossOrigin=n,await s.decode();const a=e.data?.width??s.width,o=e.data?.height??s.height,l=e.data?.resolution||mm(r),u=Math.ceil(a*l),c=Math.ceil(o*l),f=Ye.get().createCanvas(u,c),h=f.getContext("2d");h.imageSmoothingEnabled=!0,h.imageSmoothingQuality="high",h.drawImage(s,0,0,a*l,o*l);const{parseAsGraphicsContext:d,...p}=e.data??{},v=new zs({resource:f,alphaMode:"premultiply-alpha-on-upload",resolution:l,...p});return vm(v,t,r)}async function FL(r){const t=await(await Ye.get().fetch(r)).text(),n=new Kr;return n.svg(t),n}const DL=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Ma=null,zp=class{constructor(){Ma||(Ma=URL.createObjectURL(new Blob([DL],{type:"application/javascript"}))),this.worker=new Worker(Ma)}};zp.revokeObjectURL=function(){Ma&&(URL.revokeObjectURL(Ma),Ma=null)};const LL=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Oa=null;class MS{constructor(){Oa||(Oa=URL.createObjectURL(new Blob([LL],{type:"application/javascript"}))),this.worker=new Worker(Oa)}}MS.revokeObjectURL=function(){Oa&&(URL.revokeObjectURL(Oa),Oa=null)};let K0=0,yd;class UL{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new zp;t.addEventListener("message",n=>{t.terminate(),zp.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,t){return this._run("loadImageBitmap",[e,t?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){yd===void 0&&(yd=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<yd&&(this._createdWorkers++,e=new MS().worker,e.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){this._resolveHash[e.uuid]&&(e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),delete this._resolveHash[e.uuid])}async _run(e,t){await this._initWorkers();const n=new Promise((i,s)=>{this._queue.push({id:e,arguments:t,resolve:i,reject:s})});return this._next(),n}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const t=this._queue.pop(),n=t.id;this._resolveHash[K0]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:K0++,id:n})}reset(){this._workerPool.forEach(e=>e.terminate()),this._workerPool.length=0,Object.values(this._resolveHash).forEach(({reject:e})=>{e?.(new Error("WorkerManager has been reset before completion"))}),this._resolveHash={},this._queue.length=0,this._initialized=!1,this._createdWorkers=0}}const Z0=new UL,NL=[".jpeg",".jpg",".png",".webp",".avif"],GL=["image/jpeg","image/png","image/webp","image/avif"];async function zL(r,e){const t=await Ye.get().fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const n=await t.blob();return e?.data?.alphaMode==="premultiplied-alpha"?createImageBitmap(n,{premultiplyAlpha:"none"}):createImageBitmap(n)}const OS={name:"loadTextures",id:"texture",extension:{type:re.LoadParser,priority:os.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return Mo(r,GL)||Oo(r,NL)},async load(r,e,t){let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Z0.isImageBitmapSupported()?n=await Z0.loadImageBitmap(r,e):n=await zL(r,e):n=await new Promise((s,a)=>{n=Ye.get().createImage(),n.crossOrigin=this.config.crossOrigin,n.src=r,n.complete?s(n):(n.onload=()=>{s(n)},n.onerror=a)});const i=new zs({resource:n,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||mm(r),...e.data});return vm(i,t,r)},unload(r){r.destroy(!0)}},jL=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"];let xd,wd;function HL(r,e,t){t===void 0&&!e.startsWith("data:")?r.crossOrigin=WL(e):t!==!1&&(r.crossOrigin=typeof t=="string"?t:"anonymous")}function VL(r){return new Promise((e,t)=>{r.addEventListener("canplaythrough",n),r.addEventListener("error",i),r.load();function n(){s(),e()}function i(a){s(),t(a)}function s(){r.removeEventListener("canplaythrough",n),r.removeEventListener("error",i)}})}function WL(r,e=globalThis.location){if(r.startsWith("data:"))return"";e||(e=globalThis.location);const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function qL(){const r=[],e=[];for(const t of jL){const n=fl.MIME_TYPES[t.substring(1)]||`video/${t.substring(1)}`;wf(n)&&(r.push(t),e.includes(n)||e.push(n))}return{validVideoExtensions:r,validVideoMime:e}}const XL={name:"loadVideo",id:"video",extension:{type:re.LoadParser,name:"loadVideo"},test(r){if(!xd||!wd){const{validVideoExtensions:n,validVideoMime:i}=qL();xd=n,wd=i}const e=Mo(r,wd),t=Oo(r,xd);return e||t},async load(r,e,t){const n={...fl.defaultOptions,resolution:e.data?.resolution||mm(r),alphaMode:e.data?.alphaMode||await O2(),...e.data},i=document.createElement("video"),s={preload:n.autoLoad!==!1?"auto":void 0,"webkit-playsinline":n.playsinline!==!1?"":void 0,playsinline:n.playsinline!==!1?"":void 0,muted:n.muted===!0?"":void 0,loop:n.loop===!0?"":void 0,autoplay:n.autoPlay!==!1?"":void 0};Object.keys(s).forEach(l=>{const u=s[l];u!==void 0&&i.setAttribute(l,u)}),n.muted===!0&&(i.muted=!0),HL(i,r,n.crossorigin);const a=document.createElement("source");let o;if(n.mime)o=n.mime;else if(r.startsWith("data:"))o=r.slice(5,r.indexOf(";"));else if(!r.startsWith("blob:")){const l=r.split("?")[0].slice(r.lastIndexOf(".")+1).toLowerCase();o=fl.MIME_TYPES[l]||`video/${l}`}return a.src=r,o&&(a.type=o),new Promise(l=>{const u=async()=>{const c=new fl({...n,resource:i});i.removeEventListener("canplay",u),e.data.preload&&await VL(i),l(vm(c,t,r))};n.preload&&!n.autoPlay&&i.load(),i.addEventListener("canplay",u),i.appendChild(a)})},unload(r){r.destroy(!0)}},IS={extension:{type:re.ResolveParser,name:"resolveTexture"},test:OS.test,parse:r=>({resolution:parseFloat(ko.RETINA_PREFIX.exec(r)?.[1]??"1"),format:r.split(".").pop(),src:r})},YL={extension:{type:re.ResolveParser,priority:-2,name:"resolveJson"},test:r=>ko.RETINA_PREFIX.test(r)&&r.endsWith(".json"),parse:IS.parse};class $L{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ko,this.loader=new mL,this.cache=yt,this._backgroundLoader=new oL(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized){Ne("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let s=e.manifest;typeof s=="string"&&(s=await this.load(s)),this.resolver.addManifest(s)}const t=e.texturePreference?.resolution??1,n=typeof t=="number"?[t]:t,i=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences),e.loadOptions&&(this.loader.loadOptions={...this.loader.loadOptions,...e.loadOptions})}add(e){this.resolver.add(e)}async load(e,t){this._initialized||await this.init();const n=Hc(e),i=bn(e).map(o=>{if(typeof o!="string"){const l=this.resolver.getAlias(o);return l.some(u=>!this.resolver.hasKey(u))&&this.add(o),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o}),s=this.resolver.resolve(i),a=await this._mapLoadToResolve(s,t);return n?a[i[0]]:a}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},a=Object.keys(i);let o=0;const l=[],u=()=>{t?.(l.reduce((f,h)=>f+h,0)/o)},c=a.map((f,h)=>{const d=i[f],p=Object.values(d),m=[...new Set(p.flat())].reduce((g,_)=>g+(_.progressSize||1),0);return l.push(0),o+=m,this._mapLoadToResolve(d,g=>{l[h]=g*m,u()}).then(g=>{s[f]=g})});return await Promise.all(c),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return yt.get(e);const t={};for(let n=0;n<e.length;n++)t[n]=yt.get(e[n]);return t}async _mapLoadToResolve(e,t){const n=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const i=await this.loader.load(n,t);this._backgroundLoader.active=!0;const s={};return n.forEach(a=>{const o=i[a.src],l=[a.src];a.alias&&l.push(...a.alias),l.forEach(u=>{s[u]=o}),yt.set(l,o)}),s}async unload(e){this._initialized||await this.init();const t=bn(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=bn(e);const t=this.resolver.resolveBundle(e),n=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));await Promise.all(n)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(n=>{yt.remove(n.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter((n,i)=>t.indexOf(n)===i),t}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(n=>n in e).forEach(n=>{t.config[n]=e[n]})})}}const rl=new $L;ze.handleByList(re.LoadParser,rl.loader.parsers).handleByList(re.ResolveParser,rl.resolver.parsers).handleByList(re.CacheParser,rl.cache.parsers).handleByList(re.DetectionParser,rl.detections);ze.add(lL,cL,uL,gL,hL,dL,pL,bL,wL,kL,IL,OS,XL,aL,sL,IS,YL);const J0={loader:re.LoadParser,resolver:re.ResolveParser,cache:re.CacheParser,detection:re.DetectionParser};ze.handle(re.Asset,r=>{const e=r.ref;Object.entries(J0).filter(([t])=>!!e[t]).forEach(([t,n])=>ze.add(Object.assign(e[t],{extension:e[t].extension??n})))},r=>{const e=r.ref;Object.keys(J0).filter(t=>!!e[t]).forEach(t=>ze.remove(e[t]))});class BS{constructor(e){this._attachedDomElements=[],this._renderer=e,this._renderer.runners.postrender.add(this),this._renderer.runners.init.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}init(){this._canvasObserver=new U2({domElement:this._domElement,renderer:this._renderer})}addRenderable(e,t){this._attachedDomElements.includes(e)||this._attachedDomElements.push(e)}updateRenderable(e){}validateRenderable(e){return!0}postrender(){const e=this._attachedDomElements;if(e.length===0){this._domElement.remove();return}this._canvasObserver.ensureAttached();for(let t=0;t<e.length;t++){const n=e[t],i=n.element;if(!n.parent||n.globalDisplayStatus<7)i?.remove(),e.splice(t,1),t--;else{this._domElement.contains(i)||(i.style.position="absolute",i.style.pointerEvents="auto",this._domElement.appendChild(i));const s=n.worldTransform,a=n._anchor,o=n.width*a.x,l=n.height*a.y;i.style.transformOrigin=`${o}px ${l}px`,i.style.transform=`matrix(${s.a}, ${s.b}, ${s.c}, ${s.d}, ${s.tx-o}, ${s.ty-l})`,i.style.opacity=n.groupAlpha.toString()}}}destroy(){this._renderer.runners.postrender.remove(this);for(let e=0;e<this._attachedDomElements.length;e++)this._attachedDomElements[e].element?.remove();this._attachedDomElements.length=0,this._domElement.remove(),this._canvasObserver.destroy(),this._renderer=null}}BS.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"dom"};class KL{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this._tickerAdded||!this.domElement||(en.system.add(this._tickerUpdate,this,Ja.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(en.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events._rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY,pointerType:e.pointerType,pointerId:e.pointerId}):new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY}))}_tickerUpdate(e){this._deltaTime+=e.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}destroy(){this.removeTickerListener(),this.events=null,this.domElement=null,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}}const ci=new KL;class $c extends $l{constructor(){super(...arguments),this.client=new At,this.movement=new At,this.offset=new At,this.global=new At,this.screen=new At}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,i,s,a,o,l,u,c,f,h,d,p,v){throw new Error("Method not implemented.")}}class gn extends $c{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class eo extends $c{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}eo.DOM_DELTA_PIXEL=0;eo.DOM_DELTA_LINE=1;eo.DOM_DELTA_PAGE=2;const ZL=2048,JL=new At,Xo=new At;class QL{constructor(e){this.dispatch=new Vr,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let n=0,i=t.length;n<i;n++)t[n].fn(e);else Ne(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){ci.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,JL.set(e,t),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,t){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(t)?t:[t];for(let s=n.length-1;s>=0;s--)i.forEach(a=>{e.currentTarget=n[s],this.notifyTarget(e,a)})}propagationPath(e){const t=[e];for(let n=0;n<ZL&&e!==this.rootTarget&&e.parent;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,i,s,a=!1){let o=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(ci.pauseUpdate=!1),e.interactiveChildren&&e.children){const c=e.children;for(let f=c.length-1;f>=0;f--){const h=c[f],d=this.hitTestMoveRecursive(h,this._isInteractive(t)?t:h.eventMode,n,i,s,a||s(e,n));if(d){if(d.length>0&&!d[d.length-1].parent)continue;const p=e.isInteractive();(d.length>0||p)&&(p&&this._allInteractiveElements.push(e),d.push(e)),this._hitElements.length===0&&(this._hitElements=d),o=!0}}}const l=this._isInteractive(t),u=e.isInteractive();return u&&u&&this._allInteractiveElements.push(e),a||this._hitElements.length>0?null:o?this._hitElements:l&&!s(e,n)&&i(e,n)?u?[e]:[]:null}hitTestRecursive(e,t,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(ci.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children,u=n;for(let c=l.length-1;c>=0;c--){const f=l[c],h=this.hitTestRecursive(f,this._isInteractive(t)?t:f.eventMode,u,i,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const d=e.isInteractive();return(h.length>0||d)&&h.push(e),h}}}const a=this._isInteractive(t),o=e.isInteractive();return a&&i(e,n)?o?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!e||!e.visible||!e.renderable||!e.measurable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,Xo),!e.hitArea.contains(Xo.x,Xo.y)))return!0;if(e.effects&&e.effects.length)for(let n=0;n<e.effects.length;n++){const i=e.effects[n];if(i.containsPoint&&!i.containsPoint(t,this.hitTestFn))return!0}return!1}hitTestFn(e,t){return e.hitArea?!0:e?.containsPoint?(e.worldTransform.applyInverse(t,Xo),e.containsPoint(Xo)):!1}notifyTarget(e,t){if(!e.currentTarget.isInteractive())return;t??(t=e.type);const n=`on${t}`;e.currentTarget[n]?.(e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this._notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof gn)){Ne("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof gn)){Ne("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&s!==t.target){const l=e.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(e,l,s);if(this.dispatchEvent(u,"pointerout"),n&&this.dispatchEvent(u,"mouseout"),!t.composedPath().includes(s)){const c=this.createPointerEvent(e,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&!t.composedPath().includes(c.target);)c.currentTarget=c.target,this.notifyTarget(c),n&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;this.freeEvent(c)}this.freeEvent(u)}if(s!==t.target){const l=e.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(t,l);this.dispatchEvent(u,"pointerover"),n&&this.dispatchEvent(u,"mouseover");let c=s?.parent;for(;c&&c!==this.rootTarget.parent&&c!==t.target;)c=c.parent;if(!c||c===this.rootTarget.parent){const h=this.clonePointerEvent(t,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==s&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),n&&this.notifyTarget(h,"mouseenter"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(u)}const a=[],o=this.enableGlobalMoveEvents??!0;this.moveOnAll?a.push("pointermove"):this.dispatchEvent(t,"pointermove"),o&&a.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?a.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),o&&a.push("globaltouchmove")),n&&(this.moveOnAll?a.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),o&&a.push("globalmousemove"),this.cursor=t.target?.cursor),a.length>0&&this.all(t,a),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof gn)){Ne("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof gn)){Ne("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const a=this.createPointerEvent(e,"pointerleave",i);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),n&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(a)}this.cursor=null}mapPointerUp(e){if(!(e instanceof gn)){Ne("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const o=n.button===2;this.dispatchEvent(n,o?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let a=s;if(s&&!n.composedPath().includes(s)){let o=s;for(;o&&!n.composedPath().includes(o);){if(n.currentTarget=o,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}o=o.parent}delete i.pressTargetsByButton[e.button],a=o}if(a){const o=this.clonePointerEvent(n,"click");o.target=a,o.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:o.target,timeStamp:t});const l=i.clicksByButton[e.button];if(l.target===o.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=o.target,l.timeStamp=t,o.detail=l.clickCount,o.pointerType==="mouse"){const u=o.button===2;this.dispatchEvent(o,u?"rightclick":"click")}else o.pointerType==="touch"&&this.dispatchEvent(o,"tap");this.dispatchEvent(o,"pointertap"),this.freeEvent(o)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof gn)){Ne("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof eo)){Ne("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){const i=this.allocateEvent(gn);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof t=="string"&&(i.type=t),i}createWheelEvent(e){const t=this.allocateEvent(eo);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const n=this.allocateEvent(gn);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof gn&&t instanceof gn&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof $c&&t instanceof $c&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.defaultPrevented=!1,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}_notifyListeners(e,t){const n=e.currentTarget._events[t];if(n)if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(t,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const eU=1,tU={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_m=class jp{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new QL(null),ci.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new gn(null),this._rootWheelEvent=new eo(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...jp.defaultEventFeatures},{set:(t,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[n]=i,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{canvas:t,resolution:n}=this.renderer;this.setTargetElement(t),this.resolution=n,jp._defaultEventMode=e.eventMode??"passive",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){ci.destroy(),this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor===e)return;this._currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=t.length;n<i;n++){const s=t[n],a=this._bootstrapEvent(this._rootPointerEvent,s);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,ci.pointerMoved();const t=this._normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this._bootstrapEvent(this._rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const n=t!==this.domElement?"outside":"",i=this._normalizeToPointerData(e);for(let s=0,a=i.length;s<a;s++){const o=this._bootstrapEvent(this._rootPointerEvent,i[s]);o.type+=n,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this._bootstrapEvent(this._rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this._removeEvents(),this.domElement=e,ci.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;ci.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;ci.removeTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,t,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}_normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=eU),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}else t.push(e);return t}normalizeWheelEvent(e){const t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}_bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=tU[e.type]||e.type),e}_transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};_m.extension={name:"events",type:[re.WebGLSystem,re.CanvasSystem,re.WebGPUSystem],priority:-1};_m.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let FS=_m;const rU={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(r){this.eventMode=r?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??FS.defaultEventMode},set eventMode(r){this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,a=typeof e=="function"?void 0:e;r=n?`${r}capture`:r;const o=typeof e=="function"?e:e.handleEvent,l=this;i&&i.addEventListener("abort",()=>{l.off(r,o,a)}),s?l.once(r,o,a):l.on(r,o,a)},removeEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;r=n?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,i)},dispatchEvent(r){if(!(r instanceof $l))throw new Error("Container cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};var nU=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const DS={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},iU=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function sU(r){const e=DS[r],t=e.length;let n=iU,i="";const s="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let a;for(let o=0;o<r;o++){let l=s.replace("%index%",o.toString());a=o,o>=t&&(a=r-o-1),l=l.replace("%value%",e[a].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}const aU=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function oU(r,e){const t=Math.ceil(r/2);let n=aU,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let a=0;a<r;a++){let o=s.replace("%index%",a.toString());o=o.replace("%sampleIndex%",`${a-(t-1)}.0`),i+=o,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n=n.replace("%dimension%",e?"z":"w"),n}function lU(r,e){const t=oU(e,r),n=sU(e);return sr.from({vertex:t,fragment:n,name:`blur-${r?"horizontal":"vertical"}-pass-filter`})}var uU=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function cU(r,e){const t=DS[e],n=t.length,i=[],s=[],a=[];for(let f=0;f<e;f++){i[f]=`@location(${f}) offset${f}: vec2<f32>,`,r?s[f]=`filteredCord + vec2(${f-n+1} * pixelStrength, 0.0),`:s[f]=`filteredCord + vec2(0.0, ${f-n+1} * pixelStrength),`;const h=f<n?f:e-f-1,d=t[h].toString();a[f]=`finalColor += textureSample(uTexture, uSampler, offset${f}) * ${d};`}const o=i.join(`
`),l=s.join(`
`),u=a.join(`
`),c=uU.replace("%blur-struct%",o).replace("%blur-vertex-out%",l).replace("%blur-fragment-in%",o).replace("%blur-sampling%",u).replace("%dimension%",r?"z":"w");return Jt.from({vertex:{source:c,entryPoint:"mainVertex"},fragment:{source:c,entryPoint:"mainFragment"}})}const LS=class US extends Hr{constructor(e){e={...US.defaultOptions,...e};const t=lU(e.horizontal,e.kernelSize),n=cU(e.horizontal,e.kernelSize);super({glProgram:t,gpuProgram:n,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...e}),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,t,n,i){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,t,n,i);else{const s=vt.getSameSizeTexture(t);let a=t,o=s;this._state.blend=!1;const l=e.renderer.type===jr.WEBGPU;for(let u=0;u<this.passes-1;u++){e.applyFilter(this,a,o,u===0?!0:l);const c=o;o=a,a=c}this._state.blend=!0,e.applyFilter(this,a,n,i),vt.returnTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};LS.defaultOptions={strength:8,quality:4,kernelSize:5};let Sd=LS;class tn extends Hr{constructor(...e){let t=e[0]??{};typeof t=="number"&&(Fe(lt,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),t={strength:t},e[1]!==void 0&&(t.quality=e[1]),e[2]!==void 0&&(t.resolution=e[2]||"inherit"),e[3]!==void 0&&(t.kernelSize=e[3])),t={...Sd.defaultOptions,...t};const{strength:n,strengthX:i,strengthY:s,quality:a,...o}=t;super({...o,compatibleRenderers:jr.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new Sd({horizontal:!0,...t}),this.blurYFilter=new Sd({horizontal:!1,...t}),this.quality=a,this.strengthX=i??n,this.strengthY=s??n,this.repeatEdgePixels=!1}apply(e,t,n,i){const s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){const o=vt.getSameSizeTexture(t);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,t,o,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,o,n,i),vt.returnTexture(o)}else a?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,t,n,i)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,t,n,i))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return Fe("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(e){Fe("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=e}get blurX(){return Fe("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(e){Fe("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=e}get blurY(){return Fe("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(e){Fe("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}tn.defaultOptions={strength:8,quality:4,kernelSize:5};var fU=`in vec2 vTextureCoord;
out vec4 finalColor;
uniform sampler2D uTexture;
void main() {
    finalColor = texture(uTexture, vTextureCoord);
}
`,Q0=`struct GlobalFilterUniforms {
  uInputSize: vec4<f32>,
  uInputPixel: vec4<f32>,
  uInputClamp: vec4<f32>,
  uOutputFrame: vec4<f32>,
  uGlobalFrame: vec4<f32>,
  uOutputTexture: vec4<f32>,
};

@group(0) @binding(0) var <uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler: sampler;

struct VSOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) uv: vec2<f32>
};

fn filterVertexPosition(aPosition: vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0 * gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord(aPosition: vec2<f32>) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition: vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {
    return textureSample(uTexture, uSampler, uv);
}
`;class hU extends Hr{constructor(){const e=Jt.from({vertex:{source:Q0,entryPoint:"mainVertex"},fragment:{source:Q0,entryPoint:"mainFragment"},name:"passthrough-filter"}),t=sr.from({vertex:nU,fragment:fU,name:"passthrough-filter"});super({gpuProgram:e,glProgram:t})}}class NS{constructor(e){this._renderer=e}push(e,t,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:t,filterEffect:e})}pop(e,t,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(e){e.action==="pushFilter"?this._renderer.filter.push(e):e.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}}NS.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"filter"};const ey=new Oe;function dU(r,e){e.clear();const t=e.matrix;for(let n=0;n<r.length;n++){const i=r[n];if(i.globalDisplayStatus<7)continue;const s=i.renderGroup??i.parentRenderGroup;s?.isCachedAsTexture?e.matrix=ey.copyFrom(s.textureOffsetInverseTransform).append(i.worldTransform):s?._parentCacheAsTextureRenderGroup?e.matrix=ey.copyFrom(s._parentCacheAsTextureRenderGroup.inverseWorldTransform).append(i.groupTransform):e.matrix=i.worldTransform,e.addBounds(i.bounds)}return e.matrix=t,e}const pU=new Kl({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class gU{constructor(){this.skip=!1,this.inputTexture=null,this.backTexture=null,this.filters=null,this.bounds=new hr,this.container=null,this.blendRequired=!1,this.outputRenderSurface=null,this.globalFrame={x:0,y:0,width:0,height:0},this.firstEnabledIndex=-1,this.lastEnabledIndex=-1}}class GS{constructor(e){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new mr({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new wi({}),this.renderer=e}get activeBackTexture(){return this._activeFilterData?.backTexture}push(e){const t=this.renderer,n=e.filterEffect.filters,i=this._pushFilterData();i.skip=!1,i.filters=n,i.container=e.container,i.outputRenderSurface=t.renderTarget.renderSurface;const s=t.renderTarget.renderTarget.colorTexture.source,a=s.resolution,o=s.antialias;if(n.every(d=>!d.enabled)){i.skip=!0;return}const l=i.bounds;if(this._calculateFilterArea(e,l),this._calculateFilterBounds(i,t.renderTarget.rootViewPort,o,a,1),i.skip)return;const u=this._getPreviousFilterData(),c=this._findFilterResolution(a);let f=0,h=0;u&&(f=u.bounds.minX,h=u.bounds.minY),this._calculateGlobalFrame(i,f,h,c,s.width,s.height),this._setupFilterTextures(i,l,t,u)}generateFilteredTexture({texture:e,filters:t}){const n=this._pushFilterData();this._activeFilterData=n,n.skip=!1,n.filters=t;const i=e.source,s=i.resolution,a=i.antialias;if(t.every(d=>!d.enabled))return n.skip=!0,e;const o=n.bounds;if(o.addRect(e.frame),this._calculateFilterBounds(n,o.rectangle,a,s,0),n.skip)return e;const l=s;this._calculateGlobalFrame(n,0,0,l,i.width,i.height),n.outputRenderSurface=vt.getOptimalTexture(o.width,o.height,n.resolution,n.antialias),n.backTexture=Re.EMPTY,n.inputTexture=e,this.renderer.renderTarget.finishRenderPass(),this._applyFiltersToTexture(n,!0);const h=n.outputRenderSurface;return h.source.alphaMode="premultiplied-alpha",h}pop(){const e=this.renderer,t=this._popFilterData();t.skip||(e.globalUniforms.pop(),e.renderTarget.finishRenderPass(),this._activeFilterData=t,this._applyFiltersToTexture(t,!1),t.blendRequired&&vt.returnTexture(t.backTexture),vt.returnTexture(t.inputTexture))}getBackTexture(e,t,n){const i=e.colorTexture.source._resolution,s=vt.getOptimalTexture(t.width,t.height,i,!1);let a=t.minX,o=t.minY;n&&(a-=n.minX,o-=n.minY),a=Math.floor(a*i),o=Math.floor(o*i);const l=Math.ceil(t.width*i),u=Math.ceil(t.height*i);return this.renderer.renderTarget.copyToTexture(e,s,{x:a,y:o},{width:l,height:u},{x:0,y:0}),s}applyFilter(e,t,n,i){const s=this.renderer,a=this._activeFilterData,l=a.outputRenderSurface===n,u=s.renderTarget.rootRenderTarget.colorTexture.source._resolution,c=this._findFilterResolution(u);let f=0,h=0;if(l){const p=this._findPreviousFilterOffset();f=p.x,h=p.y}this._updateFilterUniforms(t,n,a,f,h,c,l,i);const d=e.enabled?e:this._getPassthroughFilter();this._setupBindGroupsAndRender(d,t,s)}calculateSpriteMatrix(e,t){const n=this._activeFilterData,i=e.set(n.inputTexture._source.width,0,0,n.inputTexture._source.height,n.bounds.minX,n.bounds.minY),s=t.worldTransform.copyTo(Oe.shared),a=t.renderGroup||t.parentRenderGroup;return a&&a.cacheToLocalTransform&&s.prepend(a.cacheToLocalTransform),s.invert(),i.prepend(s),i.scale(1/t.texture.orig.width,1/t.texture.orig.height),i.translate(t.anchor.x,t.anchor.y),i}destroy(){this._passthroughFilter?.destroy(!0),this._passthroughFilter=null}_getPassthroughFilter(){return this._passthroughFilter??(this._passthroughFilter=new hU),this._passthroughFilter}_setupBindGroupsAndRender(e,t,n){if(n.renderPipes.uniformBatch){const i=n.renderPipes.uniformBatch.getUboResource(this._filterGlobalUniforms);this._globalFilterBindGroup.setResource(i,0)}else this._globalFilterBindGroup.setResource(this._filterGlobalUniforms,0);this._globalFilterBindGroup.setResource(t.source,1),this._globalFilterBindGroup.setResource(t.source.style,2),e.groups[0]=this._globalFilterBindGroup,n.encoder.draw({geometry:pU,shader:e,state:e._state,topology:"triangle-list"}),n.type===jr.WEBGL&&n.renderTarget.finishRenderPass()}_setupFilterTextures(e,t,n,i){if(e.backTexture=Re.EMPTY,e.inputTexture=vt.getOptimalTexture(t.width,t.height,e.resolution,e.antialias),e.blendRequired){n.renderTarget.finishRenderPass();const s=n.renderTarget.getRenderTarget(e.outputRenderSurface);e.backTexture=this.getBackTexture(s,t,i?.bounds)}n.renderTarget.bind(e.inputTexture,!0),n.globalUniforms.push({offset:t})}_calculateGlobalFrame(e,t,n,i,s,a){const o=e.globalFrame;o.x=t*i,o.y=n*i,o.width=s*i,o.height=a*i}_updateFilterUniforms(e,t,n,i,s,a,o,l){const u=this._filterGlobalUniforms.uniforms,c=u.uOutputFrame,f=u.uInputSize,h=u.uInputPixel,d=u.uInputClamp,p=u.uGlobalFrame,v=u.uOutputTexture;o?(c[0]=n.bounds.minX-i,c[1]=n.bounds.minY-s):(c[0]=0,c[1]=0),c[2]=e.frame.width,c[3]=e.frame.height,f[0]=e.source.width,f[1]=e.source.height,f[2]=1/f[0],f[3]=1/f[1],h[0]=e.source.pixelWidth,h[1]=e.source.pixelHeight,h[2]=1/h[0],h[3]=1/h[1],d[0]=.5*h[2],d[1]=.5*h[3],d[2]=e.frame.width*f[2]-.5*h[2],d[3]=e.frame.height*f[3]-.5*h[3];const m=this.renderer.renderTarget.rootRenderTarget.colorTexture;p[0]=i*a,p[1]=s*a,p[2]=m.source.width*a,p[3]=m.source.height*a,t instanceof Re&&(t.source.resource=null);const g=this.renderer.renderTarget.getRenderTarget(t);this.renderer.renderTarget.bind(t,!!l),t instanceof Re?(v[0]=t.frame.width,v[1]=t.frame.height):(v[0]=g.width,v[1]=g.height),v[2]=g.isRoot?-1:1,this._filterGlobalUniforms.update()}_findFilterResolution(e){let t=this._filterStackIndex-1;for(;t>0&&this._filterStack[t].skip;)--t;return t>0&&this._filterStack[t].inputTexture?this._filterStack[t].inputTexture.source._resolution:e}_findPreviousFilterOffset(){let e=0,t=0,n=this._filterStackIndex;for(;n>0;){n--;const i=this._filterStack[n];if(!i.skip){e=i.bounds.minX,t=i.bounds.minY;break}}return{x:e,y:t}}_calculateFilterArea(e,t){if(e.renderables?dU(e.renderables,t):e.filterEffect.filterArea?(t.clear(),t.addRect(e.filterEffect.filterArea),t.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,t),e.container){const i=(e.container.renderGroup||e.container.parentRenderGroup).cacheToLocalTransform;i&&t.applyMatrix(i)}}_applyFiltersToTexture(e,t){const n=e.inputTexture,i=e.bounds,s=e.filters,a=e.firstEnabledIndex,o=e.lastEnabledIndex;if(this._globalFilterBindGroup.setResource(n.source.style,2),this._globalFilterBindGroup.setResource(e.backTexture.source,3),a===o)s[a].apply(this,n,e.outputRenderSurface,t);else{let l=e.inputTexture;const u=vt.getOptimalTexture(i.width,i.height,l.source._resolution,!1);let c=u;for(let f=a;f<o;f++){const h=s[f];if(!h.enabled)continue;h.apply(this,l,c,!0);const d=l;l=c,c=d}s[o].apply(this,l,e.outputRenderSurface,t),vt.returnTexture(u)}}_calculateFilterBounds(e,t,n,i,s){const a=this.renderer,o=e.bounds,l=e.filters;let u=1/0,c=0,f=!0,h=!1,d=!1,p=!0,v=-1,m=-1;for(let g=0;g<l.length;g++){const _=l[g];if(!_.enabled)continue;if(v===-1&&(v=g),m=g,u=Math.min(u,_.resolution==="inherit"?i:_.resolution),c+=_.padding,_.antialias==="off"?f=!1:_.antialias==="inherit"&&f&&(f=n),_.clipToViewport||(p=!1),!!!(_.compatibleRenderers&a.type)){d=!1;break}if(_.blendRequired&&!(a.backBuffer?.useBackBuffer??!0)){Ne("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),d=!1;break}d=!0,h||(h=_.blendRequired)}if(!d){e.skip=!0;return}if(p&&o.fitBounds(0,t.width/i,0,t.height/i),o.scale(u).ceil().scale(1/u).pad((c|0)*s),!o.isPositive){e.skip=!0;return}e.antialias=f,e.resolution=u,e.blendRequired=h,e.firstEnabledIndex=v,e.lastEnabledIndex=m}_popFilterData(){return this._filterStackIndex--,this._filterStack[this._filterStackIndex]}_getPreviousFilterData(){let e,t=this._filterStackIndex-1;for(;t>0&&(t--,e=this._filterStack[t],!!e.skip););return e}_pushFilterData(){let e=this._filterStack[this._filterStackIndex];return e||(e=this._filterStack[this._filterStackIndex]=new gU),this._filterStackIndex++,e}}GS.extension={type:[re.WebGLSystem,re.WebGPUSystem],name:"filter"};var mU=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`,vU=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`,ty=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`;class _U extends Hr{constructor(e){const{sprite:t,...n}=e,i=new p2(t.texture),s=new mr({uFilterMatrix:{value:new Oe,type:"mat3x3<f32>"},uMaskClamp:{value:i.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:e.inverse?1:0,type:"f32"}}),a=Jt.from({vertex:{source:ty,entryPoint:"mainVertex"},fragment:{source:ty,entryPoint:"mainFragment"}}),o=sr.from({vertex:vU,fragment:mU,name:"mask-filter"});super({...n,gpuProgram:a,glProgram:o,clipToViewport:!1,resources:{filterUniforms:s,uMaskTexture:t.texture.source}}),this.sprite=t,this._textureMatrix=i}set inverse(e){this.resources.filterUniforms.uniforms.uInverse=e?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(e,t,n,i){this._textureMatrix.texture=this.sprite.texture,e.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,e.applyFilter(this,t,n,i)}}class Kn extends Jg{constructor(e){e instanceof Kr&&(e={context:e});const{context:t,roundPixels:n,...i}=e||{};super({label:"Graphics",...i}),this.renderPipeId="graphics",t?this.context=t:(this.context=this._ownedContext=new Kr,this.context.autoGarbageCollect=this.autoGarbageCollect),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=n??!1}set context(e){e!==this._context&&(this._context&&(this._context.off("update",this.onViewUpdate,this),this._context.off("unload",this.unload,this)),this._context=e,this._context.on("update",this.onViewUpdate,this),this._context.on("unload",this.unload,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||e?.context===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_onTouch(e){this._gcLastUsed=e,this._context._gcLastUsed=e}_callContextMethod(e,t){return this.context[e](...t),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Kn(this._context.clone()):(this._ownedContext=null,new Kn(this._context))}lineStyle(e,t,n){Fe(lt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const i={};return e&&(i.width=e),t&&(i.color=t),n&&(i.alpha=n),this.context.strokeStyle=i,this}beginFill(e,t){Fe(lt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const n={};return e!==void 0&&(n.color=e),t!==void 0&&(n.alpha=t),this.context.fillStyle=n,this}endFill(){Fe(lt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==Kr.defaultStrokeStyle.width||e.color!==Kr.defaultStrokeStyle.color||e.alpha!==Kr.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return Fe(lt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return Fe(lt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return Fe(lt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return Fe(lt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return Fe(lt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return Fe(lt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}const zS=class jS extends Kl{constructor(...e){let t=e[0]??{};t instanceof Float32Array&&(Fe(lt,"use new MeshGeometry({ positions, uvs, indices }) instead"),t={positions:t,uvs:e[1],indices:e[2]}),t={...jS.defaultOptions,...t};const n=t.positions||new Float32Array([0,0,1,0,1,1,0,1]);let i=t.uvs;i||(t.positions?i=new Float32Array(n.length):i=new Float32Array([0,0,1,0,1,1,0,1]));const s=t.indices||new Uint32Array([0,1,2,0,2,3]),a=t.shrinkBuffersToFit,o=new Gr({data:n,label:"attribute-mesh-positions",shrinkToFit:a,usage:at.VERTEX|at.COPY_DST}),l=new Gr({data:i,label:"attribute-mesh-uvs",shrinkToFit:a,usage:at.VERTEX|at.COPY_DST}),u=new Gr({data:s,label:"index-mesh-buffer",shrinkToFit:a,usage:at.INDEX|at.COPY_DST});super({attributes:{aPosition:{buffer:o,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:l,format:"float32x2",stride:2*4,offset:0}},indexBuffer:u,topology:t.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};zS.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let bm=zS;class HS extends Jg{constructor(e,t){const{text:n,resolution:i,style:s,anchor:a,width:o,height:l,roundPixels:u,...c}=e;super({...c}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=t,this.text=n??"",this.style=s,this.resolution=i??null,this.allowChildren=!1,this._anchor=new Qt({_onUpdate:()=>{this.onViewUpdate()}}),a&&(this.anchor=a),this.roundPixels=u??!1,o!==void 0&&(this.width=o),l!==void 0&&(this.height=l)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){e||(e={}),this._style?.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,t){typeof e=="object"?(t=e.height??e.width,e=e.width):t??(t=e),e!==void 0&&this._setWidth(e,this.bounds.width),t!==void 0&&this._setHeight(t,this.bounds.height)}containsPoint(e){const t=this.bounds.width,n=this.bounds.height,i=-t*this.anchor.x;let s=0;return e.x>=i&&e.x<=i+t&&(s=-n*this.anchor.y,e.y>=s&&e.y<=s+n)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e?.style)&&this._style.destroy(e),this._style=null,this._text=null}get styleKey(){return`${this._text}:${this._style.styleKey}:${this._resolution}`}}function VS(r,e){let t=r[0]??{};return(typeof t=="string"||r[1])&&(Fe(lt,`use new ${e}({ text: "hi!", style }) instead`),t={text:t,style:r[1]}),t}let cs=null,fi=null;function bU(r,e){cs||(cs=Ye.get().createCanvas(256,128),fi=cs.getContext("2d",{willReadFrequently:!0}),fi.globalCompositeOperation="copy",fi.globalAlpha=1),(cs.width<r||cs.height<e)&&(cs.width=Ka(r),cs.height=Ka(e))}function ry(r,e,t){for(let n=0,i=4*t*e;n<e;++n,i+=4)if(r[i+3]!==0)return!1;return!0}function ny(r,e,t,n,i){const s=4*e;for(let a=n,o=n*s+4*t;a<=i;++a,o+=s)if(r[o+3]!==0)return!1;return!0}function yU(...r){let e=r[0];e.canvas||(e={canvas:r[0],resolution:r[1]});const{canvas:t}=e,n=Math.min(e.resolution??1,1),i=e.width??t.width,s=e.height??t.height;let a=e.output;if(bU(i,s),!fi)throw new TypeError("Failed to get canvas 2D context");fi.drawImage(t,0,0,i,s,0,0,i*n,s*n);const l=fi.getImageData(0,0,i,s).data;let u=0,c=0,f=i-1,h=s-1;for(;c<s&&ry(l,i,c);)++c;if(c===s)return ft.EMPTY;for(;ry(l,i,h);)--h;for(;ny(l,i,u,c,h);)++u;for(;ny(l,i,f,c,h);)--f;return++f,++h,fi.globalCompositeOperation="source-over",fi.strokeRect(u,c,f-u,h-c),fi.globalCompositeOperation="copy",a??(a=new ft),a.set(u/n,c/n,(f-u)/n,(h-c)/n),a}const iy=new ft;class xU{getCanvasAndContext(e){const{text:t,style:n,resolution:i=1}=e,s=n._getFinalPadding(),a=lr.measureText(t||" ",n),o=Math.ceil(Math.ceil(Math.max(1,a.width)+s*2)*i),l=Math.ceil(Math.ceil(Math.max(1,a.height)+s*2)*i),u=ki.getOptimalCanvasAndContext(o,l);this._renderTextToCanvas(t,n,s,i,u);const c=n.trim?yU({canvas:u.canvas,width:o,height:l,resolution:1,output:iy}):iy.set(0,0,o,l);return{canvasAndContext:u,frame:c}}returnCanvasAndContext(e){ki.returnCanvasAndContext(e)}_renderTextToCanvas(e,t,n,i,s){const{canvas:a,context:o}=s,l=Wc(t),u=lr.measureText(e||" ",t),c=u.lines,f=u.lineHeight,h=u.lineWidths,d=u.maxLineWidth,p=u.fontProperties,v=a.height;if(o.resetTransform(),o.scale(i,i),o.textBaseline=t.textBaseline,t._stroke?.width){const b=t._stroke;o.lineWidth=b.width,o.miterLimit=b.miterLimit,o.lineJoin=b.join,o.lineCap=b.cap}o.font=l;let m,g;const _=t.dropShadow?2:1;for(let b=0;b<_;++b){const w=t.dropShadow&&b===0,S=w?Math.ceil(Math.max(1,v)+n*2):0,T=S*i;if(w){o.fillStyle="black",o.strokeStyle="black";const P=t.dropShadow,V=P.color,W=P.alpha;o.shadowColor=ht.shared.setValue(V).setAlpha(W).toRgbaString();const D=P.blur*i,j=P.distance*i;o.shadowBlur=D,o.shadowOffsetX=Math.cos(P.angle)*j,o.shadowOffsetY=Math.sin(P.angle)*j+T}else{if(o.fillStyle=t._fill?Yc(t._fill,o,u,n*2):null,t._stroke?.width){const P=t._stroke.width*.5+n*2;o.strokeStyle=Yc(t._stroke,o,u,P)}o.shadowColor="black"}let E=(f-p.fontSize)/2;f-p.fontSize<0&&(E=0);const O=t._stroke?.width??0;for(let P=0;P<c.length;P++)m=O/2,g=O/2+P*f+p.ascent+E,t.align==="right"?m+=d-h[P]:t.align==="center"&&(m+=(d-h[P])/2),t._stroke?.width&&this._drawLetterSpacing(c[P],t,s,m+n,g+n-S,!0),t._fill!==void 0&&this._drawLetterSpacing(c[P],t,s,m+n,g+n-S)}}_drawLetterSpacing(e,t,n,i,s,a=!1){const{context:o}=n,l=t.letterSpacing;let u=!1;if(lr.experimentalLetterSpacingSupported&&(lr.experimentalLetterSpacing?(o.letterSpacing=`${l}px`,o.textLetterSpacing=`${l}px`,u=!0):(o.letterSpacing="0px",o.textLetterSpacing="0px")),l===0||u){a?o.strokeText(e,i,s):o.fillText(e,i,s);return}let c=i;const f=lr.graphemeSegmenter(e);let h=o.measureText(e).width,d=0;for(let p=0;p<f.length;++p){const v=f[p];a?o.strokeText(v,c,s):o.fillText(v,c,s);let m="";for(let g=p+1;g<f.length;++g)m+=f[g];d=o.measureText(m).width,c+=h-d+l,h=d}}}const gl=new xU;let sy=class extends HS{constructor(...e){const t=VS(e,"Text");super(t,ts),this.renderPipeId="text",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof fn?t.textureStyle:new fn(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor;let n=0,i=0;if(this._style.trim){const{frame:s,canvasAndContext:a}=gl.getCanvasAndContext({text:this.text,style:this._style,resolution:1});gl.returnCanvasAndContext(a),n=s.width,i=s.height}else{const s=lr.measureText(this._text,this._style);n=s.width,i=s.height}e.minX=-t._x*n,e.maxX=e.minX+n,e.minY=-t._y*i,e.maxY=e.minY+i}};function wU(r){const e=r._stroke,t=r._fill,i=[`div { ${[`color: ${ht.shared.setValue(t.color).toHex()}`,`font-size: ${r.fontSize}px`,`font-family: ${r.fontFamily}`,`font-weight: ${r.fontWeight}`,`font-style: ${r.fontStyle}`,`font-variant: ${r.fontVariant}`,`letter-spacing: ${r.letterSpacing}px`,`text-align: ${r.align}`,`padding: ${r.padding}px`,`white-space: ${r.whiteSpace==="pre"&&r.wordWrap?"pre-wrap":r.whiteSpace}`,...r.lineHeight?[`line-height: ${r.lineHeight}px`]:[],...r.wordWrap?[`word-wrap: ${r.breakWords?"break-all":"break-word"}`,`max-width: ${r.wordWrapWidth}px`]:[],...e?[qS(e)]:[],...r.dropShadow?[WS(r.dropShadow)]:[],...r.cssOverrides].join(";")} }`];return SU(r.tagStyles,i),i.join(" ")}function WS(r){const e=ht.shared.setValue(r.color).setAlpha(r.alpha).toHexa(),t=Math.round(Math.cos(r.angle)*r.distance),n=Math.round(Math.sin(r.angle)*r.distance),i=`${t}px ${n}px`;return r.blur>0?`text-shadow: ${i} ${r.blur}px ${e}`:`text-shadow: ${i} ${e}`}function qS(r){return[`-webkit-text-stroke-width: ${r.width}px`,`-webkit-text-stroke-color: ${ht.shared.setValue(r.color).toHex()}`,`text-stroke-width: ${r.width}px`,`text-stroke-color: ${ht.shared.setValue(r.color).toHex()}`,"paint-order: stroke"].join(";")}const ay={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},oy={fill:r=>`color: ${ht.shared.setValue(r).toHex()}`,breakWords:r=>`word-wrap: ${r?"break-all":"break-word"}`,stroke:qS,dropShadow:WS};function SU(r,e){for(const t in r){const n=r[t],i=[];for(const s in n)oy[s]?i.push(oy[s](n[s])):ay[s]&&i.push(ay[s].replace("{{VALUE}}",n[s]));e.push(`${t} { ${i.join(";")} }`)}}class ym extends ts{constructor(e={}){super(e),this._cssOverrides=[],this.cssOverrides=e.cssOverrides??[],this.tagStyles=e.tagStyles??{}}set cssOverrides(e){this._cssOverrides=e instanceof Array?e:[e],this.update()}get cssOverrides(){return this._cssOverrides}update(){this._cssStyle=null,super.update()}clone(){return new ym({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides,tagStyles:{...this.tagStyles}})}get cssStyle(){return this._cssStyle||(this._cssStyle=wU(this)),this._cssStyle}addOverride(...e){const t=e.filter(n=>!this.cssOverrides.includes(n));t.length>0&&(this.cssOverrides.push(...t),this.update())}removeOverride(...e){const t=e.filter(n=>this.cssOverrides.includes(n));t.length>0&&(this.cssOverrides=this.cssOverrides.filter(n=>!t.includes(n)),this.update())}set fill(e){typeof e!="string"&&typeof e!="number"&&Ne("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=e}set stroke(e){e&&typeof e!="string"&&typeof e!="number"&&Ne("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=e}}const ly="http://www.w3.org/2000/svg",uy="http://www.w3.org/1999/xhtml";class XS{constructor(){this.svgRoot=document.createElementNS(ly,"svg"),this.foreignObject=document.createElementNS(ly,"foreignObject"),this.domElement=document.createElementNS(uy,"div"),this.styleElement=document.createElementNS(uy,"style");const{foreignObject:e,svgRoot:t,styleElement:n,domElement:i}=this;e.setAttribute("width","10000"),e.setAttribute("height","10000"),e.style.overflow="hidden",t.appendChild(e),e.appendChild(n),e.appendChild(i),this.image=Ye.get().createImage()}destroy(){this.svgRoot.remove(),this.foreignObject.remove(),this.styleElement.remove(),this.domElement.remove(),this.image.src="",this.image.remove(),this.svgRoot=null,this.foreignObject=null,this.styleElement=null,this.domElement=null,this.image=null,this.canvasAndContext=null}}let cy;function YS(r,e,t,n){n||(n=cy||(cy=new XS));const{domElement:i,styleElement:s,svgRoot:a}=n;i.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${r}</div>`,i.setAttribute("style","transform-origin: top left; display: inline-block"),t&&(s.textContent=t),document.body.appendChild(a);const o=i.getBoundingClientRect();a.remove();const l=e.padding*2;return{width:o.width-l,height:o.height-l}}class Ta extends HS{constructor(...e){const t=VS(e,"HtmlText");super(t,ym),this.renderPipeId="htmlText",t.textureStyle&&(this.textureStyle=t.textureStyle instanceof fn?t.textureStyle:new fn(t.textureStyle))}updateBounds(){const e=this._bounds,t=this._anchor,n=YS(this.text,this._style),{width:i,height:s}=n;e.minX=-t._x*i,e.maxX=e.minX+i,e.minY=-t._y*s,e.maxY=e.minY+s}get text(){return this._text}set text(e){const t=this._sanitiseText(e.toString());super.text=t}_sanitiseText(e){return this._removeInvalidHtmlTags(e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;"))}_removeInvalidHtmlTags(e){const t=/<[^>]*?(?=<|$)/g;return e.replace(t,"")}}class $S{constructor(){this._tempState=Pn.for2d(),this._didUploadHash={}}init(e){e.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(e,t,n){const i=e.renderer,s=this._didUploadHash[n.uid];i.shader.bind(n,s),s||(this._didUploadHash[n.uid]=!0),i.shader.updateUniformGroup(i.globalUniforms.uniformGroup),i.geometry.bind(t,n.glProgram)}execute(e,t){const n=e.renderer;this._tempState.blendMode=t.blendMode,n.state.set(this._tempState);const i=t.textures.textures;for(let s=0;s<t.textures.count;s++)n.texture.bind(i[s],s);n.geometry.draw(t.topology,t.size,t.start)}}$S.extension={type:[re.WebGLPipesAdaptor],name:"batch"};const zu=Pn.for2d();class KS{start(e,t,n){const i=e.renderer,s=i.encoder,a=n.gpuProgram;this._shader=n,this._geometry=t,s.setGeometry(t,a),zu.blendMode="normal",i.pipeline.getPipeline(t,a,zu);const o=i.globalUniforms.bindGroup;s.resetBindGroup(1),s.setBindGroup(0,o,a)}execute(e,t){const n=this._shader.gpuProgram,i=e.renderer,s=i.encoder;if(!t.bindGroup){const l=t.textures;t.bindGroup=im(l.textures,l.count,i.limits.maxBatchableTextures)}zu.blendMode=t.blendMode;const a=i.bindGroup.getBindGroup(t.bindGroup,n,1),o=i.pipeline.getPipeline(this._geometry,n,zu,t.topology);t.bindGroup._touch(i.gc.now,i.tick),s.setPipeline(o),s.renderPassEncoder.setBindGroup(1,a),s.renderPassEncoder.drawIndexed(t.size,1,t.start)}}KS.extension={type:[re.WebGPUPipesAdaptor],name:"batch"};const xm=class ZS{constructor(e,t){this.state=Pn.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=e,this._adaptor=t,this._adaptor.init?.(this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let t=this._batchersByInstructionSet[e.uid];t||(t=this._batchersByInstructionSet[e.uid]=Object.create(null),t.default||(t.default=new cm({maxTextures:this.renderer.limits.maxBatchableTextures}))),this._activeBatches=t,this._activeBatch=this._activeBatches.default;for(const n in this._activeBatches)this._activeBatches[n].begin()}addToBatch(e,t){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(t);let n=this._activeBatches[e.batcherName];n||(n=this._activeBatches[e.batcherName]=ZS.getBatcher(e.batcherName),n.begin()),this._activeBatch=n}this._activeBatch.add(e)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);const t=this._activeBatches;for(const n in t){const i=t[n],s=i.geometry;s.indexBuffer.setDataWithSize(i.indexBuffer,i.indexSize,!0),s.buffers[0].setDataWithSize(i.attributeBuffer.float32View,i.attributeSize,!1)}}upload(e){const t=this._batchersByInstructionSet[e.uid];for(const n in t){const i=t[n],s=i.geometry;i.dirty&&(i.dirty=!1,s.buffers[0].update(i.attributeSize*4))}}execute(e){if(e.action==="startBatch"){const t=e.batcher,n=t.geometry,i=t.shader;this._adaptor.start(this,n,i)}this._adaptor.execute(this,e)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(const e in this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}};xm.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"batch"};xm._availableBatchers=Object.create(null);let JS=xm;ze.handleByMap(re.Batcher,JS._availableBatchers);ze.add(cm);const ml={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},TU={...ml,vertex:{...ml.vertex,header:ml.vertex.header.replace("group(1)","group(2)")}},wm={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}},EU={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;


        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},AU={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;


        `,main:`
            outColor = texture(uTexture, vUV);
        `}},CU=new hr;class PU extends Gc{constructor(){super(),this.filters=[new _U({sprite:new Rt(Re.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(e){this.filters[0].sprite=e}get inverse(){return this.filters[0].inverse}set inverse(e){this.filters[0].inverse=e}}class QS{constructor(e){this._activeMaskStage=[],this._renderer=e}push(e,t,n){const i=this._renderer;if(i.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1,maskedContainer:t}),e.inverse=t._maskOptions.inverse,e.renderMaskToTexture){const s=e.mask;s.includeInBuild=!0,s.collectRenderables(n,i,null),s.includeInBuild=!1}i.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:e,maskedContainer:t,inverse:t._maskOptions.inverse,canBundle:!1})}pop(e,t,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1})}execute(e){const t=this._renderer,n=e.mask.renderMaskToTexture;if(e.action==="pushMaskBegin"){const i=jt.get(PU);if(i.inverse=e.inverse,n){e.mask.mask.measurable=!0;const s=Yg(e.mask.mask,!0,CU);e.mask.mask.measurable=!1,s.ceil();const a=t.renderTarget.renderTarget.colorTexture.source,o=vt.getOptimalTexture(s.width,s.height,a._resolution,a.antialias);t.renderTarget.push(o,!0),t.globalUniforms.push({offset:s,worldColor:4294967295});const l=i.sprite;l.texture=o,l.worldTransform.tx=s.minX,l.worldTransform.ty=s.minY,this._activeMaskStage.push({filterEffect:i,maskedContainer:e.maskedContainer,filterTexture:o})}else i.sprite=e.mask.mask,this._activeMaskStage.push({filterEffect:i,maskedContainer:e.maskedContainer})}else if(e.action==="pushMaskEnd"){const i=this._activeMaskStage[this._activeMaskStage.length-1];n&&(t.type===jr.WEBGL&&t.renderTarget.finishRenderPass(),t.renderTarget.pop(),t.globalUniforms.pop()),t.filter.push({renderPipeId:"filter",action:"pushFilter",container:i.maskedContainer,filterEffect:i.filterEffect,canBundle:!1})}else if(e.action==="popMaskEnd"){t.filter.pop();const i=this._activeMaskStage.pop();n&&vt.returnTexture(i.filterTexture),jt.return(i.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}}QS.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"alphaMask"};class eT{constructor(e){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=e}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(e,t,n){this._renderer.renderPipes.batch.break(n);const s=this._colorStack;s[this._colorStackIndex]=s[this._colorStackIndex-1]&e.mask;const a=this._colorStack[this._colorStackIndex];a!==this._currentColor&&(this._currentColor=a,n.add({renderPipeId:"colorMask",colorMask:a,canBundle:!1})),this._colorStackIndex++}pop(e,t,n){this._renderer.renderPipes.batch.break(n);const s=this._colorStack;this._colorStackIndex--;const a=s[this._colorStackIndex-1];a!==this._currentColor&&(this._currentColor=a,n.add({renderPipeId:"colorMask",colorMask:a,canBundle:!1}))}execute(e){this._renderer.colorMask.setMask(e.colorMask)}destroy(){this._renderer=null,this._colorStack=null}}eT.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"colorMask"};class tT{constructor(e){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=e}push(e,t,n){var i;const s=e,a=this._renderer;a.renderPipes.batch.break(n),a.renderPipes.blendMode.setBlendMode(s.mask,"none",n),n.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});const o=s.mask;o.includeInBuild=!0,this._maskHash.has(s)||this._maskHash.set(s,{instructionsStart:0,instructionsLength:0});const l=this._maskHash.get(s);l.instructionsStart=n.instructionSize,o.collectRenderables(n,a,null),o.includeInBuild=!1,a.renderPipes.batch.break(n),n.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:e,inverse:t._maskOptions.inverse,canBundle:!1});const u=n.instructionSize-l.instructionsStart-1;l.instructionsLength=u;const c=a.renderTarget.renderTarget.uid;(i=this._maskStackHash)[c]??(i[c]=0)}pop(e,t,n){const i=e,s=this._renderer;s.renderPipes.batch.break(n),s.renderPipes.blendMode.setBlendMode(i.mask,"none",n),n.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:t._maskOptions.inverse,canBundle:!1});const a=this._maskHash.get(e);for(let o=0;o<a.instructionsLength;o++)n.instructions[n.instructionSize++]=n.instructions[a.instructionsStart++];n.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(e){var t;const n=this._renderer,i=n.renderTarget.renderTarget.uid;let s=(t=this._maskStackHash)[i]??(t[i]=0);e.action==="pushMaskBegin"?(n.renderTarget.ensureDepthStencil(),n.stencil.setStencilMode(Lt.RENDERING_MASK_ADD,s),s++,n.colorMask.setMask(0)):e.action==="pushMaskEnd"?(e.inverse?n.stencil.setStencilMode(Lt.INVERSE_MASK_ACTIVE,s):n.stencil.setStencilMode(Lt.MASK_ACTIVE,s),n.colorMask.setMask(15)):e.action==="popMaskBegin"?(n.colorMask.setMask(0),s!==0?n.stencil.setStencilMode(Lt.RENDERING_MASK_REMOVE,s):(n.renderTarget.clear(null,Or.STENCIL),n.stencil.setStencilMode(Lt.DISABLED,s)),s--):e.action==="popMaskEnd"&&(e.inverse?n.stencil.setStencilMode(Lt.INVERSE_MASK_ACTIVE,s):n.stencil.setStencilMode(Lt.MASK_ACTIVE,s),n.colorMask.setMask(15)),this._maskStackHash[i]=s}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}}tT.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"stencilMask"};var hc=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(hc||{});class RU{constructor(e,t){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.type=t}destroy(){this.buffer=null,this.updateID=-1,this.byteLength=-1,this.type=-1,this._lastBindBaseLocation=-1,this._lastBindCallId=-1}}class rT{constructor(e){this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=e,this._managedBuffers=new Wr({renderer:e,type:"resource",onUnload:this.onBufferUnload.bind(this),name:"glBuffer"})}destroy(){this._managedBuffers.destroy(),this._renderer=null,this._gl=null,this._boundBufferBases={}}contextChange(){this._gl=this._renderer.gl,this.destroyAll(!0),this._maxBindings=this._renderer.limits.maxUniformBindings}getGlBuffer(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]||this.createGLBuffer(e)}bind(e){const{_gl:t}=this,n=this.getGlBuffer(e);t.bindBuffer(n.type,n.buffer)}bindBufferBase(e,t){const{_gl:n}=this;this._boundBufferBases[t]!==e&&(this._boundBufferBases[t]=e,e._lastBindBaseLocation=t,n.bindBufferBase(n.UNIFORM_BUFFER,t,e.buffer))}nextBindBase(e){this._bindCallId++,this._minBaseLocation=0,e&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(e){let t=this.getLastBindBaseLocation(e);if(t>=this._minBaseLocation)return e._lastBindCallId=this._bindCallId,t;let n=0,i=this._nextBindBaseIndex;for(;n<2;){i>=this._maxBindings&&(i=this._minBaseLocation,n++);const s=this._boundBufferBases[i];if(s&&s._lastBindCallId===this._bindCallId){i++;continue}break}return t=i,this._nextBindBaseIndex=i+1,n>=2?-1:(e._lastBindCallId=this._bindCallId,this._boundBufferBases[t]=null,t)}getLastBindBaseLocation(e){const t=e._lastBindBaseLocation;return this._boundBufferBases[t]===e?t:-1}bindBufferRange(e,t,n,i){const{_gl:s}=this;n||(n=0),t||(t=0),this._boundBufferBases[t]=null,s.bindBufferRange(s.UNIFORM_BUFFER,t||0,e.buffer,n*256,i||256)}updateBuffer(e){const{_gl:t}=this,n=this.getGlBuffer(e);if(e._updateID===n.updateID)return n;n.updateID=e._updateID,t.bindBuffer(n.type,n.buffer);const i=e.data,s=e.descriptor.usage&at.STATIC?t.STATIC_DRAW:t.DYNAMIC_DRAW;return i?n.byteLength>=i.byteLength?t.bufferSubData(n.type,0,i,0,e._updateSize/i.BYTES_PER_ELEMENT):(n.byteLength=i.byteLength,t.bufferData(n.type,i,s)):(n.byteLength=e.descriptor.size,t.bufferData(n.type,n.byteLength,s)),n}destroyAll(e=!1){this._managedBuffers.removeAll(e)}onBufferUnload(e,t=!1){const n=e._gpuData[this._renderer.uid];n&&(t||this._gl.deleteBuffer(n.buffer))}createGLBuffer(e){const{_gl:t}=this;let n=hc.ARRAY_BUFFER;e.descriptor.usage&at.INDEX?n=hc.ELEMENT_ARRAY_BUFFER:e.descriptor.usage&at.UNIFORM&&(n=hc.UNIFORM_BUFFER);const i=new RU(t.createBuffer(),n);return e._gpuData[this._renderer.uid]=i,this._managedBuffers.add(e),i}resetState(){this._boundBufferBases=Object.create(null)}}rT.extension={type:[re.WebGLSystem],name:"buffer"};const Sm=class nT{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(e){e={...nT.defaultOptions,...e};let t=this.multiView=e.multiView;if(e.context&&t&&(Ne("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),t=!1),t?this.canvas=Ye.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{const n=this._renderer.background.alpha<1,i=e.premultipliedAlpha??!0,s=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:n,premultipliedAlpha:i,antialias:s,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference??"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&Ne("multiView is disabled, but targetCanvas is not the main canvas");return}const{canvas:t}=this;(t.width<e.width||t.height<e.height)&&(t.width=Math.max(e.width,e.width),t.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof Ye.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);const t=this._renderer.view.canvas;t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,t){let n;const i=this.canvas;if(e===2&&(n=i.getContext("webgl2",t)),!n&&(n=i.getContext("webgl",t),!n))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=n,this.initFromContext(this.gl)}getExtensions(){const{gl:e}=this,t={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...t,drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")};else{this.extensions={...t,colorBufferFloat:e.getExtension("EXT_color_buffer_float")};const n=e.getExtension("WEBGL_provoking_vertex");n&&n.provokingVertexWEBGL(n.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext?.restoreContext()},0))}handleContextRestored(){this.getExtensions(),this._renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this._renderer.view.canvas;this._renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(e){const t=e.getContextAttributes();t&&!t.stencil&&Ne("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=this.supports,i=this.webGLVersion===2,s=this.extensions;n.uint32Indices=i||!!s.uint32ElementIndex,n.uniformBufferObject=i,n.vertexArrayObject=i||!!s.vertexArrayObject,n.srgbTextures=i||!!s.srgb,n.nonPowOf2wrapping=i,n.nonPowOf2mipmaps=i,n.msaa=i,n.uint32Indices||Ne("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};Sm.extension={type:[re.WebGLSystem],name:"context"};Sm.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};let kU=Sm;function iT(r,e){for(const t in r.attributes){const n=r.attributes[t],i=e[t];i?(n.format??(n.format=i.format),n.offset??(n.offset=i.offset),n.instance??(n.instance=i.instance)):Ne(`Attribute ${t} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}MU(r)}function MU(r){const{buffers:e,attributes:t}=r,n={},i={};for(const s in e){const a=e[s];n[a.uid]=0,i[a.uid]=0}for(const s in t){const a=t[s];n[a.buffer.uid]+=es(a.format).stride}for(const s in t){const a=t[s];a.stride??(a.stride=n[a.buffer.uid]),a.start??(a.start=i[a.buffer.uid]),i[a.buffer.uid]+=es(a.format).stride}}var Hp=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(Hp||{}),sT=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(sT||{}),ct=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(ct||{});const fy={uint8x2:ct.UNSIGNED_BYTE,uint8x4:ct.UNSIGNED_BYTE,sint8x2:ct.BYTE,sint8x4:ct.BYTE,unorm8x2:ct.UNSIGNED_BYTE,unorm8x4:ct.UNSIGNED_BYTE,snorm8x2:ct.BYTE,snorm8x4:ct.BYTE,uint16x2:ct.UNSIGNED_SHORT,uint16x4:ct.UNSIGNED_SHORT,sint16x2:ct.SHORT,sint16x4:ct.SHORT,unorm16x2:ct.UNSIGNED_SHORT,unorm16x4:ct.UNSIGNED_SHORT,snorm16x2:ct.SHORT,snorm16x4:ct.SHORT,float16x2:ct.HALF_FLOAT,float16x4:ct.HALF_FLOAT,float32:ct.FLOAT,float32x2:ct.FLOAT,float32x3:ct.FLOAT,float32x4:ct.FLOAT,uint32:ct.UNSIGNED_INT,uint32x2:ct.UNSIGNED_INT,uint32x3:ct.UNSIGNED_INT,uint32x4:ct.UNSIGNED_INT,sint32:ct.INT,sint32x2:ct.INT,sint32x3:ct.INT,sint32x4:ct.INT};function OU(r){return fy[r]??fy.float32}const IU={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};class BU{constructor(){this.vaoCache=Object.create(null)}destroy(){this.vaoCache=Object.create(null)}}class aT{constructor(e){this._renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._managedGeometries=new Wr({renderer:e,type:"resource",onUnload:this.onGeometryUnload.bind(this),name:"glGeometry"})}contextChange(){const e=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");this.destroyAll(!0);const t=this._renderer.context.extensions.vertexArrayObject;t&&(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=i=>t.bindVertexArrayOES(i),e.deleteVertexArray=i=>t.deleteVertexArrayOES(i));const n=this._renderer.context.extensions.vertexAttribDivisorANGLE;n&&(e.drawArraysInstanced=(i,s,a,o)=>{n.drawArraysInstancedANGLE(i,s,a,o)},e.drawElementsInstanced=(i,s,a,o,l)=>{n.drawElementsInstancedANGLE(i,s,a,o,l)},e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s)),this._activeGeometry=null,this._activeVao=null}bind(e,t){const n=this.gl;this._activeGeometry=e;const i=this.getVao(e,t);this._activeVao!==i&&(this._activeVao=i,n.bindVertexArray(i)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this._renderer.buffer;for(let n=0;n<e.buffers.length;n++){const i=e.buffers[n];t.updateBuffer(i)}e._gcLastUsed=this._renderer.gc.now}checkCompatibility(e,t){const n=e.attributes,i=t._attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const n=e.attributes,i=t._attributeData,s=["g",e.uid];for(const a in n)i[a]&&s.push(a,i[a].location);return s.join("-")}getVao(e,t){return e._gpuData[this._renderer.uid]?.vaoCache[t._key]||this.initGeometryVao(e,t)}initGeometryVao(e,t,n=!0){const i=this._renderer.gl,s=this._renderer.buffer;this._renderer.shader._getProgramData(t),this.checkCompatibility(e,t);const a=this.getSignature(e,t),o=new BU;e._gpuData[this._renderer.uid]=o,this._managedGeometries.add(e);const l=o.vaoCache;let u=l[a];if(u)return l[t._key]=u,u;iT(e,t._attributeData);const c=e.buffers;u=i.createVertexArray(),i.bindVertexArray(u);for(let f=0;f<c.length;f++){const h=c[f];s.bind(h)}return this.activateVao(e,t),l[t._key]=u,l[a]=u,i.bindVertexArray(null),u}onGeometryUnload(e,t=!1){const n=e._gpuData[this._renderer.uid];if(!n)return;const i=n.vaoCache;if(!t)for(const s in i)this._activeVao!==i[s]&&this.resetState(),this.gl.deleteVertexArray(i[s])}destroyAll(e=!1){this._managedGeometries.removeAll(e)}activateVao(e,t){const n=this._renderer.gl,i=this._renderer.buffer,s=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);let a=null;for(const o in s){const l=s[o],u=l.buffer,c=i.getGlBuffer(u),f=t._attributeData[o];if(f){a!==c&&(i.bind(u),a=c);const h=f.location;n.enableVertexAttribArray(h);const d=es(l.format),p=OU(l.format);if(f.format?.substring(1,4)==="int"?n.vertexAttribIPointer(h,d.size,p,l.stride,l.offset):n.vertexAttribPointer(h,d.size,p,d.normalised,l.stride,l.offset),l.instance)if(this.hasInstance){const v=l.divisor??1;n.vertexAttribDivisor(h,v)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,n,i){const{gl:s}=this._renderer,a=this._activeGeometry,o=IU[e||a.topology];if(i??(i=a.instanceCount),a.indexBuffer){const l=a.indexBuffer.data.BYTES_PER_ELEMENT,u=l===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;i!==1?s.drawElementsInstanced(o,t||a.indexBuffer.data.length,u,(n||0)*l,i):s.drawElements(o,t||a.indexBuffer.data.length,u,(n||0)*l)}else i!==1?s.drawArraysInstanced(o,n||0,t||a.getSize(),i):s.drawArrays(o,n||0,t||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._managedGeometries.destroy(),this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}}aT.extension={type:[re.WebGLSystem],name:"geometry"};const FU=new Kl({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),Tm=class oT{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(e={}){const{useBackBuffer:t,antialias:n}={...oT.defaultOptions,...e};this.useBackBuffer=t,this._antialias=n,this._renderer.context.supports.msaa||(Ne("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Pn.for2d();const i=new sr({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new dn({glProgram:i,resources:{uTexture:Re.WHITE.source}})}renderStart(e){const t=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!t.isRoot,this._useBackBufferThisRender){const n=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=n.colorTexture,e.target=this._getBackBufferTexture(n.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){const e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:FU,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new Re({source:new Wt({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};Tm.extension={type:[re.WebGLSystem],name:"backBuffer",priority:1};Tm.defaultOptions={useBackBuffer:!1};let DU=Tm;class lT{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.gl.colorMask(!!(e&8),!!(e&4),!!(e&2),!!(e&1)))}}lT.extension={type:[re.WebGLSystem],name:"colorMask"};class uT{constructor(e){this.commandFinished=Promise.resolve(),this._renderer=e}setGeometry(e,t){this._renderer.geometry.bind(e,t.glProgram)}finishRenderPass(){}draw(e){const t=this._renderer,{geometry:n,shader:i,state:s,skipSync:a,topology:o,size:l,start:u,instanceCount:c}=e;t.shader.bind(i,a),t.geometry.bind(n,t.shader._activeProgram),s&&t.state.set(s),t.geometry.draw(o,l,u,c??n.instanceCount)}destroy(){this._renderer=null}}uT.extension={type:[re.WebGLSystem],name:"encoder"};class cT{constructor(e){this._renderer=e}contextChange(){const e=this._renderer.gl;this.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxBatchableTextures=cS(this.maxTextures,e);const t=this._renderer.context.webGLVersion===2;this.maxUniformBindings=t?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0}destroy(){}}cT.extension={type:[re.WebGLSystem],name:"limits"};class LU{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}const ls=[];ls[Lt.NONE]=void 0;ls[Lt.DISABLED]={stencilWriteMask:0,stencilReadMask:0};ls[Lt.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}};ls[Lt.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}};ls[Lt.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}};ls[Lt.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"keep"},stencilBack:{compare:"not-equal",passOp:"keep"}};class fT{constructor(e){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:Lt.NONE},this._renderTargetStencilState=Object.create(null),e.renderTarget.onRenderTargetChange.add(this)}contextChange(e){this._gl=e,this._comparisonFuncMapping={always:e.ALWAYS,never:e.NEVER,equal:e.EQUAL,"not-equal":e.NOTEQUAL,less:e.LESS,"less-equal":e.LEQUAL,greater:e.GREATER,"greater-equal":e.GEQUAL},this._stencilOpsMapping={keep:e.KEEP,zero:e.ZERO,replace:e.REPLACE,invert:e.INVERT,"increment-clamp":e.INCR,"decrement-clamp":e.DECR,"increment-wrap":e.INCR_WRAP,"decrement-wrap":e.DECR_WRAP},this.resetState()}onRenderTargetChange(e){if(this._activeRenderTarget===e)return;this._activeRenderTarget=e;let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:Lt.DISABLED,stencilReference:0}),this.setStencilMode(t.stencilMode,t.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=Lt.NONE,this._stencilCache.stencilReference=0}setStencilMode(e,t){const n=this._renderTargetStencilState[this._activeRenderTarget.uid],i=this._gl,s=ls[e],a=this._stencilCache;if(n.stencilMode=e,n.stencilReference=t,e===Lt.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,i.disable(i.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,i.enable(i.STENCIL_TEST)),(e!==a.stencilMode||a.stencilReference!==t)&&(a.stencilMode=e,a.stencilReference=t,i.stencilFunc(this._comparisonFuncMapping[s.stencilBack.compare],t,255),i.stencilOp(i.KEEP,i.KEEP,this._stencilOpsMapping[s.stencilBack.passOp]))}}fT.extension={type:[re.WebGLSystem],name:"stencil"};class hT{constructor(e){this._syncFunctionHash=Object.create(null),this._adaptor=e,this._systemCheck()}_systemCheck(){if(!X2())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(e){const t=this.getUniformGroupData(e);e.buffer||(e.buffer=new Gr({data:new Float32Array(t.layout.size/4),usage:at.UNIFORM|at.COPY_DST}))}getUniformGroupData(e){return this._syncFunctionHash[e._signature]||this._initUniformGroup(e)}_initUniformGroup(e){const t=e._signature;let n=this._syncFunctionHash[t];if(!n){const i=Object.keys(e.uniformStructures).map(o=>e.uniformStructures[o]),s=this._adaptor.createUboElements(i),a=this._generateUboSync(s.uboElements);n=this._syncFunctionHash[t]={layout:s,syncFunction:a}}return this._syncFunctionHash[t]}_generateUboSync(e){return this._adaptor.generateUboSync(e)}syncUniformGroup(e,t,n){const i=this.getUniformGroupData(e);e.buffer||(e.buffer=new Gr({data:new Float32Array(i.layout.size/4),usage:at.UNIFORM|at.COPY_DST}));let s=null;return t||(t=e.buffer.data,s=e.buffer.dataInt32),n||(n=0),i.syncFunction(e.uniforms,t,s,n),!0}updateUniformGroup(e){if(e.isStatic&&!e._dirtyId)return!1;e._dirtyId=0;const t=this.syncUniformGroup(e);return e.buffer.update(),t}destroy(){this._syncFunctionHash=null}}const dT={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":16*2,"mat3x3<f32>":16*3,"mat4x4<f32>":16*4};function UU(r){const e=r.map(s=>({data:s,offset:0,size:0})),t=16;let n=0,i=0;for(let s=0;s<e.length;s++){const a=e[s];if(n=dT[a.data.type],!n)throw new Error(`Unknown type ${a.data.type}`);a.data.size>1&&(n=Math.max(n,t)*a.data.size);const o=n===12?16:n;a.size=n;const l=i%t;l>0&&t-l<o?i+=(t-l)%16:i+=(n-l%n)%n,a.offset=i,i+=n}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}const Ts=[{type:"mat3x3<f32>",test:r=>r.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:r=>r.type==="vec4<f32>"&&r.size===1&&r.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:r=>r.type==="vec2<f32>"&&r.size===1&&r.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:r=>r.type==="vec4<f32>"&&r.size===1&&r.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:r=>r.type==="vec3<f32>"&&r.size===1&&r.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}];function pT(r,e,t,n){const i=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `];let s=0;for(let o=0;o<r.length;o++){const l=r[o],u=l.data.name;let c=!1,f=0;for(let h=0;h<Ts.length;h++)if(Ts[h].test(l.data)){f=l.offset/4,i.push(`name = "${u}";`,`offset += ${f-s};`,Ts[h][e]||Ts[h].ubo),c=!0;break}if(!c)if(l.data.size>1)f=l.offset/4,i.push(t(l,f-s));else{const h=n[l.data.type];f=l.offset/4,i.push(`
                    v = uv.${u};
                    offset += ${f-s};
                    ${h};
                `)}s=f}const a=i.join(`
`);return new Function("uv","data","dataInt32","offset",a)}function fa(r,e){return`
        for (let i = 0; i < ${r*e}; i++) {
            data[offset + (((i / ${r})|0) * 4) + (i % ${r})] = v[i];
        }
    `}const gT={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":fa(3,2),"mat4x2<f32>":fa(4,2),"mat2x3<f32>":fa(2,3),"mat4x3<f32>":fa(4,3),"mat2x4<f32>":fa(2,4),"mat3x4<f32>":fa(3,4)},NU={...gT,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `};function GU(r,e){const t=Math.max(dT[r.data.type]/16,1),n=r.data.value.length/r.data.size,i=(4-n%4)%4,s=r.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${r.data.name};
        offset += ${e};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${r.data.size*t}; i++)
        {
            for(var j = 0; j < ${n}; j++)
            {
                ${s}[arrayOffset++] = v[t++];
            }
            ${i!==0?`arrayOffset += ${i};`:""}
        }
    `}function zU(r){return pT(r,"uboStd40",GU,gT)}class mT extends hT{constructor(){super({createUboElements:UU,generateUboSync:zU})}}mT.extension={type:[re.WebGLSystem],name:"ubo"};class jU{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new ft}init(e,t){this._renderer=e,this._renderTargetSystem=t,e.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new ft;const e=this._renderer.gl;this._drawBuffersCache=[];for(let t=1;t<=16;t++)this._drawBuffersCache[t]=Array.from({length:t},(n,i)=>e.COLOR_ATTACHMENT0+i)}copyToTexture(e,t,n,i,s){const a=this._renderTargetSystem,o=this._renderer,l=a.getGpuRenderTarget(e),u=o.gl;return this.finishRenderPass(e),u.bindFramebuffer(u.FRAMEBUFFER,l.resolveTargetFramebuffer),o.texture.bind(t,0),u.copyTexSubImage2D(u.TEXTURE_2D,0,s.x,s.y,n.x,n.y,i.width,i.height),t}startRenderPass(e,t=!0,n,i){const s=this._renderTargetSystem,a=e.colorTexture,o=s.getGpuRenderTarget(e);let l=i.y;e.isRoot&&(l=a.pixelHeight-i.height-i.y),e.colorTextures.forEach(f=>{this._renderer.texture.unbind(f)});const u=this._renderer.gl;u.bindFramebuffer(u.FRAMEBUFFER,o.framebuffer),e.colorTextures.length>1&&this._setDrawBuffers(e,u);const c=this._viewPortCache;(c.x!==i.x||c.y!==l||c.width!==i.width||c.height!==i.height)&&(c.x=i.x,c.y=l,c.width=i.width,c.height=i.height,u.viewport(i.x,l,i.width,i.height)),!o.depthStencilRenderBuffer&&(e.stencil||e.depth)&&this._initStencil(o),this.clear(e,t,n)}finishRenderPass(e){const n=this._renderTargetSystem.getGpuRenderTarget(e);if(!n.msaa)return;const i=this._renderer.gl;i.bindFramebuffer(i.FRAMEBUFFER,n.resolveTargetFramebuffer),i.bindFramebuffer(i.READ_FRAMEBUFFER,n.framebuffer),i.blitFramebuffer(0,0,n.width,n.height,0,0,n.width,n.height,i.COLOR_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)}initGpuRenderTarget(e){const n=this._renderer.gl,i=new LU;return e.colorTexture instanceof xi?(this._renderer.context.ensureCanvasSize(e.colorTexture.resource),i.framebuffer=null,i):(this._initColor(e,i),n.bindFramebuffer(n.FRAMEBUFFER,null),i)}destroyGpuRenderTarget(e){const t=this._renderer.gl;e.framebuffer&&(t.deleteFramebuffer(e.framebuffer),e.framebuffer=null),e.resolveTargetFramebuffer&&(t.deleteFramebuffer(e.resolveTargetFramebuffer),e.resolveTargetFramebuffer=null),e.depthStencilRenderBuffer&&(t.deleteRenderbuffer(e.depthStencilRenderBuffer),e.depthStencilRenderBuffer=null),e.msaaRenderBuffer.forEach(n=>{t.deleteRenderbuffer(n)}),e.msaaRenderBuffer=null}clear(e,t,n){if(!t)return;const i=this._renderTargetSystem;typeof t=="boolean"&&(t=t?Or.ALL:Or.NONE);const s=this._renderer.gl;if(t&Or.COLOR){n??(n=i.defaultClearColor);const a=this._clearColorCache,o=n;(a[0]!==o[0]||a[1]!==o[1]||a[2]!==o[2]||a[3]!==o[3])&&(a[0]=o[0],a[1]=o[1],a[2]=o[2],a[3]=o[3],s.clearColor(o[0],o[1],o[2],o[3]))}s.clear(t)}resizeGpuRenderTarget(e){if(e.isRoot)return;const n=this._renderTargetSystem.getGpuRenderTarget(e);this._resizeColor(e,n),(e.stencil||e.depth)&&this._resizeStencil(n)}_initColor(e,t){const n=this._renderer,i=n.gl,s=i.createFramebuffer();if(t.resolveTargetFramebuffer=s,i.bindFramebuffer(i.FRAMEBUFFER,s),t.width=e.colorTexture.source.pixelWidth,t.height=e.colorTexture.source.pixelHeight,e.colorTextures.forEach((o,l)=>{const u=o.source;u.antialias&&(n.context.supports.msaa?t.msaa=!0:Ne("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),n.texture.bindSource(u,0);const f=n.texture.getGlSource(u).texture;i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,3553,f,0)}),t.msaa){const o=i.createFramebuffer();t.framebuffer=o,i.bindFramebuffer(i.FRAMEBUFFER,o),e.colorTextures.forEach((l,u)=>{const c=i.createRenderbuffer();t.msaaRenderBuffer[u]=c})}else t.framebuffer=s;this._resizeColor(e,t)}_resizeColor(e,t){const n=e.colorTexture.source;if(t.width=n.pixelWidth,t.height=n.pixelHeight,e.colorTextures.forEach((i,s)=>{s!==0&&i.source.resize(n.width,n.height,n._resolution)}),t.msaa){const i=this._renderer,s=i.gl,a=t.framebuffer;s.bindFramebuffer(s.FRAMEBUFFER,a),e.colorTextures.forEach((o,l)=>{const u=o.source;i.texture.bindSource(u,0);const f=i.texture.getGlSource(u).internalFormat,h=t.msaaRenderBuffer[l];s.bindRenderbuffer(s.RENDERBUFFER,h),s.renderbufferStorageMultisample(s.RENDERBUFFER,4,f,u.pixelWidth,u.pixelHeight),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+l,s.RENDERBUFFER,h)})}}_initStencil(e){if(e.framebuffer===null)return;const t=this._renderer.gl,n=t.createRenderbuffer();e.depthStencilRenderBuffer=n,t.bindRenderbuffer(t.RENDERBUFFER,n),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,n),this._resizeStencil(e)}_resizeStencil(e){const t=this._renderer.gl;t.bindRenderbuffer(t.RENDERBUFFER,e.depthStencilRenderBuffer),e.msaa?t.renderbufferStorageMultisample(t.RENDERBUFFER,4,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,this._renderer.context.webGLVersion===2?t.DEPTH24_STENCIL8:t.DEPTH_STENCIL,e.width,e.height)}prerender(e){const t=e.colorTexture.resource;this._renderer.context.multiView&&xi.test(t)&&this._renderer.context.ensureCanvasSize(t)}postrender(e){if(this._renderer.context.multiView&&xi.test(e.colorTexture.resource)){const t=this._renderer.context.canvas,n=e.colorTexture;n.context2D.drawImage(t,0,n.pixelHeight-t.height)}}_setDrawBuffers(e,t){const n=e.colorTextures.length,i=this._drawBuffersCache[n];if(this._renderer.context.webGLVersion===1){const s=this._renderer.context.extensions.drawBuffers;s?s.drawBuffersWEBGL(i):Ne("[RenderTexture] This WebGL1 context does not support rendering to multiple targets")}else t.drawBuffers(i)}}function HU(r,e,t,n,i,s){const a=s?1:-1;return r.identity(),r.a=1/n*2,r.d=a*(1/i*2),r.tx=-1-e*r.a,r.ty=-a-t*r.d,r}const ga=new Map;Ro.register(ga);function vT(r,e){if(!ga.has(r)){const t=new Re({source:new xi({resource:r,...e})}),n=()=>{ga.get(r)===t&&ga.delete(r)};t.once("destroy",n),t.source.once("destroy",n),ga.set(r,t)}return ga.get(r)}function VU(r){const e=r.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}const _T=class bT{constructor(e={}){if(this.uid=Tt("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e={...bT.defaultOptions,...e},this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,typeof e.colorTextures=="number"){this._managedColorTextures=!0;for(let t=0;t<e.colorTextures;t++)this.colorTextures.push(new Wt({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(n=>n.source)];const t=this.colorTexture.source;this.resize(t.width,t.height,t._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof Re||e.depthStencilTexture instanceof Wt?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){const e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Wt({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(e,t,n=this.resolution,i=!1){this.dirtyId++,this.colorTextures.forEach((s,a)=>{i&&a===0||s.source.resize(e,t,n)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,t,n)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};_T.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};let Vp=_T;class yT{constructor(e){this.rootViewPort=new ft,this.viewport=new ft,this.onRenderTargetChange=new J2("onRenderTargetChange"),this.projectionMatrix=new Oe,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:e,clear:t,clearColor:n,frame:i}){this._renderTargetStack.length=0,this.push(e,t,n,i),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=VU(this.rootRenderTarget),this.adaptor.prerender?.(this.rootRenderTarget)}postrender(){this.adaptor.postrender?.(this.rootRenderTarget)}bind(e,t=!0,n,i){const s=this.getRenderTarget(e),a=this.renderTarget!==s;this.renderTarget=s,this.renderSurface=e;const o=this.getGpuRenderTarget(s);(s.pixelWidth!==o.width||s.pixelHeight!==o.height)&&(this.adaptor.resizeGpuRenderTarget(s),o.width=s.pixelWidth,o.height=s.pixelHeight);const l=s.colorTexture,u=this.viewport,c=l.pixelWidth,f=l.pixelHeight;if(!i&&e instanceof Re&&(i=e.frame),i){const h=l._resolution;u.x=i.x*h+.5|0,u.y=i.y*h+.5|0,u.width=i.width*h+.5|0,u.height=i.height*h+.5|0}else u.x=0,u.y=0,u.width=c,u.height=f;return HU(this.projectionMatrix,0,0,u.width/l.resolution,u.height/l.resolution,!s.isRoot),this.adaptor.startRenderPass(s,t,n,u),a&&this.onRenderTargetChange.emit(s),s}clear(e,t=Or.ALL,n){t&&(e&&(e=this.getRenderTarget(e)),this.adaptor.clear(e||this.renderTarget,t,n,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(e,t=Or.ALL,n,i){const s=this.bind(e,t,n,i);return this._renderTargetStack.push({renderTarget:s,frame:i}),s}pop(){this._renderTargetStack.pop();const e=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(e.renderTarget,!1,null,e.frame)}getRenderTarget(e){return e.isTexture&&(e=e.source),this._renderSurfaceToRenderTargetHash.get(e)??this._initRenderTarget(e)}copyToTexture(e,t,n,i,s){n.x<0&&(i.width+=n.x,s.x-=n.x,n.x=0),n.y<0&&(i.height+=n.y,s.y-=n.y,n.y=0);const{pixelWidth:a,pixelHeight:o}=e;return i.width=Math.min(i.width,a-n.x),i.height=Math.min(i.height,o-n.y),this.adaptor.copyToTexture(e,t,n,i,s)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((e,t)=>{e!==t&&e.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(e){let t=null;return xi.test(e)&&(e=vT(e).source),e instanceof Vp?t=e:e instanceof Wt&&(t=new Vp({colorTextures:[e]}),e.source instanceof xi&&(t.isRoot=!0),e.once("destroy",()=>{t.destroy(),this._renderSurfaceToRenderTargetHash.delete(e);const n=this._gpuRenderTargetHash[t.uid];n&&(this._gpuRenderTargetHash[t.uid]=null,this.adaptor.destroyGpuRenderTarget(n))})),this._renderSurfaceToRenderTargetHash.set(e,t),t}getGpuRenderTarget(e){return this._gpuRenderTargetHash[e.uid]||(this._gpuRenderTargetHash[e.uid]=this.adaptor.initGpuRenderTarget(e))}resetState(){this.renderTarget=null,this.renderSurface=null}}class xT extends yT{constructor(e){super(e),this.adaptor=new jU,this.adaptor.init(e,this)}}xT.extension={type:[re.WebGLSystem],name:"renderTarget"};class Em extends Vr{constructor({buffer:e,offset:t,size:n}){super(),this.uid=Tt("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=Tt("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=e,this.offset=t|0,this.size=n,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=Tt("resource"),this.emit("change",this)}destroy(e=!1){this.destroyed=!0,e&&this.buffer.destroy(),this.emit("change",this),this.buffer=null,this.removeAllListeners()}}function WU(r,e){const t=[],n=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `];let i=!1,s=0;const a=e._getProgramData(r.glProgram);for(const l in r.groups){const u=r.groups[l];t.push(`
            resources = g[${l}].resources;
        `);for(const c in u.resources){const f=u.resources[c];if(f instanceof mr)if(f.ubo){const h=r._uniformBindMap[l][Number(c)];t.push(`
                        sS.bindUniformBlock(
                            resources[${c}],
                            '${h}',
                            ${r.glProgram._uniformBlockData[h].index}
                        );
                    `)}else t.push(`
                        ugS.updateUniformGroup(resources[${c}], p, sD);
                    `);else if(f instanceof Em){const h=r._uniformBindMap[l][Number(c)];t.push(`
                    sS.bindUniformBlock(
                        resources[${c}],
                        '${h}',
                        ${r.glProgram._uniformBlockData[h].index}
                    );
                `)}else if(f instanceof Wt){const h=r._uniformBindMap[l][c],d=a.uniformData[h];d&&(i||(i=!0,n.push(`
                        var tS = r.texture;
                        `)),e._gl.uniform1i(d.location,s),t.push(`
                        tS.bind(resources[${c}], ${s});
                    `),s++)}}}const o=[...n,...t].join(`
`);return new Function("r","s","sD",o)}class qU{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}function hy(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}function Td(r){const e=new Array(r);for(let t=0;t<e.length;t++)e[t]=!1;return e}function wT(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Td(2*e);case"bvec3":return Td(3*e);case"bvec4":return Td(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}let ju=null;const dy={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},XU={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function ST(r,e){if(!ju){const t=Object.keys(dy);ju={};for(let n=0;n<t.length;++n){const i=t[n];ju[r[i]]=dy[i]}}return ju[e]}function YU(r,e){const t=ST(r,e);return XU[t]||"float32"}function $U(r,e,t=!1){const n={},i=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const o=e.getActiveAttrib(r,a);if(o.name.startsWith("gl_"))continue;const l=YU(e,o.type);n[o.name]={location:0,format:l,stride:es(l).stride,offset:0,instance:!1,start:0}}const s=Object.keys(n);if(t){s.sort((a,o)=>a>o?1:-1);for(let a=0;a<s.length;a++)n[s[a]].location=a,e.bindAttribLocation(r,a,s[a]);e.linkProgram(r)}else for(let a=0;a<s.length;a++)n[s[a]].location=e.getAttribLocation(r,s[a]);return n}function KU(r,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};const t={},n=e.getProgramParameter(r,e.ACTIVE_UNIFORM_BLOCKS);for(let i=0;i<n;i++){const s=e.getActiveUniformBlockName(r,i),a=e.getUniformBlockIndex(r,s),o=e.getActiveUniformBlockParameter(r,i,e.UNIFORM_BLOCK_DATA_SIZE);t[s]={name:s,index:a,size:o}}return t}function ZU(r,e){const t={},n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=e.getActiveUniform(r,i),a=s.name.replace(/\[.*?\]$/,""),o=!!s.name.match(/\[.*?\]$/),l=ST(e,s.type);t[a]={name:a,index:i,type:l,size:s.size,isArray:o,value:wT(l,s.size)}}return t}function py(r,e){const t=r.getShaderSource(e).split(`
`).map((u,c)=>`${c}: ${u}`),n=r.getShaderInfoLog(e),i=n.split(`
`),s={},a=i.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),o=[""];a.forEach(u=>{t[u-1]=`%c${t[u-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=t.join(`
`);o[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function JU(r,e,t,n){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||py(r,t),r.getShaderParameter(n,r.COMPILE_STATUS)||py(r,n),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}function QU(r,e){const t=hy(r,r.VERTEX_SHADER,e.vertex),n=hy(r,r.FRAGMENT_SHADER,e.fragment),i=r.createProgram();r.attachShader(i,t),r.attachShader(i,n);const s=e.transformFeedbackVaryings;s&&(typeof r.transformFeedbackVaryings!="function"?Ne("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS)||JU(r,i,t,n),e._attributeData=$U(i,r,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=ZU(i,r),e._uniformBlockData=KU(i,r),r.deleteShader(t),r.deleteShader(n);const a={};for(const l in e._uniformData){const u=e._uniformData[l];a[l]={location:r.getUniformLocation(i,l),value:wT(u.type,u.size)}}return new qU(i,a)}const Hu={textureCount:0,blockIndex:0};class TT{constructor(e){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=e}contextChange(e){this._gl=e,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null}bind(e,t){if(this._setProgram(e.glProgram),t)return;Hu.textureCount=0,Hu.blockIndex=0;let n=this._shaderSyncFunctions[e.glProgram._key];n||(n=this._shaderSyncFunctions[e.glProgram._key]=this._generateShaderSync(e,this)),this._renderer.buffer.nextBindBase(!!e.glProgram.transformFeedbackVaryings),n(this._renderer,e,Hu)}updateUniformGroup(e){this._renderer.uniformGroup.updateUniformGroup(e,this._activeProgram,Hu)}bindUniformBlock(e,t,n=0){const i=this._renderer.buffer,s=this._getProgramData(this._activeProgram),a=e._bufferResource;a||this._renderer.ubo.updateUniformGroup(e);const o=e.buffer,l=i.updateBuffer(o),u=i.freeLocationForBufferBase(l);if(a){const{offset:f,size:h}=e;f===0&&h===o.data.byteLength?i.bindBufferBase(l,u):i.bindBufferRange(l,u,f)}else i.getLastBindBaseLocation(l)!==u&&i.bindBufferBase(l,u);const c=this._activeProgram._uniformBlockData[t].index;s.uniformBlockBindings[n]!==u&&(s.uniformBlockBindings[n]=u,this._renderer.gl.uniformBlockBinding(s.program,c,u))}_setProgram(e){if(this._activeProgram===e)return;this._activeProgram=e;const t=this._getProgramData(e);this._gl.useProgram(t.program)}_getProgramData(e){return this._programDataHash[e._key]||this._createProgramData(e)}_createProgramData(e){const t=e._key;return this._programDataHash[t]=QU(this._gl,e),this._programDataHash[t]}destroy(){for(const e of Object.keys(this._programDataHash))this._programDataHash[e].destroy();this._programDataHash=null,this._shaderSyncFunctions=null,this._activeProgram=null,this._renderer=null,this._gl=null}_generateShaderSync(e,t){return WU(e,t)}resetState(){this._activeProgram=null}}TT.extension={type:[re.WebGLSystem],name:"shader"};const e7={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},t7={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function r7(r,e){const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(const n in r.uniforms){if(!e[n]){r.uniforms[n]instanceof mr?r.uniforms[n].ubo?t.push(`
                        renderer.shader.bindUniformBlock(uv.${n}, "${n}");
                    `):t.push(`
                        renderer.shader.updateUniformGroup(uv.${n});
                    `):r.uniforms[n]instanceof Em&&t.push(`
                        renderer.shader.bindBufferResource(uv.${n}, "${n}");
                    `);continue}const i=r.uniformStructures[n];let s=!1;for(let a=0;a<Ts.length;a++){const o=Ts[a];if(i.type===o.type&&o.test(i)){t.push(`name = "${n}";`,Ts[a].uniform),s=!0;break}}if(!s){const o=(i.size===1?e7:t7)[i.type].replace("location",`ud["${n}"].location`);t.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${o};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}class ET{constructor(e){this._cache={},this._uniformGroupSyncHash={},this._renderer=e,this.gl=null,this._cache={}}contextChange(e){this.gl=e}updateUniformGroup(e,t,n){const i=this._renderer.shader._getProgramData(t);(!e.isStatic||e._dirtyId!==i.uniformDirtyGroups[e.uid])&&(i.uniformDirtyGroups[e.uid]=e._dirtyId,this._getUniformSyncFunction(e,t)(i.uniformData,e.uniforms,this._renderer,n))}_getUniformSyncFunction(e,t){return this._uniformGroupSyncHash[e._signature]?.[t._key]||this._createUniformSyncFunction(e,t)}_createUniformSyncFunction(e,t){const n=this._uniformGroupSyncHash[e._signature]||(this._uniformGroupSyncHash[e._signature]={}),i=this._getSignature(e,t._uniformData,"u");return this._cache[i]||(this._cache[i]=this._generateUniformsSync(e,t._uniformData)),n[t._key]=this._cache[i],n[t._key]}_generateUniformsSync(e,t){return r7(e,t)}_getSignature(e,t,n){const i=e.uniforms,s=[`${n}-`];for(const a in i)s.push(a),t[a]&&s.push(t[a].type);return s.join("-")}destroy(){this._renderer=null,this._cache=null}}ET.extension={type:[re.WebGLSystem],name:"uniformGroup"};function n7(r){const e={};if(e.normal=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e.add=[r.ONE,r.ONE],e.multiply=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e.screen=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e["screen-npm"]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e.erase=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],!(r instanceof Ye.get().getWebGLRenderingContext()))e.min=[r.ONE,r.ONE,r.ONE,r.ONE,r.MIN,r.MIN],e.max=[r.ONE,r.ONE,r.ONE,r.ONE,r.MAX,r.MAX];else{const n=r.getExtension("EXT_blend_minmax");n&&(e.min=[r.ONE,r.ONE,r.ONE,r.ONE,n.MIN_EXT,n.MIN_EXT],e.max=[r.ONE,r.ONE,r.ONE,r.ONE,n.MAX_EXT,n.MAX_EXT])}return e}const i7=0,s7=1,a7=2,o7=3,l7=4,u7=5,AT=class Wp{constructor(e){this._invertFrontFace=!1,this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[i7]=this.setBlend,this.map[s7]=this.setOffset,this.map[a7]=this.setCullFace,this.map[o7]=this.setDepthTest,this.map[l7]=this.setFrontFace,this.map[u7]=this.setDepthMask,this.checks=[],this.defaultState=Pn.for2d(),e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){this._invertFrontFace=!e.isRoot,this._cullFace?this.setFrontFace(this._frontFace):this._frontFaceDirty=!0}contextChange(e){this.gl=e,this.blendModesMap=n7(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let t=this.stateId^e.data,n=0;for(;t;)t&1&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e||(e=this.defaultState);for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this._updateCheck(Wp._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(Wp._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this._cullFace=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE),this._cullFace&&this._frontFaceDirty&&this.setFrontFace(this._frontFace)}setFrontFace(e){this._frontFace=e,this._frontFaceDirty=!1;const t=this._invertFrontFace?!e:e;this._glFrontFace!==t&&(this._glFrontFace=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;const t=this.blendModesMap[e],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}resetState(){this._glFrontFace=!1,this._frontFace=!1,this._cullFace=!1,this._frontFaceDirty=!1,this._invertFrontFace=!1,this.gl.frontFace(this.gl.CCW),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,t){const n=this.checks.indexOf(e);t&&n===-1?this.checks.push(e):!t&&n!==-1&&this.checks.splice(n,1)}static _checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static _checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};AT.extension={type:[re.WebGLSystem],name:"state"};let c7=AT;class f7{constructor(e){this.target=sT.TEXTURE_2D,this.texture=e,this.width=-1,this.height=-1,this.type=ct.UNSIGNED_BYTE,this.internalFormat=Hp.RGBA,this.format=Hp.RGBA,this.samplerType=0}destroy(){}}const h7={id:"buffer",upload(r,e,t){e.width===r.width||e.height===r.height?t.texSubImage2D(t.TEXTURE_2D,0,0,0,r.width,r.height,e.format,e.type,r.resource):t.texImage2D(e.target,0,e.internalFormat,r.width,r.height,0,e.format,e.type,r.resource),e.width=r.width,e.height=r.height}},d7={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},p7={id:"compressed",upload(r,e,t){t.pixelStorei(t.UNPACK_ALIGNMENT,4);let n=r.pixelWidth,i=r.pixelHeight;const s=!!d7[r.format];for(let a=0;a<r.resource.length;a++){const o=r.resource[a];s?t.compressedTexImage2D(t.TEXTURE_2D,a,e.internalFormat,n,i,0,o):t.texImage2D(t.TEXTURE_2D,a,e.internalFormat,n,i,0,e.format,e.type,o),n=Math.max(n>>1,1),i=Math.max(i>>1,1)}}},CT={id:"image",upload(r,e,t,n){const i=e.width,s=e.height,a=r.pixelWidth,o=r.pixelHeight,l=r.resourceWidth,u=r.resourceHeight;l<a||u<o?((i!==a||s!==o)&&t.texImage2D(e.target,0,e.internalFormat,a,o,0,e.format,e.type,null),n===2?t.texSubImage2D(t.TEXTURE_2D,0,0,0,l,u,e.format,e.type,r.resource):t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,r.resource)):i===a&&s===o?t.texSubImage2D(t.TEXTURE_2D,0,0,0,e.format,e.type,r.resource):n===2?t.texImage2D(e.target,0,e.internalFormat,a,o,0,e.format,e.type,r.resource):t.texImage2D(e.target,0,e.internalFormat,e.format,e.type,r.resource),e.width=a,e.height=o}},g7={id:"video",upload(r,e,t,n){if(!r.isValid){t.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null);return}CT.upload(r,e,t,n)}},gy={linear:9729,nearest:9728},m7={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},Ed={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},v7={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function my(r,e,t,n,i,s,a,o){const l=s;if(!o||r.addressModeU!=="repeat"||r.addressModeV!=="repeat"||r.addressModeW!=="repeat"){const u=Ed[a?"clamp-to-edge":r.addressModeU],c=Ed[a?"clamp-to-edge":r.addressModeV],f=Ed[a?"clamp-to-edge":r.addressModeW];e[i](l,e.TEXTURE_WRAP_S,u),e[i](l,e.TEXTURE_WRAP_T,c),e.TEXTURE_WRAP_R&&e[i](l,e.TEXTURE_WRAP_R,f)}if((!o||r.magFilter!=="linear")&&e[i](l,e.TEXTURE_MAG_FILTER,gy[r.magFilter]),t){if(!o||r.mipmapFilter!=="linear"){const u=m7[r.minFilter][r.mipmapFilter];e[i](l,e.TEXTURE_MIN_FILTER,u)}}else e[i](l,e.TEXTURE_MIN_FILTER,gy[r.minFilter]);if(n&&r.maxAnisotropy>1){const u=Math.min(r.maxAnisotropy,e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[i](l,n.TEXTURE_MAX_ANISOTROPY_EXT,u)}r.compare&&e[i](l,e.TEXTURE_COMPARE_FUNC,v7[r.compare])}function _7(r){return{r8unorm:r.RED,r8snorm:r.RED,r8uint:r.RED,r8sint:r.RED,r16uint:r.RED,r16sint:r.RED,r16float:r.RED,rg8unorm:r.RG,rg8snorm:r.RG,rg8uint:r.RG,rg8sint:r.RG,r32uint:r.RED,r32sint:r.RED,r32float:r.RED,rg16uint:r.RG,rg16sint:r.RG,rg16float:r.RG,rgba8unorm:r.RGBA,"rgba8unorm-srgb":r.RGBA,rgba8snorm:r.RGBA,rgba8uint:r.RGBA,rgba8sint:r.RGBA,bgra8unorm:r.RGBA,"bgra8unorm-srgb":r.RGBA,rgb9e5ufloat:r.RGB,rgb10a2unorm:r.RGBA,rg11b10ufloat:r.RGB,rg32uint:r.RG,rg32sint:r.RG,rg32float:r.RG,rgba16uint:r.RGBA,rgba16sint:r.RGBA,rgba16float:r.RGBA,rgba32uint:r.RGBA,rgba32sint:r.RGBA,rgba32float:r.RGBA,stencil8:r.STENCIL_INDEX8,depth16unorm:r.DEPTH_COMPONENT,depth24plus:r.DEPTH_COMPONENT,"depth24plus-stencil8":r.DEPTH_STENCIL,depth32float:r.DEPTH_COMPONENT,"depth32float-stencil8":r.DEPTH_STENCIL}}function b7(r,e){let t={},n=r.RGBA;return r instanceof Ye.get().getWebGLRenderingContext()?e.srgb&&(t={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(t={"rgba8unorm-srgb":r.SRGB8_ALPHA8,"bgra8unorm-srgb":r.SRGB8_ALPHA8},n=r.RGBA8),{r8unorm:r.R8,r8snorm:r.R8_SNORM,r8uint:r.R8UI,r8sint:r.R8I,r16uint:r.R16UI,r16sint:r.R16I,r16float:r.R16F,rg8unorm:r.RG8,rg8snorm:r.RG8_SNORM,rg8uint:r.RG8UI,rg8sint:r.RG8I,r32uint:r.R32UI,r32sint:r.R32I,r32float:r.R32F,rg16uint:r.RG16UI,rg16sint:r.RG16I,rg16float:r.RG16F,rgba8unorm:r.RGBA,...t,rgba8snorm:r.RGBA8_SNORM,rgba8uint:r.RGBA8UI,rgba8sint:r.RGBA8I,bgra8unorm:n,rgb9e5ufloat:r.RGB9_E5,rgb10a2unorm:r.RGB10_A2,rg11b10ufloat:r.R11F_G11F_B10F,rg32uint:r.RG32UI,rg32sint:r.RG32I,rg32float:r.RG32F,rgba16uint:r.RGBA16UI,rgba16sint:r.RGBA16I,rgba16float:r.RGBA16F,rgba32uint:r.RGBA32UI,rgba32sint:r.RGBA32I,rgba32float:r.RGBA32F,stencil8:r.STENCIL_INDEX8,depth16unorm:r.DEPTH_COMPONENT16,depth24plus:r.DEPTH_COMPONENT24,"depth24plus-stencil8":r.DEPTH24_STENCIL8,depth32float:r.DEPTH_COMPONENT32F,"depth32float-stencil8":r.DEPTH32F_STENCIL8,...e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}function y7(r){return{r8unorm:r.UNSIGNED_BYTE,r8snorm:r.BYTE,r8uint:r.UNSIGNED_BYTE,r8sint:r.BYTE,r16uint:r.UNSIGNED_SHORT,r16sint:r.SHORT,r16float:r.HALF_FLOAT,rg8unorm:r.UNSIGNED_BYTE,rg8snorm:r.BYTE,rg8uint:r.UNSIGNED_BYTE,rg8sint:r.BYTE,r32uint:r.UNSIGNED_INT,r32sint:r.INT,r32float:r.FLOAT,rg16uint:r.UNSIGNED_SHORT,rg16sint:r.SHORT,rg16float:r.HALF_FLOAT,rgba8unorm:r.UNSIGNED_BYTE,"rgba8unorm-srgb":r.UNSIGNED_BYTE,rgba8snorm:r.BYTE,rgba8uint:r.UNSIGNED_BYTE,rgba8sint:r.BYTE,bgra8unorm:r.UNSIGNED_BYTE,"bgra8unorm-srgb":r.UNSIGNED_BYTE,rgb9e5ufloat:r.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:r.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:r.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:r.UNSIGNED_INT,rg32sint:r.INT,rg32float:r.FLOAT,rgba16uint:r.UNSIGNED_SHORT,rgba16sint:r.SHORT,rgba16float:r.HALF_FLOAT,rgba32uint:r.UNSIGNED_INT,rgba32sint:r.INT,rgba32float:r.FLOAT,stencil8:r.UNSIGNED_BYTE,depth16unorm:r.UNSIGNED_SHORT,depth24plus:r.UNSIGNED_INT,"depth24plus-stencil8":r.UNSIGNED_INT_24_8,depth32float:r.FLOAT,"depth32float-stencil8":r.FLOAT_32_UNSIGNED_INT_24_8_REV}}const x7=4;class PT{constructor(e){this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:CT,buffer:h7,video:g7,compressed:p7},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=e,this._managedTextures=new Wr({renderer:e,type:"resource",onUnload:this.onSourceUnload.bind(this),name:"glTexture"})}get managedTextures(){return Object.values(this._managedTextures.items)}contextChange(e){this._gl=e,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=b7(e,this._renderer.context.extensions),this._mapFormatToType=y7(e),this._mapFormatToFormat=_7(e)),this._managedTextures.removeAll(!0),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let t=0;t<16;t++)this.bind(Re.EMPTY,t)}initSource(e){this.bind(e)}bind(e,t=0){const n=e.source;e?(this.bindSource(n,t),this._useSeparateSamplers&&this._bindSampler(n.style,t)):(this.bindSource(null,t),this._useSeparateSamplers&&this._bindSampler(null,t))}bindSource(e,t=0){const n=this._gl;if(e._gcLastUsed=this._renderer.gc.now,this._boundTextures[t]!==e){this._boundTextures[t]=e,this._activateLocation(t),e||(e=Re.EMPTY.source);const i=this.getGlSource(e);n.bindTexture(i.target,i.texture)}}_bindSampler(e,t=0){const n=this._gl;if(!e){this._boundSamplers[t]=null,n.bindSampler(t,null);return}const i=this._getGlSampler(e);this._boundSamplers[t]!==i&&(this._boundSamplers[t]=i,n.bindSampler(t,i))}unbind(e){const t=e.source,n=this._boundTextures,i=this._gl;for(let s=0;s<n.length;s++)if(n[s]===t){this._activateLocation(s);const a=this.getGlSource(t);i.bindTexture(a.target,null),n[s]=null}}_activateLocation(e){this._activeTextureLocation!==e&&(this._activeTextureLocation=e,this._gl.activeTexture(this._gl.TEXTURE0+e))}_initSource(e){const t=this._gl,n=new f7(t.createTexture());if(n.type=this._mapFormatToType[e.format],n.internalFormat=this._mapFormatToInternalFormat[e.format],n.format=this._mapFormatToFormat[e.format],e.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||e.isPowerOfTwo)){const s=Math.max(e.width,e.height);e.mipLevelCount=Math.floor(Math.log2(s))+1}return e._gpuData[this._renderer.uid]=n,this._managedTextures.add(e)&&(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceUpdate,this),e.on("styleChange",this.onStyleChange,this),e.on("updateMipmaps",this.onUpdateMipmaps,this)),this.onSourceUpdate(e),this.updateStyle(e,!1),n}onStyleChange(e){this.updateStyle(e,!1)}updateStyle(e,t){const n=this._gl,i=this.getGlSource(e);n.bindTexture(n.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=e,my(e.style,n,e.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",n.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!e.isPowerOfTwo,t)}onSourceUnload(e,t=!1){const n=e._gpuData[this._renderer.uid];n&&(t||(this.unbind(e),this._gl.deleteTexture(n.texture)),e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceUpdate,this),e.off("styleChange",this.onStyleChange,this),e.off("updateMipmaps",this.onUpdateMipmaps,this))}onSourceUpdate(e){const t=this._gl,n=this.getGlSource(e);t.bindTexture(t.TEXTURE_2D,n.texture),this._boundTextures[this._activeTextureLocation]=e;const i=e.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==i&&(this._premultiplyAlpha=i,t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i)),this._uploads[e.uploadMethodId]?this._uploads[e.uploadMethodId].upload(e,n,t,this._renderer.context.webGLVersion):t.texImage2D(t.TEXTURE_2D,0,n.internalFormat,e.pixelWidth,e.pixelHeight,0,n.format,n.type,null),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e,!1)}onUpdateMipmaps(e,t=!0){t&&this.bindSource(e,0);const n=this.getGlSource(e);this._gl.generateMipmap(n.target)}_initSampler(e){const t=this._gl,n=this._gl.createSampler();return this._glSamplers[e._resourceId]=n,my(e,t,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",n,!1,!0),this._glSamplers[e._resourceId]}_getGlSampler(e){return this._glSamplers[e._resourceId]||this._initSampler(e)}getGlSource(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]||this._initSource(e)}generateCanvas(e){const{pixels:t,width:n,height:i}=this.getPixels(e),s=Ye.get().createCanvas();s.width=n,s.height=i;const a=s.getContext("2d");if(a){const o=a.createImageData(n,i);o.data.set(t),a.putImageData(o,0,0)}return s}getPixels(e){const t=e.source.resolution,n=e.frame,i=Math.max(Math.round(n.width*t),1),s=Math.max(Math.round(n.height*t),1),a=new Uint8Array(x7*i*s),o=this._renderer,l=o.renderTarget.getRenderTarget(e),u=o.renderTarget.getGpuRenderTarget(l),c=o.gl;return c.bindFramebuffer(c.FRAMEBUFFER,u.resolveTargetFramebuffer),c.readPixels(Math.round(n.x*t),Math.round(n.y*t),i,s,c.RGBA,c.UNSIGNED_BYTE,a),{pixels:new Uint8ClampedArray(a.buffer),width:i,height:s}}destroy(){this._managedTextures.destroy(),this._glSamplers=null,this._boundTextures=null,this._boundSamplers=null,this._mapFormatToInternalFormat=null,this._mapFormatToType=null,this._mapFormatToFormat=null,this._uploads=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(Re.EMPTY.source),this._boundSamplers=Object.create(null);const e=this._gl;this._premultiplyAlpha=!1,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha)}}PT.extension={type:[re.WebGLSystem],name:"texture"};class RT{contextChange(e){const t=new mr({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Oe,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),n=e.limits.maxBatchableTextures,i=Jl({name:"graphics",bits:[am,lm(n),wm,eu]});this.shader=new dn({glProgram:i,resources:{localUniforms:t,batchSamplers:um(n)}})}execute(e,t){const n=t.context,i=n.customShader||this.shader,s=e.renderer,a=s.graphicsContext,{batcher:o,instructions:l}=a.getContextRenderData(n);i.groups[0]=s.globalUniforms.bindGroup,s.state.set(e.state),s.shader.bind(i),s.geometry.bind(o.geometry,i.glProgram);const u=l.instructions;for(let c=0;c<l.instructionSize;c++){const f=u[c];if(f.size){for(let h=0;h<f.textures.count;h++)s.texture.bind(f.textures.textures[h],h);s.geometry.draw(f.topology,f.size,f.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}RT.extension={type:[re.WebGLPipesAdaptor],name:"graphics"};class kT{init(){const e=Jl({name:"mesh",bits:[wm,AU,eu]});this._shader=new dn({glProgram:e,resources:{uTexture:Re.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Oe}}}})}execute(e,t){const n=e.renderer;let i=t._shader;if(i){if(!i.glProgram){Ne("Mesh shader has no glProgram",t.shader);return}}else{i=this._shader;const s=t.texture,a=s.source;i.resources.uTexture=a,i.resources.uSampler=a.style,i.resources.textureUniforms.uniforms.uTextureMatrix=s.textureMatrix.mapCoord}i.groups[100]=n.globalUniforms.bindGroup,i.groups[101]=e.localUniformsBindGroup,n.encoder.draw({geometry:t._geometry,shader:i,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}}kT.extension={type:[re.WebGLPipesAdaptor],name:"mesh"};class MT{constructor(e){this._renderer=e}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(e,t){this._renderer.renderPipes.batch.break(t),t.add(e)}execute(e){e.isRenderable&&e.render(this._renderer)}destroy(){this._renderer=null}}MT.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"customRender"};class Sf{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){this.reset()}}function qp(r,e){const t=r.instructionSet,n=t.instructions;for(let i=0;i<t.instructionSize;i++){const s=n[i];e[s.renderPipeId].execute(s)}}const w7=new Oe;class OT{constructor(e){this._renderer=e}addRenderGroup(e,t){e.isCachedAsTexture?this._addRenderableCacheAsTexture(e,t):this._addRenderableDirect(e,t)}execute(e){e.isRenderable&&(e.isCachedAsTexture?this._executeCacheAsTexture(e):this._executeDirect(e))}destroy(){this._renderer=null}_addRenderableDirect(e,t){this._renderer.renderPipes.batch.break(t),e._batchableRenderGroup&&(jt.return(e._batchableRenderGroup),e._batchableRenderGroup=null),t.add(e)}_addRenderableCacheAsTexture(e,t){const n=e._batchableRenderGroup??(e._batchableRenderGroup=jt.get(Sf));n.renderable=e.root,n.transform=e.root.relativeGroupTransform,n.texture=e.texture,n.bounds=e._textureBounds,t.add(e),this._renderer.renderPipes.blendMode.pushBlendMode(e,e.root.groupBlendMode,t),this._renderer.renderPipes.batch.addToBatch(n,t),this._renderer.renderPipes.blendMode.popBlendMode(t)}_executeCacheAsTexture(e){if(e.textureNeedsUpdate){e.textureNeedsUpdate=!1;const t=w7.identity().translate(-e._textureBounds.x,-e._textureBounds.y);this._renderer.renderTarget.push(e.texture,!0,null,e.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:t,worldColor:4294967295,offset:{x:0,y:0}}),qp(e,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}e._batchableRenderGroup._batcher.updateElement(e._batchableRenderGroup),e._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(e){this._renderer.globalUniforms.push({worldTransformMatrix:e.inverseParentTextureTransform,worldColor:e.worldColorAlpha}),qp(e,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}}OT.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"renderGroup"};function Xp(r,e){e||(e=0);for(let t=e;t<r.length&&r[t];t++)r[t]=null}const S7=new et,vy=cl|jc|Zg;function IT(r,e=!1){T7(r);const t=r.childrenToUpdate,n=r.updateTick++;for(const i in t){const s=Number(i),a=t[i],o=a.list,l=a.index;for(let u=0;u<l;u++){const c=o[u];c.parentRenderGroup===r&&c.relativeRenderGroupDepth===s&&BT(c,n,0)}Xp(o,l),a.index=0}if(e)for(let i=0;i<r.renderGroupChildren.length;i++)IT(r.renderGroupChildren[i],e)}function T7(r){const e=r.root;let t;if(r.renderGroupParent){const n=r.renderGroupParent;r.worldTransform.appendFrom(e.relativeGroupTransform,n.worldTransform),r.worldColor=zc(e.groupColor,n.worldColor),t=e.groupAlpha*n.worldAlpha}else r.worldTransform.copyFrom(e.localTransform),r.worldColor=e.localColor,t=e.localAlpha;t=t<0?0:t>1?1:t,r.worldAlpha=t,r.worldColorAlpha=r.worldColor+((t*255|0)<<24)}function BT(r,e,t){if(e===r.updateTick)return;r.updateTick=e,r.didChange=!1;const n=r.localTransform;r.updateLocalTransform();const i=r.parent;if(i&&!i.renderGroup?(t|=r._updateFlags,r.relativeGroupTransform.appendFrom(n,i.relativeGroupTransform),t&vy&&_y(r,i,t)):(t=r._updateFlags,r.relativeGroupTransform.copyFrom(n),t&vy&&_y(r,S7,t)),!r.renderGroup){const s=r.children,a=s.length;for(let u=0;u<a;u++)BT(s[u],e,t);const o=r.parentRenderGroup,l=r;l.renderPipeId&&!o.structureDidChange&&o.updateRenderable(l)}}function _y(r,e,t){if(t&jc){r.groupColor=zc(r.localColor,e.groupColor);let n=r.localAlpha*e.groupAlpha;n=n<0?0:n>1?1:n,r.groupAlpha=n,r.groupColorAlpha=r.groupColor+((n*255|0)<<24)}t&Zg&&(r.groupBlendMode=r.localBlendMode==="inherit"?e.groupBlendMode:r.localBlendMode),t&cl&&(r.globalDisplayStatus=r.localDisplayStatus&e.globalDisplayStatus),r._updateFlags=0}function E7(r,e){const{list:t}=r.childrenRenderablesToUpdate;let n=!1;for(let i=0;i<r.childrenRenderablesToUpdate.index;i++){const s=t[i];if(n=e[s.renderPipeId].validateRenderable(s),n)break}return r.structureDidChange=n,n}const A7=new Oe;class FT{constructor(e){this._renderer=e}render({container:e,transform:t}){const n=e.parent,i=e.renderGroup.renderGroupParent;e.parent=null,e.renderGroup.renderGroupParent=null;const s=this._renderer,a=A7;t&&(a.copyFrom(e.renderGroup.localTransform),e.renderGroup.localTransform.copyFrom(t));const o=s.renderPipes;this._updateCachedRenderGroups(e.renderGroup,null),this._updateRenderGroups(e.renderGroup),s.globalUniforms.start({worldTransformMatrix:t?e.renderGroup.localTransform:e.renderGroup.worldTransform,worldColor:e.renderGroup.worldColorAlpha}),qp(e.renderGroup,o),o.uniformBatch&&o.uniformBatch.renderEnd(),t&&e.renderGroup.localTransform.copyFrom(a),e.parent=n,e.renderGroup.renderGroupParent=i}destroy(){this._renderer=null}_updateCachedRenderGroups(e,t){if(e._parentCacheAsTextureRenderGroup=t,e.isCachedAsTexture){if(!e.textureNeedsUpdate)return;t=e}for(let n=e.renderGroupChildren.length-1;n>=0;n--)this._updateCachedRenderGroups(e.renderGroupChildren[n],t);if(e.invalidateMatrices(),e.isCachedAsTexture){if(e.textureNeedsUpdate){const n=e.root.getLocalBounds();n.ceil();const i=e.texture;e.texture&&vt.returnTexture(e.texture,!0);const s=this._renderer,a=e.textureOptions.resolution||s.view.resolution,o=e.textureOptions.antialias??s.view.antialias,l=e.textureOptions.scaleMode??"linear",u=vt.getOptimalTexture(n.width,n.height,a,o);u._source.style=new fn({scaleMode:l}),e.texture=u,e._textureBounds||(e._textureBounds=new hr),e._textureBounds.copyFrom(n),i!==e.texture&&e.renderGroupParent&&(e.renderGroupParent.structureDidChange=!0)}}else e.texture&&(vt.returnTexture(e.texture,!0),e.texture=null)}_updateRenderGroups(e){const t=this._renderer,n=t.renderPipes;if(e.runOnRender(t),e.instructionSet.renderPipes=n,e.structureDidChange?Xp(e.childrenRenderablesToUpdate.list,0):E7(e,n),IT(e),e.structureDidChange?(e.structureDidChange=!1,this._buildInstructions(e,t)):this._updateRenderables(e),e.childrenRenderablesToUpdate.index=0,t.renderPipes.batch.upload(e.instructionSet),!(e.isCachedAsTexture&&!e.textureNeedsUpdate))for(let i=0;i<e.renderGroupChildren.length;i++)this._updateRenderGroups(e.renderGroupChildren[i])}_updateRenderables(e){const{list:t,index:n}=e.childrenRenderablesToUpdate;for(let i=0;i<n;i++){const s=t[i];s.didViewUpdate&&e.updateRenderable(s)}Xp(t,n)}_buildInstructions(e,t){const n=e.root,i=e.instructionSet;i.reset();const s=t.renderPipes?t:t.batch.renderer,a=s.renderPipes;a.batch.buildStart(i),a.blendMode.buildStart(),a.colorMask.buildStart(),n.sortableChildren&&n.sortChildren(),n.collectRenderablesWithEffects(i,s,null),a.batch.buildEnd(i),a.blendMode.buildEnd(i)}}FT.extension={type:[re.WebGLSystem,re.WebGPUSystem,re.CanvasSystem],name:"renderGroup"};class DT{constructor(e){this._renderer=e}addRenderable(e,t){const n=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,n),this._renderer.renderPipes.batch.addToBatch(n,t)}updateRenderable(e){const t=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){const t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}_updateBatchableSprite(e,t){t.bounds=e.visualBounds,t.texture=e._texture}_getGpuSprite(e){return e._gpuData[this._renderer.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const t=new Sf;return t.renderable=e,t.transform=e.groupTransform,t.texture=e._texture,t.bounds=e.visualBounds,t.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=t,t}destroy(){this._renderer=null}}DT.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"sprite"};const Am=class LT{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ht(0),this.color=this._backgroundColor,this.alpha=1}init(e){e={...LT.defaultOptions,...e},this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){ht.shared.setValue(e).alpha<1&&this._backgroundColor.alpha===1&&Ne("Cannot set a transparent background on an opaque canvas. To enable transparency, set backgroundAlpha < 1 when initializing your Application."),this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};Am.extension={type:[re.WebGLSystem,re.WebGPUSystem,re.CanvasSystem],name:"background",priority:0};Am.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};let C7=Am;const vl={};ze.handle(re.BlendMode,r=>{if(!r.name)throw new Error("BlendMode extension must have a name property");vl[r.name]=r.ref},r=>{delete vl[r.name]});class UT{constructor(e){this._blendModeStack=[],this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=e,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}pushBlendMode(e,t,n){this._blendModeStack.push(t),this.setBlendMode(e,t,n)}popBlendMode(e){this._blendModeStack.pop();const t=this._blendModeStack[this._activeBlendMode.length-1]??"normal";this.setBlendMode(null,t,e)}setBlendMode(e,t,n){const i=e instanceof Ep;if(this._activeBlendMode===t){this._isAdvanced&&e&&!i&&this._renderableList?.push(e);return}this._isAdvanced&&this._endAdvancedBlendMode(n),this._activeBlendMode=t,e&&(this._isAdvanced=!!vl[t],this._isAdvanced&&this._beginAdvancedBlendMode(e,n))}_beginAdvancedBlendMode(e,t){this._renderer.renderPipes.batch.break(t);const n=this._activeBlendMode;if(!vl[n]){Ne(`Unable to assign BlendMode: '${n}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}const i=this._ensureFilterEffect(n),s=e instanceof Ep,a={renderPipeId:"filter",action:"pushFilter",filterEffect:i,renderables:s?null:[e],container:s?e.root:null,canBundle:!1};this._renderableList=a.renderables,t.add(a)}_ensureFilterEffect(e){let t=this._filterHash[e];return t||(t=this._filterHash[e]=new Gc,t.filters=[new vl[e]]),t}_endAdvancedBlendMode(e){this._isAdvanced=!1,this._renderableList=null,this._renderer.renderPipes.batch.break(e),e.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(e){this._isAdvanced&&this._endAdvancedBlendMode(e)}destroy(){this._renderer=null,this._renderableList=null;for(const e in this._filterHash)this._filterHash[e].destroy();this._filterHash=null}}UT.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"blendMode"};const Ad={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},Cm=class NT{constructor(e){this._renderer=e}_normalizeOptions(e,t={}){return e instanceof et||e instanceof Re?{target:e,...t}:{...t,...e}}async image(e){const t=Ye.get().createImage();return t.src=await this.base64(e),t}async base64(e){e=this._normalizeOptions(e,NT.defaultImageOptions);const{format:t,quality:n}=e,i=this.canvas(e);if(i.toBlob!==void 0)return new Promise((s,a)=>{i.toBlob(o=>{if(!o){a(new Error("ICanvas.toBlob failed!"));return}const l=new FileReader;l.onload=()=>s(l.result),l.onerror=a,l.readAsDataURL(o)},Ad[t],n)});if(i.toDataURL!==void 0)return i.toDataURL(Ad[t],n);if(i.convertToBlob!==void 0){const s=await i.convertToBlob({type:Ad[t],quality:n});return new Promise((a,o)=>{const l=new FileReader;l.onload=()=>a(l.result),l.onerror=o,l.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e){e=this._normalizeOptions(e);const t=e.target,n=this._renderer;if(t instanceof Re)return n.texture.generateCanvas(t);const i=n.textureGenerator.generateTexture(e),s=n.texture.generateCanvas(i);return i.destroy(!0),s}pixels(e){e=this._normalizeOptions(e);const t=e.target,n=this._renderer,i=t instanceof Re?t:n.textureGenerator.generateTexture(e),s=n.texture.getPixels(i);return t instanceof et&&i.destroy(!0),s}texture(e){return e=this._normalizeOptions(e),e.target instanceof Re?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){e=this._normalizeOptions(e);const t=this.canvas(e),n=document.createElement("a");n.download=e.filename??"image.png",n.href=t.toDataURL("image/png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}log(e){const t=e.width??200;e=this._normalizeOptions(e);const n=this.canvas(e),i=n.toDataURL();console.log(`[Pixi Texture] ${n.width}px ${n.height}px`);const s=["font-size: 1px;",`padding: ${t}px 300px;`,`background: url(${i}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",s)}destroy(){this._renderer=null}};Cm.extension={type:[re.WebGLSystem,re.WebGPUSystem],name:"extract"};Cm.defaultImageOptions={format:"png",quality:1};let P7=Cm;class Pm extends Re{static create(e){const{dynamic:t,...n}=e;return new Pm({source:new Wt(n),dynamic:t??!1})}resize(e,t,n){return this.source.resize(e,t,n),this}}const R7=new ft,k7=new hr,M7=[0,0,0,0];class GT{constructor(e){this._renderer=e}generateTexture(e){e instanceof et&&(e={target:e,frame:void 0,textureSourceOptions:{},resolution:void 0});const t=e.resolution||this._renderer.resolution,n=e.antialias||this._renderer.view.antialias,i=e.target;let s=e.clearColor;s?s=Array.isArray(s)&&s.length===4?s:ht.shared.setValue(s).toArray():s=M7;const a=e.frame?.copyTo(R7)||Kg(i,k7).rectangle;a.width=Math.max(a.width,1/t)|0,a.height=Math.max(a.height,1/t)|0;const o=Pm.create({...e.textureSourceOptions,width:a.width,height:a.height,resolution:t,antialias:n}),l=Oe.shared.translate(-a.x,-a.y);return this._renderer.render({container:i,transform:l,target:o,clearColor:s}),o.source.updateMipmaps(),o}destroy(){this._renderer=null}}GT.extension={type:[re.WebGLSystem,re.WebGPUSystem],name:"textureGenerator"};const Rm=class zT{constructor(e){this._managedResources=[],this._managedResourceHashes=[],this._ready=!1,this._renderer=e}init(e){e={...zT.defaultOptions,...e},this.maxUnusedTime=e.gcMaxUnusedTime,this._frequency=e.gcFrequency,this.enabled=e.gcActive,this.now=performance.now()}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?this._handler=this._renderer.scheduler.repeat(()=>{this._ready=!0},this._frequency,!1):(this._renderer.scheduler.cancel(this._handler),this._handler=0))}prerender({container:e}){this.now=performance.now(),e.renderGroup.gcTick=this._renderer.tick++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}postrender(){!this._ready||!this.enabled||(this.run(),this._ready=!1)}_updateInstructionGCTick(e,t){e.instructionSet.gcTick=t;for(const n of e.renderGroupChildren)this._updateInstructionGCTick(n,t)}addResource(e,t){if(e._gcLastUsed!==-1){e._gcLastUsed=this.now,e._onTouch?.(this.now);return}const n=this._managedResources.length;e._gcData={index:n,type:t},e._gcLastUsed=this.now,e._onTouch?.(this.now),e.once("unload",this.removeResource,this),this._managedResources.push(e)}removeResource(e){const t=e._gcData;if(!t)return;const n=t.index,i=this._managedResources.length-1;if(n!==i){const s=this._managedResources[i];this._managedResources[n]=s,s._gcData.index=n}this._managedResources.length--,e._gcData=null,e._gcLastUsed=-1}addResourceHash(e,t,n,i=0){this._managedResourceHashes.push({context:e,hash:t,type:n,priority:i}),this._managedResourceHashes.sort((s,a)=>s.priority-a.priority)}run(){const e=performance.now(),t=this._managedResourceHashes;for(const i of t)this.runOnHash(i,e);let n=0;for(let i=0;i<this._managedResources.length;i++){const s=this._managedResources[i];n=this.runOnResource(s,e,n)}this._managedResources.length=n}updateRenderableGCTick(e,t){const n=e.renderGroup??e.parentRenderGroup,i=n?.instructionSet?.gcTick??-1;(n?.gcTick??0)===i&&(e._gcLastUsed=t,e._onTouch?.(t))}runOnResource(e,t,n){const i=e._gcData;return i.type==="renderable"&&this.updateRenderableGCTick(e,t),t-e._gcLastUsed<this.maxUnusedTime||!e.autoGarbageCollect?(this._managedResources[n]=e,i.index=n,n++):(e.unload(),e._gcData=null,e._gcLastUsed=-1,e.off("unload",this.removeResource,this)),n}_createHashClone(e,t){const n=Object.create(null);for(const i in e){if(i===t)break;e[i]!==null&&(n[i]=e[i])}return n}runOnHash(e,t){const{context:n,hash:i,type:s}=e,a=n[i];let o=null,l=0;for(const u in a){const c=a[u];if(c===null){l++,l===1e4&&!o&&(o=this._createHashClone(a,u));continue}if(c._gcLastUsed===-1){c._gcLastUsed=t,c._onTouch?.(t),o&&(o[u]=c);continue}s==="renderable"&&this.updateRenderableGCTick(c,t),!(t-c._gcLastUsed<this.maxUnusedTime)&&c.autoGarbageCollect?(o||(l+1!==1e4?(a[u]=null,l++):o=this._createHashClone(a,u)),c.unload(),c._gcData=null,c._gcLastUsed=-1):o&&(o[u]=c)}o&&(n[i]=o)}destroy(){this.enabled=!1,this._managedResources.forEach(e=>{e.off("unload",this.removeResource,this)}),this._managedResources.length=0,this._managedResourceHashes.length=0,this._renderer=null}};Rm.extension={type:[re.WebGLSystem,re.WebGPUSystem],name:"gc",priority:0};Rm.defaultOptions={gcActive:!0,gcMaxUnusedTime:6e4,gcFrequency:3e4};let O7=Rm;function tu(r,e,t){const n=(r>>24&255)/255;e[t++]=(r&255)/255*n,e[t++]=(r>>8&255)/255*n,e[t++]=(r>>16&255)/255*n,e[t++]=n}class jT{constructor(e){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=e}reset(){this._stackIndex=0;for(let e=0;e<this._activeUniforms.length;e++)this._uniformsPool.push(this._activeUniforms[e]);for(let e=0;e<this._activeBindGroups.length;e++)this._bindGroupPool.push(this._activeBindGroups[e]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(e){this.reset(),this.push(e)}bind({size:e,projectionMatrix:t,worldTransformMatrix:n,worldColor:i,offset:s}){const a=this._renderer.renderTarget.renderTarget,o=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{worldTransformMatrix:new Oe,worldColor:4294967295,offset:new At},l={projectionMatrix:t||this._renderer.renderTarget.projectionMatrix,resolution:e||a.size,worldTransformMatrix:n||o.worldTransformMatrix,worldColor:i||o.worldColor,offset:s||o.offset,bindGroup:null},u=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(u);const c=u.uniforms;c.uProjectionMatrix=l.projectionMatrix,c.uResolution=l.resolution,c.uWorldTransformMatrix.copyFrom(l.worldTransformMatrix),c.uWorldTransformMatrix.tx-=l.offset.x,c.uWorldTransformMatrix.ty-=l.offset.y,tu(l.worldColor,c.uWorldColorAlpha,0),u.update();let f;this._renderer.renderPipes.uniformBatch?f=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(u,!1):(f=this._bindGroupPool.pop()||new wi,this._activeBindGroups.push(f),f.setResource(u,0)),l.bindGroup=f,this._currentGlobalUniformData=l}push(e){this.bind(e),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===jr.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new mr({uProjectionMatrix:{value:new Oe,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new Oe,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null,this._globalUniformDataStack.length=0,this._uniformsPool.length=0,this._activeUniforms.length=0,this._bindGroupPool.length=0,this._activeBindGroups.length=0,this._currentGlobalUniformData=null}}jT.extension={type:[re.WebGLSystem,re.WebGPUSystem,re.CanvasSystem],name:"globalUniforms"};let I7=1;class HT{constructor(){this._tasks=[],this._offset=0}init(){en.system.add(this._update,this)}repeat(e,t,n=!0){const i=I7++;let s=0;return n&&(this._offset+=1e3,s=this._offset),this._tasks.push({func:e,duration:t,start:performance.now(),offset:s,last:performance.now(),repeat:!0,id:i}),i}cancel(e){for(let t=0;t<this._tasks.length;t++)if(this._tasks[t].id===e){this._tasks.splice(t,1);return}}_update(){const e=performance.now();for(let t=0;t<this._tasks.length;t++){const n=this._tasks[t];if(e-n.offset-n.last>=n.duration){const i=e-n.start;n.func(i),n.last=e}}}destroy(){en.system.remove(this._update,this),this._tasks.length=0}}HT.extension={type:[re.WebGLSystem,re.WebGPUSystem,re.CanvasSystem],name:"scheduler",priority:0};let by=!1;function B7(r){if(!by){if(Ye.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){const e=[`%c  %c  %c  %c  %c PixiJS %c v${Vc} (${r}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${Vc} - ${r} - http://www.pixijs.com/`);by=!0}}class km{constructor(e){this._renderer=e}init(e){if(e.hello){let t=this._renderer.name;this._renderer.type===jr.WEBGL&&(t+=` ${this._renderer.context.webGLVersion}`),B7(t)}}}km.extension={type:[re.WebGLSystem,re.WebGPUSystem,re.CanvasSystem],name:"hello",priority:-2};km.defaultOptions={hello:!1};function F7(r){let e=!1;for(const n in r)if(r[n]==null){e=!0;break}if(!e)return r;const t=Object.create(null);for(const n in r){const i=r[n];i&&(t[n]=i)}return t}function D7(r){let e=0;for(let t=0;t<r.length;t++)r[t]==null?e++:r[t-e]=r[t];return r.length-=e,r}let L7=0;const Mm=class VT{constructor(e){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=e}init(e){e={...VT.defaultOptions,...e},this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(const t of this._managedHashes)t.context[t.hash]=F7(t.context[t.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(const t of this._managedArrays)D7(t.context[t.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(e,t){this._managedHashes.push({context:e,hash:t})}addManagedArray(e,t){this._managedArrays.push({context:e,hash:t})}prerender({container:e}){this._now=performance.now(),e.renderGroup.gcTick=L7++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}addRenderable(e){this.enabled&&(e._lastUsed===-1&&(this._managedRenderables.push(e),e.once("destroyed",this._removeRenderable,this)),e._lastUsed=this._now)}run(){const e=this._now,t=this._managedRenderables,n=this._renderer.renderPipes;let i=0;for(let s=0;s<t.length;s++){const a=t[s];if(a===null){i++;continue}const o=a.renderGroup??a.parentRenderGroup,l=o?.instructionSet?.gcTick??-1;if((o?.gcTick??0)===l&&(a._lastUsed=e),e-a._lastUsed>this.maxUnusedTime){if(!a.destroyed){const u=n;o&&(o.structureDidChange=!0),u[a.renderPipeId].destroyRenderable(a)}a._lastUsed=-1,i++,a.off("destroyed",this._removeRenderable,this)}else t[s-i]=a}t.length-=i}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(e){const t=this._managedRenderables.indexOf(e);t>=0&&(e.off("destroyed",this._removeRenderable,this),this._managedRenderables[t]=null)}_updateInstructionGCTick(e,t){e.instructionSet.gcTick=t;for(const n of e.renderGroupChildren)this._updateInstructionGCTick(n,t)}};Mm.extension={type:[re.WebGLSystem,re.WebGPUSystem],name:"renderableGC",priority:0};Mm.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};let U7=Mm;const Om=class dc{get count(){return this._renderer.tick}get checkCount(){return this._checkCount}set checkCount(e){Fe("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._checkCount=e}get maxIdle(){return this._renderer.gc.maxUnusedTime/1e3*60}set maxIdle(e){Fe("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._renderer.gc.maxUnusedTime=e/60*1e3}get checkCountMax(){return Math.floor(this._renderer.gc._frequency/1e3)}set checkCountMax(e){Fe("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead.")}get active(){return this._renderer.gc.enabled}set active(e){Fe("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._renderer.gc.enabled=e}constructor(e){this._renderer=e,this._checkCount=0}init(e){e.textureGCActive!==dc.defaultOptions.textureGCActive&&(this.active=e.textureGCActive),e.textureGCMaxIdle!==dc.defaultOptions.textureGCMaxIdle&&(this.maxIdle=e.textureGCMaxIdle),e.textureGCCheckCountMax!==dc.defaultOptions.textureGCCheckCountMax&&(this.checkCountMax=e.textureGCCheckCountMax)}run(){Fe("8.15.0","TextureGCSystem.run is deprecated, please use the GCSystem instead."),this._renderer.gc.run()}destroy(){this._renderer=null}};Om.extension={type:[re.WebGLSystem,re.WebGPUSystem],name:"textureGC"};Om.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600};let N7=Om;const Im=class WT{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(e){e={...WT.defaultOptions,...e},e.view&&(Fe(lt,"ViewSystem.view has been renamed to ViewSystem.canvas"),e.canvas=e.view),this.screen=new ft(0,0,e.width,e.height),this.canvas=e.canvas||Ye.get().createCanvas(),this.antialias=!!e.antialias,this.texture=vT(this.canvas,e),this.renderTarget=new Vp({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(e,t,n){this.texture.source.resize(e,t,n),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e=="boolean"?e:!!e?.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.texture.destroy()}};Im.extension={type:[re.WebGLSystem,re.WebGPUSystem,re.CanvasSystem],name:"view",priority:0};Im.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};let qT=Im;const XT=[C7,jT,km,qT,FT,O7,N7,GT,P7,rS,U7,HT],YT=[UT,JS,DT,OT,QS,tT,eT,MT],G7=[...XT,mT,DU,kU,cT,rT,PT,xT,aT,ET,TT,uT,c7,fT,lT],z7=[...YT],j7=[$S,kT,RT],$T=[],KT=[],ZT=[];ze.handleByNamedList(re.WebGLSystem,$T);ze.handleByNamedList(re.WebGLPipes,KT);ze.handleByNamedList(re.WebGLPipesAdaptor,ZT);ze.add(...G7,...z7,...j7);class H7 extends bf{constructor(){const e={name:"webgl",type:jr.WEBGL,systems:$T,renderPipes:KT,renderPipeAdaptors:ZT};super(e)}}const V7=Object.freeze(Object.defineProperty({__proto__:null,WebGLRenderer:H7},Symbol.toStringTag,{value:"Module"}));class JT{constructor(e){this._hash=Object.create(null),this._renderer=e}contextChange(e){this._gpu=e}getBindGroup(e,t,n){return e._updateKey(),this._hash[e._key]||this._createBindGroup(e,t,n)}_createBindGroup(e,t,n){const i=this._gpu.device,s=t.layout[n],a=[],o=this._renderer;for(const c in s){const f=e.resources[c]??e.resources[s[c]];let h;if(f._resourceType==="uniformGroup"){const d=f;o.ubo.updateUniformGroup(d);const p=d.buffer;h={buffer:o.buffer.getGPUBuffer(p),offset:0,size:p.descriptor.size}}else if(f._resourceType==="buffer"){const d=f;h={buffer:o.buffer.getGPUBuffer(d),offset:0,size:d.descriptor.size}}else if(f._resourceType==="bufferResource"){const d=f;h={buffer:o.buffer.getGPUBuffer(d.buffer),offset:d.offset,size:d.size}}else if(f._resourceType==="textureSampler"){const d=f;h=o.texture.getGpuSampler(d)}else if(f._resourceType==="textureSource"){const d=f;h=o.texture.getGpuSource(d).createView()}a.push({binding:s[c],resource:h})}const l=o.shader.getProgramData(t).bindGroups[n],u=i.createBindGroup({layout:l,entries:a});return this._hash[e._key]=u,u}destroy(){this._hash=null,this._renderer=null}}JT.extension={type:[re.WebGPUSystem],name:"bindGroup"};class W7{constructor(e){this.gpuBuffer=e}destroy(){this.gpuBuffer.destroy(),this.gpuBuffer=null}}class QT{constructor(e){this._renderer=e,this._managedBuffers=new Wr({renderer:e,type:"resource",onUnload:this.onBufferUnload.bind(this),name:"gpuBuffer"})}contextChange(e){this._gpu=e}getGPUBuffer(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]?.gpuBuffer||this.createGPUBuffer(e)}updateBuffer(e){const t=this.getGPUBuffer(e),n=e.data;return e._updateID&&n&&(e._updateID=0,this._gpu.device.queue.writeBuffer(t,0,n.buffer,0,(e._updateSize||n.byteLength)+3&-4)),t}destroyAll(){this._managedBuffers.removeAll()}onBufferUnload(e){e.off("update",this.updateBuffer,this),e.off("change",this.onBufferChange,this)}createGPUBuffer(e){const t=this._gpu.device.createBuffer(e.descriptor);return e._updateID=0,e._resourceId=Tt("resource"),e.data&&(Dp(e.data.buffer,t.getMappedRange()),t.unmap()),e._gpuData[this._renderer.uid]=new W7(t),this._managedBuffers.add(e)&&(e.on("update",this.updateBuffer,this),e.on("change",this.onBufferChange,this)),t}onBufferChange(e){this._managedBuffers.remove(e),e._updateID=0,this.createGPUBuffer(e)}destroy(){this._managedBuffers.destroy(),this._renderer=null,this._gpu=null}}QT.extension={type:[re.WebGPUSystem],name:"buffer"};class q7{constructor({minUniformOffsetAlignment:e}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=e,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(e){if(e>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${e*4}`);const t=this.byteIndex;let n=t+e*4;if(n=Math.ceil(n/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,n>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=n,t}addGroup(e){const t=this.addEmptyGroup(e.length);for(let n=0;n<e.length;n++)this.data[t/4+n]=e[n];return t}destroy(){this.data=null}}class eE{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.pipeline.setColorMask(e))}destroy(){this._renderer=null,this._colorMaskCache=null}}eE.extension={type:[re.WebGPUSystem],name:"colorMask"};class Bm{constructor(e){this._renderer=e}async init(e){return this._initPromise?this._initPromise:(this._initPromise=(e.gpu?Promise.resolve(e.gpu):this._createDeviceAndAdaptor(e)).then(t=>{this.gpu=t,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(e){this._renderer.gpu=e}async _createDeviceAndAdaptor(e){const t=await Ye.get().getNavigator().gpu.requestAdapter({powerPreference:e.powerPreference,forceFallbackAdapter:e.forceFallbackAdapter}),n=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(s=>t.features.has(s)),i=await t.requestDevice({requiredFeatures:n});return{adapter:t,device:i}}destroy(){this.gpu=null,this._renderer=null}}Bm.extension={type:[re.WebGPUSystem],name:"device"};Bm.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};class tE{constructor(e){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=e}renderStart(){this.commandFinished=new Promise(e=>{this._resolveCommandFinished=e}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(e){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(e.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(e){this.renderPassEncoder.setViewport(e.x,e.y,e.width,e.height,0,1)}setPipelineFromGeometryProgramAndState(e,t,n,i){const s=this._renderer.pipeline.getPipeline(e,t,n,i);this.setPipeline(s)}setPipeline(e){this._boundPipeline!==e&&(this._boundPipeline=e,this.renderPassEncoder.setPipeline(e))}_setVertexBuffer(e,t){this._boundVertexBuffer[e]!==t&&(this._boundVertexBuffer[e]=t,this.renderPassEncoder.setVertexBuffer(e,this._renderer.buffer.updateBuffer(t)))}_setIndexBuffer(e){if(this._boundIndexBuffer===e)return;this._boundIndexBuffer=e;const t=e.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(e),t)}resetBindGroup(e){this._boundBindGroup[e]=null}setBindGroup(e,t,n){if(this._boundBindGroup[e]===t)return;this._boundBindGroup[e]=t,t._touch(this._renderer.gc.now,this._renderer.tick);const i=this._renderer.bindGroup.getBindGroup(t,n,e);this.renderPassEncoder.setBindGroup(e,i)}setGeometry(e,t){const n=this._renderer.pipeline.getBufferNamesToBind(e,t);for(const i in n)this._setVertexBuffer(parseInt(i,10),e.attributes[n[i]].buffer);e.indexBuffer&&this._setIndexBuffer(e.indexBuffer)}_setShaderBindGroups(e,t){for(const n in e.groups){const i=e.groups[n];t||this._syncBindGroup(i),this.setBindGroup(n,i,e.gpuProgram)}}_syncBindGroup(e){for(const t in e.resources){const n=e.resources[t];n.isUniformGroup&&this._renderer.ubo.updateUniformGroup(n)}}draw(e){const{geometry:t,shader:n,state:i,topology:s,size:a,start:o,instanceCount:l,skipSync:u}=e;this.setPipelineFromGeometryProgramAndState(t,n.gpuProgram,i,s),this.setGeometry(t,n.gpuProgram),this._setShaderBindGroups(n,u),t.indexBuffer?this.renderPassEncoder.drawIndexed(a||t.indexBuffer.data.length,l??t.instanceCount,o||0):this.renderPassEncoder.draw(a||t.getSize(),l??t.instanceCount,o||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){const e=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(e);const t=this._boundPipeline,n={...this._boundVertexBuffer},i=this._boundIndexBuffer,s={...this._boundBindGroup};this._clearCache();const a=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(a.x,a.y,a.width,a.height,0,1),this.setPipeline(t);for(const o in n)this._setVertexBuffer(o,n[o]);for(const o in s)this.setBindGroup(o,s[o],null);this._setIndexBuffer(i)}_clearCache(){for(let e=0;e<16;e++)this._boundBindGroup[e]=null,this._boundVertexBuffer[e]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(e){this._gpu=e}}tE.extension={type:[re.WebGPUSystem],name:"encoder",priority:1};class rE{constructor(e){this._renderer=e}contextChange(){this.maxTextures=this._renderer.device.gpu.device.limits.maxSampledTexturesPerShaderStage,this.maxBatchableTextures=this.maxTextures}destroy(){}}rE.extension={type:[re.WebGPUSystem],name:"limits"};class nE{constructor(e){this._renderTargetStencilState=Object.create(null),this._renderer=e,e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){let t=this._renderTargetStencilState[e.uid];t||(t=this._renderTargetStencilState[e.uid]={stencilMode:Lt.DISABLED,stencilReference:0}),this._activeRenderTarget=e,this.setStencilMode(t.stencilMode,t.stencilReference)}setStencilMode(e,t){const n=this._renderTargetStencilState[this._activeRenderTarget.uid];n.stencilMode=e,n.stencilReference=t;const i=this._renderer;i.pipeline.setStencilMode(e),i.encoder.renderPassEncoder.setStencilReference(t)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}}nE.extension={type:[re.WebGPUSystem],name:"stencil"};const pc={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function X7(r){const e=r.map(n=>({data:n,offset:0,size:0}));let t=0;for(let n=0;n<e.length;n++){const i=e[n];let s=pc[i.data.type].size;const a=pc[i.data.type].align;if(!pc[i.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${i.data.type}`);i.data.size>1&&(s=Math.max(s,a)*i.data.size),t=Math.ceil(t/a)*a,i.size=s,i.offset=t,t+=s}return t=Math.ceil(t/16)*16,{uboElements:e,size:t}}function Y7(r,e){const{size:t,align:n}=pc[r.data.type],i=(n-t)/4,s=r.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${r.data.name};
         ${e!==0?`offset += ${e};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${r.data.size*(t/4)}; i++)
         {
             for(var j = 0; j < ${t/4}; j++)
             {
                 ${s}[arrayOffset++] = v[t++];
             }
             ${i!==0?`arrayOffset += ${i};`:""}
         }
     `}function $7(r){return pT(r,"uboWgsl",Y7,NU)}class iE extends hT{constructor(){super({createUboElements:X7,generateUboSync:$7})}}iE.extension={type:[re.WebGPUSystem],name:"ubo"};const Ii=128;class sE{constructor(e){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=e,this._batchBuffer=new q7({minUniformOffsetAlignment:Ii});const t=256/Ii;for(let n=0;n<t;n++){let i=at.UNIFORM|at.COPY_DST;n===0&&(i|=at.COPY_SRC),this._buffers.push(new Gr({data:this._batchBuffer.data,usage:i}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){this._bindGroupHash=Object.create(null),this._batchBuffer.clear()}getUniformBindGroup(e,t){if(!t&&this._bindGroupHash[e.uid])return this._bindGroupHash[e.uid];this._renderer.ubo.ensureUniformGroup(e);const n=e.buffer.data,i=this._batchBuffer.addEmptyGroup(n.length);return this._renderer.ubo.syncUniformGroup(e,this._batchBuffer.data,i/4),this._bindGroupHash[e.uid]=this._getBindGroup(i/Ii),this._bindGroupHash[e.uid]}getUboResource(e){this._renderer.ubo.updateUniformGroup(e);const t=e.buffer.data,n=this._batchBuffer.addGroup(t);return this._getBufferResource(n/Ii)}getArrayBindGroup(e){const t=this._batchBuffer.addGroup(e);return this._getBindGroup(t/Ii)}getArrayBufferResource(e){const n=this._batchBuffer.addGroup(e)/Ii;return this._getBufferResource(n)}_getBufferResource(e){if(!this._bufferResources[e]){const t=this._buffers[e%2];this._bufferResources[e]=new Em({buffer:t,offset:(e/2|0)*256,size:Ii})}return this._bufferResources[e]}_getBindGroup(e){if(!this._bindGroups[e]){const t=new wi({0:this._getBufferResource(e)});this._bindGroups[e]=t}return this._bindGroups[e]}_uploadBindGroups(){const e=this._renderer.buffer,t=this._buffers[0];t.update(this._batchBuffer.byteIndex),e.updateBuffer(t);const n=this._renderer.gpu.device.createCommandEncoder();for(let i=1;i<this._buffers.length;i++){const s=this._buffers[i];n.copyBufferToBuffer(e.getGPUBuffer(t),Ii,e.getGPUBuffer(s),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([n.finish()])}destroy(){for(let e=0;e<this._bindGroups.length;e++)this._bindGroups[e]?.destroy();this._bindGroups=null,this._bindGroupHash=null;for(let e=0;e<this._buffers.length;e++)this._buffers[e].destroy();this._buffers=null;for(let e=0;e<this._bufferResources.length;e++)this._bufferResources[e].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._renderer=null}}sE.extension={type:[re.WebGPUPipes],name:"uniformBatch"};const K7={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function Z7(r,e,t,n,i){return r<<24|e<<16|t<<10|n<<5|i}function J7(r,e,t,n,i){return t<<8|r<<5|n<<3|i<<1|e}class aE{constructor(e){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._colorTargetCount=1,this._renderer=e}contextChange(e){this._gpu=e,this.setStencilMode(Lt.DISABLED),this._updatePipeHash()}setMultisampleCount(e){this._multisampleCount!==e&&(this._multisampleCount=e,this._updatePipeHash())}setRenderTarget(e){this._multisampleCount=e.msaaSamples,this._depthStencilAttachment=e.descriptor.depthStencilAttachment?1:0,this._colorTargetCount=e.colorTargetCount,this._updatePipeHash()}setColorMask(e){this._colorMask!==e&&(this._colorMask=e,this._updatePipeHash())}setStencilMode(e){this._stencilMode!==e&&(this._stencilMode=e,this._stencilState=ls[e],this._updatePipeHash())}setPipeline(e,t,n,i){const s=this.getPipeline(e,t,n);i.setPipeline(s)}getPipeline(e,t,n,i){e._layoutKey||(iT(e,t.attributeData),this._generateBufferKey(e)),i||(i=e.topology);const s=Z7(e._layoutKey,t._layoutKey,n.data,n._blendModeId,K7[i]);return this._pipeCache[s]?this._pipeCache[s]:(this._pipeCache[s]=this._createPipeline(e,t,n,i),this._pipeCache[s])}_createPipeline(e,t,n,i){const s=this._gpu.device,a=this._createVertexBufferLayouts(e,t),o=this._renderer.state.getColorTargets(n,this._colorTargetCount),l=this._stencilMode===Lt.RENDERING_MASK_ADD?0:this._colorMask;for(let h=0;h<o.length;h++)o[h].writeMask=l;const u=this._renderer.shader.getProgramData(t).pipeline,c={vertex:{module:this._getModule(t.vertex.source),entryPoint:t.vertex.entryPoint,buffers:a},fragment:{module:this._getModule(t.fragment.source),entryPoint:t.fragment.entryPoint,targets:o},primitive:{topology:i,cullMode:n.cullMode},layout:u,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(c.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:n.depthTest,depthCompare:n.depthTest?"less":"always"}),s.createRenderPipeline(c)}_getModule(e){return this._moduleCache[e]||this._createModule(e)}_createModule(e){const t=this._gpu.device;return this._moduleCache[e]=t.createShaderModule({code:e}),this._moduleCache[e]}_generateBufferKey(e){const t=[];let n=0;const i=Object.keys(e.attributes).sort();for(let a=0;a<i.length;a++){const o=e.attributes[i[a]];t[n++]=o.offset,t[n++]=o.format,t[n++]=o.stride,t[n++]=o.instance}const s=t.join("|");return e._layoutKey=El(s,"geometry"),e._layoutKey}_generateAttributeLocationsKey(e){const t=[];let n=0;const i=Object.keys(e.attributeData).sort();for(let a=0;a<i.length;a++){const o=e.attributeData[i[a]];t[n++]=o.location}const s=t.join("|");return e._attributeLocationsKey=El(s,"programAttributes"),e._attributeLocationsKey}getBufferNamesToBind(e,t){const n=e._layoutKey<<16|t._attributeLocationsKey;if(this._bindingNamesCache[n])return this._bindingNamesCache[n];const i=this._createVertexBufferLayouts(e,t),s=Object.create(null),a=t.attributeData;for(let o=0;o<i.length;o++){const u=Object.values(i[o].attributes)[0].shaderLocation;for(const c in a)if(a[c].location===u){s[o]=c;break}}return this._bindingNamesCache[n]=s,s}_createVertexBufferLayouts(e,t){t._attributeLocationsKey||this._generateAttributeLocationsKey(t);const n=e._layoutKey<<16|t._attributeLocationsKey;if(this._bufferLayoutsCache[n])return this._bufferLayoutsCache[n];const i=[];return e.buffers.forEach(s=>{const a={arrayStride:0,stepMode:"vertex",attributes:[]},o=a.attributes;for(const l in t.attributeData){const u=e.attributes[l];(u.divisor??1)!==1&&Ne(`Attribute ${l} has an invalid divisor value of '${u.divisor}'. WebGPU only supports a divisor value of 1`),u.buffer===s&&(a.arrayStride=u.stride,a.stepMode=u.instance?"instance":"vertex",o.push({shaderLocation:t.attributeData[l].location,offset:u.offset,format:u.format}))}o.length&&i.push(a)}),this._bufferLayoutsCache[n]=i,i}_updatePipeHash(){const e=J7(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment,this._colorTargetCount);this._pipeStateCaches[e]||(this._pipeStateCaches[e]=Object.create(null)),this._pipeCache=this._pipeStateCaches[e]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}}aE.extension={type:[re.WebGPUSystem],name:"pipeline"};class Q7{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}class eN{init(e,t){this._renderer=e,this._renderTargetSystem=t}copyToTexture(e,t,n,i,s){const a=this._renderer,o=this._getGpuColorTexture(e),l=a.texture.getGpuSource(t.source);return a.encoder.commandEncoder.copyTextureToTexture({texture:o,origin:n},{texture:l,origin:s},i),t}startRenderPass(e,t=!0,n,i){const a=this._renderTargetSystem.getGpuRenderTarget(e),o=this.getDescriptor(e,t,n);a.descriptor=o,this._renderer.pipeline.setRenderTarget(a),this._renderer.encoder.beginRenderPass(a),this._renderer.encoder.setViewport(i)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(e){const t=this._renderTargetSystem.getGpuRenderTarget(e);return t.contexts[0]?t.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(e.colorTextures[0].source)}getDescriptor(e,t,n){typeof t=="boolean"&&(t=t?Or.ALL:Or.NONE);const i=this._renderTargetSystem,s=i.getGpuRenderTarget(e),a=e.colorTextures.map((u,c)=>{const f=s.contexts[c];let h,d;f?h=f.getCurrentTexture().createView():h=this._renderer.texture.getGpuSource(u).createView({mipLevelCount:1}),s.msaaTextures[c]&&(d=h,h=this._renderer.texture.getTextureView(s.msaaTextures[c]));const p=t&Or.COLOR?"clear":"load";return n??(n=i.defaultClearColor),{view:h,resolveTarget:d,clearValue:n,storeOp:"store",loadOp:p}});let o;if((e.stencil||e.depth)&&!e.depthStencilTexture&&(e.ensureDepthStencilTexture(),e.depthStencilTexture.source.sampleCount=s.msaa?4:1),e.depthStencilTexture){const u=t&Or.STENCIL?"clear":"load",c=t&Or.DEPTH?"clear":"load";o={view:this._renderer.texture.getGpuSource(e.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:u,depthClearValue:1,depthLoadOp:c,depthStoreOp:"store"}}return{colorAttachments:a,depthStencilAttachment:o}}clear(e,t=!0,n,i){if(!t)return;const{gpu:s,encoder:a}=this._renderer,o=s.device;if(a.commandEncoder===null){const u=o.createCommandEncoder(),c=this.getDescriptor(e,t,n),f=u.beginRenderPass(c);f.setViewport(i.x,i.y,i.width,i.height,0,1),f.end();const h=u.finish();o.queue.submit([h])}else this.startRenderPass(e,t,n,i)}initGpuRenderTarget(e){e.isRoot=!0;const t=new Q7;return t.colorTargetCount=e.colorTextures.length,e.colorTextures.forEach((n,i)=>{if(n instanceof xi){const s=n.resource.getContext("webgpu"),a=n.transparent?"premultiplied":"opaque";try{s.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:a})}catch(o){console.error(o)}t.contexts[i]=s}if(t.msaa=n.source.antialias,n.source.antialias){const s=new Wt({width:0,height:0,sampleCount:4});t.msaaTextures[i]=s}}),t.msaa&&(t.msaaSamples=4,e.depthStencilTexture&&(e.depthStencilTexture.source.sampleCount=4)),t}destroyGpuRenderTarget(e){e.contexts.forEach(t=>{t.unconfigure()}),e.msaaTextures.forEach(t=>{t.destroy()}),e.msaaTextures.length=0,e.contexts.length=0}ensureDepthStencilTexture(e){const t=this._renderTargetSystem.getGpuRenderTarget(e);e.depthStencilTexture&&t.msaa&&(e.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(e){const t=this._renderTargetSystem.getGpuRenderTarget(e);t.width=e.width,t.height=e.height,t.msaa&&e.colorTextures.forEach((n,i)=>{t.msaaTextures[i]?.resize(n.source.width,n.source.height,n.source._resolution)})}}class oE extends yT{constructor(e){super(e),this.adaptor=new eN,this.adaptor.init(e,this)}}oE.extension={type:[re.WebGPUSystem],name:"renderTarget"};class lE{constructor(){this._gpuProgramData=Object.create(null)}contextChange(e){this._gpu=e}getProgramData(e){return this._gpuProgramData[e._layoutKey]||this._createGPUProgramData(e)}_createGPUProgramData(e){const t=this._gpu.device,n=e.gpuLayout.map(s=>t.createBindGroupLayout({entries:s})),i={bindGroupLayouts:n};return this._gpuProgramData[e._layoutKey]={bindGroups:n,pipeline:t.createPipelineLayout(i)},this._gpuProgramData[e._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}}lE.extension={type:[re.WebGPUSystem],name:"shader"};const Er={};Er.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}};Er.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}};Er.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}};Er.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};Er.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};Er.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}};Er["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}};Er["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}};Er["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}};Er.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}};Er.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}};Er.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};class uE{constructor(){this.defaultState=new Pn,this.defaultState.blend=!0}contextChange(e){this.gpu=e}getColorTargets(e,t){const n=Er[e.blendMode]||Er.normal,i=[],s={format:"bgra8unorm",writeMask:0,blend:n};for(let a=0;a<t;a++)i[a]=s;return i}destroy(){this.gpu=null}}uE.extension={type:[re.WebGPUSystem],name:"state"};const tN={type:"image",upload(r,e,t){const n=r.resource,i=(r.pixelWidth|0)*(r.pixelHeight|0),s=n.byteLength/i;t.device.queue.writeTexture({texture:e},n,{offset:0,rowsPerImage:r.pixelHeight,bytesPerRow:r.pixelWidth*s},{width:r.pixelWidth,height:r.pixelHeight,depthOrArrayLayers:1})}},cE={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},rN={blockBytes:4,blockWidth:1,blockHeight:1},nN={type:"compressed",upload(r,e,t){let n=r.pixelWidth,i=r.pixelHeight;const s=cE[r.format]||rN;for(let a=0;a<r.resource.length;a++){const o=r.resource[a],l=Math.ceil(n/s.blockWidth)*s.blockBytes;t.device.queue.writeTexture({texture:e,mipLevel:a},o,{offset:0,bytesPerRow:l},{width:Math.ceil(n/s.blockWidth)*s.blockWidth,height:Math.ceil(i/s.blockHeight)*s.blockHeight,depthOrArrayLayers:1}),n=Math.max(n>>1,1),i=Math.max(i>>1,1)}}},fE={type:"image",upload(r,e,t){const n=r.resource;if(!n)return;if(globalThis.HTMLImageElement&&n instanceof HTMLImageElement){const o=Ye.get().createCanvas(n.width,n.height);o.getContext("2d").drawImage(n,0,0,n.width,n.height),r.resource=o,Ne("ImageSource: Image element passed, converting to canvas and replacing resource.")}const i=Math.min(e.width,r.resourceWidth||r.pixelWidth),s=Math.min(e.height,r.resourceHeight||r.pixelHeight),a=r.alphaMode==="premultiply-alpha-on-upload";t.device.queue.copyExternalImageToTexture({source:n},{texture:e,premultipliedAlpha:a},{width:i,height:s})}},iN={type:"video",upload(r,e,t){fE.upload(r,e,t)}};class sN{constructor(e){this.device=e,this.sampler=e.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(e){let t=this.pipelines[e];return t||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),t=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:e}]}}),this.pipelines[e]=t),t}generateMipmap(e){const t=this._getMipmapPipeline(e.format);if(e.dimension==="3d"||e.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let n=e;const i=e.depthOrArrayLayers||1,s=e.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!s){const l={size:{width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:i},format:e.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:e.mipLevelCount-1};n=this.device.createTexture(l)}const a=this.device.createCommandEncoder({}),o=t.getBindGroupLayout(0);for(let l=0;l<i;++l){let u=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:l,arrayLayerCount:1}),c=s?1:0;for(let f=1;f<e.mipLevelCount;++f){const h=n.createView({baseMipLevel:c++,mipLevelCount:1,dimension:"2d",baseArrayLayer:l,arrayLayerCount:1}),d=a.beginRenderPass({colorAttachments:[{view:h,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),p=this.device.createBindGroup({layout:o,entries:[{binding:0,resource:this.sampler},{binding:1,resource:u}]});d.setPipeline(t),d.setBindGroup(0,p),d.draw(3,1,0,0),d.end(),u=h}}if(!s){const l={width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:i};for(let u=1;u<e.mipLevelCount;++u)a.copyTextureToTexture({texture:n,mipLevel:u-1},{texture:e,mipLevel:u},l),l.width=Math.ceil(l.width/2),l.height=Math.ceil(l.height/2)}return this.device.queue.submit([a.finish()]),s||n.destroy(),e}}class aN{constructor(e){this.textureView=null,this.gpuTexture=e}destroy(){this.gpuTexture.destroy(),this.textureView=null,this.gpuTexture=null}}class hE{constructor(e){this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._uploads={image:fE,buffer:tN,video:iN,compressed:nN},this._renderer=e,e.renderableGC.addManagedHash(this,"_bindGroupHash"),this._managedTextures=new Wr({renderer:e,type:"resource",onUnload:this.onSourceUnload.bind(this),name:"gpuTextureSource"})}get managedTextures(){return Object.values(this._managedTextures.items)}contextChange(e){this._gpu=e}initSource(e){return e._gpuData[this._renderer.uid]?.gpuTexture||this._initSource(e)}_initSource(e){if(e.autoGenerateMipmaps){const u=Math.max(e.pixelWidth,e.pixelHeight);e.mipLevelCount=Math.floor(Math.log2(u))+1}let t=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;e.uploadMethodId!=="compressed"&&(t|=GPUTextureUsage.RENDER_ATTACHMENT,t|=GPUTextureUsage.COPY_SRC);const n=cE[e.format]||{blockWidth:1,blockHeight:1},i=Math.ceil(e.pixelWidth/n.blockWidth)*n.blockWidth,s=Math.ceil(e.pixelHeight/n.blockHeight)*n.blockHeight,a={label:e.label,size:{width:i,height:s},format:e.format,sampleCount:e.sampleCount,mipLevelCount:e.mipLevelCount,dimension:e.dimension,usage:t},o=this._gpu.device.createTexture(a);return e._gpuData[this._renderer.uid]=new aN(o),this._managedTextures.add(e)&&(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceResize,this),e.on("updateMipmaps",this.onUpdateMipmaps,this)),this.onSourceUpdate(e),o}onSourceUpdate(e){const t=this.getGpuSource(e);t&&(this._uploads[e.uploadMethodId]&&this._uploads[e.uploadMethodId].upload(e,t,this._gpu),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e))}onUpdateMipmaps(e){this._mipmapGenerator||(this._mipmapGenerator=new sN(this._gpu.device));const t=this.getGpuSource(e);this._mipmapGenerator.generateMipmap(t)}onSourceUnload(e){e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceResize,this),e.off("updateMipmaps",this.onUpdateMipmaps,this)}onSourceResize(e){e._gcLastUsed=this._renderer.gc.now;const t=e._gpuData[this._renderer.uid],n=t?.gpuTexture;n?(n.width!==e.pixelWidth||n.height!==e.pixelHeight)&&(t.destroy(),this._bindGroupHash[e.uid]=null,e._gpuData[this._renderer.uid]=null,this.initSource(e)):this.initSource(e)}_initSampler(e){return this._gpuSamplers[e._resourceId]=this._gpu.device.createSampler(e),this._gpuSamplers[e._resourceId]}getGpuSampler(e){return this._gpuSamplers[e._resourceId]||this._initSampler(e)}getGpuSource(e){return e._gcLastUsed=this._renderer.gc.now,e._gpuData[this._renderer.uid]?.gpuTexture||this.initSource(e)}getTextureBindGroup(e){return this._bindGroupHash[e.uid]||this._createTextureBindGroup(e)}_createTextureBindGroup(e){const t=e.source;return this._bindGroupHash[e.uid]=new wi({0:t,1:t.style,2:new mr({uTextureMatrix:{type:"mat3x3<f32>",value:e.textureMatrix.mapCoord}})}),this._bindGroupHash[e.uid]}getTextureView(e){const t=e.source;t._gcLastUsed=this._renderer.gc.now;let n=t._gpuData[this._renderer.uid],i=null;return n||(this.initSource(t),n=t._gpuData[this._renderer.uid]),i=n.textureView||n.gpuTexture.createView(),i}generateCanvas(e){const t=this._renderer,n=t.gpu.device.createCommandEncoder(),i=Ye.get().createCanvas();i.width=e.source.pixelWidth,i.height=e.source.pixelHeight;const s=i.getContext("webgpu");return s.configure({device:t.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:Ye.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),n.copyTextureToTexture({texture:t.texture.getGpuSource(e.source),origin:{x:0,y:0}},{texture:s.getCurrentTexture()},{width:i.width,height:i.height}),t.gpu.device.queue.submit([n.finish()]),i}getPixels(e){const t=this.generateCanvas(e),n=ki.getOptimalCanvasAndContext(t.width,t.height),i=n.context;i.drawImage(t,0,0);const{width:s,height:a}=t,o=i.getImageData(0,0,s,a),l=new Uint8ClampedArray(o.data.buffer);return ki.returnCanvasAndContext(n),{pixels:l,width:s,height:a}}destroy(){this._managedTextures.destroy();for(const e of Object.keys(this._bindGroupHash)){const t=Number(e);this._bindGroupHash[t]?.destroy()}this._renderer=null,this._gpu=null,this._mipmapGenerator=null,this._gpuSamplers=null,this._bindGroupHash=null}}hE.extension={type:[re.WebGPUSystem],name:"texture"};class dE{constructor(){this._maxTextures=0}contextChange(e){const t=new mr({uTransformMatrix:{value:new Oe,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}});this._maxTextures=e.limits.maxBatchableTextures;const n=Zl({name:"graphics",bits:[sm,om(this._maxTextures),TU,Ql]});this.shader=new dn({gpuProgram:n,resources:{localUniforms:t}})}execute(e,t){const n=t.context,i=n.customShader||this.shader,s=e.renderer,a=s.graphicsContext,{batcher:o,instructions:l}=a.getContextRenderData(n),u=s.encoder;u.setGeometry(o.geometry,i.gpuProgram);const c=s.globalUniforms.bindGroup;u.setBindGroup(0,c,i.gpuProgram);const f=s.renderPipes.uniformBatch.getUniformBindGroup(i.resources.localUniforms,!0);u.setBindGroup(2,f,i.gpuProgram);const h=l.instructions;let d=null;for(let p=0;p<l.instructionSize;p++){const v=h[p];if(v.topology!==d&&(d=v.topology,u.setPipelineFromGeometryProgramAndState(o.geometry,i.gpuProgram,e.state,v.topology)),i.groups[1]=v.bindGroup,!v.gpuBindGroup){const m=v.textures;v.bindGroup=im(m.textures,m.count,this._maxTextures),v.gpuBindGroup=s.bindGroup.getBindGroup(v.bindGroup,i.gpuProgram,1)}u.setBindGroup(1,v.bindGroup,i.gpuProgram),u.renderPassEncoder.drawIndexed(v.size,1,v.start)}}destroy(){this.shader.destroy(!0),this.shader=null}}dE.extension={type:[re.WebGPUPipesAdaptor],name:"graphics"};class pE{init(){const e=Zl({name:"mesh",bits:[ml,EU,Ql]});this._shader=new dn({gpuProgram:e,resources:{uTexture:Re.EMPTY._source,uSampler:Re.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Oe}}}})}execute(e,t){const n=e.renderer;let i=t._shader;if(!i)i=this._shader,i.groups[2]=n.texture.getTextureBindGroup(t.texture);else if(!i.gpuProgram){Ne("Mesh shader has no gpuProgram",t.shader);return}const s=i.gpuProgram;if(s.autoAssignGlobalUniforms&&(i.groups[0]=n.globalUniforms.bindGroup),s.autoAssignLocalUniforms){const a=e.localUniforms;i.groups[1]=n.renderPipes.uniformBatch.getUniformBindGroup(a,!0)}n.encoder.draw({geometry:t._geometry,shader:i,state:t.state})}destroy(){this._shader.destroy(!0),this._shader=null}}pE.extension={type:[re.WebGPUPipesAdaptor],name:"mesh"};const oN=[...XT,iE,tE,Bm,rE,QT,hE,oE,lE,uE,aE,eE,nE,JT],lN=[...YT,sE],uN=[KS,pE,dE],gE=[],mE=[],vE=[];ze.handleByNamedList(re.WebGPUSystem,gE);ze.handleByNamedList(re.WebGPUPipes,mE);ze.handleByNamedList(re.WebGPUPipesAdaptor,vE);ze.add(...oN,...lN,...uN);class cN extends bf{constructor(){const e={name:"webgpu",type:jr.WEBGPU,systems:gE,renderPipes:mE,renderPipeAdaptors:vE};super(e)}}const fN=Object.freeze(Object.defineProperty({__proto__:null,WebGPURenderer:cN},Symbol.toStringTag,{value:"Module"}));class hN{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(e=>{jt.return(e)}),this.batches.length=0}}class _E{constructor(e,t){this.state=Pn.for2d(),this.renderer=e,this._adaptor=t,this.renderer.runners.contextChange.add(this),this._managedGraphics=new Wr({renderer:e,type:"renderable",priority:-1,name:"graphics"})}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){const t=e.context,n=!!e._gpuData,i=this.renderer.graphicsContext.updateGpuContext(t);return!!(i.isBatchable||n!==i.isBatchable)}addRenderable(e,t){const n=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),n.isBatchable?this._addToBatcher(e,t):(this.renderer.renderPipes.batch.break(t),t.add(e))}updateRenderable(e){const n=this._getGpuDataForRenderable(e).batches;for(let i=0;i<n.length;i++){const s=n[i];s._batcher.updateElement(s)}}execute(e){if(!e.isRenderable)return;const t=this.renderer,n=e.context;if(!t.graphicsContext.getGpuContext(n).batches.length)return;const s=n.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;const a=s.resources.localUniforms.uniforms;a.uTransformMatrix=e.groupTransform,a.uRound=t._roundPixels|e._roundPixels,tu(e.groupColorAlpha,a.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){const t=this._getGpuDataForRenderable(e),n=this.renderer.graphicsContext.updateGpuContext(e.context);t.destroy(),n.isBatchable&&this._updateBatchesForRenderable(e,t)}_addToBatcher(e,t){const n=this.renderer.renderPipes.batch,i=this._getGpuDataForRenderable(e).batches;for(let s=0;s<i.length;s++){const a=i[s];n.addToBatch(a,t)}}_getGpuDataForRenderable(e){return e._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(e)}_initGpuDataForRenderable(e){const t=new hN;return e._gpuData[this.renderer.uid]=t,this._managedGraphics.add(e),t}_updateBatchesForRenderable(e,t){const n=e.context,i=this.renderer.graphicsContext.getGpuContext(n),s=this.renderer._roundPixels|e._roundPixels;t.batches=i.batches.map(a=>{const o=jt.get(fm);return a.copyTo(o),o.renderable=e,o.roundPixels=s,o})}destroy(){this._managedGraphics.destroy(),this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}}_E.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"graphics"};const bE=class yE extends bm{constructor(...e){super({});let t=e[0]??{};typeof t=="number"&&(Fe(lt,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),t={width:t,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(t)}build(e){e={...yE.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;const t=this.verticesX*this.verticesY,n=[],i=[],s=[],a=this.verticesX-1,o=this.verticesY-1,l=this.width/a,u=this.height/o;for(let f=0;f<t;f++){const h=f%this.verticesX,d=f/this.verticesX|0;n.push(h*l,d*u),i.push(h/a,d/o)}const c=a*o;for(let f=0;f<c;f++){const h=f%a,d=f/a|0,p=d*this.verticesX+h,v=d*this.verticesX+h+1,m=(d+1)*this.verticesX+h,g=(d+1)*this.verticesX+h+1;s.push(p,v,m,v,g,m)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint32Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};bE.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let dN=bE;class Fm{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){const t=this.geometry.getBuffer("aUV"),n=t.data;let i=n;const s=this.texture.textureMatrix;return s.isSimple||(i=this._transformedUvs,(this._textureMatrixUpdateId!==s._updateID||this._uvUpdateId!==t._updateID)&&((!i||i.length<n.length)&&(i=this._transformedUvs=new Float32Array(n.length)),this._textureMatrixUpdateId=s._updateID,this._uvUpdateId=t._updateID,s.multiplyUvs(n,i))),i}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}class yy{destroy(){}}class xE{constructor(e,t){this.localUniforms=new mr({uTransformMatrix:{value:new Oe,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new wi({0:this.localUniforms}),this.renderer=e,this._adaptor=t,this._adaptor.init()}validateRenderable(e){const t=this._getMeshData(e),n=t.batched,i=e.batched;if(t.batched=i,n!==i)return!0;if(i){const s=e._geometry;if(s.indices.length!==t.indexSize||s.positions.length!==t.vertexSize)return t.indexSize=s.indices.length,t.vertexSize=s.positions.length,!0;const a=this._getBatchableMesh(e);return a.texture.uid!==e._texture.uid&&(a._textureMatrixUpdateId=-1),!a._batcher.checkAndUpdateTexture(a,e._texture)}return!1}addRenderable(e,t){const n=this.renderer.renderPipes.batch,i=this._getMeshData(e);if(e.didViewUpdate&&(i.indexSize=e._geometry.indices?.length,i.vertexSize=e._geometry.positions?.length),i.batched){const s=this._getBatchableMesh(e);s.setTexture(e._texture),s.geometry=e._geometry,n.addToBatch(s,t)}else n.break(t),t.add(e)}updateRenderable(e){if(e.batched){const t=this._getBatchableMesh(e);t.setTexture(e._texture),t.geometry=e._geometry,t._batcher.updateElement(t)}}execute(e){if(!e.isRenderable)return;e.state.blendMode=Rl(e.groupBlendMode,e.texture._source);const t=this.localUniforms;t.uniforms.uTransformMatrix=e.groupTransform,t.uniforms.uRound=this.renderer._roundPixels|e._roundPixels,t.update(),tu(e.groupColorAlpha,t.uniforms.uColor,0),this._adaptor.execute(this,e)}_getMeshData(e){var t,n;return(t=e._gpuData)[n=this.renderer.uid]||(t[n]=new yy),e._gpuData[this.renderer.uid].meshData||this._initMeshData(e)}_initMeshData(e){return e._gpuData[this.renderer.uid].meshData={batched:e.batched,indexSize:0,vertexSize:0},e._gpuData[this.renderer.uid].meshData}_getBatchableMesh(e){var t,n;return(t=e._gpuData)[n=this.renderer.uid]||(t[n]=new yy),e._gpuData[this.renderer.uid].batchableMesh||this._initBatchableMesh(e)}_initBatchableMesh(e){const t=new Fm;return t.renderable=e,t.setTexture(e._texture),t.transform=e.groupTransform,t.roundPixels=this.renderer._roundPixels|e._roundPixels,e._gpuData[this.renderer.uid].batchableMesh=t,t}destroy(){this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}xE.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"mesh"};class pN{execute(e,t){const n=e.state,i=e.renderer,s=t.shader||e.defaultShader;s.resources.uTexture=t.texture._source,s.resources.uniforms=e.localUniforms;const a=i.gl,o=e.getBuffers(t);i.shader.bind(s),i.state.set(n),i.geometry.bind(o.geometry,s.glProgram);const u=o.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;a.drawElements(a.TRIANGLES,t.particleChildren.length*6,u,0)}}class gN{execute(e,t){const n=e.renderer,i=t.shader||e.defaultShader;i.groups[0]=n.renderPipes.uniformBatch.getUniformBindGroup(e.localUniforms,!0),i.groups[1]=n.texture.getTextureBindGroup(t.texture);const s=e.state,a=e.getBuffers(t);n.encoder.draw({geometry:a.geometry,shader:t.shader||e.defaultShader,state:s,size:t.particleChildren.length*6})}}function xy(r,e=null){const t=r*6;if(t>65535?e||(e=new Uint32Array(t)):e||(e=new Uint16Array(t)),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let n=0,i=0;n<t;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function mN(r){return{dynamicUpdate:wy(r,!0),staticUpdate:wy(r,!1)}}function wy(r,e){const t=[];t.push(`

        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let n=0;for(const s in r){const a=r[s];if(e!==a.dynamic)continue;t.push(`offset = index + ${n}`),t.push(a.code);const o=es(a.format);n+=o.stride/4}t.push(`
            index += stride * 4;
        }
    `),t.unshift(`
        var stride = ${n};
    `);const i=t.join(`
`);return new Function("ps","f32v","u32v",i)}class vN{constructor(e){this._size=0,this._generateParticleUpdateCache={};const t=this._size=e.size??1e3,n=e.properties;let i=0,s=0;for(const c in n){const f=n[c],h=es(f.format);f.dynamic?s+=h.stride:i+=h.stride}this._dynamicStride=s/4,this._staticStride=i/4,this.staticAttributeBuffer=new Sa(t*4*i),this.dynamicAttributeBuffer=new Sa(t*4*s),this.indexBuffer=xy(t);const a=new Kl;let o=0,l=0;this._staticBuffer=new Gr({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:at.VERTEX|at.COPY_DST}),this._dynamicBuffer=new Gr({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:at.VERTEX|at.COPY_DST});for(const c in n){const f=n[c],h=es(f.format);f.dynamic?(a.addAttribute(f.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:o*4,format:f.format}),o+=h.size):(a.addAttribute(f.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:l*4,format:f.format}),l+=h.size)}a.addIndex(this.indexBuffer);const u=this.getParticleUpdate(n);this._dynamicUpload=u.dynamicUpdate,this._staticUpload=u.staticUpdate,this.geometry=a}getParticleUpdate(e){const t=_N(e);return this._generateParticleUpdateCache[t]?this._generateParticleUpdateCache[t]:(this._generateParticleUpdateCache[t]=this.generateParticleUpdate(e),this._generateParticleUpdateCache[t])}generateParticleUpdate(e){return mN(e)}update(e,t){e.length>this._size&&(t=!0,this._size=Math.max(e.length,this._size*1.5|0),this.staticAttributeBuffer=new Sa(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new Sa(this._size*this._dynamicStride*4*4),this.indexBuffer=xy(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));const n=this.dynamicAttributeBuffer;if(this._dynamicUpload(e,n.float32View,n.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,e.length*this._dynamicStride*4,!0),t){const i=this.staticAttributeBuffer;this._staticUpload(e,i.float32View,i.uint32View),this._staticBuffer.setDataWithSize(i.float32View,e.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}function _N(r){const e=[];for(const t in r){const n=r[t];e.push(t,n.code,n.dynamic?"d":"s")}return e.join("_")}var bN=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`,yN=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,Sy=`
struct ParticleUniforms {
  uTranslationMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uRound:f32,
  uResolution:vec2<f32>,
};

fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
{
  return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   var position = vec4((uniforms.uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

   if(uniforms.uRound == 1.0) {
       position = vec4(roundPixels(position.xy, uniforms.uResolution), position.zw);
   }

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`;class xN extends dn{constructor(){const e=sr.from({vertex:yN,fragment:bN}),t=Jt.from({fragment:{source:Sy,entryPoint:"mainFragment"},vertex:{source:Sy,entryPoint:"mainVertex"}});super({glProgram:e,gpuProgram:t,resources:{uTexture:Re.WHITE.source,uSampler:new fn({}),uniforms:{uTranslationMatrix:{value:new Oe,type:"mat3x3<f32>"},uColor:{value:new ht(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}class wE{constructor(e,t){this.state=Pn.for2d(),this.localUniforms=new mr({uTranslationMatrix:{value:new Oe,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=e,this.adaptor=t,this.defaultShader=new xN,this.state=Pn.for2d(),this._managedContainers=new Wr({renderer:e,type:"renderable",name:"particleContainer"})}validateRenderable(e){return!1}addRenderable(e,t){this.renderer.renderPipes.batch.break(t),t.add(e)}getBuffers(e){return e._gpuData[this.renderer.uid]||this._initBuffer(e)}_initBuffer(e){return e._gpuData[this.renderer.uid]=new vN({size:e.particleChildren.length,properties:e._properties}),this._managedContainers.add(e),e._gpuData[this.renderer.uid]}updateRenderable(e){}execute(e){const t=e.particleChildren;if(t.length===0)return;const n=this.renderer,i=this.getBuffers(e);e.texture||(e.texture=t[0].texture);const s=this.state;i.update(t,e._childrenDirty),e._childrenDirty=!1,s.blendMode=Rl(e.blendMode,e.texture._source);const a=this.localUniforms.uniforms,o=a.uTranslationMatrix;e.worldTransform.copyTo(o),o.prepend(n.globalUniforms.globalUniformData.projectionMatrix),a.uResolution=n.globalUniforms.globalUniformData.resolution,a.uRound=n._roundPixels|e._roundPixels,tu(e.groupColorAlpha,a.uColor,0),this.adaptor.execute(this,e)}destroy(){this._managedContainers.destroy(),this.renderer=null,this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}class SE extends wE{constructor(e){super(e,new pN)}}SE.extension={type:[re.WebGLPipes],name:"particle"};class TE extends wE{constructor(e){super(e,new gN)}}TE.extension={type:[re.WebGPUPipes],name:"particle"};const EE=class AE extends dN{constructor(e={}){e={...AE.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){this.width=e.width??this.width,this.height=e.height??this.height,this._originalWidth=e.originalWidth??this._originalWidth,this._originalHeight=e.originalHeight??this._originalHeight,this._leftWidth=e.leftWidth??this._leftWidth,this._rightWidth=e.rightWidth??this._rightWidth,this._topHeight=e.topHeight??this._topHeight,this._bottomHeight=e.bottomHeight??this._bottomHeight,this._anchorX=e.anchor?.x,this._anchorY=e.anchor?.y,this.updateUvs(),this.updatePositions()}updatePositions(){const e=this.positions,{width:t,height:n,_leftWidth:i,_rightWidth:s,_topHeight:a,_bottomHeight:o,_anchorX:l,_anchorY:u}=this,c=i+s,f=t>c?1:t/c,h=a+o,d=n>h?1:n/h,p=Math.min(f,d),v=l*t,m=u*n;e[0]=e[8]=e[16]=e[24]=-v,e[2]=e[10]=e[18]=e[26]=i*p-v,e[4]=e[12]=e[20]=e[28]=t-s*p-v,e[6]=e[14]=e[22]=e[30]=t-v,e[1]=e[3]=e[5]=e[7]=-m,e[9]=e[11]=e[13]=e[15]=a*p-m,e[17]=e[19]=e[21]=e[23]=n-o*p-m,e[25]=e[27]=e[29]=e[31]=n-m,this.getBuffer("aPosition").update()}updateUvs(){const e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;const t=1/this._originalWidth,n=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=t*this._leftWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-t*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.getBuffer("aUV").update()}};EE.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let wN=EE;class SN extends Fm{constructor(){super(),this.geometry=new wN}destroy(){this.geometry.destroy()}}class CE{constructor(e){this._renderer=e,this._managedSprites=new Wr({renderer:e,type:"renderable",name:"nineSliceSprite"})}addRenderable(e,t){const n=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,n),this._renderer.renderPipes.batch.addToBatch(n,t)}updateRenderable(e){const t=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,t),t._batcher.updateElement(t)}validateRenderable(e){const t=this._getGpuSprite(e);return!t._batcher.checkAndUpdateTexture(t,e._texture)}_updateBatchableSprite(e,t){t.geometry.update(e),t.setTexture(e._texture)}_getGpuSprite(e){return e._gpuData[this._renderer.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const t=e._gpuData[this._renderer.uid]=new SN,n=t;return n.renderable=e,n.transform=e.groupTransform,n.texture=e._texture,n.roundPixels=this._renderer._roundPixels|e._roundPixels,this._managedSprites.add(e),e.didViewUpdate||this._updateBatchableSprite(e,n),t}destroy(){this._managedSprites.destroy(),this._renderer=null}}CE.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"nineSliceSprite"};const TN={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            }

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},EN={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;

        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

        `}};let Cd,Pd;class AN extends dn{constructor(){Cd??(Cd=Zl({name:"tiling-sprite-shader",bits:[ml,TN,Ql]})),Pd??(Pd=Jl({name:"tiling-sprite-shader",bits:[wm,EN,eu]}));const e=new mr({uMapCoord:{value:new Oe,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new Oe,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:Pd,gpuProgram:Cd,resources:{localUniforms:new mr({uTransformMatrix:{value:new Oe,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:e,uTexture:Re.EMPTY.source,uSampler:Re.EMPTY.source.style}})}updateUniforms(e,t,n,i,s,a){const o=this.resources.tilingUniforms,l=a.width,u=a.height,c=a.textureMatrix,f=o.uniforms.uTextureTransform;f.set(n.a*l/e,n.b*l/t,n.c*u/e,n.d*u/t,n.tx/e,n.ty/t),f.invert(),o.uniforms.uMapCoord=c.mapCoord,o.uniforms.uClampFrame=c.uClampFrame,o.uniforms.uClampOffset=c.uClampOffset,o.uniforms.uTextureTransform=f,o.uniforms.uSizeAnchor[0]=e,o.uniforms.uSizeAnchor[1]=t,o.uniforms.uSizeAnchor[2]=i,o.uniforms.uSizeAnchor[3]=s,a&&(this.resources.uTexture=a.source,this.resources.uSampler=a.source.style)}}class CN extends bm{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}function PN(r,e){const t=r.anchor.x,n=r.anchor.y;e[0]=-t*r.width,e[1]=-n*r.height,e[2]=(1-t)*r.width,e[3]=-n*r.height,e[4]=(1-t)*r.width,e[5]=(1-n)*r.height,e[6]=-t*r.width,e[7]=(1-n)*r.height}function RN(r,e,t,n){let i=0;const s=r.length/e,a=n.a,o=n.b,l=n.c,u=n.d,c=n.tx,f=n.ty;for(t*=e;i<s;){const h=r[t],d=r[t+1];r[t]=a*h+l*d+c,r[t+1]=o*h+u*d+f,t+=e,i++}}function kN(r,e){const t=r.texture,n=t.frame.width,i=t.frame.height;let s=0,a=0;r.applyAnchorToTexture&&(s=r.anchor.x,a=r.anchor.y),e[0]=e[6]=-s,e[2]=e[4]=1-s,e[1]=e[3]=-a,e[5]=e[7]=1-a;const o=Oe.shared;o.copyFrom(r._tileTransform.matrix),o.tx/=r.width,o.ty/=r.height,o.invert(),o.scale(r.width/n,r.height/i),RN(e,2,0,o)}const gc=new CN;class MN{constructor(){this.canBatch=!0,this.geometry=new bm({indices:gc.indices.slice(),positions:gc.positions.slice(),uvs:gc.uvs.slice()})}destroy(){this.geometry.destroy(),this.shader?.destroy()}}class PE{constructor(e){this._state=Pn.default2d,this._renderer=e,this._managedTilingSprites=new Wr({renderer:e,type:"renderable",name:"tilingSprite"})}validateRenderable(e){const t=this._getTilingSpriteData(e),n=t.canBatch;this._updateCanBatch(e);const i=t.canBatch;if(i&&i===n){const{batchableMesh:s}=t;return!s._batcher.checkAndUpdateTexture(s,e.texture)}return n!==i}addRenderable(e,t){const n=this._renderer.renderPipes.batch;this._updateCanBatch(e);const i=this._getTilingSpriteData(e),{geometry:s,canBatch:a}=i;if(a){i.batchableMesh||(i.batchableMesh=new Fm);const o=i.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),o.geometry=s,o.renderable=e,o.transform=e.groupTransform,o.setTexture(e._texture)),o.roundPixels=this._renderer._roundPixels|e._roundPixels,n.addToBatch(o,t)}else n.break(t),i.shader||(i.shader=new AN),this.updateRenderable(e),t.add(e)}execute(e){const{shader:t}=this._getTilingSpriteData(e);t.groups[0]=this._renderer.globalUniforms.bindGroup;const n=t.resources.localUniforms.uniforms;n.uTransformMatrix=e.groupTransform,n.uRound=this._renderer._roundPixels|e._roundPixels,tu(e.groupColorAlpha,n.uColor,0),this._state.blendMode=Rl(e.groupBlendMode,e.texture._source),this._renderer.encoder.draw({geometry:gc,shader:t,state:this._state})}updateRenderable(e){const t=this._getTilingSpriteData(e),{canBatch:n}=t;if(n){const{batchableMesh:i}=t;e.didViewUpdate&&this._updateBatchableMesh(e),i._batcher.updateElement(i)}else if(e.didViewUpdate){const{shader:i}=t;i.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}_getTilingSpriteData(e){return e._gpuData[this._renderer.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){const t=new MN;return t.renderable=e,e._gpuData[this._renderer.uid]=t,this._managedTilingSprites.add(e),t}_updateBatchableMesh(e){const t=this._getTilingSpriteData(e),{geometry:n}=t,i=e.texture.source.style;i.addressMode!=="repeat"&&(i.addressMode="repeat",i.update()),kN(e,n.uvs),PN(e,n.positions)}destroy(){this._managedTilingSprites.destroy(),this._renderer=null}_updateCanBatch(e){const t=this._getTilingSpriteData(e),n=e.texture;let i=!0;return this._renderer.type===jr.WEBGL&&(i=this._renderer.context.supports.nonPowOf2wrapping),t.canBatch=n.textureMatrix.isSimple&&(i||n.source.isPowerOfTwo),t.canBatch}}PE.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"tilingSprite"};const ON={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:`
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},IN={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:`
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}},BN={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;

            }
        `}},FN={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);

                return coverage;
            }
        `}};let Rd,kd;class DN extends dn{constructor(e){const t=new mr({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Oe,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}});Rd??(Rd=Zl({name:"sdf-shader",bits:[sm,om(e),ON,BN,Ql]})),kd??(kd=Jl({name:"sdf-shader",bits:[am,lm(e),IN,FN,eu]})),super({glProgram:kd,gpuProgram:Rd,resources:{localUniforms:t,batchSamplers:um(e)}})}}class LN extends Kn{destroy(){this.context.customShader&&this.context.customShader.destroy(),super.destroy()}}class RE{constructor(e){this._renderer=e,this._managedBitmapTexts=new Wr({renderer:e,type:"renderable",priority:-2,name:"bitmapText"})}validateRenderable(e){const t=this._getGpuBitmapText(e);return this._renderer.renderPipes.graphics.validateRenderable(t)}addRenderable(e,t){const n=this._getGpuBitmapText(e);Ty(e,n),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,n)),this._renderer.renderPipes.graphics.addRenderable(n,t),n.context.customShader&&this._updateDistanceField(e)}updateRenderable(e){const t=this._getGpuBitmapText(e);Ty(e,t),this._renderer.renderPipes.graphics.updateRenderable(t),t.context.customShader&&this._updateDistanceField(e)}_updateContext(e,t){const{context:n}=t,i=Gp.getFont(e.text,e._style);n.clear(),i.distanceField.type!=="none"&&(n.customShader||(n.customShader=new DN(this._renderer.limits.maxBatchableTextures)));const s=lr.graphemeSegmenter(e.text),a=e._style;let o=i.baseLineOffset;const l=CS(s,a,i,!0),u=a.padding,c=l.scale;let f=l.width,h=l.height+l.offsetY;a._stroke&&(f+=a._stroke.width/c,h+=a._stroke.width/c),n.translate(-e._anchor._x*f-u,-e._anchor._y*h-u).scale(c,c);const d=i.applyFillAsTint?a._fill.color:16777215;let p=i.fontMetrics.fontSize,v=i.lineHeight;a.lineHeight&&(p=a.fontSize/c,v=a.lineHeight/c);let m=(v-p)/2;m-i.baseLineOffset<0&&(m=0);for(let g=0;g<l.lines.length;g++){const _=l.lines[g];for(let b=0;b<_.charPositions.length;b++){const w=_.chars[b],S=i.chars[w];if(S?.texture){const T=S.texture;n.texture(T,d||"black",Math.round(_.charPositions[b]+S.xOffset),Math.round(o+S.yOffset+m),T.orig.width,T.orig.height)}}o+=v}}_getGpuBitmapText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const t=new LN;return e._gpuData[this._renderer.uid]=t,this._updateContext(e,t),this._managedBitmapTexts.add(e),t}_updateDistanceField(e){const t=this._getGpuBitmapText(e).context,n=e._style.fontFamily,i=yt.get(`${n}-bitmap`),{a:s,b:a,c:o,d:l}=e.groupTransform,u=Math.sqrt(s*s+a*a),c=Math.sqrt(o*o+l*l),f=(Math.abs(u)+Math.abs(c))/2,h=i.baseRenderedFontSize/e._style.fontSize,d=f*i.distanceField.range*(1/h);t.customShader.resources.localUniforms.uniforms.uDistance=d}destroy(){this._managedBitmapTexts.destroy(),this._renderer=null,this._managedBitmapTexts=null}}RE.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"bitmapText"};function Ty(r,e){e.groupTransform=r.groupTransform,e.groupColorAlpha=r.groupColorAlpha,e.groupColor=r.groupColor,e.groupBlendMode=r.groupBlendMode,e.globalDisplayStatus=r.globalDisplayStatus,e.groupTransform=r.groupTransform,e.localDisplayStatus=r.localDisplayStatus,e.groupAlpha=r.groupAlpha,e._roundPixels=r._roundPixels}class UN extends Sf{constructor(){super(...arguments),this.generatingTexture=!1,this.currentKey="--"}destroy(){this.texturePromise=null,this.generatingTexture=!1,this.currentKey="--",super.destroy()}}function Yp(r,e){const{texture:t,bounds:n}=r,i=e._style._getFinalPadding();g2(n,e._anchor,t);const s=e._anchor._x*i*2,a=e._anchor._y*i*2;n.minX-=i-s,n.minY-=i-a,n.maxX-=i-s,n.maxY-=i-a}class kE{constructor(e){this._renderer=e,e.runners.resolutionChange.add(this),this._managedTexts=new Wr({renderer:e,type:"renderable",onUnload:this.onTextUnload.bind(this),name:"htmlText"})}resolutionChange(){for(const e in this._managedTexts.items){const t=this._managedTexts.items[e];t?._autoResolution&&t.onViewUpdate()}}validateRenderable(e){const t=this._getGpuText(e),n=e.styleKey;return t.currentKey!==n}addRenderable(e,t){const n=this._getGpuText(e);if(e._didTextUpdate){const i=e._autoResolution?this._renderer.resolution:e.resolution;(n.currentKey!==e.styleKey||e.resolution!==i)&&this._updateGpuText(e).catch(s=>{console.error(s)}),e._didTextUpdate=!1,Yp(n,e)}this._renderer.renderPipes.batch.addToBatch(n,t)}updateRenderable(e){const t=this._getGpuText(e);t._batcher.updateElement(t)}async _updateGpuText(e){e._didTextUpdate=!1;const t=this._getGpuText(e);if(t.generatingTexture)return;const n=t.texturePromise;t.texturePromise=null,t.generatingTexture=!0,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;let i=this._renderer.htmlText.getTexturePromise(e);n&&(i=i.finally(()=>{this._renderer.htmlText.decreaseReferenceCount(t.currentKey),this._renderer.htmlText.returnTexturePromise(n)})),t.texturePromise=i,t.currentKey=e.styleKey,t.texture=await i;const s=e.renderGroup||e.parentRenderGroup;s&&(s.structureDidChange=!0),t.generatingTexture=!1,Yp(t,e)}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const t=new UN;return t.renderable=e,t.transform=e.groupTransform,t.texture=Re.EMPTY,t.bounds={minX:0,maxX:1,minY:0,maxY:0},t.roundPixels=this._renderer._roundPixels|e._roundPixels,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,e._gpuData[this._renderer.uid]=t,this._managedTexts.add(e),t}onTextUnload(e){const t=e._gpuData[this._renderer.uid];if(!t)return;const{htmlText:n}=this._renderer;n.getReferenceCount(t.currentKey)===null?n.returnTexturePromise(t.texturePromise):n.decreaseReferenceCount(t.currentKey)}destroy(){this._managedTexts.destroy(),this._renderer=null}}kE.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"htmlText"};function NN(){const{userAgent:r}=Ye.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(r)}const GN=new hr;function ME(r,e,t,n){const i=GN;i.minX=0,i.minY=0,i.maxX=r.width/n|0,i.maxY=r.height/n|0;const s=vt.getOptimalTexture(i.width,i.height,n,!1);return s.source.uploadMethodId="image",s.source.resource=r,s.source.alphaMode="premultiply-alpha-on-upload",s.frame.width=e/n,s.frame.height=t/n,s.source.emit("update",s.source),s.updateUvs(),s}function zN(r,e){const t=e.fontFamily,n=[],i={},s=/font-family:([^;"\s]+)/g,a=r.match(s);function o(l){i[l]||(n.push(l),i[l]=!0)}if(Array.isArray(t))for(let l=0;l<t.length;l++)o(t[l]);else o(t);a&&a.forEach(l=>{const u=l.split(":")[1].trim();o(u)});for(const l in e.tagStyles){const u=e.tagStyles[l].fontFamily;o(u)}return n}async function jN(r){const t=await(await Ye.get().fetch(r)).blob(),n=new FileReader;return await new Promise((s,a)=>{n.onloadend=()=>s(n.result),n.onerror=a,n.readAsDataURL(t)})}async function HN(r,e){const t=await jN(e);return`@font-face {
        font-family: "${r.fontFamily}";
        font-weight: ${r.fontWeight};
        font-style: ${r.fontStyle};
        src: url('${t}');
    }`}const Md=new Map;async function VN(r){const e=r.filter(t=>yt.has(`${t}-and-url`)).map(t=>{if(!Md.has(t)){const{entries:n}=yt.get(`${t}-and-url`),i=[];n.forEach(s=>{const a=s.url,l=s.faces.map(u=>({weight:u.weight,style:u.style}));i.push(...l.map(u=>HN({fontWeight:u.weight,fontStyle:u.style,fontFamily:t},a)))}),Md.set(t,Promise.all(i).then(s=>s.join(`
`)))}return Md.get(t)});return(await Promise.all(e)).join(`
`)}function WN(r,e,t,n,i){const{domElement:s,styleElement:a,svgRoot:o}=i;s.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${r}</div>`,s.setAttribute("style",`transform: scale(${t});transform-origin: top left; display: inline-block`),a.textContent=n;const{width:l,height:u}=i.image;return o.setAttribute("width",l.toString()),o.setAttribute("height",u.toString()),new XMLSerializer().serializeToString(o)}function qN(r,e){const t=ki.getOptimalCanvasAndContext(r.width,r.height,e),{context:n}=t;return n.clearRect(0,0,r.width,r.height),n.drawImage(r,0,0),t}function XN(r,e,t){return new Promise(async n=>{t&&await new Promise(i=>setTimeout(i,100)),r.onload=()=>{n()},r.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,r.crossOrigin="anonymous"})}class OE{constructor(e){this._activeTextures={},this._renderer=e,this._createCanvas=e.type===jr.WEBGPU}getTexture(e){return this.getTexturePromise(e)}getManagedTexture(e){const t=e.styleKey;if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].promise;const n=this._buildTexturePromise(e).then(i=>(this._activeTextures[t].texture=i,i));return this._activeTextures[t]={texture:null,promise:n,usageCount:1},n}getReferenceCount(e){return this._activeTextures[e]?.usageCount??null}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){const t=this._activeTextures[e];t&&(t.usageCount--,t.usageCount===0&&(t.texture?this._cleanUp(t.texture):t.promise.then(n=>{t.texture=n,this._cleanUp(t.texture)}).catch(()=>{Ne("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[e]=null))}getTexturePromise(e){return this._buildTexturePromise(e)}async _buildTexturePromise(e){const{text:t,style:n,resolution:i,textureStyle:s}=e,a=jt.get(XS),o=zN(t,n),l=await VN(o),u=YS(t,n,l,a),c=Math.ceil(Math.ceil(Math.max(1,u.width)+n.padding*2)*i),f=Math.ceil(Math.ceil(Math.max(1,u.height)+n.padding*2)*i),h=a.image,d=2;h.width=(c|0)+d,h.height=(f|0)+d;const p=WN(t,n,i,l,a);await XN(h,p,NN()&&o.length>0);const v=h;let m;this._createCanvas&&(m=qN(h,i));const g=ME(m?m.canvas:v,h.width-d,h.height-d,i);return s&&(g.source.style=s),this._createCanvas&&(this._renderer.texture.initSource(g.source),ki.returnCanvasAndContext(m)),jt.return(a),g}returnTexturePromise(e){e.then(t=>{this._cleanUp(t)}).catch(()=>{Ne("HTMLTextSystem: Failed to clean texture")})}_cleanUp(e){vt.returnTexture(e,!0),e.source.resource=null,e.source.uploadMethodId="unknown"}destroy(){this._renderer=null;for(const e in this._activeTextures)this._activeTextures[e]&&this.returnTexturePromise(this._activeTextures[e].promise);this._activeTextures=null}}OE.extension={type:[re.WebGLSystem,re.WebGPUSystem,re.CanvasSystem],name:"htmlText"};class YN extends Sf{}class IE{constructor(e){this._renderer=e,e.runners.resolutionChange.add(this),this._managedTexts=new Wr({renderer:e,type:"renderable",onUnload:this.onTextUnload.bind(this),name:"canvasText"})}resolutionChange(){for(const e in this._managedTexts.items){const t=this._managedTexts.items[e];t?._autoResolution&&t.onViewUpdate()}}validateRenderable(e){const t=this._getGpuText(e),n=e.styleKey;return t.currentKey!==n?!0:e._didTextUpdate}addRenderable(e,t){const n=this._getGpuText(e);if(e._didTextUpdate){const i=e._autoResolution?this._renderer.resolution:e.resolution;(n.currentKey!==e.styleKey||e.resolution!==i)&&this._updateGpuText(e),e._didTextUpdate=!1,Yp(n,e)}this._renderer.renderPipes.batch.addToBatch(n,t)}updateRenderable(e){const t=this._getGpuText(e);t._batcher.updateElement(t)}_updateGpuText(e){const t=this._getGpuText(e);t.texture&&this._renderer.canvasText.decreaseReferenceCount(t.currentKey),e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,t.texture=this._renderer.canvasText.getManagedTexture(e),t.currentKey=e.styleKey}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const t=new YN;return t.currentKey="--",t.renderable=e,t.transform=e.groupTransform,t.bounds={minX:0,maxX:1,minY:0,maxY:0},t.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=t,this._managedTexts.add(e),t}onTextUnload(e){const t=e._gpuData[this._renderer.uid];if(!t)return;const{canvasText:n}=this._renderer;n.getReferenceCount(t.currentKey)>0?n.decreaseReferenceCount(t.currentKey):t.texture&&n.returnTexture(t.texture)}destroy(){this._managedTexts.destroy(),this._renderer=null}}IE.extension={type:[re.WebGLPipes,re.WebGPUPipes,re.CanvasPipes],name:"text"};class BE{constructor(e){this._activeTextures={},this._renderer=e}getTexture(e,t,n,i){typeof e=="string"&&(Fe("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),e={text:e,style:n,resolution:t}),e.style instanceof ts||(e.style=new ts(e.style)),e.textureStyle instanceof fn||(e.textureStyle=new fn(e.textureStyle)),typeof e.text!="string"&&(e.text=e.text.toString());const{text:s,style:a,textureStyle:o}=e,l=e.resolution??this._renderer.resolution,{frame:u,canvasAndContext:c}=gl.getCanvasAndContext({text:s,style:a,resolution:l}),f=ME(c.canvas,u.width,u.height,l);if(o&&(f.source.style=o),a.trim&&(u.pad(a.padding),f.frame.copyFrom(u),f.frame.scale(1/l),f.updateUvs()),a.filters){const h=this._applyFilters(f,a.filters);return this.returnTexture(f),gl.returnCanvasAndContext(c),h}return this._renderer.texture.initSource(f._source),gl.returnCanvasAndContext(c),f}returnTexture(e){const t=e.source;t.resource=null,t.uploadMethodId="unknown",t.alphaMode="no-premultiply-alpha",vt.returnTexture(e,!0)}renderTextToCanvas(){Fe("8.10.0","CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead")}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;const t=e.styleKey;if(this._activeTextures[t])return this._increaseReferenceCount(t),this._activeTextures[t].texture;const n=this.getTexture({text:e.text,style:e.style,resolution:e._resolution,textureStyle:e.textureStyle});return this._activeTextures[t]={texture:n,usageCount:1},n}decreaseReferenceCount(e){const t=this._activeTextures[e];t.usageCount--,t.usageCount===0&&(this.returnTexture(t.texture),this._activeTextures[e]=null)}getReferenceCount(e){return this._activeTextures[e]?.usageCount??0}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}_applyFilters(e,t){const n=this._renderer.renderTarget.renderTarget,i=this._renderer.filter.generateFilteredTexture({texture:e,filters:t});return this._renderer.renderTarget.bind(n,!1),i}destroy(){this._renderer=null;for(const e in this._activeTextures)this._activeTextures[e]&&this.returnTexture(this._activeTextures[e].texture);this._activeTextures=null}}BE.extension={type:[re.WebGLSystem,re.WebGPUSystem,re.CanvasSystem],name:"canvasText"};ze.add(vB,_B);var rs=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,ns=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}`,$N=`in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform float uGamma;
uniform float uContrast;
uniform float uSaturation;
uniform float uBrightness;
uniform vec4 uColor;

void main()
{
    vec4 c = texture(uTexture, vTextureCoord);

    if (c.a > 0.0) {
        c.rgb /= c.a;

        vec3 rgb = pow(c.rgb, vec3(1. / uGamma));
        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, uSaturation), uContrast);
        rgb.r *= uColor.r;
        rgb.g *= uColor.g;
        rgb.b *= uColor.b;
        c.rgb = rgb * uBrightness;

        c.rgb *= c.a;
    }

    finalColor = c * uColor.a;
}
`,KN=`struct AdjustmentUniforms {
  uGamma: f32,
  uContrast: f32,
  uSaturation: f32,
  uBrightness: f32,
  uColor: vec4<f32>,
};

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> adjustmentUniforms : AdjustmentUniforms;

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
  var sample = textureSample(uTexture, uSampler, uv);
  let color = adjustmentUniforms.uColor;

  if (sample.a > 0.0) 
  {
    sample = vec4<f32>(sample.rgb / sample.a, sample.a);
    var rgb: vec3<f32> = pow(sample.rgb, vec3<f32>(1. / adjustmentUniforms.uGamma));
    rgb = mix(vec3<f32>(.5), mix(vec3<f32>(dot(vec3<f32>(.2125, .7154, .0721), rgb)), rgb, adjustmentUniforms.uSaturation), adjustmentUniforms.uContrast);
    rgb.r *= color.r;
    rgb.g *= color.g;
    rgb.b *= color.b;
    sample = vec4<f32>(rgb.rgb * adjustmentUniforms.uBrightness, sample.a);
    sample = vec4<f32>(sample.rgb * sample.a, sample.a);
  }

  return sample * color.a;
}`,ZN=Object.defineProperty,JN=(r,e,t)=>e in r?ZN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,FE=(r,e,t)=>(JN(r,typeof e!="symbol"?e+"":e,t),t);const DE=class LE extends Hr{constructor(e){e={...LE.DEFAULT_OPTIONS,...e};const t=Jt.from({vertex:{source:ns,entryPoint:"mainVertex"},fragment:{source:KN,entryPoint:"mainFragment"}}),n=sr.from({vertex:rs,fragment:$N,name:"adjustment-filter"});super({gpuProgram:t,glProgram:n,resources:{adjustmentUniforms:{uGamma:{value:e.gamma,type:"f32"},uContrast:{value:e.contrast,type:"f32"},uSaturation:{value:e.saturation,type:"f32"},uBrightness:{value:e.brightness,type:"f32"},uColor:{value:[e.red,e.green,e.blue,e.alpha],type:"vec4<f32>"}}}}),FE(this,"uniforms"),this.uniforms=this.resources.adjustmentUniforms.uniforms}get gamma(){return this.uniforms.uGamma}set gamma(e){this.uniforms.uGamma=e}get contrast(){return this.uniforms.uContrast}set contrast(e){this.uniforms.uContrast=e}get saturation(){return this.uniforms.uSaturation}set saturation(e){this.uniforms.uSaturation=e}get brightness(){return this.uniforms.uBrightness}set brightness(e){this.uniforms.uBrightness=e}get red(){return this.uniforms.uColor[0]}set red(e){this.uniforms.uColor[0]=e}get green(){return this.uniforms.uColor[1]}set green(e){this.uniforms.uColor[1]=e}get blue(){return this.uniforms.uColor[2]}set blue(e){this.uniforms.uColor[2]=e}get alpha(){return this.uniforms.uColor[3]}set alpha(e){this.uniforms.uColor[3]=e}};FE(DE,"DEFAULT_OPTIONS",{gamma:1,contrast:1,saturation:1,brightness:1,red:1,green:1,blue:1,alpha:1});let QN=DE;var e9=`
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture(uTexture, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture(uTexture, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture(uTexture, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture(uTexture, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    finalColor = color;
}`,t9=`struct KawaseBlurUniforms {
  uOffset:vec2<f32>,
};

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> kawaseBlurUniforms : KawaseBlurUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uOffset = kawaseBlurUniforms.uOffset;
  var color: vec4<f32> = vec4<f32>(0.0);

  // Sample top left pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x - uOffset.x, uv.y + uOffset.y));
  // Sample top right pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x + uOffset.x, uv.y + uOffset.y));
  // Sample bottom right pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x + uOffset.x, uv.y - uOffset.y));
  // Sample bottom left pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x - uOffset.x, uv.y - uOffset.y));
  // Average
  color *= 0.25;

  return color;
}`,r9=`
precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uOffset;

uniform vec4 uInputClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Sample top right pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Sample bottom right pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Sample bottom left pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Average
    color *= 0.25;

    finalColor = color;
}
`,n9=`struct KawaseBlurUniforms {
  uOffset:vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> kawaseBlurUniforms : KawaseBlurUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uOffset = kawaseBlurUniforms.uOffset;
  var color: vec4<f32> = vec4(0.0);

  // Sample top left pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x - uOffset.x, uv.y + uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Sample top right pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x + uOffset.x, uv.y + uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Sample bottom right pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x + uOffset.x, uv.y - uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Sample bottom left pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x - uOffset.x, uv.y - uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Average
  color *= 0.25;
    
  return color;
}`,i9=Object.defineProperty,s9=(r,e,t)=>e in r?i9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ms=(r,e,t)=>(s9(r,typeof e!="symbol"?e+"":e,t),t);const UE=class NE extends Hr{constructor(...e){let t=e[0]??{};(typeof t=="number"||Array.isArray(t))&&(Fe("6.0.0","KawaseBlurFilter constructor params are now options object. See params: { strength, quality, clamp, pixelSize }"),t={strength:t},e[1]!==void 0&&(t.quality=e[1]),e[2]!==void 0&&(t.clamp=e[2])),t={...NE.DEFAULT_OPTIONS,...t};const n=Jt.from({vertex:{source:ns,entryPoint:"mainVertex"},fragment:{source:t?.clamp?n9:t9,entryPoint:"mainFragment"}}),i=sr.from({vertex:rs,fragment:t?.clamp?r9:e9,name:"kawase-blur-filter"});super({gpuProgram:n,glProgram:i,resources:{kawaseBlurUniforms:{uOffset:{value:new Float32Array(2),type:"vec2<f32>"}}}}),ms(this,"uniforms"),ms(this,"_pixelSize",{x:0,y:0}),ms(this,"_clamp"),ms(this,"_kernels",[]),ms(this,"_blur"),ms(this,"_quality"),this.uniforms=this.resources.kawaseBlurUniforms.uniforms,this.pixelSize=t.pixelSize??{x:1,y:1},Array.isArray(t.strength)?this.kernels=t.strength:typeof t.strength=="number"&&(this._blur=t.strength,this.quality=t.quality??3),this._clamp=!!t.clamp}apply(e,t,n,i){const s=this.pixelSizeX/t.source.width,a=this.pixelSizeY/t.source.height;let o;if(this._quality===1||this._blur===0)o=this._kernels[0]+.5,this.uniforms.uOffset[0]=o*s,this.uniforms.uOffset[1]=o*a,e.applyFilter(this,t,n,i);else{const l=vt.getSameSizeTexture(t);let u=t,c=l,f;const h=this._quality-1;for(let d=0;d<h;d++)o=this._kernels[d]+.5,this.uniforms.uOffset[0]=o*s,this.uniforms.uOffset[1]=o*a,e.applyFilter(this,u,c,!0),f=u,u=c,c=f;o=this._kernels[h]+.5,this.uniforms.uOffset[0]=o*s,this.uniforms.uOffset[1]=o*a,e.applyFilter(this,u,n,i),vt.returnTexture(l)}}get strength(){return this._blur}set strength(e){this._blur=e,this._generateKernels()}get quality(){return this._quality}set quality(e){this._quality=Math.max(1,Math.round(e)),this._generateKernels()}get kernels(){return this._kernels}set kernels(e){Array.isArray(e)&&e.length>0?(this._kernels=e,this._quality=e.length,this._blur=Math.max(...e)):(this._kernels=[0],this._quality=1)}get pixelSize(){return this._pixelSize}set pixelSize(e){if(typeof e=="number"){this.pixelSizeX=this.pixelSizeY=e;return}if(Array.isArray(e)){this.pixelSizeX=e[0],this.pixelSizeY=e[1];return}this._pixelSize=e}get pixelSizeX(){return this.pixelSize.x}set pixelSizeX(e){this.pixelSize.x=e}get pixelSizeY(){return this.pixelSize.y}set pixelSizeY(e){this.pixelSize.y=e}get clamp(){return this._clamp}_updatePadding(){this.padding=Math.ceil(this._kernels.reduce((e,t)=>e+t+.5,0))}_generateKernels(){const e=this._blur,t=this._quality,n=[e];if(e>0){let i=e;const s=e/t;for(let a=1;a<t;a++)i-=s,n.push(i)}this._kernels=n,this._updatePadding()}};ms(UE,"DEFAULT_OPTIONS",{strength:4,quality:3,clamp:!1,pixelSize:{x:1,y:1}});let a9=UE;var o9=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uBackground;

void main(void){
    vec4 front = texture(uTexture, vTextureCoord);
    vec4 back = texture(uBackground, vTextureCoord);

    if (front.a == 0.0) {
        discard;
    }
    
    vec3 color = mix(back.rgb, front.rgb / front.a, front.a);

    finalColor = vec4(color, 1.0);
}`,l9=`@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var uBackground: texture_2d<f32>; 

@fragment
fn mainFragment(
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
    var front: vec4<f32> = textureSample(uTexture, uSampler, uv);
    var back: vec4<f32> = textureSample(uBackground, uSampler, uv);
    
    if (front.a == 0.0) {
        discard;
    }

    var color: vec3<f32> = mix(back.rgb, front.rgb / front.a, front.a);

    return vec4<f32>(color, 1.0);
}`,u9=Object.defineProperty,c9=(r,e,t)=>e in r?u9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,f9=(r,e,t)=>(c9(r,e+"",t),t);class h9 extends tn{constructor(e){super(e),f9(this,"_blendPass"),this.blendRequired=!0,this.padding=0,this._blendPass=new Hr({gpuProgram:Jt.from({vertex:{source:ns,entryPoint:"mainVertex"},fragment:{source:l9,entryPoint:"mainFragment"}}),glProgram:sr.from({vertex:rs,fragment:o9,name:"drop-shadow-filter"}),resources:{uBackground:Re.EMPTY}})}apply(e,t,n,i){const s=e._activeFilterData.backTexture,a=vt.getSameSizeTexture(t);super.apply(e,s,a,!0),this._blendPass.resources.uBackground=a.source,this._blendPass.apply(e,t,n,i),vt.returnTexture(a)}updatePadding(){this.padding=0}}var d9=`precision highp float;
in vec2 vTextureCoord;
in vec2 vFilterCoord;
out vec4 finalColor;

const int TYPE_LINEAR = 0;
const int TYPE_RADIAL = 1;
const int TYPE_CONIC = 2;
const int MAX_STOPS = 32;

uniform sampler2D uTexture;
uniform vec4 uOptions;
uniform vec2 uCounts;
uniform vec3 uColors[MAX_STOPS];
uniform vec4 uStops[MAX_STOPS];

const float PI = 3.1415926538;
const float PI_2 = PI*2.;

struct ColorStop {
    float offset;
    vec3 color;
    float alpha;
};

mat2 rotate2d(float angle){
    return mat2(cos(angle), -sin(angle),
    sin(angle), cos(angle));
}

float projectLinearPosition(vec2 pos, float angle){
    vec2 center = vec2(0.5);
    vec2 result = pos - center;
    result = rotate2d(angle) * result;
    result = result + center;
    return clamp(result.x, 0., 1.);
}

float projectRadialPosition(vec2 pos) {
    float r = distance(pos, vec2(0.5));
    return clamp(2.*r, 0., 1.);
}

float projectAnglePosition(vec2 pos, float angle) {
    vec2 center = pos - vec2(0.5);
    float polarAngle=atan(-center.y, center.x);
    return mod(polarAngle + angle, PI_2) / PI_2;
}

float projectPosition(vec2 pos, int type, float angle) {
    if (type == TYPE_LINEAR) {
        return projectLinearPosition(pos, angle);
    } else if (type == TYPE_RADIAL) {
        return projectRadialPosition(pos);
    } else if (type == TYPE_CONIC) {
        return projectAnglePosition(pos, angle);
    }

    return pos.y;
}

void main(void) {
    int uType = int(uOptions[0]);
    float uAngle = uOptions[1];
    float uAlpha = uOptions[2];
    float uReplace = uOptions[3];

    int uNumStops = int(uCounts[0]);
    float uMaxColors = uCounts[1];

    // current/original color
    vec4 currentColor = texture(uTexture, vTextureCoord);

    // skip calculations if gradient alpha is 0
    if (0.0 == uAlpha) {
        finalColor = currentColor;
        return;
    }

    // project position
    float y = projectPosition(vFilterCoord, int(uType), radians(uAngle));

    // check gradient bounds
    float offsetMin = uStops[0][0];
    float offsetMax = 0.0;

    int numStops = int(uNumStops);

    for (int i = 0; i < MAX_STOPS; i++) {
        if (i == numStops-1){ // last index
            offsetMax = uStops[i][0];
        }
    }

    if (y  < offsetMin || y > offsetMax) {
        finalColor = currentColor;
        return;
    }

    // limit colors
    if (uMaxColors > 0.) {
        float stepSize = 1./uMaxColors;
        float stepNumber = float(floor(y/stepSize));
        y = stepSize * (stepNumber + 0.5);// offset by 0.5 to use color from middle of segment
    }

    // find color stops
    ColorStop from;
    ColorStop to;

    for (int i = 0; i < MAX_STOPS; i++) {
        if (y >= uStops[i][0]) {
            from = ColorStop(uStops[i][0], uColors[i], uStops[i][1]);
            to = ColorStop(uStops[i+1][0], uColors[i+1], uStops[i+1][1]);
        }

        if (i == numStops-1){ // last index
            break;
        }
    }

    // mix colors from stops
    vec4 colorFrom = vec4(from.color * from.alpha, from.alpha);
    vec4 colorTo = vec4(to.color * to.alpha, to.alpha);

    float segmentHeight = to.offset - from.offset;
    float relativePos = y - from.offset;// position from 0 to [segmentHeight]
    float relativePercent = relativePos / segmentHeight;// position in percent between [from.offset] and [to.offset].

    float gradientAlpha = uAlpha * currentColor.a;
    vec4 gradientColor = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;

    if (uReplace < 0.5) {
        // mix resulting color with current color
        finalColor = gradientColor + currentColor*(1.-gradientColor.a);
    } else {
        // replace with gradient color
        finalColor = gradientColor;
    }
}
`,p9=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 vFilterCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
    vFilterCoord = vTextureCoord * uInputSize.xy / uOutputFrame.zw;
}
`,Ey=`struct BaseUniforms {
  uOptions: vec4<f32>,
  uCounts: vec2<f32>,
};

struct StopsUniforms {
  uColors: array<vec3<f32>, MAX_STOPS>,
  uStops: array<vec4<f32>, MAX_STOPS>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> baseUniforms : BaseUniforms;
@group(1) @binding(1) var<uniform> stopsUniforms : StopsUniforms;

struct VSOutput {
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>,
  @location(1) coord : vec2<f32>
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn filterCoord( vTextureCoord:vec2<f32> ) -> vec2<f32>
{
    return vTextureCoord * gfu.uInputSize.xy / gfu.uOutputFrame.zw;
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  let vTextureCoord: vec2<f32> = filterTextureCoord(aPosition);
  return VSOutput(
   filterVertexPosition(aPosition),
   vTextureCoord,
   filterCoord(vTextureCoord),
  );
}

struct ColorStop {
  offset: f32,
  color: vec3<f32>,
  alpha: f32,
};

fn rotate2d(angle: f32) -> mat2x2<f32>{
  return mat2x2(cos(angle), -sin(angle),
  sin(angle), cos(angle));
}

fn projectLinearPosition(pos: vec2<f32>, angle: f32) -> f32 {
  var center: vec2<f32> = vec2<f32>(0.5);
  var result: vec2<f32> = pos - center;
  result = rotate2d(angle) * result;
  result = result + center;
  return clamp(result.x, 0.0, 1.0);
}

fn projectRadialPosition(pos: vec2<f32>) -> f32 {
  var r: f32 = distance(pos, vec2<f32>(0.5));
  return clamp(2.0 * r, 0.0, 1.0);
}

fn projectAnglePosition(pos: vec2<f32>, angle: f32) -> f32 {
  var center: vec2<f32> = pos - vec2<f32>(0.5, 0.5);
  var polarAngle: f32 = atan2(-center.y, center.x);
  return ((polarAngle + angle) % PI_2) / PI_2;
}

fn projectPosition(pos: vec2<f32>, gradientType: i32, angle: f32) -> f32 {
  if (gradientType == TYPE_LINEAR) {
      return projectLinearPosition(pos, angle);
  } else if (gradientType == TYPE_RADIAL) {
      return projectRadialPosition(pos);
  } else if (gradientType == TYPE_CONIC) {
      return projectAnglePosition(pos, angle);
  }

  return pos.y;
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>,
  @location(1) coord : vec2<f32>
) -> @location(0) vec4<f32> {
  let uType: i32 = i32(baseUniforms.uOptions[0]);
  let uAngle: f32 = baseUniforms.uOptions[1];
  let uAlpha: f32 = baseUniforms.uOptions[2];
  let uReplace: f32 = baseUniforms.uOptions[3];

  let uNumStops: i32 = i32(baseUniforms.uCounts[0]);
  let uMaxColors: f32 = baseUniforms.uCounts[1];

  // current/original color
  var currentColor: vec4<f32> = textureSample(uTexture, uSampler, uv);

  // skip calculations if gradient alpha is 0
  if (uAlpha == 0.0) { return currentColor; }

  // project position
  var y: f32 = projectPosition(coord, uType, radians(uAngle));

  // check gradient bounds
  var offsetMin: f32 = stopsUniforms.uStops[0][0];
  var offsetMax: f32 = 0.0;

  let numStops: i32 = uNumStops;

  for (var i: i32 = 0; i < MAX_STOPS; i = i + 1) {
      if (i == numStops - 1) { // last index
          offsetMax = stopsUniforms.uStops[i][0];
      }
  }

  if (y  < offsetMin || y > offsetMax) { return currentColor; }

  // limit colors
  if (uMaxColors > 0.0) {
      var stepSize: f32 = 1.0 / uMaxColors;
      var stepNumber: f32 = floor(y / stepSize);
      y = stepSize * (stepNumber + 0.5); // offset by 0.5 to use color from middle of segment
  }

  // find color stops
  var stopFrom: ColorStop;
  var stopTo: ColorStop;

  for (var i: i32 = 0; i < MAX_STOPS; i = i + 1) {
      if (y >= stopsUniforms.uStops[i][0]) {
          stopFrom = ColorStop(stopsUniforms.uStops[i][0], stopsUniforms.uColors[i], stopsUniforms.uStops[i][1]);
          stopTo = ColorStop(stopsUniforms.uStops[i + 1][0], stopsUniforms.uColors[i + 1], stopsUniforms.uStops[i + 1][1]);
      }

      if (i == numStops - 1) { // last index
          break;
      }
  }

  // mix colors from stops
  var colorFrom: vec4<f32> = vec4<f32>(stopFrom.color * stopFrom.alpha, stopFrom.alpha);
  var colorTo: vec4<f32> = vec4<f32>(stopTo.color * stopTo.alpha, stopTo.alpha);

  var segmentHeight: f32 = stopTo.offset - stopFrom.offset;
  var relativePos: f32 = y - stopFrom.offset; // position from 0 to [segmentHeight]
  var relativePercent: f32 = relativePos / segmentHeight; // position in percent between [from.offset] and [to.offset].

  var gradientAlpha: f32 = uAlpha * currentColor.a;
  var gradientColor: vec4<f32> = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;

  if (uReplace < 0.5) {
      // mix resulting color with current color
      return gradientColor + currentColor * (1.0 - gradientColor.a);
  } else {
      // replace with gradient color
      return gradientColor;
  }
}

const PI: f32 = 3.14159265358979323846264;
const PI_2: f32 = PI * 2.0;

const TYPE_LINEAR: i32 = 0;
const TYPE_RADIAL: i32 = 1;
const TYPE_CONIC: i32 = 2;
const MAX_STOPS: i32 = 32;`,Zs=Zs||{};Zs.stringify=function(){var r={"visit_linear-gradient":function(e){return r.visit_gradient(e)},"visit_repeating-linear-gradient":function(e){return r.visit_gradient(e)},"visit_radial-gradient":function(e){return r.visit_gradient(e)},"visit_repeating-radial-gradient":function(e){return r.visit_gradient(e)},visit_gradient:function(e){var t=r.visit(e.orientation);return t&&(t+=", "),e.type+"("+t+r.visit(e.colorStops)+")"},visit_shape:function(e){var t=e.value,n=r.visit(e.at),i=r.visit(e.style);return i&&(t+=" "+i),n&&(t+=" at "+n),t},"visit_default-radial":function(e){var t="",n=r.visit(e.at);return n&&(t+=n),t},"visit_extent-keyword":function(e){var t=e.value,n=r.visit(e.at);return n&&(t+=" at "+n),t},"visit_position-keyword":function(e){return e.value},visit_position:function(e){return r.visit(e.value.x)+" "+r.visit(e.value.y)},"visit_%":function(e){return e.value+"%"},visit_em:function(e){return e.value+"em"},visit_px:function(e){return e.value+"px"},visit_literal:function(e){return r.visit_color(e.value,e)},visit_hex:function(e){return r.visit_color("#"+e.value,e)},visit_rgb:function(e){return r.visit_color("rgb("+e.value.join(", ")+")",e)},visit_rgba:function(e){return r.visit_color("rgba("+e.value.join(", ")+")",e)},visit_color:function(e,t){var n=e,i=r.visit(t.length);return i&&(n+=" "+i),n},visit_angular:function(e){return e.value+"deg"},visit_directional:function(e){return"to "+e.value},visit_array:function(e){var t="",n=e.length;return e.forEach(function(i,s){t+=r.visit(i),s<n-1&&(t+=", ")}),t},visit:function(e){if(!e)return"";var t="";if(e instanceof Array)return r.visit_array(e,t);if(e.type){var n=r["visit_"+e.type];if(n)return n(e);throw Error("Missing visitor visit_"+e.type)}else throw Error("Invalid node.")}};return function(e){return r.visit(e)}}();var Zs=Zs||{};Zs.parse=function(){var r={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function t(K){var ae=new Error(e+": "+K);throw ae.source=e,ae}function n(){var K=i();return e.length>0&&t("Invalid input not EOF"),K}function i(){return b(s)}function s(){return a("linear-gradient",r.linearGradient,l)||a("repeating-linear-gradient",r.repeatingLinearGradient,l)||a("radial-gradient",r.radialGradient,f)||a("repeating-radial-gradient",r.repeatingRadialGradient,f)}function a(K,ae,k){return o(ae,function(H){var ie=k();return ie&&(q(r.comma)||t("Missing comma before color stops")),{type:K,orientation:ie,colorStops:b(w)}})}function o(K,ae){var k=q(K);if(k){q(r.startCall)||t("Missing (");var H=ae(k);return q(r.endCall)||t("Missing )"),H}}function l(){return u()||c()}function u(){return I("directional",r.sideOrCorner,1)}function c(){return I("angular",r.angleValue,1)}function f(){var K,ae=h(),k;return ae&&(K=[],K.push(ae),k=e,q(r.comma)&&(ae=h(),ae?K.push(ae):e=k)),K}function h(){var K=d()||p();if(K)K.at=m();else{var ae=v();if(ae){K=ae;var k=m();k&&(K.at=k)}else{var H=g();H&&(K={type:"default-radial",at:H})}}return K}function d(){var K=I("shape",/^(circle)/i,0);return K&&(K.style=j()||v()),K}function p(){var K=I("shape",/^(ellipse)/i,0);return K&&(K.style=W()||v()),K}function v(){return I("extent-keyword",r.extentKeywords,1)}function m(){if(I("position",/^at/,0)){var K=g();return K||t("Missing positioning value"),K}}function g(){var K=_();if(K.x||K.y)return{type:"position",value:K}}function _(){return{x:W(),y:W()}}function b(K){var ae=K(),k=[];if(ae)for(k.push(ae);q(r.comma);)ae=K(),ae?k.push(ae):t("One extra comma");return k}function w(){var K=S();return K||t("Expected color definition"),K.length=W(),K}function S(){return E()||P()||O()||T()}function T(){return I("literal",r.literalColor,0)}function E(){return I("hex",r.hexColor,1)}function O(){return o(r.rgbColor,function(){return{type:"rgb",value:b(V)}})}function P(){return o(r.rgbaColor,function(){return{type:"rgba",value:b(V)}})}function V(){return q(r.number)[1]}function W(){return I("%",r.percentageValue,1)||D()||j()}function D(){return I("position-keyword",r.positionKeywords,1)}function j(){return I("px",r.pixelValue,1)||I("em",r.emValue,1)}function I(K,ae,k){var H=q(ae);if(H)return{type:K,value:H[k]}}function q(K){var ae,k;return k=/^[\n\r\t\s]+/.exec(e),k&&$(k[0].length),ae=K.exec(e),ae&&$(ae[0].length),ae}function $(K){e=e.substr(K)}return function(K){return e=K.toString(),n()}}();var g9=Zs.parse;Zs.stringify;function m9(r){const e=g9(T9(r));if(e.length===0)throw new Error("Invalid CSS gradient.");if(e.length!==1)throw new Error("Unsupported CSS gradient (multiple gradients is not supported).");const t=e[0],n=v9(t.type),i=_9(t.colorStops),s=w9(t.orientation);return{type:n,stops:i,angle:s}}function v9(r){const e={"linear-gradient":0,"radial-gradient":1};if(!(r in e))throw new Error(`Unsupported gradient type "${r}"`);return e[r]}function _9(r){const e=y9(r),t=[],n=new ht;for(let i=0;i<r.length;i++){const s=b9(r[i]),a=n.setValue(s).toArray();t.push({offset:e[i],color:a.slice(0,3),alpha:a[3]})}return t}function b9(r){switch(r.type){case"hex":return`#${r.value}`;case"literal":return r.value;default:return`${r.type}(${r.value.join(",")})`}}function y9(r){const e=[];for(let s=0;s<r.length;s++){const a=r[s];let o=-1;a.type==="literal"&&a.length&&"type"in a.length&&a.length.type==="%"&&"value"in a.length&&(o=parseFloat(a.length.value)/100),e.push(o)}const n=s=>{for(let a=s;a<e.length;a++)if(e[a]!==-1)return{indexDelta:a-s,offset:e[a]};return{indexDelta:e.length-1-s,offset:1}};let i=0;for(let s=0;s<e.length;s++){const a=e[s];if(a!==-1)i=a;else if(s===0)e[s]=0;else if(s+1===e.length)e[s]=1;else{const o=n(s),u=(o.offset-i)/(1+o.indexDelta);for(let c=0;c<=o.indexDelta;c++)e[s+c]=i+(c+1)*u;s+=o.indexDelta,i=e[s]}}return e.map(x9)}function x9(r){return r.toString().length>6?parseFloat(r.toString().substring(0,6)):r}function w9(r){if(typeof r>"u")return 0;if("type"in r&&"value"in r)switch(r.type){case"angular":return parseFloat(r.value);case"directional":return S9(r.value)}return 0}function S9(r){const e={left:270,top:0,bottom:180,right:90,"left top":315,"top left":315,"left bottom":225,"bottom left":225,"right top":45,"top right":45,"right bottom":135,"bottom right":135};if(!(r in e))throw new Error(`Unsupported directional value "${r}"`);return e[r]}function T9(r){let e=r.replace(/\s{2,}/gu," ");return e=e.replace(/;/g,""),e=e.replace(/ ,/g,","),e=e.replace(/\( /g,"("),e=e.replace(/ \)/g,")"),e.trim()}var E9=Object.defineProperty,A9=(r,e,t)=>e in r?E9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ps=(r,e,t)=>(A9(r,typeof e!="symbol"?e+"":e,t),t);const Od=90;function C9(r){return[...r].sort((e,t)=>e.offset-t.offset)}const to=class mc extends Hr{constructor(e){if(e&&"css"in e?e={...m9(e.css||""),alpha:e.alpha??mc.defaults.alpha,maxColors:e.maxColors??mc.defaults.maxColors}:e={...mc.defaults,...e},!e.stops||e.stops.length<2)throw new Error("ColorGradientFilter requires at least 2 color stops.");const t=Jt.from({vertex:{source:Ey,entryPoint:"mainVertex"},fragment:{source:Ey,entryPoint:"mainFragment"}}),n=sr.from({vertex:p9,fragment:d9,name:"color-gradient-filter"}),i=32;super({gpuProgram:t,glProgram:n,resources:{baseUniforms:{uOptions:{value:[e.type,e.angle??Od,e.alpha,e.replace?1:0],type:"vec4<f32>"},uCounts:{value:[e.stops.length,e.maxColors],type:"vec2<f32>"}},stopsUniforms:{uColors:{value:new Float32Array(i*3),type:"vec3<f32>",size:i},uStops:{value:new Float32Array(i*4),type:"vec4<f32>",size:i}}}}),Ps(this,"baseUniforms"),Ps(this,"stopsUniforms"),Ps(this,"_stops",[]),this.baseUniforms=this.resources.baseUniforms.uniforms,this.stopsUniforms=this.resources.stopsUniforms.uniforms,Object.assign(this,e)}get stops(){return this._stops}set stops(e){const t=C9(e),n=new ht;let i,s,a;for(let o=0;o<t.length;o++){n.setValue(t[o].color);const l=o*3;[i,s,a]=n.toArray(),this.stopsUniforms.uColors[l]=i,this.stopsUniforms.uColors[l+1]=s,this.stopsUniforms.uColors[l+2]=a,this.stopsUniforms.uStops[o*4]=t[o].offset,this.stopsUniforms.uStops[o*4+1]=t[o].alpha}this.baseUniforms.uCounts[0]=t.length,this._stops=t}get type(){return this.baseUniforms.uOptions[0]}set type(e){this.baseUniforms.uOptions[0]=e}get angle(){return this.baseUniforms.uOptions[1]+Od}set angle(e){this.baseUniforms.uOptions[1]=e-Od}get alpha(){return this.baseUniforms.uOptions[2]}set alpha(e){this.baseUniforms.uOptions[2]=e}get maxColors(){return this.baseUniforms.uCounts[1]}set maxColors(e){this.baseUniforms.uCounts[1]=e}get replace(){return this.baseUniforms.uOptions[3]>.5}set replace(e){this.baseUniforms.uOptions[3]=e?1:0}};Ps(to,"LINEAR",0);Ps(to,"RADIAL",1);Ps(to,"CONIC",2);Ps(to,"defaults",{type:to.LINEAR,stops:[{offset:0,color:16711680,alpha:1},{offset:1,color:255,alpha:1}],alpha:1,angle:90,maxColors:0,replace:!1});let Ay=to;var P9=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform float uAlpha;
uniform vec3 uColor;
uniform vec2 uOffset;

uniform vec4 uInputSize;

void main(void){
    vec4 sample = texture(uTexture, vTextureCoord - uOffset * uInputSize.zw);

    // Premultiply alpha
    sample.rgb = uColor.rgb * sample.a;

    // alpha user alpha
    sample *= uAlpha;

    finalColor = sample;
}`,R9=`struct DropShadowUniforms {
  uAlpha: f32,
  uColor: vec3<f32>,
  uOffset: vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> dropShadowUniforms : DropShadowUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  var color: vec4<f32> = textureSample(uTexture, uSampler, uv - dropShadowUniforms.uOffset * gfu.uInputSize.zw);

  // Premultiply alpha
  color = vec4<f32>(vec3<f32>(dropShadowUniforms.uColor.rgb * color.a), color.a);
  // alpha user alpha
  color *= dropShadowUniforms.uAlpha;

  return color;
}`,k9=Object.defineProperty,M9=(r,e,t)=>e in r?k9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ma=(r,e,t)=>(M9(r,typeof e!="symbol"?e+"":e,t),t);const GE=class zE extends Hr{constructor(e){e={...zE.DEFAULT_OPTIONS,...e};const t=Jt.from({vertex:{source:ns,entryPoint:"mainVertex"},fragment:{source:R9,entryPoint:"mainFragment"}}),n=sr.from({vertex:rs,fragment:P9,name:"drop-shadow-filter"});super({gpuProgram:t,glProgram:n,resources:{dropShadowUniforms:{uAlpha:{value:e.alpha,type:"f32"},uColor:{value:new Float32Array(3),type:"vec3<f32>"},uOffset:{value:e.offset,type:"vec2<f32>"}}},resolution:e.resolution}),ma(this,"uniforms"),ma(this,"shadowOnly",!1),ma(this,"_color"),ma(this,"_blurFilter"),ma(this,"_basePass"),this.uniforms=this.resources.dropShadowUniforms.uniforms,this._color=new ht,this.color=e.color??0,this._blurFilter=new a9({strength:e.kernels??e.blur,quality:e.kernels?void 0:e.quality}),this._basePass=new Hr({gpuProgram:Jt.from({vertex:{source:ns,entryPoint:"mainVertex"},fragment:{source:`
                    @group(0) @binding(1) var uTexture: texture_2d<f32>; 
                    @group(0) @binding(2) var uSampler: sampler;
                    @fragment
                    fn mainFragment(
                        @builtin(position) position: vec4<f32>,
                        @location(0) uv : vec2<f32>
                    ) -> @location(0) vec4<f32> {
                        return textureSample(uTexture, uSampler, uv);
                    }
                    `,entryPoint:"mainFragment"}}),glProgram:sr.from({vertex:rs,fragment:`
                in vec2 vTextureCoord;
                out vec4 finalColor;
                uniform sampler2D uTexture;

                void main(void){
                    finalColor = texture(uTexture, vTextureCoord);
                }
                `,name:"drop-shadow-filter"}),resources:{}}),Object.assign(this,e)}apply(e,t,n,i){const s=vt.getSameSizeTexture(t);e.applyFilter(this,t,s,!0),this._blurFilter.apply(e,s,n,i),this.shadowOnly||e.applyFilter(this._basePass,t,n,!1),vt.returnTexture(s)}get offset(){return this.uniforms.uOffset}set offset(e){this.uniforms.uOffset=e,this._updatePadding()}get offsetX(){return this.offset.x}set offsetX(e){this.offset.x=e,this._updatePadding()}get offsetY(){return this.offset.y}set offsetY(e){this.offset.y=e,this._updatePadding()}get color(){return this._color.value}set color(e){this._color.setValue(e);const[t,n,i]=this._color.toArray();this.uniforms.uColor[0]=t,this.uniforms.uColor[1]=n,this.uniforms.uColor[2]=i}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}get blur(){return this._blurFilter.strength}set blur(e){this._blurFilter.strength=e,this._updatePadding()}get quality(){return this._blurFilter.quality}set quality(e){this._blurFilter.quality=e,this._updatePadding()}get kernels(){return this._blurFilter.kernels}set kernels(e){this._blurFilter.kernels=e}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(e){typeof e=="number"&&(e={x:e,y:e}),Array.isArray(e)&&(e={x:e[0],y:e[1]}),this._blurFilter.pixelSize=e}get pixelSizeX(){return this._blurFilter.pixelSizeX}set pixelSizeX(e){this._blurFilter.pixelSizeX=e}get pixelSizeY(){return this._blurFilter.pixelSizeY}set pixelSizeY(e){this._blurFilter.pixelSizeY=e}_updatePadding(){const e=Math.max(Math.abs(this.offsetX),Math.abs(this.offsetY));this.padding=e+this.blur*2+this.quality*4}};ma(GE,"DEFAULT_OPTIONS",{offset:{x:4,y:4},color:0,alpha:.5,shadowOnly:!1,kernels:void 0,blur:2,quality:3,pixelSize:{x:1,y:1},resolution:1});let jE=GE;var O9=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform float uSepia;
uniform vec2 uNoise;
uniform vec3 uScratch;
uniform vec3 uVignetting;
uniform float uSeed;
uniform vec2 uDimensions;

uniform vec4 uInputSize;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    finalColor = texture(uTexture, vTextureCoord);
    vec3 color = finalColor.rgb;

    if (uSepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + uSepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * uInputSize.xy / uDimensions.xy;

    float vignette = uVignetting[0];
    float vignetteAlpha = uVignetting[1];
    float vignetteBlur = uVignetting[2];

    if (vignette > 0.0)
    {
        float outter = SQRT_2 - vignette * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= uDimensions.y / uDimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignetteBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignetteAlpha);
    }

    float scratch = uScratch[0];
    float scratchDensity = uScratch[1];
    float scratchWidth = uScratch[2];

    if (scratchDensity > uSeed && scratch != 0.0)
    {
        float phase = uSeed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(uSeed * dist, abs(s - uSeed * dist)));
        if (d < uSeed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / uDimensions.x * (0.75 + uSeed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    float noise = uNoise[0];
    float noiseSize = uNoise[1];

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * uInputSize.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + uSeed * 512.0, 1024.0 - uSeed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * uSeed) - 0.5;
        color += _noise * noise;
    }

    finalColor.rgb = color;
}`,I9=`struct OldFilmUniforms {
    uSepia: f32,
    uNoise: vec2<f32>,
    uScratch: vec3<f32>,
    uVignetting: vec3<f32>,
    uSeed: f32,
    uDimensions: vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> oldFilmUniforms : OldFilmUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  var color: vec4<f32> = textureSample(uTexture, uSampler, uv);

  if (oldFilmUniforms.uSepia > 0.)
  {
    color = vec4<f32>(sepia(color.rgb), color.a);
  }

  let coord: vec2<f32> = uv * gfu.uInputSize.xy / oldFilmUniforms.uDimensions;

  if (oldFilmUniforms.uVignetting[0] > 0.)
  {
    color *= vec4<f32>(vec3<f32>(vignette(color.rgb, coord)), color.a);
  }

  let uScratch = oldFilmUniforms.uScratch; 

  if (uScratch[1] > oldFilmUniforms.uSeed && uScratch[0] != 0.)
  {
    color = vec4<f32>(scratch(color.rgb, coord), color.a);
  }

  let uNoise = oldFilmUniforms.uNoise;

  if (uNoise[0] > 0.0 && uNoise[1] > 0.0)
  {
    color += vec4<f32>(vec3<f32>(noise(uv)), color.a);
  }

  return color;
}

const SQRT_2: f32 = 1.414213;
const SEPIA_RGB: vec3<f32> = vec3<f32>(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

fn modulo(x: f32, y: f32) -> f32
{
  return x - y * floor(x/y);
}

fn rand(co: vec2<f32>) -> f32
{
  return fract(sin(dot(co, vec2<f32>(12.9898, 78.233))) * 43758.5453);
}

fn overlay(src: vec3<f32>, dst: vec3<f32>) -> vec3<f32>
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)

    return vec3<f32>(
      select((1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)), (2.0 * src.x * dst.x), (dst.x <= 0.5)), 
      select((1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)), (2.0 * src.y * dst.y), (dst.y <= 0.5)),
      select((1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)), (2.0 * src.z * dst.z), (dst.z <= 0.5))
    );
}

fn sepia(co: vec3<f32>) -> vec3<f32>
{
  let gray: f32 = (co.x + co.y + co.z) / 3.0;
  let grayscale: vec3<f32> = vec3<f32>(gray);
  let color = overlay(SEPIA_RGB, grayscale);
  return grayscale + oldFilmUniforms.uSepia * (color - grayscale);
}

fn vignette(co: vec3<f32>, coord: vec2<f32>) -> f32
{
  let uVignetting = oldFilmUniforms.uVignetting;
  let uDimensions = oldFilmUniforms.uDimensions;
  
  let outter: f32 = SQRT_2 - uVignetting[0] * SQRT_2;
  var dir: vec2<f32> = vec2<f32>(vec2<f32>(0.5) - coord);
  dir.y *= uDimensions.y / uDimensions.x;
  let darker: f32 = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + uVignetting[2] * SQRT_2), 0.0, 1.0);
  return darker + (1.0 - darker) * (1.0 - uVignetting[1]);
}

fn scratch(co: vec3<f32>, coord: vec2<f32>) -> vec3<f32>
{
  var color = co;
  let uScratch = oldFilmUniforms.uScratch;
  let uSeed = oldFilmUniforms.uSeed;
  let uDimensions = oldFilmUniforms.uDimensions;

  let phase: f32 = uSeed * 256.0;
  let s: f32 = modulo(floor(phase), 2.0);
  let dist: f32 = 1.0 / uScratch[1];
  let d: f32 = distance(coord, vec2<f32>(uSeed * dist, abs(s - uSeed * dist)));

  if (d < uSeed * 0.6 + 0.4)
  {
    let period: f32 = uScratch[1] * 10.0;

    let xx: f32 = coord.x * period + phase;
    let aa: f32 = abs(modulo(xx, 0.5) * 4.0);
    let bb: f32 = modulo(floor(xx / 0.5), 2.0);
    let yy: f32 = (1.0 - bb) * aa + bb * (2.0 - aa);

    let kk: f32 = 2.0 * period;
    let dw: f32 = uScratch[2] / uDimensions.x * (0.75 + uSeed);
    let dh: f32 = dw * kk;

    var tine: f32 = (yy - (2.0 - dh));

    if (tine > 0.0) {
        let _sign: f32 = sign(uScratch[0]);

        tine = s * tine / period + uScratch[0] + 0.1;
        tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

        color *= tine;
    }
  }

  return color;
}

fn noise(coord: vec2<f32>) -> f32
{
  let uNoise = oldFilmUniforms.uNoise;
  let uSeed = oldFilmUniforms.uSeed;

  var pixelCoord: vec2<f32> = coord * gfu.uInputSize.xy;
  pixelCoord.x = floor(pixelCoord.x / uNoise[1]);
  pixelCoord.y = floor(pixelCoord.y / uNoise[1]);
  return (rand(pixelCoord * uNoise[1] * uSeed) - 0.5) * uNoise[0];
}`,B9=Object.defineProperty,F9=(r,e,t)=>e in r?B9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$p=(r,e,t)=>(F9(r,typeof e!="symbol"?e+"":e,t),t);const HE=class VE extends Hr{constructor(e){e={...VE.DEFAULT_OPTIONS,...e};const t=Jt.from({vertex:{source:ns,entryPoint:"mainVertex"},fragment:{source:I9,entryPoint:"mainFragment"}}),n=sr.from({vertex:rs,fragment:O9,name:"old-film-filter"});super({gpuProgram:t,glProgram:n,resources:{oldFilmUniforms:{uSepia:{value:e.sepia,type:"f32"},uNoise:{value:new Float32Array(2),type:"vec2<f32>"},uScratch:{value:new Float32Array(3),type:"vec3<f32>"},uVignetting:{value:new Float32Array(3),type:"vec3<f32>"},uSeed:{value:e.seed,type:"f32"},uDimensions:{value:new Float32Array(2),type:"vec2<f32>"}}}}),$p(this,"uniforms"),$p(this,"seed"),this.uniforms=this.resources.oldFilmUniforms.uniforms,Object.assign(this,e)}apply(e,t,n,i){this.uniforms.uDimensions[0]=t.frame.width,this.uniforms.uDimensions[1]=t.frame.height,this.uniforms.uSeed=this.seed,e.applyFilter(this,t,n,i)}get sepia(){return this.uniforms.uSepia}set sepia(e){this.uniforms.uSepia=e}get noise(){return this.uniforms.uNoise[0]}set noise(e){this.uniforms.uNoise[0]=e}get noiseSize(){return this.uniforms.uNoise[1]}set noiseSize(e){this.uniforms.uNoise[1]=e}get scratch(){return this.uniforms.uScratch[0]}set scratch(e){this.uniforms.uScratch[0]=e}get scratchDensity(){return this.uniforms.uScratch[1]}set scratchDensity(e){this.uniforms.uScratch[1]=e}get scratchWidth(){return this.uniforms.uScratch[2]}set scratchWidth(e){this.uniforms.uScratch[2]=e}get vignetting(){return this.uniforms.uVignetting[0]}set vignetting(e){this.uniforms.uVignetting[0]=e}get vignettingAlpha(){return this.uniforms.uVignetting[1]}set vignettingAlpha(e){this.uniforms.uVignetting[1]=e}get vignettingBlur(){return this.uniforms.uVignetting[2]}set vignettingBlur(e){this.uniforms.uVignetting[2]=e}};$p(HE,"DEFAULT_OPTIONS",{sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,seed:0});let D9=HE;var L9=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uBlur;
uniform vec2 uStart;
uniform vec2 uEnd;
uniform vec2 uDelta;
uniform vec4 uInputSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float blur = uBlur[0];
    float gradientBlur = uBlur[1];

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(uStart.y - uEnd.y, uEnd.x - uStart.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * uInputSize.xy - uStart, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture(uTexture, vTextureCoord + uDelta / uInputSize.xy * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    finalColor = color;
}
`,U9=`struct TiltShiftUniforms {
  uBlur: vec2<f32>,
  uStart: vec2<f32>,
  uEnd: vec2<f32>,
  uDelta: vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> tiltShiftUniforms : TiltShiftUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uBlur = tiltShiftUniforms.uBlur[0];
  let uBlurGradient = tiltShiftUniforms.uBlur[1];
  let uStart = tiltShiftUniforms.uStart;
  let uEnd = tiltShiftUniforms.uEnd;
  let uDelta = tiltShiftUniforms.uDelta;

  var color: vec4<f32> = vec4<f32>(0.0);
  var total: f32 = 0.0;

  let offset: f32 = random(position, vec3<f32>(12.9898, 78.233, 151.7182), 0.0);
  let normal: vec2<f32> = normalize(vec2<f32>(uStart.y - uEnd.y, uEnd.x - uStart.x));
  let radius: f32 = smoothstep(0.0, 1.0, abs(dot(uv * gfu.uInputSize.xy - uStart, normal)) / uBlurGradient) * uBlur;

  for (var t: f32 = -30.0; t <= 30.0; t += 1.0)
  {
    var percent: f32 = (t + offset - 0.5) / 30.0;
    var weight: f32 = 1.0 - abs(percent);
    var sample: vec4<f32> = textureSample(uTexture, uSampler, uv + uDelta / gfu.uInputSize.xy * percent * radius);
    sample = vec4<f32>(sample.xyz * sample.a, sample.a); // multiply sample.rgb with sample.a
    color += sample * weight;
    total += weight;
  }

  color /= total;
  color = vec4<f32>(color.xyz / (color.a + 0.00001), color.a); // divide color.rgb by color.a + 0.00001

  return color;
}


fn random(position: vec4<f32>, scale: vec3<f32>, seed: f32) -> f32
{
  return fract(sin(dot(position.xyz + seed, scale)) * 43758.5453 + seed);
}`,N9=Object.defineProperty,G9=(r,e,t)=>e in r?N9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Kp=(r,e,t)=>(G9(r,typeof e!="symbol"?e+"":e,t),t);const WE=class qE extends Hr{constructor(e){const{width:t,height:n}=qT.defaultOptions;e={...qE.DEFAULT_OPTIONS,start:{x:0,y:n/2},end:{x:t,y:n/2},...e};const i=Jt.from({vertex:{source:ns,entryPoint:"mainVertex"},fragment:{source:U9,entryPoint:"mainFragment"}}),s=sr.from({vertex:rs,fragment:L9,name:"tilt-shift-axis-filter"});super({gpuProgram:i,glProgram:s,resources:{tiltShiftUniforms:{uBlur:{value:new Float32Array([e.blur,e.gradientBlur]),type:"vec2<f32>"},uStart:{value:e.start,type:"vec2<f32>"},uEnd:{value:e.end,type:"vec2<f32>"},uDelta:{value:new Float32Array([0,0]),type:"vec2<f32>"}}}}),Kp(this,"uniforms"),Kp(this,"_tiltAxis"),this.uniforms=this.resources.tiltShiftUniforms.uniforms,this._tiltAxis=e.axis}updateDelta(){if(this.uniforms.uDelta[0]=0,this.uniforms.uDelta[1]=0,this._tiltAxis===void 0)return;const e=this.uniforms.uEnd,t=this.uniforms.uStart,n=e.x-t.x,i=e.y-t.y,s=Math.sqrt(n*n+i*i),a=this._tiltAxis==="vertical";this.uniforms.uDelta[0]=a?-i/s:n/s,this.uniforms.uDelta[1]=a?n/s:i/s}};Kp(WE,"DEFAULT_OPTIONS",{blur:100,gradientBlur:600});let Id=WE;var z9=Object.defineProperty,j9=(r,e,t)=>e in r?z9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,H9=(r,e,t)=>(j9(r,e+"",t),t);class V9 extends Id{constructor(e){e={...Id.DEFAULT_OPTIONS,...e},super({...e,axis:"horizontal"}),H9(this,"_tiltShiftYFilter"),this._tiltShiftYFilter=new Id({...e,axis:"vertical"}),this.updateDelta(),Object.assign(this,e)}apply(e,t,n,i){const s=vt.getSameSizeTexture(t);e.applyFilter(this,t,s,!0),e.applyFilter(this._tiltShiftYFilter,s,n,i),vt.returnTexture(s)}updateDelta(){super.updateDelta(),this._tiltShiftYFilter.updateDelta()}get blur(){return this.uniforms.uBlur[0]}set blur(e){this.uniforms.uBlur[0]=this._tiltShiftYFilter.uniforms.uBlur[0]=e}get gradientBlur(){return this.uniforms.uBlur[1]}set gradientBlur(e){this.uniforms.uBlur[1]=this._tiltShiftYFilter.uniforms.uBlur[1]=e}get start(){return this.uniforms.uStart}set start(e){this.uniforms.uStart=this._tiltShiftYFilter.uniforms.uStart=e,this.updateDelta()}get startX(){return this.start.x}set startX(e){this.start.x=e,this.updateDelta()}get startY(){return this.start.y}set startY(e){this.start.y=e,this.updateDelta()}get end(){return this.uniforms.uEnd}set end(e){this.uniforms.uEnd=this._tiltShiftYFilter.uniforms.uEnd=e,this.updateDelta()}get endX(){return this.end.x}set endX(e){this.end.x=e,this.updateDelta()}get endY(){return this.end.y}set endY(e){this.end.y=e,this.updateDelta()}}var W9=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform float uStrength;
uniform vec2 uCenter;
uniform vec2 uRadii;

uniform vec4 uInputSize;

const float MAX_KERNEL_SIZE = \${MAX_KERNEL_SIZE};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {
    float minGradient = uRadii[0] * 0.3;
    float innerRadius = (uRadii[0] + minGradient * 0.5) / uInputSize.x;

    float gradient = uRadii[1] * 0.3;
    float radius = (uRadii[1] - gradient * 0.5) / uInputSize.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / uInputSize.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * uInputSize.y / uInputSize.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / uInputSize.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture(uTexture, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture(uTexture, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,q9=`struct ZoomBlurUniforms {
    uStrength:f32,
    uCenter:vec2<f32>,
    uRadii:vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> zoomBlurUniforms : ZoomBlurUniforms;

@fragment
fn mainFragment(
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uStrength = zoomBlurUniforms.uStrength;
  let uCenter = zoomBlurUniforms.uCenter;
  let uRadii = zoomBlurUniforms.uRadii;

  let minGradient: f32 = uRadii[0] * 0.3;
  let innerRadius: f32 = (uRadii[0] + minGradient * 0.5) / gfu.uInputSize.x;

  let gradient: f32 = uRadii[1] * 0.3;
  let radius: f32 = (uRadii[1] - gradient * 0.5) / gfu.uInputSize.x;

  let MAX_KERNEL_SIZE: f32 = \${MAX_KERNEL_SIZE};

  var countLimit: f32 = MAX_KERNEL_SIZE;

  var dir: vec2<f32> = vec2<f32>(uCenter / gfu.uInputSize.xy - uv);
  let dist: f32 = length(vec2<f32>(dir.x, dir.y * gfu.uInputSize.y / gfu.uInputSize.x));

  var strength: f32 = uStrength;

  var delta: f32 = 0.0;
  var gap: f32;

  if (dist < innerRadius) {
      delta = innerRadius - dist;
      gap = minGradient;
  } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
      delta = dist - radius;
      gap = gradient;
  }

  var returnColorOnly: bool = false;

  if (delta > 0.0) {
    let normalCount: f32 = gap / gfu.uInputSize.x;
    delta = (normalCount - delta) / normalCount;
    countLimit *= delta;
    strength *= delta;
    
    if (countLimit < 1.0)
    {
      returnColorOnly = true;;
    }
  }

  // randomize the lookup values to hide the fixed number of samples
  let offset: f32 = rand(uv, 0.0);

  var total: f32 = 0.0;
  var color: vec4<f32> = vec4<f32>(0.);

  dir *= strength;

  for (var t = 0.0; t < MAX_KERNEL_SIZE; t += 1.0) {
    let percent: f32 = (t + offset) / MAX_KERNEL_SIZE;
    let weight: f32 = 4.0 * (percent - percent * percent);
    let p: vec2<f32> = uv + dir * percent;
    let sample: vec4<f32> = textureSample(uTexture, uSampler, p);
    
    if (t < countLimit)
    {
      color += sample * weight;
      total += weight;
    }
  }

  color /= total;

  return select(color, textureSample(uTexture, uSampler, uv), returnColorOnly);
}

fn modulo(x: f32, y: f32) -> f32
{
  return x - y * floor(x/y);
}

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
fn rand(co: vec2<f32>, seed: f32) -> f32
{
  let a: f32 = 12.9898;
  let b: f32 = 78.233;
  let c: f32 = 43758.5453;
  let dt: f32 = dot(co + seed, vec2<f32>(a, b));
  let sn: f32 = modulo(dt, 3.14159);
  return fract(sin(sn) * c + seed);
}`,X9=Object.defineProperty,Y9=(r,e,t)=>e in r?X9(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,XE=(r,e,t)=>(Y9(r,typeof e!="symbol"?e+"":e,t),t);const YE=class $E extends Hr{constructor(e){e={...$E.DEFAULT_OPTIONS,...e};const t=e.maxKernelSize??32,n=Jt.from({vertex:{source:ns,entryPoint:"mainVertex"},fragment:{source:q9.replace("${MAX_KERNEL_SIZE}",t.toFixed(1)),entryPoint:"mainFragment"}}),i=sr.from({vertex:rs,fragment:W9.replace("${MAX_KERNEL_SIZE}",t.toFixed(1)),name:"zoom-blur-filter"});super({gpuProgram:n,glProgram:i,resources:{zoomBlurUniforms:{uStrength:{value:e.strength,type:"f32"},uCenter:{value:{x:0,y:0},type:"vec2<f32>"},uRadii:{value:new Float32Array(2),type:"vec2<f32>"}}}}),XE(this,"uniforms"),this.uniforms=this.resources.zoomBlurUniforms.uniforms,Object.assign(this,e)}get strength(){return this.uniforms.uStrength}set strength(e){this.uniforms.uStrength=e}get center(){return this.uniforms.uCenter}set center(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uCenter=e}get centerX(){return this.uniforms.uCenter.x}set centerX(e){this.uniforms.uCenter.x=e}get centerY(){return this.uniforms.uCenter.y}set centerY(e){this.uniforms.uCenter.y=e}get innerRadius(){return this.uniforms.uRadii[0]}set innerRadius(e){this.uniforms.uRadii[0]=e}get radius(){return this.uniforms.uRadii[1]}set radius(e){this.uniforms.uRadii[1]=e<0||e===1/0?-1:e}};XE(YE,"DEFAULT_OPTIONS",{strength:.1,center:{x:0,y:0},innerRadius:0,radius:-1,maxKernelSize:32});let $9=YE;class K9{constructor(e,t,n){this.updater=e,this.fail=t,this.success=n}cache=new Map;last_failed=void 0;async get(e){if(this.last_failed===e)return null;if(this.cache.has(e))return this.cache.get(e);try{const t=await this.updater(e);return this.success&&this.success(e),this.cache.set(e,t),t}catch{return this.last_failed=e,this.fail&&this.fail(e),null}}get size(){return this.cache.size}}class Dm{app;textures;constructor(e,t){this.textures=new K9(async n=>await rl.load(n),e,t)}static async create(e){const t=new this(e.texture_fail,e.texture_success);return await t.init(e),t}async init(e){this.app=new iS;const[t,n]=this.splitRGBA(e.background);await this.app.init({background:t,backgroundAlpha:0,width:e.width,height:e.height,antialias:!1,useBackBuffer:e.back_bufer===void 0?!0:e.back_bufer}),await this.mount(e.state),e.mount_point.appendChild(this.app.canvas)}splitRGBA(e){return[e.slice(0,7),e.length>7?parseInt(e.slice(7,9),16)/255:1]}createRoundedRectMask(e,t,n){const i=new Kn;return i.roundRect(0,0,e,t,n),i.fill(16777215),i}diff(e,t,n=[]){if(e===void 0||t===void 0)return["undefined"];for(const i in e){const s=[...n,i];if(typeof e[i]=="object"){const a=this.diff(e[i],t[i],s);if(a.length>0)return a}else if(e[i]!=t[i])return s}return[]}nochange(e,t){return e!==void 0&&t!==void 0&&this.diff(e,t).length===0?!0:(e=structuredClone(t),!1)}buildFilters(e,t){const n=[];if(e.adjustment.enabled&&n.push(new QN({gamma:e.adjustment.gamma,saturation:e.adjustment.saturation,contrast:e.adjustment.contrast,brightness:e.adjustment.brightness})),e.blur.enabled&&(t.x-=e.blur.value,t.y-=e.blur.value,t.width+=2*e.blur.value,t.height+=2*e.blur.value,n.push(new tn({strength:e.blur.value,quality:15}))),e.tilt_shift.enabled&&n.push(new V9({blur:e.tilt_shift.blur,start:{x:e.tilt_shift.start.x,y:e.tilt_shift.start.y},end:{x:e.tilt_shift.end.x,y:e.tilt_shift.end.y}})),e.vignetting.enabled&&n.push(new D9({sepia:0,noise:0,scratch:0,vignetting:e.vignetting.value,vignettingAlpha:e.vignetting.alpha,vignettingBlur:e.vignetting.blur})),e.zoom_blur.enabled&&n.push(new $9({strength:e.zoom_blur.value,center:{x:e.zoom_blur.center.x,y:e.zoom_blur.center.y},innerRadius:e.zoom_blur.radius})),e.gradient.enabled){const i=this.splitRGBA(e.gradient.start.color),s=this.splitRGBA(e.gradient.mid.color),a=this.splitRGBA(e.gradient.end.color),o=[{color:i[0],alpha:i[1],offset:e.gradient.start.value},{color:s[0],alpha:s[1],offset:e.gradient.mid.value},{color:a[0],alpha:a[1],offset:e.gradient.end.value}];o[0].offset>0&&o.unshift({color:i[0],alpha:i[1],offset:0}),n.push(new Ay({type:Ay.LINEAR,stops:o,angle:e.gradient.orientation==="horizontal"?90:0}))}return n}}class Z9 extends Dm{text_group=new et;title=new Ta;description=new Ta;background_group=new et;backrgound=new Rt;logo_group=new et;logo=new Rt;categories_group=new et;prev_category_round;prev_filters;async mount(e){this.prev_category_round=e.categories.round,this.backrgound=Rt.from(e.background.src,!0),this.logo=Rt.from(e.logo.src,!0),this.text_group.addChild(this.title,this.description),this.background_group.addChild(this.backrgound),this.logo_group.addChild(this.logo),this.app.stage.addChild(this.background_group,this.logo_group,this.text_group,this.categories_group)}updateText(e,t){this.updateTitle(e,t),this.updateDescription(e,t)}updateTitle(e,t){this.title.x=e.x,this.title.y=e.y,this.title.text=e.text;const[n,i]=this.splitRGBA(e.shadow.color);this.title.style={fontFamily:e.font.face,fontSize:e.font.size,fill:e.font.color,fontWeight:e.font.weight,lineHeight:e.font.line_height,dropShadow:{color:n,blur:e.shadow.value,distance:0,alpha:i}};const s=lr.measureText(this.title.text,this.title.style);this.description.y=s.height+t.font.line_height+t.gap}updateDescription(e,t){const[n,i]=this.splitRGBA(t.shadow.color);this.description.text=t.text,this.description.x=t.x,this.description.style={fontFamily:t.font.face,fontSize:t.font.size,fill:t.font.color,fontWeight:t.font.weight,lineHeight:t.font.line_height,dropShadow:{color:n,blur:t.shadow.value,distance:0,alpha:i}};const s=lr.measureText(this.title.text,this.title.style);this.description.y=s.height+t.font.line_height+t.gap}async updateBackground(e,t){const n=await this.textures.get(e.src);n&&(this.backrgound.texture=n),this.backrgound.x=e.x,this.backrgound.y=e.y,this.backrgound.width=e.w,this.backrgound.height=e.h,e.flip_h?(this.backrgound.scale.x=-Math.abs(this.backrgound.scale.x),this.backrgound.x=this.backrgound.x+this.backrgound.width):this.backrgound.scale.x=Math.abs(this.backrgound.scale.x),e.flip_v?(this.backrgound.scale.y=-Math.abs(this.backrgound.scale.y),this.backrgound.y=this.backrgound.y+this.backrgound.height):this.backrgound.scale.y=Math.abs(this.backrgound.scale.y),!(this.prev_filters!==void 0&&this.diff(this.prev_filters,t).length===0)&&(this.prev_filters=structuredClone(t),this.background_group.filters=this.buildFilters(t,this.backrgound))}async updateLogo(e){this.logo.x=e.x,this.logo.y=e.y,this.logo.width=e.w,this.logo.height=e.h,this.logo.alpha=e.alpha;const t=await this.textures.get(e.src);t&&(this.logo.texture=t),this.logo.filters=[new tn({strength:e.blur,quality:15})]}async updateCategories(e){if(this.prev_category_round!=e.round){for(const i of this.categories_group.children){const s=this.createRoundedRectMask(e.w,e.h,e.round);i.removeChildAt(1);const a=i.children[0];a.mask=s,i.addChild(s)}this.prev_category_round=e.round;return}this.categories_group.x=e.x,this.categories_group.y=e.y;const[t,n]=this.splitRGBA(e.shadow.color);for(const[i,s]of e.src.entries()){const a=await this.textures.get(s);if(!a)continue;let o;if(i<this.categories_group.children.length){o=this.categories_group.getChildAt(i);const l=o.getChildAt(0);l.texture=a}else{o=new et;const l=this.createRoundedRectMask(e.w,e.h,e.round),u=new Rt({width:e.w,height:e.h,texture:a,mask:l});o.addChild(u),o.addChild(l),this.categories_group.addChild(o)}o.x=i*(e.w+e.margin),o.y=0,o.width=e.w,o.height=e.h,o.filters=[new tn({strength:e.blur,quality:15}),new jE({offset:{x:0,y:0},color:parseInt(t.slice(1),16),alpha:n,blur:e.shadow.value,quality:15})]}for(;this.categories_group.children.length>e.src.length;)this.categories_group.removeChildAt(this.categories_group.children.length-1)}}var KE={exports:{}};(function(r){(function(){function e(v,m){document.addEventListener?v.addEventListener("scroll",m,!1):v.attachEvent("scroll",m)}function t(v){document.body?v():document.addEventListener?document.addEventListener("DOMContentLoaded",function m(){document.removeEventListener("DOMContentLoaded",m),v()}):document.attachEvent("onreadystatechange",function m(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",m),v())})}function n(v){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(v)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(v,m){v.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+m+";"}function s(v){var m=v.g.offsetWidth,g=m+100;return v.j.style.width=g+"px",v.i.scrollLeft=g,v.h.scrollLeft=v.h.scrollWidth+100,v.l!==m?(v.l=m,!0):!1}function a(v,m){function g(){var b=_;s(b)&&b.g.parentNode!==null&&m(b.l)}var _=v;e(v.h,g),e(v.i,g),s(v)}function o(v,m,g){m=m||{},g=g||window,this.family=v,this.style=m.style||"normal",this.weight=m.weight||"normal",this.stretch=m.stretch||"normal",this.context=g}var l=null,u=null,c=null,f=null;function h(v){return u===null&&(d(v)&&/Apple/.test(window.navigator.vendor)?(v=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),u=!!v&&603>parseInt(v[1],10)):u=!1),u}function d(v){return f===null&&(f=!!v.document.fonts),f}function p(v,m){var g=v.style,_=v.weight;if(c===null){var b=document.createElement("div");try{b.style.font="condensed 100px sans-serif"}catch{}c=b.style.font!==""}return[g,_,c?v.stretch:"","100px",m].join(" ")}o.prototype.load=function(v,m){var g=this,_=v||"BESbswy",b=0,w=m||3e3,S=new Date().getTime();return new Promise(function(T,E){if(d(g.context)&&!h(g.context)){var O=new Promise(function(V,W){function D(){new Date().getTime()-S>=w?W(Error(""+w+"ms timeout exceeded")):g.context.document.fonts.load(p(g,'"'+g.family+'"'),_).then(function(j){1<=j.length?V():setTimeout(D,25)},W)}D()}),P=new Promise(function(V,W){b=setTimeout(function(){W(Error(""+w+"ms timeout exceeded"))},w)});Promise.race([P,O]).then(function(){clearTimeout(b),T(g)},E)}else t(function(){function V(){var X;(X=q!=-1&&$!=-1||q!=-1&&K!=-1||$!=-1&&K!=-1)&&((X=q!=$&&q!=K&&$!=K)||(l===null&&(X=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!X&&(536>parseInt(X[1],10)||parseInt(X[1],10)===536&&11>=parseInt(X[2],10))),X=l&&(q==ae&&$==ae&&K==ae||q==k&&$==k&&K==k||q==H&&$==H&&K==H)),X=!X),X&&(ie.parentNode!==null&&ie.parentNode.removeChild(ie),clearTimeout(b),T(g))}function W(){if(new Date().getTime()-S>=w)ie.parentNode!==null&&ie.parentNode.removeChild(ie),E(Error(""+w+"ms timeout exceeded"));else{var X=g.context.document.hidden;(X===!0||X===void 0)&&(q=D.g.offsetWidth,$=j.g.offsetWidth,K=I.g.offsetWidth,V()),b=setTimeout(W,50)}}var D=new n(_),j=new n(_),I=new n(_),q=-1,$=-1,K=-1,ae=-1,k=-1,H=-1,ie=document.createElement("div");ie.dir="ltr",i(D,p(g,"sans-serif")),i(j,p(g,"serif")),i(I,p(g,"monospace")),ie.appendChild(D.g),ie.appendChild(j.g),ie.appendChild(I.g),g.context.document.body.appendChild(ie),ae=D.g.offsetWidth,k=j.g.offsetWidth,H=I.g.offsetWidth,W(),a(D,function(X){q=X,V()}),i(D,p(g,'"'+g.family+'",sans-serif')),a(j,function(X){$=X,V()}),i(j,p(g,'"'+g.family+'",serif')),a(I,function(X){K=X,V()}),i(I,p(g,'"'+g.family+'",monospace'))})})},r.exports=o})()})(KE);var J9=KE.exports;const Q9=Eg(J9),eG=(r,e)=>{if(r[0]==="#"&&(r=r.slice(1)),r.length===3){let n="";r.split("").forEach(i=>{n+=i,n+=i}),r=n}return`rgba(${(r.match(/.{2}/g)||[]).map(n=>parseInt(n,16)).join(", ")}, ${e})`};var tG=pe('<div class="wrapper svelte-3ogvav"><div><div id="top" class="mask svelte-3ogvav"><div class="plane svelte-3ogvav"></div></div> <div id="middle" class="mask svelte-3ogvav"><div class="plane svelte-3ogvav"></div></div> <div id="bottom" class="mask svelte-3ogvav"><div class="plane svelte-3ogvav"></div></div></div></div>');function rG(r,e){He(e,!1);let t=ge(e,"color",8,"#FF3E00"),n=ge(e,"unit",8,"px"),i=ge(e,"duration",8,"1.3s"),s=ge(e,"size",8,"60"),a=ge(e,"pause",8,!1),o=pt();Ut(()=>Le(t()),()=>{ve(o,eG(t(),.6))}),Xs(),Ar();var l=tG(),u=ye(l);let c;qe(()=>{cr(l,`--size: ${s()??""}${n()??""}; --color: ${t()??""}; --rgba: ${z(o)??""}; --duration: ${i()??""};`),c=ss(u,1,"spinner-inner svelte-3ogvav",null,c,{"pause-animation":a()})}),le(r,l),Ve()}var nG=pe('<div class="loading svelte-dfb6jk"><!></div>'),iG=pe('<div class="svelte-dfb6jk"><!></div>');function Lm(r,e){He(e,!0);const t=()=>Ie(e.datastate,"$datastate",s),n=()=>Ie(e.appstate,"$appstate",s),i=()=>Ie(e.background,"$background",s),[s,a]=Mt();let o,l,u=Ct("STANDBY"),c=Ct(""),f=Ot(()=>`width: ${t().width}px; height: ${t().height}px;${t().scale!=1?` transform: scale(${t().scale});`:""}`);const h=T=>window.dispatchEvent(new CustomEvent("texture_loaded",{detail:T}));En(()=>{R(()=>{e.drawer.create({mount_point:o,state:t(),background:"#14151e",width:t().width,height:t().height,back_buffer:e.back_buffer,texture_success:h,texture_fail:h}).then(async T=>{e.preload_font&&await new Q9(e.preload_font).load().catch(()=>alert(`Error: font ${e.preload_font} not loaded`)),e.subscriptions(T),ce(e.appstate,R(n).app=T,R(n)),l=o.querySelector("canvas")})})}),En(()=>{const T=[];i().x>0&&T.push("-3px 0px 0px 0px var(--red)"),i().y>0&&T.push("0px -3px 0px 0px var(--red)"),i().x+i().w<t().width&&T.push("3px 0px 0px 0px var(--red)"),i().y+i().h<t().height&&T.push("0px 3px 0px 0px var(--red)"),T.length>0?ve(c,`${z(f)} box-shadow: ${T.join(", ")};`):ve(c,z(f),!0)});function d(T){T.preventDefault();const E=-T.deltaY*1e-4,O=l.width*E,P=O/n().background_aspect;ce(e.background,R(i).w=+(i().w+Math.floor(O*100)/100).toFixed(2),R(i)),ce(e.background,R(i).h=+(i().h+Math.floor(P*100)/100).toFixed(2),R(i)),ce(e.background,R(i).x=+(i().x-Math.floor(O*100/2)/100).toFixed(2),R(i)),ce(e.background,R(i).y=+(i().y-Math.floor(P*100/2)/100).toFixed(2),R(i))}function p(){z(u)==="STANDBY"&&ve(u,"DRAG")}function v(){z(u)==="DRAG"&&ve(u,"STANDBY")}function m(T){z(u)==="DRAG"&&(ce(e.background,R(i).x+=T.movementX,R(i)),ce(e.background,R(i).y+=T.movementY,R(i)))}function g(T){if(T.preventDefault(),T.stopPropagation(),i().paste_mode==="fit")ce(e.background,R(i).x=0,R(i)),ce(e.background,R(i).y=0,R(i)),ce(e.background,R(i).w=l.width,R(i)),ce(e.background,R(i).h=l.height,R(i));else if(i().paste_mode==="aspect"){const E=wg(t().width,t().height,n().background_width,n().background_height);gi(e.background,{...i(),...E})}}function _(T){T.preventDefault(),T.stopPropagation()}var b=iG();b.__mousedown=p,b.__mouseup=v,b.__mousemove=m,b.__dblclick=g;var w=ye(b);{var S=T=>{var E=nG(),O=ye(E);rG(O,{color:"#d42834"}),le(T,E)};Ze(w,T=>{n().background_loading&&T(S)})}as(b,T=>o=T,()=>o),qe(()=>cr(b,z(c))),We("wheel",b,d),We("selectstart",b,_),le(r,b),Ve(),a()}is(["mousedown","mouseup","mousemove","dblclick"]);function sG(r,e){He(e,!1);const t=()=>Ie(qa,"$filter",a),n=()=>Ie(Vi,"$background",a),i=()=>Ie(Ya,"$description",a),s=()=>Ie(Xa,"$title",a),[a,o]=Mt();function l(u){Vi.subscribe(c=>{u.updateBackground(c,t())}),qa.subscribe(c=>{u.updateBackground(n(),c)}),Xl.subscribe(c=>{u.updateLogo(c)}),Xa.subscribe(c=>{u.updateText(c,i())}),Ya.subscribe(c=>{u.updateText(s(),c)}),Yl.subscribe(c=>{u.updateCategories(c)})}Ar(),Lm(r,{get background(){return Vi},subscriptions:l,get datastate(){return qg},get appstate(){return $a},get drawer(){return Z9},back_buffer:!1,preload_font:"Gilroy"}),Ve(),o()}const ZE={adjustment:{enabled:!1,gamma:1,saturation:1,contrast:1,brightness:1},blur:{enabled:!0,value:.2},tilt_shift:{enabled:!1,blur:5,start:{x:600,y:0},end:{x:600,y:720}},vignetting:{enabled:!1,value:.3,alpha:1,blur:.3},zoom_blur:{enabled:!1,center:{x:900,y:360},value:.03,radius:500},gradient:{enabled:!0,orientation:"horizontal",start:{value:0,color:"#0000008c"},mid:{value:.34,color:"#00000066"},end:{value:.6,color:"#00000000"}}},aG={src:Qw,x:0,y:0,w:1273,h:711,flip_h:!1,flip_v:!1,paste_mode:"aspect"},oG={src:Wg,x:1092,y:60,w:121,h:100,blur:0,alpha:.6},lG={text:`Ð¡ÑÑÐ¸Ð¼Ð¸Ð¼
ÐºÐ¾Ð½ÑÐµÐ½Ñ`,x:120,y:219,font:{face:"Gilroy",size:90,weight:"700",color:"#ffffff",line_height:109},shadow:{value:0,color:"#00000088"}},uG={src:[Vg],names:["Just Chatting"],x:452,y:481,w:128,h:170,round:12,blur:.1,margin:20,shadow:{value:2,color:"#00000066"}},cG={x:0,y:0,w:60,h:711,color:"#9047fe"},fG={text:`WELOVEGAMES
Ð§Ð°Ñ`,x:120,y:481,h:75,padding_x:21,padding_y:20,margin_x:12,margin_y:20,round:12,color:"#1414188f",backdrop:{blur:12,quality:12},font:{face:"Gilroy",size:32,weight:"500",color:"#ffffff",line_height:75}},hG={0:"ÐÐ¾ÑÐºÑÐµÑÐµÐ½ÑÐµ",1:"ÐÐ¾Ð½ÐµÐ´ÐµÐ»ÑÐ½Ð¸Ðº",2:"ÐÑÐ¾ÑÐ½Ð¸Ðº",3:"Ð¡ÑÐµÐ´Ð°",4:"Ð§ÐµÑÐ²ÐµÑÐ³",5:"ÐÑÑÐ½Ð¸ÑÐ°",6:"Ð¡ÑÐ±Ð±Ð¾ÑÐ°"},Kc=new Date;Kc.setHours(Kc.getHours()+1);const dG={text:`${hG[Kc.getDay()]},${Kc.getHours()}:00 ÐÐ¡Ð`,x:120,y:60,h:75,padding_x:21,padding_y:20,margin_x:12,margin_y:20,round:12,color:"#dddddd4d",backdrop:{blur:12,quality:12},font:{face:"Gilroy",size:32,weight:"500",color:"#ffffff",line_height:75}},ro=Xe(structuredClone(ZE)),Wi=Xe(structuredClone(aG)),ru=Xe(structuredClone(oG)),nu=Xe(structuredClone(lG)),no=Xe(structuredClone(uG)),iu=Xe(structuredClone(cG)),io=Xe(structuredClone(fG)),su=Xe(structuredClone(dG)),Um=tr([ro,Wi,ru,nu,no,iu,io,su],([r,e,t,n,i,s,a,o])=>({version:0,width:1273,height:711,scale:1,debug:!1,filter:r,background:e,logo:t,title:n,categories:i,stripe:s,roles:a,time:o})),so=Xe({background:Qw.split(",")[0],background_loading:!1,background_width:1273,background_height:711,background_aspect:1273/711,logo:Wg.split(",")[0],app:void 0}),JE=1;function or(r){try{return structuredClone(r)}catch{try{return JSON.parse(JSON.stringify(r))}catch{return r}}}function pG(){const r=St(so);return{version:JE,filter:or(St(ro)),background:or(St(Wi)),logo:or(St(ru)),title:or(St(nu)),categories:or(St(no)),stripe:or(St(iu)),roles:or(St(io)),time:or(St(su)),app:{background:r.background,background_width:r.background_width,background_height:r.background_height,background_aspect:r.background_aspect,logo:r.logo}}}function gG(r){!r||r.version!==JE||(ro.set(or(r.filter)),Wi.set(or(r.background)),ru.set(or(r.logo)),nu.set(or(r.title)),no.set(or(r.categories)),iu.set(or(r.stripe)),io.set(or(r.roles)),su.set(or(r.time)),so.update(e=>({...e,background:r.app?.background??e.background,background_width:r.app?.background_width??e.background_width,background_height:r.app?.background_height??e.background_height,background_aspect:r.app?.background_aspect??e.background_aspect,logo:r.app?.logo??e.logo,background_loading:!1})))}var mG=pe('<div class="label svelte-130wuz3"> </div>'),vG=pe('<button class="option svelte-130wuz3"></button>'),_G=pe('<div class="container svelte-130wuz3"><!> <!></div>');function QE(r,e){He(e,!0);let t=ge(e,"value",15);function n(l){const u=l.target;t(u.dataset.value)}var i=_G(),s=ye(i);{var a=l=>{var u=mG(),c=ye(u);qe(()=>kt(c,e.label)),le(l,u)};Ze(s,l=>{e.label&&l(a)})}var o=ee(s,2);Is(o,17,()=>e.options,Os,(l,u)=>{var c=vG();c.__click=n,qe(()=>{cr(c,`background: ${z(u)??""}`),Qe(c,"aria-label",z(u)),Qe(c,"data-value",z(u))}),le(l,c)}),le(r,i),Ve()}is(["click"]);var bG=pe("<!> <!> <!> <!>",1),yG=pe("<!> <!>",1),xG=pe("<!> <!>",1);function wG(r,e){He(e,!0);const t=()=>Ie(e.stripe,"$stripe",n),[n,i]=Mt();let s=ge(e,"collapsed",3,!1);hn(r,{title:"ÐÐ¾Ð»Ð¾ÑÐ°",get collapsed(){return s()},children:(a,o)=>{var l=xG(),u=be(l);rt(u,{children:(f,h)=>{var d=bG(),p=be(d);Se(p,{label:"X",get value(){return t().x},set value(_){ce(e.stripe,R(t).x=_,R(t))}});var v=ee(p,2);Se(v,{label:"Y",get value(){return t().y},set value(_){ce(e.stripe,R(t).y=_,R(t))}});var m=ee(v,2);Se(m,{label:"W",get value(){return t().w},set value(_){ce(e.stripe,R(t).w=_,R(t))}});var g=ee(m,2);Se(g,{label:"H",get value(){return t().h},set value(_){ce(e.stripe,R(t).h=_,R(t))}}),le(f,d)},$$slots:{default:!0}});var c=ee(u,2);rt(c,{children:(f,h)=>{var d=yG(),p=be(d);wr(p,{label:"color",get hex(){return t().color},set hex(m){ce(e.stripe,R(t).color=m,R(t))}});var v=ee(p,2);QE(v,{label:"palette",options:["#9047fe","#f05f2d"],get value(){return t().color},set value(m){ce(e.stripe,R(t).color=m,R(t))}}),le(f,d)},$$slots:{default:!0}}),le(a,l)},$$slots:{default:!0}}),Ve(),i()}var SG=pe("<!> <!> <!> <!> <!> <!> <!>",1),TG=pe("<!> <!> <!> <!>",1),EG=pe("<!> <!> <!> <!> <!>",1),AG=pe("<!> <!> <!>",1);function e3(r,e){He(e,!0);const t=()=>Ie(e.badges,"$badges",n),[n,i]=Mt();var s=AG(),a=be(s);rt(a,{children:(u,c)=>{var f=SG(),h=be(f);Se(h,{label:"X",get value(){return t().x},set value(b){ce(e.badges,R(t).x=b,R(t))}});var d=ee(h,2);Se(d,{label:"Y",get value(){return t().y},set value(b){ce(e.badges,R(t).y=b,R(t))}});var p=ee(d,2);Se(p,{label:"H",get value(){return t().h},set value(b){ce(e.badges,R(t).h=b,R(t))}});var v=ee(p,2);Se(v,{label:"PX",get value(){return t().padding_x},set value(b){ce(e.badges,R(t).padding_x=b,R(t))}});var m=ee(v,2);Se(m,{label:"PY",get value(){return t().padding_y},set value(b){ce(e.badges,R(t).padding_y=b,R(t))}});var g=ee(m,2);Se(g,{label:"MX",get value(){return t().margin_x},set value(b){ce(e.badges,R(t).margin_x=b,R(t))}});var _=ee(g,2);Se(_,{label:"MY",get value(){return t().margin_y},set value(b){ce(e.badges,R(t).margin_y=b,R(t))}}),le(u,f)},$$slots:{default:!0}});var o=ee(a,2);rt(o,{children:(u,c)=>{var f=TG(),h=be(f);Se(h,{label:"round",min:0,get value(){return t().round},set value(m){ce(e.badges,R(t).round=m,R(t))}});var d=ee(h,2);Se(d,{label:"blur",min:0,get value(){return t().backdrop.blur},set value(m){ce(e.badges,R(t).backdrop.blur=m,R(t))}});var p=ee(d,2);Se(p,{label:"backdrop",min:1,get value(){return t().backdrop.quality},set value(m){ce(e.badges,R(t).backdrop.quality=m,R(t))}});var v=ee(p,2);wr(v,{label:"bg",get hex(){return t().color},set hex(m){ce(e.badges,R(t).color=m,R(t))}}),le(u,f)},$$slots:{default:!0}});var l=ee(o,2);rt(l,{children:(u,c)=>{var f=EG(),h=be(f);zr(h,{placeholder:"Arial",label:"font",width:100,get value(){return t().font.face},set value(g){ce(e.badges,R(t).font.face=g,R(t))}});var d=ee(h,2);Se(d,{placeholder:"60",label:"size",min:0,get value(){return t().font.size},set value(g){ce(e.badges,R(t).font.size=g,R(t))}});var p=ee(d,2);Se(p,{placeholder:"60",label:"lh",min:0,get value(){return t().font.line_height},set value(g){ce(e.badges,R(t).font.line_height=g,R(t))}});var v=ee(p,2);zr(v,{placeholder:"bold",label:"weight",width:40,get value(){return t().font.weight},set value(g){ce(e.badges,R(t).font.weight=g,R(t))}});var m=ee(v,2);wr(m,{label:"color",get hex(){return t().font.color},set hex(g){ce(e.badges,R(t).font.color=g,R(t))}}),le(u,f)},$$slots:{default:!0}}),le(r,s),Ve(),i()}var CG=pe("<!> <!>",1);function PG(r,e){He(e,!0);const t=()=>Ie(e.roles,"$roles",n),[n,i]=Mt();hn(r,{title:"Ð ÑÐ¾Ð»ÑÑ",children:(s,a)=>{var o=CG(),l=be(o);rt(l,{children:(c,f)=>{ql(c,{placeholder:"Ð±ÐµÐ¹Ð´Ð¶Ð¸ÐºÐ¸",get value(){return t().text},set value(h){ce(e.roles,R(t).text=h,R(t))}})},$$slots:{default:!0}});var u=ee(l,2);e3(u,{get badges(){return e.roles}}),le(s,o)},$$slots:{default:!0}}),Ve(),i()}var RG=pe("<!> <!>",1),kG=pe("<!> <!>",1);function MG(r,e){He(e,!0);const t=()=>Ie(e.datetime,"$datetime",n),[n,i]=Mt(),s=t().text.split(",");let a=Ct(Ir(s[0].trim())),o=Ct(Ir(s[1].trim()));En(()=>{ce(e.datetime,R(t).text=`${z(a)},${z(o)}`,R(t))}),hn(r,{title:"ÐÑÐµÐ¼Ñ",children:(l,u)=>{var c=kG(),f=be(c);rt(f,{children:(d,p)=>{var v=RG(),m=be(v);zr(m,{placeholder:"Ð´ÐµÐ½Ñ...",width:120,get value(){return z(a)},set value(_){ve(a,_,!0)}});var g=ee(m,2);zr(g,{placeholder:"Ð²ÑÐµÐ¼Ñ...",width:120,get value(){return z(o)},set value(_){ve(o,_,!0)}}),le(d,v)},$$slots:{default:!0}});var h=ee(f,2);e3(h,{get badges(){return e.datetime}}),le(l,c)},$$slots:{default:!0}}),Ve(),i()}var OG=pe("<!> <!> <!> <!> <!> <!> <!> <!>",1);function IG(r){var e=OG(),t=be(e);Sg(t,{get background(){return Wi},get appstate(){return so},get datastate(){return Um}});var n=ee(t,2);xg(n,{get logo(){return ru},get appstate(){return so}});var i=ee(n,2);wG(i,{get stripe(){return iu},collapsed:!0});var s=ee(i,2);yg(s,{get filter(){return ro},get defaults(){return ZE},collapsed:!0});var a=ee(s,2);MG(a,{get datetime(){return su}});var o=ee(a,2);Zw(o,{get title(){return nu}});var l=ee(o,2);Kw(l,{get categories(){return no}});var u=ee(l,2);PG(u,{get roles(){return io}}),le(r,e)}class BG extends Dm{text_group=new et;title=new Ta;background_group=new et;backrgound=new Rt;logo_group=new et;logo=new Rt;stripe=new Kn;categories_group=new et;categories_block=new et;categories_title=new Ta({text:"Ð Ð¿Ð»Ð°Ð½Ð°Ñ",x:0,y:-44,style:{fontFamily:"Gilroy",fontSize:24,fill:"#ffffff",fontWeight:"500",lineHeight:20}});roles_block=new et;roles_group=new et;roles_title=new Ta({text:"Ð ÑÐ¾Ð»ÑÑ",x:0,y:-44,style:{fontFamily:"Gilroy",fontSize:24,fill:"#ffffff",fontWeight:"500",lineHeight:20}});time_group=new et;prev_filters;prev_category_round;async mount(e){this.prev_category_round=e.categories.round,this.backrgound=Rt.from(e.background.src),this.logo=Rt.from(e.logo.src),this.text_group.addChild(this.title),this.background_group.addChild(this.backrgound),this.logo_group.addChild(this.logo),this.categories_block.addChild(this.categories_title,this.categories_group),this.roles_block.addChild(this.roles_title,this.roles_group),this.app.stage.addChild(this.background_group,this.logo_group,this.stripe,this.categories_block,this.text_group,this.roles_block,this.time_group)}updateTitle(e){this.title.text=e.text;const t=this.title.text.split(`
`).length;this.title.y=e.y-(t-1)*Math.floor(e.font.line_height/2),this.title.x=e.x;const[n,i]=this.splitRGBA(e.shadow.color);this.title.style={fontFamily:e.font.face,fontSize:e.font.size,fill:e.font.color,fontWeight:e.font.weight,lineHeight:e.font.line_height,dropShadow:{color:n,blur:e.shadow.value,distance:0,alpha:i}}}async updateBackground(e,t){const n=await this.textures.get(e.src);n&&(this.backrgound.texture=n),this.backrgound.x=e.x,this.backrgound.y=e.y,this.backrgound.width=e.w,this.backrgound.height=e.h,e.flip_h?(this.backrgound.scale.x=-Math.abs(this.backrgound.scale.x),this.backrgound.x=this.backrgound.x+this.backrgound.width):this.backrgound.scale.x=Math.abs(this.backrgound.scale.x),e.flip_v?(this.backrgound.scale.y=-Math.abs(this.backrgound.scale.y),this.backrgound.y=this.backrgound.y+this.backrgound.height):this.backrgound.scale.y=Math.abs(this.backrgound.scale.y),!(this.prev_filters!==void 0&&this.diff(this.prev_filters,t).length===0)&&(this.prev_filters=structuredClone(t),this.background_group.filters=this.buildFilters(t,this.backrgound))}async updateLogo(e){this.logo.x=e.x,this.logo.y=e.y,this.logo.width=e.w,this.logo.height=e.h,this.logo.alpha=e.alpha;const t=await this.textures.get(e.src);t&&(this.logo.texture=t),this.logo.filters=[new tn({strength:e.blur,quality:15})]}updateStripe(e){this.stripe.clear(),this.stripe.rect(e.x,e.y,e.w,e.h),this.stripe.fill(e.color)}async updateCategories(e,t){if(this.prev_category_round!=e.round){for(const a of this.categories_group.children){const o=this.createRoundedRectMask(e.w,e.h,e.round);a.removeChildAt(1);const l=a.children[0];l.mask=o,a.addChild(o)}this.prev_category_round=e.round;return}e.src.length===0?this.categories_title.renderable=!1:this.categories_title.renderable=!0,this.categories_block.x=e.x,this.categories_block.y=e.y;const{maxX:n}=this.roles_block.getBounds();n>e.x-t.margin_x*2&&(this.categories_block.x=n+t.margin_x*2);const[i,s]=this.splitRGBA(e.shadow.color);for(const[a,o]of e.src.entries()){const l=await this.textures.get(o);if(!l)continue;let u;if(a<this.categories_group.children.length){u=this.categories_group.getChildAt(a);const c=u.getChildAt(0);c.texture=l}else{u=new et;const c=this.createRoundedRectMask(e.w,e.h,e.round),f=new Rt({width:e.w,height:e.h,texture:l,mask:c});u.addChild(f),u.addChild(c),this.categories_group.addChild(u)}u.x=a*(e.w+e.margin),u.y=0,u.width=e.w,u.height=e.h,u.filters=[new tn({strength:e.blur,quality:15}),new jE({offset:{x:0,y:0},color:parseInt(i.slice(1),16),alpha:s,blur:e.shadow.value,quality:15})]}for(;this.categories_group.children.length>e.src.length;)this.categories_group.removeChildAt(this.categories_group.children.length-1)}updateRoles(e,t){e.text.length===0?(this.roles_title.renderable=!1,this.categories_block.x=t.x):this.roles_title.renderable=!0,this.updateBadges(e,this.roles_group,this.roles_block);const{maxX:n}=this.roles_block.getBounds();n>t.x-e.margin_x*2&&(this.categories_block.x=n+e.margin_x*2)}updateTime(e){this.updateBadges(e,this.time_group)}updateBadges(e,t,n){function i(u,c,f){const h=new Ta({text:f,x:e.padding_x-1,style:{fontFamily:e.font.face,fontSize:e.font.size,fill:e.font.color,fontWeight:e.font.weight,lineHeight:e.font.line_height}}),d=lr.measureText(f,h.style),p=d.width+e.padding_x*2-1;h.y=Math.ceil(e.h/2-d.height/2);const v=new Kn().roundRect(0,0,p,e.h,e.round).fill(e.color);return v.filters=[new tn({strength:.4,quality:10})],v.filterArea=new ft(0,0,p-1,e.h),{container:new et({x:u,y:c,width:p,height:e.h,children:[v,h]}),width:p}}if(t.removeChildren(),n?(n.x=e.x,n.y=e.y):(t.x=e.x,t.y=e.y),e.text.length===0)return;let s=0,a=0;const o=e.text.split(`
`),l=new h9({strength:e.backdrop.blur,quality:e.backdrop.quality});for(let u=0;u<o.length;u++){const c=o[u].split(",");for(let f=0;f<c.length;f++){const{container:h,width:d}=i(s,a,c[f].trim());h.filters=[l],h.filterArea=new ft(-l.strength,-l.strength,h.width+l.strength*2,h.height+l.strength*2),t.addChild(h),s+=e.margin_x+d}a+=e.margin_y+e.h,s=0}}}function FG(r,e){He(e,!1);const t=()=>Ie(ro,"$filter",a),n=()=>Ie(Wi,"$background",a),i=()=>Ie(io,"$roles",a),s=()=>Ie(no,"$categories",a),[a,o]=Mt();function l(u){Wi.subscribe(c=>{u.updateBackground(c,t())}),ro.subscribe(c=>{u.updateBackground(n(),c)}),ru.subscribe(c=>{u.updateLogo(c)}),nu.subscribe(c=>{u.updateTitle(c)}),no.subscribe(c=>{u.updateCategories(c,i())}),io.subscribe(c=>{u.updateRoles(c,s())}),su.subscribe(c=>{u.updateTime(c)}),iu.subscribe(c=>{u.updateStripe(c)})}Ar(),Lm(r,{get background(){return Wi},subscriptions:l,get datastate(){return Um},get appstate(){return so},get drawer(){return BG},back_buffer:!0,preload_font:"Gilroy"}),Ve(),o()}var Io={};const DG="bold|bolder|lighter|[1-9]00",LG="italic|oblique",UG="small-caps",NG="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",GG="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",Cy=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,zG=new RegExp(`(${DG}) +`,"i"),jG=new RegExp(`(${LG}) +`,"i"),HG=new RegExp(`(${UG}) +`,"i"),VG=new RegExp(`(${NG}) +`,"i"),WG=new RegExp(`([\\d\\.]+)(${GG}) *((?:${Cy})( *, *(?:${Cy}))*)`),Bd={},qG=16;var XG=r=>{if(Bd[r])return Bd[r];const e=WG.exec(r);if(!e)return;const t={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(e[1]),unit:e[2],family:e[3].replace(/["']/g,"").replace(/ *, */g,",")};let n,i,s,a;const o=r.substring(0,e.index);switch((n=zG.exec(o))&&(t.weight=n[1]),(i=jG.exec(o))&&(t.style=i[1]),(s=HG.exec(o))&&(t.variant=s[1]),(a=VG.exec(o))&&(t.stretch=a[1]),t.unit){case"pt":t.size/=.75;break;case"pc":t.size*=16;break;case"in":t.size*=96;break;case"cm":t.size*=96/2.54;break;case"mm":t.size*=96/25.4;break;case"%":break;case"em":case"rem":t.size*=qG/.75;break;case"q":t.size*=96/25.4/4;break}return Bd[r]=t};const YG=XG;Io.parseFont=YG;Io.createCanvas=function(r,e){return Object.assign(document.createElement("canvas"),{width:r,height:e})};Io.createImageData=function(r,e,t){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(r);case 2:return new ImageData(r,e);default:return new ImageData(r,e,t)}};Io.loadImage=function(r,e){return new Promise(function(t,n){const i=Object.assign(document.createElement("img"),e);function s(){i.onload=null,i.onerror=null}i.onload=function(){s(),t(i)},i.onerror=function(){s(),n(new Error('Failed to load the image "'+r+'"'))},i.src=r})};const{createCanvas:$G}=Io;var KG=class{constructor(e){const{width:t,height:n}=e;this.canvas=$G(t,n),this.context=this.canvas.getContext("2d"),this.width=t,this.height=n,this.context.drawImage(e,0,0,this.width,this.height)}clear(){this.context.clearRect(0,0,this.width,this.height)}update(e){this.context.putImageData(e,0,0)}getPixelCount(){return this.width*this.height}getImageData(){return this.context.getImageData(0,0,this.width,this.height)}},t3={};/*!
 * quantize.js Copyright 2008 Nick Rabinowitz.
 * Licensed under the MIT license: http://www.opensource.org/licenses/mit-license.php
 * @license
 *//*!
 * Block below copied from Protovis: http://mbostock.github.com/protovis/
 * Copyright 2010 Stanford Visualization Group
 * Licensed under the BSD License: http://www.opensource.org/licenses/bsd-license.php
 * @license
 */const Ml={map(r,e){const t={};return e?r.map((n,i)=>(t.index=i,e.call(t,n))):r.slice()},naturalOrder(r,e){return r<e?-1:r>e?1:0},sum(r,e){const t={};return r.reduce(e?(n,i,s)=>(t.index=s,n+e.call(t,i)):(n,i)=>n+i,0)},max(r,e){return Math.max.apply(null,e?Ml.map(r,e):r)}},Ol=5,Ti=8-Ol,Py=1e3,ZG=.75,Ia=(r,e,t)=>(r<<2*Ol)+(e<<Ol)+t;class Zp{constructor(e){this.comparator=e,this.contents=[],this.sorted=!1}sort(){this.contents.sort(this.comparator),this.sorted=!0}push(e){this.contents.push(e),this.sorted=!1}peek(e){return this.sorted||this.sort(),e===void 0&&(e=this.contents.length-1),this.contents[e]}pop(){return this.sorted||this.sort(),this.contents.pop()}size(){return this.contents.length}map(e){return this.contents.map(e)}debug(){return this.sorted||this.sort(),this.contents}}class Nm{constructor(e,t,n,i,s,a,o){this.r1=e,this.r2=t,this.g1=n,this.g2=i,this.b1=s,this.b2=a,this.histo=o}volume(e){let t=this;return(!t._volume||e)&&(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume}count(e){let t=this,n=t.histo;if(!t._count_set||e){let i=0,s,a,o,l;for(a=t.r1;a<=t.r2;a++)for(o=t.g1;o<=t.g2;o++)for(l=t.b1;l<=t.b2;l++)s=Ia(a,o,l),i+=n[s]||0;t._count=i,t._count_set=!0}return t._count}copy(){let e=this;return new Nm(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)}avg(e){let t=this,n=t.histo;if(!t._avg||e){let i=0,s=1<<8-Ol,a=0,o=0,l=0,u,c,f,h,d;for(c=t.r1;c<=t.r2;c++)for(f=t.g1;f<=t.g2;f++)for(h=t.b1;h<=t.b2;h++)d=Ia(c,f,h),u=n[d]||0,i+=u,a+=u*(c+.5)*s,o+=u*(f+.5)*s,l+=u*(h+.5)*s;i?t._avg=[~~(a/i),~~(o/i),~~(l/i)]:t._avg=[~~(s*(t.r1+t.r2+1)/2),~~(s*(t.g1+t.g2+1)/2),~~(s*(t.b1+t.b2+1)/2)]}return t._avg}contains(e){let t=this,n=e[0]>>Ti;return gval=e[1]>>Ti,bval=e[2]>>Ti,n>=t.r1&&n<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}}class JG{constructor(){this.vboxes=new Zp((e,t)=>Ml.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume()))}push(e){this.vboxes.push({vbox:e,color:e.avg()})}palette(){return this.vboxes.map(e=>e.color)}size(){return this.vboxes.size()}map(e){let t=this.vboxes;for(let n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)}nearest(e){let t=this.vboxes,n,i,s;for(let a=0;a<t.size();a++)i=Math.sqrt(Math.pow(e[0]-t.peek(a).color[0],2)+Math.pow(e[1]-t.peek(a).color[1],2)+Math.pow(e[2]-t.peek(a).color[2],2)),(i<n||n===void 0)&&(n=i,s=t.peek(a).color);return s}}const QG=r=>{let e=1<<3*Ol,t=new Array(e),n,i,s,a;return r.forEach(o=>{i=o[0]>>Ti,s=o[1]>>Ti,a=o[2]>>Ti,n=Ia(i,s,a),t[n]=(t[n]||0)+1}),t},ez=(r,e)=>{let t=1e6,n=0,i=1e6,s=0,a=1e6,o=0,l,u,c;return r.forEach(f=>{l=f[0]>>Ti,u=f[1]>>Ti,c=f[2]>>Ti,l<t?t=l:l>n&&(n=l),u<i?i=u:u>s&&(s=u),c<a?a=c:c>o&&(o=c)}),new Nm(t,n,i,s,a,o,e)},tz=(r,e)=>{if(!e.count())return;let t=e.r2-e.r1+1,n=e.g2-e.g1+1,i=e.b2-e.b1+1,s=Ml.max([t,n,i]);if(e.count()==1)return[e.copy()];let a=0,o=[],l=[],u,c,f,h,d;if(s==t)for(u=e.r1;u<=e.r2;u++){for(h=0,c=e.g1;c<=e.g2;c++)for(f=e.b1;f<=e.b2;f++)d=Ia(u,c,f),h+=r[d]||0;a+=h,o[u]=a}else if(s==n)for(u=e.g1;u<=e.g2;u++){for(h=0,c=e.r1;c<=e.r2;c++)for(f=e.b1;f<=e.b2;f++)d=Ia(c,u,f),h+=r[d]||0;a+=h,o[u]=a}else for(u=e.b1;u<=e.b2;u++){for(h=0,c=e.r1;c<=e.r2;c++)for(f=e.g1;f<=e.g2;f++)d=Ia(c,f,u),h+=r[d]||0;a+=h,o[u]=a}o.forEach((v,m)=>{l[m]=a-v});const p=v=>{let m=v+"1",g=v+"2",_,b,w,S,T,E=0;for(u=e[m];u<=e[g];u++)if(o[u]>a/2){for(w=e.copy(),S=e.copy(),_=u-e[m],b=e[g]-u,_<=b?T=Math.min(e[g]-1,~~(u+b/2)):T=Math.max(e[m],~~(u-1-_/2));!o[T];)T++;for(E=l[T];!E&&o[T-1];)E=l[--T];return w[g]=T,S[m]=w[g]+1,[w,S]}};return s==t?p("r"):s==n?p("g"):p("b")};t3.quantize=(r,e)=>{if(!r.length||e<2||e>256)return!1;let t=QG(r),n=0;t.forEach(()=>n++);let i=ez(r,t),s=new Zp((u,c)=>Ml.naturalOrder(u.count(),c.count()));s.push(i);const a=(u,c)=>{let f=1,h=0,d;for(;h<Py;){if(d=u.pop(),!d.count()){u.push(d),h++;continue}let p=tz(t,d),v=p[0],m=p[1];if(!v||(u.push(v),m&&(u.push(m),f++),f>=c)||h++>Py)return}};a(s,ZG*e);let o=new Zp((u,c)=>Ml.naturalOrder(u.count()*u.volume(),c.count()*c.volume()));for(;s.size();)o.push(s.pop());a(o,e-o.size());let l=new JG;for(;o.size();)l.push(o.pop());return l};/**
 * Color Thief v2.0
 * by Lokesh Dhakar - http://www.lokeshdhakar.com
 *
 * Thanks
 * ------
 * Nick Rabinowitz - For creating quantize.js.
 * John Schulz - For clean up and optimization. @JFSIII
 * Nathan Spady - For adding drag and drop support to the demo page.
 *
 * License
 * -------
 * Copyright 2011, 2015 Lokesh Dhakar
 * Released under the MIT license
 * https://raw.githubusercontent.com/lokesh/color-thief/master/LICENSE
 *
 * @license
 */const{loadImage:rz}=Io,nz=KG,{quantize:iz}=t3,sz=(r,e=5,t=5)=>{(e<2||e>256)&&(e=5),t<1&&(t=5);const n=new nz(r),s=n.getImageData().data,a=n.getPixelCount(),o=[];for(let c=0,f,h,d,p,v;c<a;c+=t)f=c*4,h=s[f+0],d=s[f+1],p=s[f+2],v=s[f+3],v>=125&&(h>250&&d>250&&p>250||o.push([h,d,p]));const l=iz(o,e);return l?l.palette():[[255,255,255]]};var az=async(r,e,t)=>rz(r).then(n=>sz(n,e,t)),oz=pe("<!> <!> <!> <!>",1),lz=pe("<!> <!> <!> <!>",1),uz=pe("<!> <!> <!> <!> <!> <!>",1),cz=pe("<!> <!>",1),fz=pe("<!> <!> <!> <!> <!>",1);function hz(r,e){He(e,!0);const t=()=>Ie(e.background,"$background",i),n=()=>Ie(e.title_badge,"$title_badge",i),[i,s]=Mt();let a,o=["#d42834","#9047fe","#f27930"],l=Ct(Ir(o));function u([c,f,h]){return c=Math.max(0,Math.min(255,c)),f=Math.max(0,Math.min(255,f)),h=Math.max(0,Math.min(255,h)),`#${((1<<24)+(c<<16)+(f<<8)+h).toString(16).slice(1).toUpperCase()}`}En(()=>{t().src!==a&&(a=t().src,az(t().src,12,10).then(c=>{ve(l,[...o,...c.map(u)],!0)}))}),hn(r,{title:"ÐÐ»Ð°ÑÐµÑÐºÐ°",children:(c,f)=>{var h=fz(),d=be(h);rt(d,{children:(_,b)=>{ql(_,{placeholder:"Ð·Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº...",tabindex:2,get value(){return n().text},set value(w){ce(e.title_badge,R(n).text=w,R(n))}})},$$slots:{default:!0}});var p=ee(d,2);rt(p,{children:(_,b)=>{var w=oz(),S=be(w);Se(S,{label:"center X",get value(){return n().x},set value(P){ce(e.title_badge,R(n).x=P,R(n))}});var T=ee(S,2);Se(T,{label:"center Y",get value(){return n().y},set value(P){ce(e.title_badge,R(n).y=P,R(n))}});var E=ee(T,2);Se(E,{label:"min W",min:0,get value(){return n().rect.w},set value(P){ce(e.title_badge,R(n).rect.w=P,R(n))}});var O=ee(E,2);Se(O,{label:"min H",min:0,get value(){return n().rect.h},set value(P){ce(e.title_badge,R(n).rect.h=P,R(n))}}),le(_,w)},$$slots:{default:!0}});var v=ee(p,2);rt(v,{children:(_,b)=>{var w=lz(),S=be(w);Se(S,{label:"border",min:0,get value(){return n().rect.border_width},set value(P){ce(e.title_badge,R(n).rect.border_width=P,R(n))}});var T=ee(S,2);Se(T,{label:"PX",min:0,get value(){return n().rect.padding_x},set value(P){ce(e.title_badge,R(n).rect.padding_x=P,R(n))}});var E=ee(T,2);Se(E,{label:"PY",min:0,get value(){return n().rect.padding_y},set value(P){ce(e.title_badge,R(n).rect.padding_y=P,R(n))}});var O=ee(E,2);wr(O,{label:"bg",get hex(){return n().rect.color},set hex(P){ce(e.title_badge,R(n).rect.color=P,R(n))}}),le(_,w)},$$slots:{default:!0}});var m=ee(v,2);rt(m,{children:(_,b)=>{var w=uz(),S=be(w);zr(S,{placeholder:"Arial",label:"font",width:90,get value(){return n().font.face},set value(W){ce(e.title_badge,R(n).font.face=W,R(n))}});var T=ee(S,2);Se(T,{placeholder:"60",label:"size",min:0,width:35,get value(){return n().font.size},set value(W){ce(e.title_badge,R(n).font.size=W,R(n))}});var E=ee(T,2);Se(E,{placeholder:"60",label:"lh",min:0,width:35,get value(){return n().font.line_height},set value(W){ce(e.title_badge,R(n).font.line_height=W,R(n))}});var O=ee(E,2);zr(O,{placeholder:"bold",label:"weight",width:30,get value(){return n().font.weight},set value(W){ce(e.title_badge,R(n).font.weight=W,R(n))}});var P=ee(O,2);Se(P,{placeholder:"12",label:"sp",min:0,width:35,get value(){return n().font.space_width},set value(W){ce(e.title_badge,R(n).font.space_width=W,R(n))}});var V=ee(P,2);wr(V,{label:"color",get hex(){return n().font.color},set hex(W){ce(e.title_badge,R(n).font.color=W,R(n))}}),le(_,w)},$$slots:{default:!0}});var g=ee(m,2);rt(g,{children:(_,b)=>{var w=cz(),S=be(w);wr(S,{label:"accent",get hex(){return n().accent},set hex(E){ce(e.title_badge,R(n).accent=E,R(n))}});var T=ee(S,2);QE(T,{label:"palette",get options(){return z(l)},get value(){return n().accent},set value(E){ce(e.title_badge,R(n).accent=E,R(n))}}),le(_,w)},$$slots:{default:!0}}),le(c,h)},$$slots:{default:!0}}),Ve(),s()}const r3={adjustment:{enabled:!1,gamma:1,saturation:1,contrast:1,brightness:1},blur:{enabled:!0,value:.2},tilt_shift:{enabled:!1,blur:5,start:{x:0,y:300},end:{x:1280,y:960}},vignetting:{enabled:!1,value:.2,alpha:.75,blur:.3},zoom_blur:{enabled:!1,center:{x:640,y:450},value:.03,radius:440},gradient:{enabled:!0,orientation:"vertical",start:{value:0,color:"#000000b3"},mid:{value:.25,color:"#0000008a"},end:{value:.5,color:"#00000000"}}},dz={src:e2,x:0,y:0,w:1280,h:960,flip_h:!1,flip_v:!1,paste_mode:"aspect"},n3={src:r2,x:1030,y:70,w:180,h:146,blur:.1,alpha:.3},pz={enabled:!1,src:n2,x:917,y:69,w:292,h:119,blur:.1,alpha:.6,translate_x:685,translate_y:69,translate_w:144,translate_h:119},gz={text:`Ð Ð¾Ð·ÑÐ³ÑÑÑ
%Ð Ð¾Ð·ÑÐ³ÑÑÑÐ°`,x:640,y:730,accent:"#d42834",font:{face:"U.S. 101",size:82,weight:"400",color:"#ffffff",line_height:76,space_width:12},rect:{w:608,h:219,border_width:9,color:"#000000cc",padding_x:20,padding_y:20},footnote:{enabled:!1,text:"ÐÐ»Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑÐ¸ÐºÐ¾Ð² boosty TIER 3-6 Ð¸ %KING %OF %BOOSTY",image:bp(),size:32,space_width:5,margin:46}},ao=Xe(structuredClone(r3)),Ei=Xe(structuredClone(dz)),Hs=Xe(structuredClone(n3)),au=Xe(structuredClone(pz)),oo=Xe(structuredClone(gz)),Gm=tr([ao,Ei,Hs,oo,au],([r,e,t,n,i])=>({version:0,width:1280,height:960,scale:.9,debug:!1,filter:r,background:e,logo:t,custom_logo:i,title_badge:n})),Rs=Xe({background:e2.split(",")[0],background_loading:!1,background_width:1280,background_height:960,background_aspect:1280/960,logo:r2.split(",")[0],custom_logo:n2.split(",")[0],app:void 0}),i3=1;function Wn(r){try{return structuredClone(r)}catch{try{return JSON.parse(JSON.stringify(r))}catch{return r}}}function mz(){const r=St(Rs);return{version:i3,filter:Wn(St(ao)),background:Wn(St(Ei)),logo:Wn(St(Hs)),custom_logo:Wn(St(au)),title_badge:Wn(St(oo)),app:{background:r.background,background_width:r.background_width,background_height:r.background_height,background_aspect:r.background_aspect,logo:r.logo,custom_logo:r.custom_logo??""}}}function vz(r){!r||r.version!==i3||(ao.set(Wn(r.filter)),Ei.set(Wn(r.background)),Hs.set(Wn(r.logo)),au.set(Wn(r.custom_logo)),oo.set(Wn(r.title_badge)),Rs.update(e=>({...e,background:r.app?.background??e.background,background_width:r.app?.background_width??e.background_width,background_height:r.app?.background_height??e.background_height,background_aspect:r.app?.background_aspect??e.background_aspect,logo:r.app?.logo??e.logo,custom_logo:r.app?.custom_logo??e.custom_logo,background_loading:!1})))}var _z=pe("<!> <!> <!> <!> <!> <!> <!>",1),bz=pe("<!> <!>",1);function yz(r,e){He(e,!0);const t=()=>Ie(e.custom_logo,"$custom_logo",s),n=()=>Ie(e.logo,"$logo",s),i=()=>Ie(e.appstate,"$appstate",s),[s,a]=Mt();En(()=>{t().enabled?(ce(e.logo,R(n).x=t().translate_x,R(n)),ce(e.logo,R(n).y=t().translate_y,R(n)),ce(e.logo,R(n).w=t().translate_w,R(n)),ce(e.logo,R(n).h=t().translate_h,R(n)),ce(e.logo,R(n).alpha=t().alpha,R(n))):(ce(e.logo,R(n).x=e.default_logo.x,R(n)),ce(e.logo,R(n).y=e.default_logo.y,R(n)),ce(e.logo,R(n).w=e.default_logo.w,R(n)),ce(e.logo,R(n).h=e.default_logo.h,R(n)),ce(e.logo,R(n).alpha=e.default_logo.alpha,R(n)))});function o(l){ce(e.custom_logo,R(t).src=l.target?.value,R(t))}hn(r,{title:"ÐÑÑ Ð»Ð¾Ð³Ð¾",collapsed:!0,children:(l,u)=>{var c=bz(),f=be(c);rt(f,{children:(d,p)=>{zr(d,{placeholder:"ÑÑÑÐ»ÐºÐ° Ð½Ð° ÐºÐ°ÑÑÐ¸Ð½ÐºÑ Ð»Ð¾Ð³Ð¾ÑÐ¸Ð¿Ð°...",onchange:o,get value(){return i().custom_logo},set value(v){ce(e.appstate,R(i).custom_logo=v,R(i))}})},$$slots:{default:!0}});var h=ee(f,2);rt(h,{children:(d,p)=>{var v=_z(),m=be(v);o1(m,{label:"on",get checked(){return t().enabled},set checked(E){ce(e.custom_logo,R(t).enabled=E,R(t))}});var g=ee(m,2);Se(g,{label:"X",get value(){return t().x},set value(E){ce(e.custom_logo,R(t).x=E,R(t))}});var _=ee(g,2);Se(_,{label:"Y",get value(){return t().y},set value(E){ce(e.custom_logo,R(t).y=E,R(t))}});var b=ee(_,2);Se(b,{label:"W",get value(){return t().w},set value(E){ce(e.custom_logo,R(t).w=E,R(t))}});var w=ee(b,2);Se(w,{label:"H",get value(){return t().h},set value(E){ce(e.custom_logo,R(t).h=E,R(t))}});var S=ee(w,2);Se(S,{label:"blur",step:.1,min:0,get value(){return t().blur},set value(E){ce(e.custom_logo,R(t).blur=E,R(t))}});var T=ee(S,2);Se(T,{label:"Î±",step:.01,min:0,max:1,get value(){return t().alpha},set value(E){ce(e.custom_logo,R(t).alpha=E,R(t))}}),le(d,v)},$$slots:{default:!0}}),le(l,c)},$$slots:{default:!0}}),Ve(),a()}var xz=pe("<!> <!> <!> <!>",1),wz=pe("<!> <!>",1);function Sz(r,e){He(e,!0);const t=()=>Ie(e.title_badge,"$title_badge",n),[n,i]=Mt();hn(r,{title:"Ð¡Ð½Ð¾ÑÐºÐ°",collapsed:!0,children:(s,a)=>{var o=wz(),l=be(o);rt(l,{children:(c,f)=>{ql(c,{placeholder:"ÑÐµÐºÑÑ ÑÐ½Ð¾ÑÐºÐ¸...",get value(){return t().footnote.text},set value(h){ce(e.title_badge,R(t).footnote.text=h,R(t))}})},$$slots:{default:!0}});var u=ee(l,2);rt(u,{children:(c,f)=>{var h=xz(),d=be(h);o1(d,{label:"on",get checked(){return t().footnote.enabled},set checked(g){ce(e.title_badge,R(t).footnote.enabled=g,R(t))}});var p=ee(d,2);Se(p,{label:"size",get value(){return t().footnote.size},set value(g){ce(e.title_badge,R(t).footnote.size=g,R(t))}});var v=ee(p,2);Se(v,{label:"margin",get value(){return t().footnote.margin},set value(g){ce(e.title_badge,R(t).footnote.margin=g,R(t))}});var m=ee(v,2);Se(m,{label:"sp",get value(){return t().footnote.space_width},set value(g){ce(e.title_badge,R(t).footnote.space_width=g,R(t))}}),le(c,h)},$$slots:{default:!0}}),le(s,o)},$$slots:{default:!0}}),Ve(),i()}var Tz=pe("<!> <!> <!> <!> <!> <!>",1);function Ez(r){var e=Tz(),t=be(e);Sg(t,{get background(){return Ei},get appstate(){return Rs},get datastate(){return Gm}});var n=ee(t,2);xg(n,{get logo(){return Hs},get appstate(){return Rs}});var i=ee(n,2);yz(i,{get logo(){return Hs},get custom_logo(){return au},get appstate(){return Rs},get default_logo(){return n3}});var s=ee(i,2);yg(s,{get filter(){return ao},get defaults(){return r3}});var a=ee(s,2);hz(a,{get title_badge(){return oo},get background(){return Ei}});var o=ee(a,2);Sz(o,{get title_badge(){return oo}}),le(r,e)}class Az extends Dm{background_group=new et;backrgound=new Rt;logo_group=new et({renderable:!1});logo=new Rt;custom_logo_group=new et({renderable:!1});custom_logo=new Rt;custom_logo_x=new sy({text:"x",x:0,y:0,style:{fontFamily:"Gilroy",fontSize:72,fill:"#ffffff",fontWeight:"700",lineHeight:20}});title_badge_group=new et;boosty_logo=new Rt;prev_filters;prev_title_badge;async mount(e){this.backrgound=Rt.from(e.background.src,!0),this.logo=Rt.from(e.logo.src,!0),this.custom_logo=Rt.from(e.custom_logo.src,!0),this.boosty_logo=Rt.from(bp(e.title_badge.accent),!0),this.boosty_logo.filters=[new tn({strength:.2,quality:5})],this.custom_logo_group.renderable=!1,this.title_badge_group.x=0,this.title_badge_group.y=0,this.title_badge_group.width=e.width,this.title_badge_group.height=e.height,this.background_group.addChild(this.backrgound),this.logo_group.addChild(this.logo),this.custom_logo_group.addChild(this.custom_logo,this.custom_logo_x),this.app.stage.addChild(this.background_group,this.logo_group,this.custom_logo_group,this.title_badge_group)}async update(e){}async updateBackground(e,t){const n=await this.textures.get(e.src);n&&(this.backrgound.texture=n),this.backrgound.x=e.x,this.backrgound.y=e.y,this.backrgound.width=e.w,this.backrgound.height=e.h,e.flip_h?(this.backrgound.scale.x=-Math.abs(this.backrgound.scale.x),this.backrgound.x=this.backrgound.x+this.backrgound.width):this.backrgound.scale.x=Math.abs(this.backrgound.scale.x),e.flip_v?(this.backrgound.scale.y=-Math.abs(this.backrgound.scale.y),this.backrgound.y=this.backrgound.y+this.backrgound.height):this.backrgound.scale.y=Math.abs(this.backrgound.scale.y),!(this.prev_filters!==void 0&&this.diff(this.prev_filters,t).length===0)&&(this.prev_filters=structuredClone(t),this.background_group.filters=this.buildFilters(t,this.backrgound))}async updateLogo(e){this.logo_group.renderable=!0,this.logo.x=e.x,this.logo.y=e.y,this.logo.width=e.w,this.logo.height=e.h,this.logo.alpha=e.alpha;const t=await this.textures.get(e.src);t&&(this.logo.texture=t),this.logo.filters=[new tn({strength:e.blur,quality:15})]}async updateCustomLogo(e,t){if(!e.enabled){this.custom_logo_group.renderable=!1;return}this.custom_logo_group.renderable=!0,this.custom_logo.x=e.x,this.custom_logo.y=e.y,this.custom_logo.width=e.w,this.custom_logo.height=e.h,this.custom_logo.alpha=e.alpha;const n=await this.textures.get(e.src);n&&(this.custom_logo.texture=n),this.custom_logo.filters=[new tn({strength:e.blur,quality:15})];const i=lr.measureText(this.custom_logo_x.text,this.custom_logo_x.style);this.custom_logo_x.x=(t.x+t.w+e.x)/2-i.width/2,this.custom_logo_x.y=(e.y+e.h)/2-i.height/4,this.custom_logo_x.alpha=e.alpha}async updateTitleBadge(e){this.title_badge_group.removeChildren();const t=await this.textures.get(bp(e.accent));t&&(this.boosty_logo.texture=t);function n(f,h,d,p){const v=new Kn().rect(f,h,d,p).fill(e.rect.color),m=new Kn().rect(f-e.rect.border_width,h-e.rect.border_width,d+e.rect.border_width*2,e.rect.border_width).rect(f-e.rect.border_width,h+p,d+e.rect.border_width*2,e.rect.border_width).rect(f-e.rect.border_width,h-e.rect.border_width,e.rect.border_width,p+e.rect.border_width*2).rect(f+d,h-e.rect.border_width,e.rect.border_width,p+e.rect.border_width*2).fill(e.accent);function g(T,E,O=1){return new Kn().moveTo(T,E).lineTo(T+30*O,E-30).lineTo(T+38*O,E-22).lineTo(T+16*O,E).lineTo(T+38*O,E+22).lineTo(T+30*O,E+30).lineTo(T,E).fill(e.accent)}const _=new et,b=73,w=23,S=25;return _.addChild(v,m,g(f-b,h+w),g(f-(b+S),h+w),g(f+d+b,h+p-w,-1),g(f+d+(b+S),h+p-w,-1)),_.filters=[new tn({strength:.4,quality:5})],_}const i=(f,h,d,p,v,m)=>{const g=f.split(`
`),_=new et,b={fontFamily:e.font.face,fontSize:p,fill:e.font.color,fontWeight:e.font.weight,lineHeight:v};let w=0;for(let S=0;S<g.length;S++){const T=g[S],E=new et,O=[];let P=0;for(let W of T.split(" ")){let D=!1;if(W.toLocaleLowerCase()==="boosty"){this.boosty_logo.width=v*3.5,this.boosty_logo.height=v+5,this.boosty_logo.y=-1,O.push({width:this.boosty_logo.width,height:this.boosty_logo.height}),P+=this.boosty_logo.width+m,E.addChild(this.boosty_logo);continue}W.startsWith("%")&&(D=!0,W=W.slice(1));const j=new sy({text:W,resolution:2,style:{...b,fill:D?e.accent:e.font.color}}),I=lr.measureText(W,j.style);P+=I.width+m,O.push(I),E.addChild(j)}P-=m,E.y=d+Math.floor((S-(g.length-1)/2)*v-O[0].height/2),w=Math.max(w,P);let V=h-P/2;for(let W=0;W<O.length;W++){const D=E.getChildAt(W),j=O[W];D.x=V,V+=j.width+m}_.addChild(E)}return{text:_,max_width:w,height:g.length*v}},{text:s,max_width:a,height:o}=i(e.text,e.x,e.y,e.font.size,e.font.line_height,e.font.space_width);let l=e.rect.w,u=e.rect.h;a>l-e.rect.padding_x*2&&(l=a+e.rect.padding_x*2),o>u-e.rect.padding_y*2&&(u=o+e.rect.padding_y*2);const c=n(e.x-l/2,e.y-u/2,l,u);if(this.title_badge_group.addChild(c,s),e.footnote.enabled){const{text:f}=i(e.footnote.text,e.x,e.y+u/2+e.footnote.margin,e.footnote.size,e.footnote.size,e.footnote.space_width);this.title_badge_group.addChild(f)}}}function Cz(r,e){He(e,!1);const t=()=>Ie(ao,"$filter",s),n=()=>Ie(Ei,"$background",s),i=()=>Ie(Hs,"$logo",s),[s,a]=Mt();function o(l){Ei.subscribe(u=>{l.updateBackground(u,t())}),ao.subscribe(u=>{l.updateBackground(n(),u)}),Hs.subscribe(u=>{l.updateLogo(u)}),au.subscribe(u=>{l.updateCustomLogo(u,i())}),oo.subscribe(u=>{l.updateTitleBadge(u)})}Ar(),Lm(r,{get background(){return Ei},subscriptions:o,get datastate(){return Gm},get appstate(){return Rs},get drawer(){return Az},back_buffer:!0,preload_font:"U.S. 101"}),Ve(),a()}const Ry=(r,e=yr)=>{var t=Ke(),n=be(t);{var i=a=>{E4(a,{})},s=a=>{var o=Ke(),l=be(o);{var u=f=>{A4(f,{})},c=f=>{var h=Ke(),d=be(h);{var p=v=>{C4(v,{})};Ze(d,v=>{e()==="post"&&v(p)},!0)}le(f,h)};Ze(l,f=>{e()==="twitch"?f(u):f(c,!1)},!0)}le(a,o)};Ze(n,a=>{e()==="youtube"?a(i):a(s,!1)})}le(r,t)};var Pz=pe("<div><!> </div>"),Rz=pe("<div></div>"),kz=pe('<div class="container svelte-124sfg"><button><!> </button> <!></div>');function Mz(r,e){He(e,!0);const t=()=>Ie(c,"$trigger",o),n=()=>Ie(d,"$selectedLabel",o),i=()=>Ie(p,"$open",o),s=()=>Ie(f,"$menu",o),a=()=>Ie(h,"$option",o),[o,l]=Mt();let u=ge(e,"selected",15);const{elements:{trigger:c,menu:f,option:h},states:{selectedLabel:d,open:p},helpers:{isSelected:v}}=UR({forceVisible:!0,positioning:{placement:"bottom",fitViewport:!0,sameWidth:!0},defaultSelected:{value:u(),label:u()},onSelectedChange:({curr:E,next:O})=>(u(O.value),O)});function m(E){switch(E){case"youtube":return"Youtube";case"twitch":return"Twitch";case"post":return"Ð¢ÐµÐ»ÐµÐ³ÑÐ°Ð¼";default:return E}}var g=kz(),_=ye(g);Nt(_,()=>({class:"",...t(),"aria-label":"Ð¨Ð°Ð±Ð»Ð¾Ð½Ñ"}),void 0,void 0,void 0,"svelte-124sfg");var b=ye(_);Ry(b,n);var w=ee(b,1,!0);ur(_,E=>c?.(E));var S=ee(_,2);{var T=E=>{var O=Rz();Nt(O,()=>({class:"options",...s()}),void 0,void 0,void 0,"svelte-124sfg"),Is(O,21,()=>e.options,Os,(P,V)=>{var W=Pz();Nt(W,I=>({class:"option",...I}),[()=>a()({value:z(V),label:z(V)})],void 0,void 0,"svelte-124sfg");var D=ye(W);Ry(D,()=>z(V));var j=ee(D);ur(W,I=>h?.(I)),qe(I=>kt(j,` ${I??""}`),[()=>m(z(V))]),le(P,W)}),ur(O,P=>f?.(P)),_l(3,O,()=>bg,()=>({duration:150})),le(E,O)};Ze(S,E=>{i()&&E(T)})}qe(E=>kt(w,E),[()=>m(n())||"ÐÑÐ±ÐµÑÐ¸ÑÐµ ÑÐ°Ð±Ð»Ð¾Ð½..."]),le(r,g),Ve(),l()}var Oz=pe('<div class="backdrop svelte-1bxxaoh"><div class="modal svelte-1bxxaoh" role="dialog" aria-modal="true"><div class="header svelte-1bxxaoh"><div class="title svelte-1bxxaoh"> </div> <button class="close svelte-1bxxaoh" type="button" aria-label="ÐÐ°ÐºÑÑÑÑ">X</button></div> <div class="body svelte-1bxxaoh"><!></div> <div class="actions svelte-1bxxaoh"><!></div></div></div>');function Vu(r,e){He(e,!0);let t=ge(e,"title",3,""),n=ge(e,"close_on_backdrop",3,!0);const i=mo();function s(){i("close")}function a(c){n()&&c.target===c.currentTarget&&s()}var o=Ke(),l=be(o);{var u=c=>{var f=Oz(),h=ye(f),d=ye(h),p=ye(d),v=ye(p),m=ee(p,2),g=ee(d,2),_=ye(g);fr(_,e,"default",{});var b=ee(g,2),w=ye(b);fr(w,e,"actions",{}),qe(()=>{Qe(h,"aria-label",t()||"dialog"),kt(v,t())}),We("click",m,s),We("click",f,a),le(c,f)};Ze(l,c=>{e.open&&c(u)})}le(r,o),Ve()}const Jp=["youtube","twitch","post"],zm={youtube:"wlgcover:video-templates",twitch:"wlgcover:stream-templates",post:"wlgcover:post-templates"},Iz="wlgcover",Bz=1,Tn="templates",vc="by_kind",Fd="wlgcover:templates-migrated-v1";let Wu=null;function Fz(){return typeof indexedDB<"u"}function Tf(){return Wu||(Wu=new Promise(r=>{if(!Fz()){r(null);return}const e=indexedDB.open(Iz,Bz);e.onupgradeneeded=()=>{const t=e.result;if(!t.objectStoreNames.contains(Tn)){t.createObjectStore(Tn,{keyPath:["kind","name"]}).createIndex(vc,"kind",{unique:!1});return}const n=e.transaction?.objectStore(Tn);n&&!n.indexNames.contains(vc)&&n.createIndex(vc,"kind",{unique:!1})},e.onsuccess=()=>r(e.result),e.onerror=()=>{console.warn("[template-storage] IndexedDB open failed",e.error),r(null)},e.onblocked=()=>{console.warn("[template-storage] IndexedDB open blocked")}}),Wu)}function Dz(r){return new Promise((e,t)=>{r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})}function Ef(r){return new Promise((e,t)=>{r.oncomplete=()=>e(),r.onabort=()=>t(r.error),r.onerror=()=>t(r.error)})}function lo(r){const e=localStorage.getItem(zm[r]);if(!e)return{};try{const t=JSON.parse(e);return!t||typeof t!="object"?{}:t}catch{return{}}}function ky(r,e,t){const n=lo(r);n[e]=t,localStorage.setItem(zm[r],JSON.stringify(n))}function My(r,e){const t=lo(r);t[e]&&(delete t[e],localStorage.setItem(zm[r],JSON.stringify(t)))}async function qu(r){const e=await Tf();if(!e)return lo(r);try{const t=e.transaction(Tn,"readonly"),i=t.objectStore(Tn).index(vc),s=await Dz(i.getAll(IDBKeyRange.only(r)));await Ef(t);const a={};for(const o of s)a[o.name]=o.snapshot;return a}catch(t){return console.warn("[template-storage] IndexedDB read failed, fallback to localStorage",t),lo(r)}}async function Lz(r,e,t){const n=await Tf();if(!n){ky(r,e,t);return}try{const i=n.transaction(Tn,"readwrite");i.objectStore(Tn).put({kind:r,name:e,snapshot:t,updated_at:Date.now()}),await Ef(i)}catch(i){console.warn("[template-storage] IndexedDB write failed, fallback to localStorage",i),ky(r,e,t)}}async function Uz(r,e){const t=await Tf();if(!t){My(r,e);return}try{const n=t.transaction(Tn,"readwrite");n.objectStore(Tn).delete([r,e]),await Ef(n)}catch(n){console.warn("[template-storage] IndexedDB delete failed, fallback to localStorage",n),My(r,e)}}async function Dd(){const r=await Tf();if(!r||localStorage.getItem(Fd)==="1")return;if(!Jp.some(t=>Object.keys(lo(t)).length>0)){localStorage.setItem(Fd,"1");return}try{const t=r.transaction(Tn,"readwrite"),n=t.objectStore(Tn);for(const i of Jp){const s=lo(i);for(const[a,o]of Object.entries(s))n.put({kind:i,name:a,snapshot:o,updated_at:Date.now()})}await Ef(t),localStorage.setItem(Fd,"1")}catch(t){console.warn("[template-storage] IndexedDB migration failed",t)}}var Nz=pe("<div><div>start</div> <!> <div>new</div> <!></div>");function Gz(r){let e=Ct(20),t=Ct("second");var n=Nz(),i=ee(ye(n),2);ba(i,{type:"number",label_width:"20px",get value(){return z(e)},set value(a){ve(e,a,!0)},children:(a,o)=>{var l=er("X");le(a,l)},$$slots:{default:!0}});var s=ee(i,4);ba(s,{type:"text",label_width:"20px",get value(){return z(t)},set value(a){ve(t,a,!0)},children:(a,o)=>{v1(a,{})},$$slots:{default:!0}}),le(r,n)}var zz=pe('<div class="template-actions svelte-1y8xt5x"><button class="action svelte-1y8xt5x" title="Ð¡Ð¾ÑÑÐ°Ð½Ð¸ÑÑ" aria-label="Ð¡Ð¾ÑÑÐ°Ð½Ð¸ÑÑ"><!></button> <button class="action svelte-1y8xt5x" title="ÐÐ°Ð³ÑÑÐ·Ð¸ÑÑ" aria-label="ÐÐ°Ð³ÑÑÐ·Ð¸ÑÑ"><!></button></div>'),jz=pe('<div class="modal-error svelte-1y8xt5x"> </div>'),Hz=pe('<div class="modal-field svelte-1y8xt5x"><input type="text" placeholder="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑÐ°Ð±Ð»Ð¾Ð½Ð°" class="svelte-1y8xt5x"/> <!></div> <div class="modal-hint save-hint svelte-1y8xt5x"><!></div>',1),Vz=pe('<div slot="actions"><button class="modal-action secondary svelte-1y8xt5x" type="button">ÐÑÐ¼ÐµÐ½Ð°</button> <button class="modal-action svelte-1y8xt5x" type="button"> </button></div>'),Wz=pe('<div class="template-row svelte-1y8xt5x"><button type="button"><span class="template-name svelte-1y8xt5x"> </span> <span class="template-categories svelte-1y8xt5x"> </span></button> <button class="template-delete svelte-1y8xt5x" type="button" title="Ð£Ð´Ð°Ð»Ð¸ÑÑ" aria-label="Ð£Ð´Ð°Ð»Ð¸ÑÑ"><!></button></div>'),qz=pe('<div class="template-list svelte-1y8xt5x"></div>'),Xz=pe('<div slot="actions"><button class="modal-action secondary svelte-1y8xt5x" type="button">ÐÑÐ¼ÐµÐ½Ð°</button> <button class="modal-action svelte-1y8xt5x" type="button">ÐÐ°Ð³ÑÑÐ·Ð¸ÑÑ</button></div>'),Yz=pe('<div class="modal-hint svelte-1y8xt5x"> </div>'),$z=pe('<div slot="actions"><button class="modal-action svelte-1y8xt5x" type="button">ÐÐº</button></div>'),Kz=pe('<div class="modal-hint svelte-1y8xt5x"> </div>'),Zz=pe('<div slot="actions"><button class="modal-action secondary svelte-1y8xt5x" type="button">ÐÑÐ¼ÐµÐ½Ð°</button> <button class="modal-action danger svelte-1y8xt5x" type="button">Ð£Ð´Ð°Ð»Ð¸ÑÑ</button></div>'),Jz=pe('<div class="container svelte-1y8xt5x"><main class="svelte-1y8xt5x"><div class="selector svelte-1y8xt5x"><!> <!></div> <!></main> <aside class="svelte-1y8xt5x"><!></aside></div> <!> <!> <!> <!>',1);function Qz(r,e){He(e,!0);const t=()=>Ie(u,"$appstate",s),n=()=>Ie(l,"$background",s),i=()=>Ie(c,"$datastate",s),[s,a]=Mt();let o=Ct(Ir(localStorage.getItem("template")??"youtube")),l,u,c,f="",h=Ct(null),d=Ct(""),p=Ct(""),v=Ct(""),m=Ct(""),g=Ct(""),_=Ct(Ir({})),b=Ct(Ir([])),w=Ct(null),S=Ot(()=>z(p).trim()),T=Ot(()=>!!(z(S)&&z(_)[z(S)]));Bx(()=>{Dd()}),En(()=>{z(h)==="save"&&z(v)&&z(S)&&ve(v,"")}),window.addEventListener("texture_loaded",se=>{se.detail===f&&(ce(u,R(t).background_loading=!1,R(t)),f="")}),En(()=>{switch(z(o)){case"youtube":l=Vi,c=qg,u=$a;break;case"twitch":l=Wi,c=Um,u=so;break;case"post":l=Ei,c=Gm,u=Rs}localStorage.setItem("template",z(o)),Yn()});function E(se){se?.target?.nodeName==="INPUT"||se?.target?.nodeName==="TEXTAREA"||P(se.clipboardData?.items)&&se.preventDefault()}function O(se){P(se.dataTransfer?.items)}function P(se){if(!se)return!1;for(const Te of Object.values(se)){if(Te.kind!=="file")continue;ce(u,R(t).background_loading=!0,R(t));const Be=Te.getAsFile(),Ee=new FileReader;Ee.onload=Ce=>{const Z=Ce.target?.result,ne=Z.split(",")[0];if(f=Z,ne.includes("data:image")){if(ce(u,R(t).background=ne,R(t)),n().paste_mode==="fit"){gi(l,{...n(),src:Z,x:0,y:0,w:i().width,h:i().height});const de=new Image;de.src=Z,de.onload=()=>{gi(u,{...t(),background_width:de.width,background_height:de.height,background_aspect:de.width/de.height})}}else if(n().paste_mode==="aspect"){const de=new Image;de.src=Z,de.onload=()=>{const we=wg(i().width,i().height,de.width,de.height);gi(l,{...n(),...we,src:Z}),gi(u,{...t(),background_width:de.width,background_height:de.height,background_aspect:de.width/de.height})}}return!0}},Ee.onerror=()=>{ce(u,R(t).background_loading=!1,R(t)),ve(d,"ÐÑÐ¸Ð±ÐºÐ° ÑÑÐµÐ½Ð¸Ñ ÑÐ°Ð¹Ð»Ð°."),ve(h,"info")},Ee.onabort=Ee.onerror,Be&&Ee.readAsDataURL(Be)}return!1}function V(se){return Jp.includes(se)}function W(se){switch(se){case"youtube":return fB();case"twitch":return pG();case"post":return mz()}}function D(se,Te){switch(se){case"youtube":hB(Te);break;case"twitch":gG(Te);break;case"post":vz(Te);break}}function j(se,Te){return Object.keys(Te).sort((Be,Ee)=>Be.localeCompare(Ee,"ru")).map(Be=>{const Ee=Te[Be];if(se==="post")return{name:Be,categories_label:"Ð±ÐµÐ· ÐºÐ°ÑÐµÐ³Ð¾ÑÐ¸Ð¹"};const Ce=(Ee?.categories?.names??[]).filter(Boolean);let Z="";return Ce.length>0?Z=Ce.join(", "):Ee?.categories?.src?.length?Z=`ÐºÐ°ÑÐµÐ³Ð¾ÑÐ¸Ð¹: ${Ee.categories.src.length}`:Z="Ð±ÐµÐ· ÐºÐ°ÑÐµÐ³Ð¾ÑÐ¸Ð¹",{name:Be,categories_label:Z}})}async function I(){V(z(o))&&(ve(w,z(o),!0),await Dd(),ve(_,await qu(z(w)),!0),ve(p,""),ve(v,""),ve(h,"save"))}async function q(){if(V(z(o))){if(ve(w,z(o),!0),await Dd(),ve(_,await qu(z(w)),!0),ve(b,j(z(w),z(_)),!0),z(b).length===0){ve(d,"ÐÐµÑ ÑÐ¾ÑÑÐ°Ð½ÐµÐ½Ð½ÑÑ ÑÐ°Ð±Ð»Ð¾Ð½Ð¾Ð²."),ve(h,"info");return}ve(m,z(b)[0].name,!0),ve(h,"load")}}function $(se){ve(g,se,!0),ve(h,"delete")}function K(){ve(h,null),ve(w,null)}async function ae(){if(!z(S)||!z(w)){ve(v,"ÐÐ²ÐµÐ´Ð¸ÑÐµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑÐ°Ð±Ð»Ð¾Ð½Ð°.");return}await Lz(z(w),z(S),W(z(w))),ve(h,null),ve(w,null)}function k(){if(!z(m)||!z(w))return;const se=z(_)[z(m)];if(!se){ve(d,"Ð¨Ð°Ð±Ð»Ð¾Ð½ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½."),ve(h,"info");return}D(z(w),se),ve(h,null),ve(w,null)}async function H(){if(!z(g)||!z(w))return;if(!(await qu(z(w)))[z(g)]){ve(d,"Ð¨Ð°Ð±Ð»Ð¾Ð½ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½."),ve(h,"info");return}if(await Uz(z(w),z(g)),ve(_,await qu(z(w)),!0),ve(b,j(z(w),z(_)),!0),z(b).length===0){ve(h,null),ve(d,"ÐÐµÑ ÑÐ¾ÑÑÐ°Ð½ÐµÐ½Ð½ÑÑ ÑÐ°Ð±Ð»Ð¾Ð½Ð¾Ð²."),ve(h,"info");return}z(m)===z(g)&&ve(m,z(b)[0].name,!0),ve(h,"load")}var ie=Jz();We("paste",Lr,E),We("dragover",Lr,xn(function(se){Yd.call(this,e,se)})),We("drop",Lr,xn(O));var X=be(ie),N=ye(X),M=ye(N),F=ye(M);Mz(F,{options:["youtube","twitch","post"],get selected(){return z(o)},set selected(se){ve(o,se,!0)}});var A=ee(F,2);{var L=se=>{var Te=zz(),Be=ye(Te);Be.__click=I;var Ee=ye(Be);P4(Ee,{size:"1rem"});var Ce=ee(Be,2);Ce.__click=q;var Z=ye(Ce);g1(Z,{size:"1rem"}),le(se,Te)};Ze(A,se=>{V(z(o))&&se(L)})}var Y=ee(M,2);{var te=se=>{var Te=Ke(),Be=be(Te);kr(Be,()=>sG,(Ee,Ce)=>{Ce(Ee,{})}),le(se,Te)},fe=se=>{var Te=Ke(),Be=be(Te);{var Ee=Z=>{var ne=Ke(),de=be(ne);kr(de,()=>FG,(we,xe)=>{xe(we,{})}),le(Z,ne)},Ce=Z=>{var ne=Ke(),de=be(ne);{var we=ke=>{var C=Ke(),y=be(C);kr(y,()=>Cz,(x,U)=>{U(x,{})}),le(ke,C)},xe=ke=>{var C=Ke(),y=be(C);{var x=J=>{Gz(J)},U=J=>{var ue=er("empty");le(J,ue)};Ze(y,J=>{z(o)==="test"?J(x):J(U,!1)},!0)}le(ke,C)};Ze(de,ke=>{z(o)==="post"?ke(we):ke(xe,!1)},!0)}le(Z,ne)};Ze(Be,Z=>{z(o)==="twitch"?Z(Ee):Z(Ce,!1)},!0)}le(se,Te)};Ze(Y,se=>{z(o)==="youtube"?se(te):se(fe,!1)})}var B=ee(N,2),G=ye(B);{var Q=se=>{var Te=Ke(),Be=be(Te);kr(Be,()=>pB,(Ee,Ce)=>{Ce(Ee,{})}),le(se,Te)},oe=se=>{var Te=Ke(),Be=be(Te);{var Ee=Z=>{var ne=Ke(),de=be(ne);kr(de,()=>IG,(we,xe)=>{xe(we,{})}),le(Z,ne)},Ce=Z=>{var ne=Ke(),de=be(ne);{var we=ke=>{var C=Ke(),y=be(C);kr(y,()=>Ez,(x,U)=>{U(x,{})}),le(ke,C)},xe=ke=>{var C=er("empty");le(ke,C)};Ze(de,ke=>{z(o)==="post"?ke(we):ke(xe,!1)},!0)}le(Z,ne)};Ze(Be,Z=>{z(o)==="twitch"?Z(Ee):Z(Ce,!1)},!0)}le(se,Te)};Ze(G,se=>{z(o)==="youtube"?se(Q):se(oe,!1)})}var _e=ee(X,2);{let se=Ot(()=>z(h)==="save");Vu(_e,{get open(){return z(se)},title:"Ð¡Ð¾ÑÑÐ°Ð½Ð¸ÑÑ ÑÐ°Ð±Ð»Ð¾Ð½",$$events:{close:K},children:(Te,Be)=>{var Ee=Hz(),Ce=be(Ee),Z=ye(Ce),ne=ee(Z,2);{var de=y=>{var x=jz(),U=ye(x);qe(()=>kt(U,z(v))),le(y,x)};Ze(ne,y=>{z(v)&&y(de)})}var we=ee(Ce,2),xe=ye(we);{var ke=y=>{var x=er("Ð¢Ð°ÐºÐ¾Ð¹ ÑÐ°Ð±Ð»Ð¾Ð½ ÑÐ¶Ðµ ÐµÑÑÑ. ÐÐ°Ð¶Ð¼Ð¸ÑÐµ Â«ÐÐµÑÐµÐ·Ð°Ð¿Ð¸ÑÐ°ÑÑÂ», ÑÑÐ¾Ð±Ñ Ð·Ð°Ð¼ÐµÐ½Ð¸ÑÑ ÐµÐ³Ð¾.");le(y,x)},C=y=>{var x=er("ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±ÑÑÑ ÑÐ½Ð¸ÐºÐ°Ð»ÑÐ½ÑÐ¼.");le(y,x)};Ze(xe,y=>{z(T)?y(ke):y(C,!1)})}go(Z,()=>z(p),y=>ve(p,y)),le(Te,Ee)},$$slots:{default:!0,actions:(Te,Be)=>{var Ee=Vz(),Ce=ye(Ee);Ce.__click=K;var Z=ee(Ce,2);Z.__click=ae;var ne=ye(Z);qe(()=>kt(ne,z(T)?"ÐÐµÑÐµÐ·Ð°Ð¿Ð¸ÑÐ°ÑÑ":"Ð¡Ð¾ÑÑÐ°Ð½Ð¸ÑÑ")),le(Te,Ee)}}})}var me=ee(_e,2);{let se=Ot(()=>z(h)==="load");Vu(me,{get open(){return z(se)},title:"ÐÐ°Ð³ÑÑÐ·Ð¸ÑÑ ÑÐ°Ð±Ð»Ð¾Ð½",$$events:{close:K},children:(Te,Be)=>{var Ee=qz();Is(Ee,21,()=>z(b),Os,(Ce,Z)=>{var ne=Wz(),de=ye(ne);let we;de.__click=()=>ve(m,z(Z).name,!0);var xe=ye(de),ke=ye(xe),C=ee(xe,2),y=ye(C),x=ee(de,2);x.__click=()=>$(z(Z).name);var U=ye(x);R4(U,{size:"0.9rem"}),qe(()=>{we=ss(de,1,"template-item svelte-1y8xt5x",null,we,{active:z(m)===z(Z).name}),kt(ke,z(Z).name),kt(y,`(${z(Z).categories_label??""})`)}),le(Ce,ne)}),le(Te,Ee)},$$slots:{default:!0,actions:(Te,Be)=>{var Ee=Xz(),Ce=ye(Ee);Ce.__click=K;var Z=ee(Ce,2);Z.__click=k,le(Te,Ee)}}})}var Pe=ee(me,2);{let se=Ot(()=>z(h)==="info");Vu(Pe,{get open(){return z(se)},title:"Ð¡Ð¾Ð¾Ð±ÑÐµÐ½Ð¸Ðµ",$$events:{close:K},children:(Te,Be)=>{var Ee=Yz(),Ce=ye(Ee);qe(()=>kt(Ce,z(d))),le(Te,Ee)},$$slots:{default:!0,actions:(Te,Be)=>{var Ee=$z(),Ce=ye(Ee);Ce.__click=K,le(Te,Ee)}}})}var Ue=ee(Pe,2);{let se=Ot(()=>z(h)==="delete");Vu(Ue,{get open(){return z(se)},title:"Ð£Ð´Ð°Ð»Ð¸ÑÑ ÑÐ°Ð±Ð»Ð¾Ð½",$$events:{close:K},children:(Te,Be)=>{var Ee=Kz(),Ce=ye(Ee);qe(()=>kt(Ce,`Ð£Ð´Ð°Ð»Ð¸ÑÑ ÑÐ°Ð±Ð»Ð¾Ð½ Â«${z(g)??""}Â»? Ð­ÑÐ¾ Ð´ÐµÐ¹ÑÑÐ²Ð¸Ðµ Ð½ÐµÐ»ÑÐ·Ñ Ð¾ÑÐ¼ÐµÐ½Ð¸ÑÑ.`)),le(Te,Ee)},$$slots:{default:!0,actions:(Te,Be)=>{var Ee=Zz(),Ce=ye(Ee);Ce.__click=K;var Z=ee(Ce,2);Z.__click=H,le(Te,Ee)}}})}le(r,ie),Ve(),a()}is(["click"]);var ej=pe('<div id="build" class="svelte-1n46o8q"> </div> <!>',1);function tj(r,e){He(e,!1);let t="2026-02-14T05:44:39.282Z";Ar();var n=ej(),i=be(n),s=ye(i),a=ee(i,2);Qz(a,{}),qe(()=>kt(s,`build ${t}`)),le(r,n),Ve()}SA(tj,{target:document.getElementById("app")});ze.add(E6);ze.mixin(et,A6);ze.add(sS);ze.add(aS);ze.add(FS);ze.mixin(et,rU);ze.add(BS);ze.add(_E);ze.add(dm);ze.add(xE);ze.add(SE);ze.add(TE);ze.add(BE);ze.add(IE);ze.add(RE);ze.add(OE);ze.add(kE);ze.add(PE);ze.add(CE);ze.add(GS);ze.add(NS);const rj=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),nj=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));</script>
    <style rel="stylesheet" crossorigin>:root{--bg-light: #20202c;--bg-dark: #14151e;--bg-dark-extra: #101018;--bg-medium: #1a1a24;--bg-light-extra: #282a39;--text: #fff;--text-2: rgba(255, 255, 255, .5);--border-light: #292b3b;--violet: #9047fe;--violet-dark: #4933c2;--violet-light: #ae81ff;--red-dark: #ad1010;--red: #f85212;--green: #6dd919;--green-dark: #105a18;--blue: #559eff;--blue-light: #2392cc;--blue-light-extra: #42bdf9;--yellow: #fc0;--yellow-dark: #e6db74;--grey-dark: #75715e;--pink: #f92672;--green-light: #a9f513ee;--orange: #fd971f;--grey: #cfcfc2;--none: #0000;--font-size-base: 16px;--f1: "Geist";--f2: "Geist";--accent: var(--violet);font-family:var(--f1),var(--f2),sans-serif}body{margin:0;padding:0;height:100%}*{scrollbar-width:thin;scrollbar-color:var(--bg-light-extra) var(--bg-light)}*::-webkit-scrollbar{height:12px;width:12px}*::-webkit-scrollbar-track{background:var(--bg-light)}*::-webkit-scrollbar-thumb{background-color:var(--bg-light-extra);border-radius:5px;border:3px solid var(--bg-light)}textarea,input[type=text],input[type=url],input[type=number]{border:none;color:var(--text);font-family:var(--f2);font-size:1rem;padding:5px 10px;background-color:transparent;border-bottom:2px solid var(--bg-light)}input[type=number]{width:50px;padding-left:0;padding-right:0;text-align:center}textarea,input[type=text],input[type=url]{width:100%;text-align:left}textarea{background-color:var(--bg-light)}textarea:focus{outline:2px solid var(--violet)}input[type=text]:focus,input[type=url]:focus,input[type=number]:focus{outline:none;border-color:var(--violet);background:"transparent"!important}input:-webkit-autofill,input:-webkit-autofill:focus{transition:background-color 0s 600000s,color 0s 600000s!important}textarea:hover:not(:focus){outline:2px solid var(--bg-light-extra)}input[type=text]:hover:not(:focus),input[type=url]:hover:not(:focus),input[type=number]:hover:not(:focus){outline:none;border-color:var(--bg-light-extra)}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}input[type=text].invalid{border-color:var(--red)}input[type=text].valid{border-color:var(--green-light)}input[type=checkbox]{-webkit-appearance:none;appearance:none;width:14px;height:14px;border:none;border-radius:4px;background-color:var(--bg-light);cursor:pointer;position:relative;margin:0;padding:0}input[type=checkbox]:checked{background-color:var(--violet)}input[type=checkbox]:checked:after{content:"â";font-size:12px;color:var(--text);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}canvas{background-color:var(--bg-dark)}[data-toggle-root]{display:flex;align-items:center;justify-content:center;min-width:1rem;width:fit-content;padding:.2rem .3rem;border-radius:.3rem;color:var(--text);cursor:pointer;font-family:var(--f1);font-size:1rem}[data-toggle-root]:hover{background-color:var(--bg-light-extra)}[data-toggle-root][data-state=on]{background-color:var(--bg-dark-extra);border:1px solid var(--bg-dark-extra)}[data-toggle-root][data-state=off]{background-color:var(--bg-light);border:1px solid var(--bg-light)}.root.svelte-1009h7f{background-color:var(--bg-medium);margin-top:5px;margin-bottom:5px;padding:5px}.header.svelte-1009h7f{display:flex;align-items:center;justify-content:space-between;padding:5px 10px;font-weight:600}.label.svelte-1009h7f{font-size:1.2rem;line-height:1.5rem;cursor:pointer}button.svelte-1009h7f{position:relative;height:1.5rem;width:1.5rem;place-items:center;border-radius:10px;border:0px;background-color:var(--bg-light-extra);color:var(--text);font-size:.875rem;line-height:1.25rem;cursor:pointer}button.svelte-1009h7f:hover{opacity:.75}.item.svelte-1009h7f{border-top:1px solid var(--bg-light-extra);padding:10px;border-radius:.25rem;background-color:rgb(var(--color-white) / 1);box-shadow:0 10px 15px -3px rgb(var(--color-black) / .1),0 4px 6px -4px rgb(var(--color-black) / .1)}.row.svelte-1owbhwc{display:flex;flex-direction:row;align-items:center;gap:.6rem}.container.svelte-aw96os{display:flex;align-items:center;justify-content:center;gap:.5rem}.switch.svelte-aw96os{display:inline-block}.switch.svelte-aw96os input:where(.svelte-aw96os){display:none}.switch.svelte-aw96os label:where(.svelte-aw96os){display:block;width:30px;height:14px;padding:2px;border-radius:15px;cursor:pointer;transition:.3s;background:var(--bg-light-extra)}.switch.svelte-aw96os label:where(.svelte-aw96os):after{content:"";display:inherit;width:14px;height:14px;border-radius:12px;background:var(--bg-dark);transition:.3s}.switch.svelte-aw96os input:where(.svelte-aw96os):checked~label:where(.svelte-aw96os):after{translate:15px 0;background:var(--bg-dark)}.switch.svelte-aw96os input:where(.svelte-aw96os):checked~label:where(.svelte-aw96os){background:var(--violet)}.switch.svelte-aw96os input:where(.svelte-aw96os):disabled~label:where(.svelte-aw96os){opacity:.5;cursor:not-allowed}.label.svelte-aw96os,label.svelte-1dqsdwl{font-size:smaller;color:var(--text-2)}.slider.svelte-84foe7{---track-width: var(--track-width, unset);---track-height: var(--track-height, 6px);---track-background: var(--track-background, #949494);---track-border: var(--track-border, none);---thumb-size: var(--thumb-size, 16px);---thumb-background: var(--thumb-background, #2d2d2d);---thumb-border: var(--thumb-border, none);---position: var(--position, 0px);---margin-inline-thumb-bigger: max(var(---thumb-size) - var(---track-height), 0px);---margin-inline-thumb-smaller: max(var(---track-height) - var(---thumb-size), 0px);position:relative;margin:auto;user-select:none;-webkit-user-select:none;background-color:transparent}.slider.svelte-84foe7:before{background-color:transparent}[aria-orientation=horizontal].svelte-84foe7{width:var(---track-width);max-width:calc(100% - 2 * var(---margin-inline-thumb-bigger));height:calc(max(var(---track-height),var(---thumb-size)) + 4px);height:max(var(---track-height),var(---thumb-size));margin-inline:var(---margin-inline-thumb-bigger);margin-block:var(--margin-block, 8px)}[aria-orientation=vertical].svelte-84foe7{width:calc(max(var(---track-height),var(---thumb-size)) + 4px);width:max(var(---track-height),var(---thumb-size));height:var(---track-width);max-height:calc(100% - 2 * var(---margin-inline-thumb-bigger));margin-block:var(---margin-inline-thumb-bigger);margin-inline:var(--margin-block, 8px)}.track.svelte-84foe7{position:absolute;pointer-events:none;background:var(---track-background);border:var(---track-border);border-radius:calc(var(---track-height) / 2);box-sizing:border-box}[aria-orientation=horizontal].svelte-84foe7 .track:where(.svelte-84foe7){height:var(---track-height);top:50%;transform:translateY(-50%);left:0;right:0}[aria-orientation=vertical].svelte-84foe7 .track:where(.svelte-84foe7){width:var(---track-height);left:50%;transform:translate(-50%);top:0;bottom:0}.thumb.svelte-84foe7{pointer-events:none;position:absolute;height:var(---thumb-size);width:var(---thumb-size);border-radius:calc(var(---thumb-size) / 2);background:var(---thumb-background);border:var(---thumb-border);box-sizing:border-box;transform:translate(-50%,-50%);--margin-left: ( 2 * var(---track-height) - var(---thumb-size) - var(---margin-inline-thumb-smaller) ) / 2;--left: calc(var(---position) * (100% - 2 * var(--margin-left)) + var(--margin-left))}[aria-orientation=horizontal].svelte-84foe7:not(.reverse) .thumb:where(.svelte-84foe7){top:50%;left:var(--left)}[aria-orientation=vertical].svelte-84foe7:not(.reverse) .thumb:where(.svelte-84foe7){left:50%;bottom:calc(var(--left) - var(---thumb-size))}[aria-orientation=horizontal].reverse.svelte-84foe7 .thumb:where(.svelte-84foe7){top:50%;right:calc(var(--left) - var(---thumb-size))}[aria-orientation=vertical].reverse.svelte-84foe7 .thumb:where(.svelte-84foe7){left:50%;top:calc(var(--left))}.slider.svelte-84foe7:focus-visible{outline:none}.slider.svelte-84foe7:focus-visible .track:where(.svelte-84foe7){outline:2px solid var(--focus-color, red);outline-offset:2px}.picker.svelte-1re3ldl{position:relative;display:inline-block;width:var(--picker-width, 200px);height:var(--picker-height, 200px);background:linear-gradient(#fff0,#000),linear-gradient(.25turn,#fff,#0000),var(--picker-color-bg);border-radius:var(--picker-radius, 8px);outline:none;user-select:none}.s.svelte-1re3ldl,.v.svelte-1re3ldl{position:absolute;--track-background: none;--track-border: none;--thumb-background: none;--thumb-border: none;--thumb-size: 2px;--margin-block: 0;--track-height: var(--picker-indicator-size, 10px);user-select:none;-webkit-user-select:none}.s.svelte-1re3ldl{top:calc(var(--pos-y) * (var(--picker-height, 200px) - var(--picker-indicator-size, 10px) - 4px) / 100 + 2px);left:2px;--track-width: calc(var(--picker-width, 200px) - 4px)}.v.svelte-1re3ldl{top:2px;left:calc(var(--pos-x) * (var(--picker-width, 200px) - var(--picker-indicator-size, 10px) - 4px) / 100 + 2px);--track-width: calc(var(--picker-height, 200px) - 4px)}div.svelte-r05dnq{position:absolute;left:calc(var(--pos-x) * (var(--picker-width, 200px) - var(--picker-indicator-size, 10px) - 4px) / 100 + 2px);top:calc(var(--pos-y) * (var(--picker-height, 200px) - var(--picker-indicator-size, 10px) - 4px) / 100 + 2px);width:var(--picker-indicator-size, 10px);height:var(--picker-indicator-size, 10px);background-color:#fff;box-shadow:0 0 4px #000;border-radius:50%;pointer-events:none;z-index:1;transition:box-shadow .2s}.is-dark.svelte-r05dnq{box-shadow:0 0 4px #fff}.text-input.svelte-c6e38s{margin:var(--text-input-margin, 5px 0 0)}.input-container.svelte-c6e38s{display:flex;flex:1;gap:10px}input.svelte-c6e38s,button.svelte-c6e38s,.button-like.svelte-c6e38s{flex:1;border:none;background-color:var(--cp-input-color, #eee);color:var(--cp-text-color, var(--cp-border-color));padding:0;border-radius:5px;height:30px;line-height:30px;text-align:center}input.svelte-c6e38s{width:5px;font-family:inherit}button.svelte-c6e38s,.button-like.svelte-c6e38s{position:relative;flex:1;margin:8px 0 0;height:30px;width:100%;transition:background-color .2s;cursor:pointer;font-family:inherit}.button-like.svelte-c6e38s{cursor:default}.appear.svelte-c6e38s,.disappear.svelte-c6e38s{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:100%;transition:all .5s}button.svelte-c6e38s:hover .disappear:where(.svelte-c6e38s),.appear.svelte-c6e38s{opacity:0}.disappear.svelte-c6e38s,button.svelte-c6e38s:hover .appear:where(.svelte-c6e38s){opacity:1}button.svelte-c6e38s:hover{background-color:var(--cp-button-hover-color, #ccc)}input.svelte-c6e38s:focus,button.svelte-c6e38s:focus{outline:none}input.svelte-c6e38s:focus-visible,button.svelte-c6e38s:focus-visible{outline:2px solid var(--focus-color, red);outline-offset:2px}label.svelte-rprnu7{display:inline-flex;align-items:center;gap:8px;cursor:pointer;border-radius:3px;margin:4px;height:var(--input-size, 25px);user-select:none}.container.svelte-rprnu7{position:relative;display:block;display:flex;align-items:center;justify-content:center;width:var(--input-size, 25px)}input.svelte-rprnu7{margin:0;padding:0;border:none;width:1px;height:1px;flex-shrink:0;opacity:0}.alpha.svelte-rprnu7{clip-path:circle(50%);background:var(--alpha-grid-bg)}.alpha.svelte-rprnu7,.color.svelte-rprnu7{position:absolute;width:var(--input-size, 25px);height:var(--input-size, 25px);border-radius:50%;user-select:none}input.svelte-rprnu7:focus-visible~.color:where(.svelte-rprnu7){outline:2px solid var(--focus-color, red);outline-offset:2px}div.svelte-x2zmuu{padding:8px;background-color:var(--cp-bg-color, white);margin:0 10px 10px;border:1px solid var(--cp-border-color, black);border-radius:12px;display:none;width:max-content}.is-open.svelte-x2zmuu{display:inline-block}[role=dialog].svelte-x2zmuu{position:absolute;top:calc(var(--input-size, 25px) + 12px);left:0;z-index:var(--picker-z-index, 2)}label.svelte-d1oaef{display:flex;justify-content:center;margin-bottom:4px;grid-area:nullable;user-select:none}input.svelte-d1oaef{margin:0}input.svelte-d1oaef:focus-visible{outline:none}input.svelte-d1oaef:focus-visible+span:where(.svelte-d1oaef){width:14px;height:14px;border-radius:2px;outline:2px solid var(--focus-color, red);outline-offset:2px}div.svelte-d1oaef{width:32px;aspect-ratio:2;position:relative}div.svelte-d1oaef :where(.svelte-d1oaef){position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}span.svelte-wyzo5s{position:relative;color:var(--cp-text-color, var(--cp-border-color));--alpha-grid-bg: linear-gradient(45deg, #eee 25%, #0000 25%, #0000 75%, #eee 75%) 0 0 / 10px 10px, linear-gradient(45deg, #eee 25%, #0000 25%, #0000 75%, #eee 75%) 5px 5px / 10px 10px}.h.svelte-wyzo5s,.a.svelte-wyzo5s{display:inline-flex;justify-content:center;--track-height: var(--slider-width, 10px);--track-width: var(--picker-height, 200px);--track-border: none;--thumb-size: calc(var(--slider-width, 10px) - 3px);--thumb-background: white;--thumb-border: 1px solid black;--margin-block: 0;--gradient-direction: .5turn}.horizontal.svelte-wyzo5s .h:where(.svelte-wyzo5s),.horizontal.svelte-wyzo5s .a:where(.svelte-wyzo5s){--track-width: calc(var(--picker-width, 200px) - 12px);--gradient-direction: .25turn;margin:4px 6px}.horizontal.svelte-wyzo5s .h:where(.svelte-wyzo5s){margin-top:8px}.vertical.svelte-wyzo5s .h:where(.svelte-wyzo5s),.vertical.svelte-wyzo5s .a:where(.svelte-wyzo5s){margin-left:3px}.h.svelte-wyzo5s{grid-area:hue;--gradient-hue: #ff1500fb, #ffff00 17.2%, #ffff00 18.2%, #00ff00 33.3%, #00ffff 49.5%, #00ffff 51.5%, #0000ff 67.7%, #ff00ff 83.3%, #ff0000;--track-background: linear-gradient(var(--gradient-direction), var(--gradient-hue))}.a.svelte-wyzo5s{grid-area:alpha;margin-top:2px;--track-background: linear-gradient(var(--gradient-direction), rgba(0, 0, 0, 0), var(--alphaless-color)), var(--alpha-grid-bg)}span.svelte-wyzo5s .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}div.svelte-19utth8{background-color:var(--cp-bg-color, white);margin:0 10px 15px;border:1px solid var(--cp-border-color, black);border-radius:8px;display:none;--text-input-margin: 5px 5px 6px;--picker-radius: 8px 8px 0 0;--picker-width: 260px}.is-open.svelte-19utth8{display:flex;flex-direction:column}[role=dialog].svelte-19utth8{position:absolute;top:calc(var(--input-size, 25px) + 12px);left:0;z-index:var(--picker-z-index, 2)}div.svelte-19utth8:not([role=dialog]){display:inline-flex;flex-direction:column}div.svelte-6tqydx{padding:6px;background-color:var(--cp-bg-color, white);margin:0 10px 10px;border:1px solid var(--cp-border-color, black);border-radius:12px;display:none;width:max-content}.is-open.svelte-6tqydx{display:block}@media (min-width: 768px){.is-open.svelte-6tqydx{display:grid;gap:5px;grid-template:"nullable . . ." "picker hue alpha a11y" "input input input a11y";grid-template-rows:auto var(--picker-height, 200px) auto}}div.svelte-6tqydx .picker{grid-area:picker}div.svelte-6tqydx .text-input{grid-area:input}div.svelte-6tqydx .a11y-notice{grid-area:a11y;margin:0 4px 0 6px}[role=dialog].svelte-6tqydx{position:absolute;top:calc(var(--input-size, 25px) + 12px);left:0;z-index:var(--picker-z-index, 2)}.a11y-notice.svelte-1lq6yxw{display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto repeat(var(--item-count),1fr) auto;justify-items:stretch;align-items:center;gap:0 12px;width:max-content}.title.svelte-1lq6yxw{margin:12px 0 0;grid-column:1 / 3;background:none;border:none;padding:0 8px;line-height:24px}@media (min-width: 768px){.title.svelte-1lq6yxw{margin:0}}.guidelines.svelte-1lq6yxw{grid-column:1 / 3;margin-top:10px;font-size:12px}.svelte-1lq6yxw:focus-visible,.guidelines.svelte-1lq6yxw :focus-visible{border-radius:2px;outline:2px solid var(--focus-color, red);outline-offset:2px}.lorem.svelte-1k8n4sk{flex:1;text-align:center;padding:4px 8px;margin-top:10px;border-radius:4px;border:1px solid black;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.large.svelte-1k8n4sk{font-size:22px;padding:2px 8px}.grade.svelte-1k8n4sk{border-radius:50px;padding:0 8px 2px;background-color:#ff6100;font-weight:700}.grade-ok.svelte-1k8n4sk{background-color:green;color:#fff}p.svelte-1k8n4sk{margin:0}:root{--cp-bg-color: var(--bg-light-extra);--cp-border-color: var(--bg-light);--cp-text-color: var(--text-2);--cp-input-color: var(--bg-dark);--cp-button-hover-color: var(--bg-light-extra);--focus-color: var(--violet);--picker-z-index: 10000}span.svelte-12vop2h{font-size:smaller;color:var(--text-2);padding:0;margin:0;display:inline-block}.hide.svelte-12vop2h{display:none}.content.svelte-sj99h3{display:flex;align-items:center;justify-content:center}.tooltip.svelte-sj99h3{background-color:var(--bg-dark-extra);border:1px solid var(--bg-light);border-radius:.3rem;padding:.3rem .5rem;display:flex;z-index:10;font-size:smaller;color:var(--text-2)}.tooltip-text.svelte-sj99h3{margin:0;padding:0}.reset.svelte-3c1fen{margin-left:auto}.reset_filters.svelte-3c1fen{background:var(--bg-light-extra);padding:.4rem;border-radius:.3rem;border:none;color:var(--text-2);cursor:pointer}.reset_filters.svelte-3c1fen:hover{background:var(--bg-dark)}label.svelte-l7bxsv{font-size:smaller;color:var(--text-2)}label.svelte-1u4l702{background:var(--bg-light);border:1px solid var(--bg-light);border-radius:.3rem;color:var(--text-2);margin-left:auto;cursor:pointer;padding:.2rem .2rem .13rem;display:flex;align-items:center;justify-content:center}label.svelte-1u4l702:hover{color:var(--text);border-color:var(--bg-light-extra)}input[type=file].svelte-1u4l702{display:none}.container.svelte-1539pur{display:flex;align-items:center;justify-content:center;background:var(--bg-light);border:1px solid var(--bg-light);border-radius:.3rem}.container.svelte-1539pur:hover{border:1px solid var(--bg-light-extra)}button.svelte-1539pur{display:flex;align-items:center;justify-content:center;min-width:1rem;width:fit-content;padding:.1rem .3rem;border-radius:.4rem;border:2px solid var(--bg-light);color:var(--text);cursor:pointer;font-family:var(--f1);font-size:1rem}button.svelte-1539pur:hover{background-color:var(--bg-dark)}button[data-state=on].svelte-1539pur{background-color:var(--bg-dark-extra)}button[data-state=off].svelte-1539pur{background-color:var(--bg-light)}.toggle-item.svelte-1539pur{display:flex;align-items:center;justify-content:center}div.svelte-1e76cj3{display:inline-flex;flex-direction:row;justify-content:center;align-items:center;padding:.2rem;border-radius:.3rem;background:var(--bg-light);border:1px solid var(--bg-light);height:1.1rem}div.svelte-1e76cj3:hover{border:1px solid var(--bg-light-extra)}div.svelte-1e76cj3:focus-within{border:1px solid var(--accent)}span.svelte-1e76cj3{display:flex;justify-content:center;align-items:center;margin:0 .2rem 0 0;color:var(--text-2);font-size:.85rem}input.svelte-1e76cj3{padding:0;margin:0;border:none;outline:none;background:none;color:var(--text);font-size:.85rem;font-family:var(--f1);margin-left:.1rem;text-align:left}.spacer.svelte-1t7yqk4{height:100%;width:2rem}div.container.svelte-179a95o{position:relative;align-items:center;display:flex;cursor:text;box-sizing:border-box}div.tags.svelte-179a95o{display:flex;flex:1;padding:0;margin:0;flex-wrap:wrap}div.tag.svelte-179a95o{display:flex;justify-content:center;align-items:center;border-radius:3pt;margin:.2rem .1rem;background:var(--bg-light-extra);padding:.2rem .2rem .2rem .3rem;color:var(--text);font-size:smaller}button.delete.svelte-179a95o{cursor:pointer;background:none;border:none;color:var(--text-2);display:flex;padding:0;padding-bottom:.15rem;margin-left:.2rem}button.delete.svelte-179a95o:hover{color:var(--text)}input.svelte-179a95o{margin-left:.2rem;padding-left:.3rem;min-width:7rem;width:auto}ul.options.svelte-179a95o{list-style:none;top:calc(100% + 5px);left:0;width:100%;position:absolute;overflow:auto;background:var(--bg-light);max-height:30vh;overscroll-behavior:none;border-radius:8px;padding:0;margin:0;z-index:100}li.option.svelte-179a95o{padding:.2rem .6rem;cursor:pointer;scroll-margin:var(--sms-options-scroll-margin, 100px);text-align:left;display:block;z-index:200}li.option.svelte-179a95o:hover{background:var(--bg-light-extra)}.input-container.svelte-179a95o{position:relative}.loader.svelte-179a95o{position:absolute;width:1rem;height:1rem;right:.2rem;bottom:.2rem;border-radius:50%;border:.3rem solid var(--bg-light);border-top-color:var(--violet);animation:2s infinite svelte-179a95o-rotation}@keyframes svelte-179a95o-rotation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.category-select.svelte-cfuy64{flex:1;min-width:0}.circle.svelte-wkfk99{height:var(--size);width:var(--size);border-color:var(--color) transparent var(--color) var(--color);border-width:calc(var(--size) / 15);border-style:solid;border-image:initial;border-radius:50%;animation:var(--duration) linear 0s infinite normal none running svelte-wkfk99-rotate}.pause-animation.svelte-wkfk99{animation-play-state:paused}@keyframes svelte-wkfk99-rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.circle.svelte-1ifw9mv{width:var(--size);height:var(--size);box-sizing:border-box;position:relative;border:3px solid transparent;border-top-color:var(--colorOuter);border-radius:50%;animation:svelte-1ifw9mv-circleSpin var(--durationOuter) linear infinite}.circle.svelte-1ifw9mv:before,.circle.svelte-1ifw9mv:after{content:"";box-sizing:border-box;position:absolute;border:3px solid transparent;border-radius:50%}.circle.svelte-1ifw9mv:after{border-top-color:var(--colorInner);inset:9px;animation:svelte-1ifw9mv-circleSpin var(--durationInner) linear infinite}.circle.svelte-1ifw9mv:before{border-top-color:var(--colorCenter);inset:3px;animation:svelte-1ifw9mv-circleSpin var(--durationCenter) linear infinite}.pause-animation.svelte-1ifw9mv,.pause-animation.svelte-1ifw9mv:after,.pause-animation.svelte-1ifw9mv:before{animation-play-state:paused}@keyframes svelte-1ifw9mv-circleSpin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.wrapper.svelte-drkgra{width:var(--size);height:var(--size);display:flex;justify-content:center;align-items:center;line-height:0;box-sizing:border-box}.inner.svelte-drkgra{transform:scale(calc(var(--floatSize) / 52))}.ball-container.svelte-drkgra{animation:svelte-drkgra-ballTwo var(--duration) infinite;width:44px;height:44px;flex-shrink:0;position:relative}.single-ball.svelte-drkgra{width:44px;height:44px;position:absolute}.ball.svelte-drkgra{width:20px;height:20px;border-radius:50%;position:absolute;animation:svelte-drkgra-ballOne var(--duration) infinite ease}.pause-animation.svelte-drkgra{animation-play-state:paused}.ball-top-left.svelte-drkgra{background-color:var(--ballTopLeftColor);top:0;left:0}.ball-top-right.svelte-drkgra{background-color:var(--ballTopRightColor);top:0;left:24px}.ball-bottom-left.svelte-drkgra{background-color:var(--ballBottomLeftColor);top:24px;left:0}.ball-bottom-right.svelte-drkgra{background-color:var(--ballBottomRightColor);top:24px;left:24px}@keyframes svelte-drkgra-ballOne{0%{position:absolute}50%{top:12px;left:12px;position:absolute;opacity:.5}to{position:absolute}}@keyframes svelte-drkgra-ballTwo{0%{transform:rotate(0) scale(1)}50%{transform:rotate(360deg) scale(1.3)}to{transform:rotate(720deg) scale(1)}}.wrapper.svelte-ce6f5s{position:relative;width:var(--size);height:var(--size)}.circle.svelte-ce6f5s{position:absolute;width:var(--size);height:var(--size);background-color:var(--color);border-radius:100%;opacity:.6;top:0;left:0;animation-fill-mode:both;animation-name:svelte-ce6f5s-bounce!important}.pause-animation.svelte-ce6f5s{animation-play-state:paused}@keyframes svelte-ce6f5s-bounce{0%,to{transform:scale(0)}50%{transform:scale(1)}}.svelte-651g2y{overflow:hidden;position:relative;text-indent:-9999px;display:inline-block;background:#f86;border-radius:50%;transform:rotate(90deg);transform-origin:50% 50%;animation:svelte-651g2y-plus-loader-background var(--duration) infinite ease-in-out}.svelte-651g2y:after{background:#f86;border-radius:50% 0 0 50%;content:"";position:absolute;right:50%;top:0;width:50%;height:100%;transform-origin:100% 50%;animation:svelte-651g2y-plus-loader-top var(--duration) infinite linear}.svelte-651g2y:before{background:#fc6;border-radius:50% 0 0 50%;content:"";position:absolute;right:50%;top:0;width:50%;height:100%;transform-origin:100% 50%;animation:svelte-651g2y-plus-loader-bottom var(--duration) infinite linear}.pause-animation.svelte-651g2y,.pause-animation.svelte-651g2y:before,.pause-animation.svelte-651g2y:after{animation-play-state:paused}@keyframes svelte-651g2y-plus-loader-top{2.5%{background:#f86;transform:rotateY(0);animation-timing-function:ease-in}13.75%{background:#ff430d;transform:rotateY(90deg);animation-timing-function:step-start}13.76%{background:#ffae0d;transform:rotateY(90deg);animation-timing-function:ease-out}25%{background:#fc6;transform:rotateY(180deg)}27.5%{background:#fc6;transform:rotateY(180deg);animation-timing-function:ease-in}41.25%{background:#ffae0d;transform:rotateY(90deg);animation-timing-function:step-start}41.26%{background:#2cc642;transform:rotateY(90deg);animation-timing-function:ease-out}50%{background:#6d7;transform:rotateY(0)}52.5%{background:#6d7;transform:rotateY(0);animation-timing-function:ease-in}63.75%{background:#2cc642;transform:rotateY(90deg);animation-timing-function:step-start}63.76%{background:#1386d2;transform:rotateY(90deg);animation-timing-function:ease-out}75%{background:#4ae;transform:rotateY(180deg)}77.5%{background:#4ae;transform:rotateY(180deg);animation-timing-function:ease-in}91.25%{background:#1386d2;transform:rotateY(90deg);animation-timing-function:step-start}91.26%{background:#ff430d;transform:rotateY(90deg);animation-timing-function:ease-in}to{background:#f86;transform:rotateY(0);animation-timing-function:step-start}}@keyframes svelte-651g2y-plus-loader-bottom{0%{background:#fc6;animation-timing-function:step-start}50%{background:#fc6;animation-timing-function:step-start}75%{background:#4ae;animation-timing-function:step-start}to{background:#4ae;animation-timing-function:step-start}}@keyframes svelte-651g2y-plus-loader-background{0%{background:#f86;transform:rotate(180deg)}25%{background:#f86;transform:rotate(180deg);animation-timing-function:step-start}27.5%{background:#6d7;transform:rotate(90deg)}50%{background:#6d7;transform:rotate(90deg);animation-timing-function:step-start}52.5%{background:#6d7;transform:rotate(0)}75%{background:#6d7;transform:rotate(0);animation-timing-function:step-start}77.5%{background:#f86;transform:rotate(270deg)}to{background:#f86;transform:rotate(270deg);animation-timing-function:step-start}}.wrapper.svelte-1b77cy7{width:var(--size);height:var(--size)}.circle.svelte-1b77cy7{width:var(--size);height:var(--size);background-color:var(--color);animation-duration:var(--duration);border-radius:100%;display:inline-block;animation:svelte-1b77cy7-scaleOut var(--duration) ease-in-out infinite}.pause-animation.svelte-1b77cy7{animation-play-state:paused}@keyframes svelte-1b77cy7-scaleOut{0%{transform:scale(0)}to{transform:scale(1);opacity:0}}.wrapper.svelte-1sxfeb7{width:var(--size);height:var(--stroke);transform:scale(calc(var(--floatSize) / 75));display:flex;justify-content:center;align-items:center}.line.svelte-1sxfeb7{width:var(--size);height:var(--stroke);background:var(--color);border-radius:var(--stroke);transform-origin:center center;animation:svelte-1sxfeb7-spineLine var(--duration) ease infinite}.pause-animation.svelte-1sxfeb7{animation-play-state:paused}@keyframes svelte-1sxfeb7-spineLine{0%{transform:rotate(-20deg);height:5px;width:75px}5%{height:5px;width:75px}30%{transform:rotate(380deg);height:5px;width:75px}40%{transform:rotate(360deg);height:5px;width:75px}55%{transform:rotate(0);height:5px;width:5px}65%{transform:rotate(0);height:5px;width:85px}68%{transform:rotate(0);height:5px}75%{transform:rotate(0);height:5px;width:1px}78%{height:5px;width:5px}90%{height:5px;width:75px;transform:rotate(0)}99%,to{height:5px;width:75px;transform:rotate(-20deg)}}.wrapper.svelte-19v4nqi{height:var(--size);width:var(--size);display:inline-block;text-align:center;font-size:10px}.rect.svelte-19v4nqi{height:100%;width:10%;display:inline-block;margin-right:4px;transform:scaleY(.4);background-color:var(--color);animation:svelte-19v4nqi-stretch var(--duration) ease-in-out infinite}.pause-animation.svelte-19v4nqi{animation-play-state:paused}@keyframes svelte-19v4nqi-stretch{0%,40%,to{transform:scaleY(.4)}20%{transform:scaleY(1)}}.wrapper.svelte-ss5llz{height:calc(var(--size) / 15);width:calc(var(--size) * 2);background-color:var(--rgba);position:relative;overflow:hidden;background-clip:padding-box}.lines.svelte-ss5llz{height:calc(var(--size) / 15);background-color:var(--color)}.small-lines.svelte-ss5llz{position:absolute;overflow:hidden;background-clip:padding-box;display:block;border-radius:2px;will-change:left,right;animation-fill-mode:forwards}.small-lines.\31.svelte-ss5llz{animation:var(--duration) cubic-bezier(.65,.815,.735,.395) 0s infinite normal none running svelte-ss5llz-long}.small-lines.\32.svelte-ss5llz{animation:var(--duration) cubic-bezier(.165,.84,.44,1) calc((var(--duration) + .1) / 2) infinite normal none running svelte-ss5llz-short}.pause-animation.svelte-ss5llz{animation-play-state:paused}@keyframes svelte-ss5llz-long{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes svelte-ss5llz-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}.wrapper.svelte-117xx62{width:var(--size);height:var(--size)}.circle.svelte-117xx62{border-radius:100%;animation-fill-mode:both;position:absolute;opacity:0;width:var(--size);height:var(--size);background-color:var(--color);animation:svelte-117xx62-bounce var(--duration) linear infinite}.pause-animation.svelte-117xx62{animation-play-state:paused}@keyframes svelte-117xx62-bounce{0%{opacity:0;transform:scale(0)}5%{opacity:1}to{opacity:0;transform:scale(1)}}.wrapper.svelte-o5fzoc{position:relative;width:var(--size);height:var(--size)}.border.svelte-o5fzoc{border-color:var(--color);position:absolute;top:0;left:0;width:var(--size);height:var(--size);opacity:.4;perspective:800px;border-width:6px;border-style:solid;border-image:initial;border-radius:100%}.border.\31.svelte-o5fzoc{animation:var(--duration) linear 0s infinite normal none running svelte-o5fzoc-ringOne}.border.\32.svelte-o5fzoc{animation:var(--duration) linear 0s infinite normal none running svelte-o5fzoc-ringTwo}.pause-animation.svelte-o5fzoc{animation-play-state:paused}@keyframes svelte-o5fzoc-ringOne{0%{transform:rotateX(0) rotateY(0) rotate(0)}to{transform:rotateX(360deg) rotateY(180deg) rotate(360deg)}}@keyframes svelte-o5fzoc-ringTwo{0%{transform:rotateX(0) rotateY(0) rotate(0)}to{transform:rotateX(180deg) rotateY(360deg) rotate(360deg)}}.wrapper.svelte-1q396xd{height:var(--size);width:var(--size);display:flex;align-items:center;justify-content:center}.dot.svelte-1q396xd{height:var(--dotSize);width:var(--dotSize);background-color:var(--color);margin:2px;display:inline-block;border-radius:100%;animation:svelte-1q396xd-sync var(--duration) ease-in-out infinite alternate both running}.pause-animation.svelte-1q396xd{animation-play-state:paused}@-webkit-keyframes svelte-1q396xd-sync{33%{-webkit-transform:translateY(10px);transform:translateY(10px)}66%{-webkit-transform:translateY(-10px);transform:translateY(-10px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes svelte-1q396xd-sync{33%{-webkit-transform:translateY(10px);transform:translateY(10px)}66%{-webkit-transform:translateY(-10px);transform:translateY(-10px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wrapper.svelte-bo91ef{width:var(--size);height:calc(var(--size) / 2);overflow:hidden}.rainbow.svelte-bo91ef{width:var(--size);height:var(--size);border-left-color:transparent;border-bottom-color:transparent;border-top-color:var(--color);border-right-color:var(--color);box-sizing:border-box;transform:rotate(-200deg);border-radius:50%;border-style:solid;animation:var(--duration) ease-in-out 0s infinite normal none running svelte-bo91ef-rotate}.pause-animation.svelte-bo91ef{animation-play-state:paused}@keyframes svelte-bo91ef-rotate{0%{border-width:10px}25%{border-width:3px}50%{transform:rotate(115deg);border-width:10px}75%{border-width:3px}to{border-width:10px}}.wrapper.svelte-iams64{width:calc(var(--size) * 1.3);height:calc(var(--size) * 1.3);display:flex;justify-content:center;align-items:center}.firework.svelte-iams64{border:calc(var(--size) / 10) dotted var(--color);width:var(--size);height:var(--size);border-radius:50%;animation:svelte-iams64-fire var(--duration) cubic-bezier(.165,.84,.44,1) infinite}.pause-animation.svelte-iams64{animation-play-state:paused}@keyframes svelte-iams64-fire{0%{opacity:1;transform:scale(.1)}25%{opacity:.85}to{transform:scale(1);opacity:0}}.wrapper.svelte-k7eafi{position:relative;display:flex;justify-content:center;align-items:center;width:var(--size);height:calc(var(--size) / 2.5)}.cube.svelte-k7eafi{position:absolute;top:0;width:calc(var(--size) / 5);height:calc(var(--size) / 2.5);background-color:var(--color);animation:svelte-k7eafi-motion var(--duration) cubic-bezier(.895,.03,.685,.22) infinite}.pause-animation.svelte-k7eafi{animation-play-state:paused}@keyframes svelte-k7eafi-motion{0%{opacity:1}50%{opacity:0}to{opacity:1}}.wrapper.svelte-kxz6en{position:relative;display:flex;justify-content:center;align-items:center;width:var(--size);height:var(--size)}.ring.svelte-kxz6en{position:absolute;border:2px solid var(--color);border-radius:50%;background-color:transparent;animation:svelte-kxz6en-motion var(--duration) ease infinite}.pause-animation.svelte-kxz6en{animation-play-state:paused}@keyframes svelte-kxz6en-motion{0%{transform:translateY(var(--motionOne))}50%{transform:translateY(var(--motionTwo))}to{transform:translateY(var(--motionThree))}}.wrapper.svelte-1bx03i{height:var(--size);width:var(--size);display:flex;justify-content:center;align-items:center}.spinner.svelte-1bx03i{height:var(--size);width:var(--size);animation:svelte-1bx03i-rotate var(--duration) infinite linear}.dot.svelte-1bx03i{width:60%;height:60%;display:inline-block;position:absolute;top:0;background-color:var(--color);border-radius:100%;animation:svelte-1bx03i-bounce var(--duration) infinite ease-in-out}.pause-animation.svelte-1bx03i{animation-play-state:paused}@keyframes svelte-1bx03i-rotate{to{transform:rotate(360deg)}}@keyframes svelte-1bx03i-bounce{0%,to{transform:scale(0)}50%{transform:scale(1)}}.square.svelte-13ou7fm{height:var(--size);width:var(--size);background-color:var(--color);animation:svelte-13ou7fm-squareDelay var(--duration) 0s infinite cubic-bezier(.09,.57,.49,.9);animation-fill-mode:both;perspective:100px;display:inline-block}.pause-animation.svelte-13ou7fm{animation-play-state:paused}@keyframes svelte-13ou7fm-squareDelay{25%{-webkit-transform:rotateX(180deg) rotateY(0);transform:rotateX(180deg) rotateY(0)}50%{-webkit-transform:rotateX(180deg) rotateY(180deg);transform:rotateX(180deg) rotateY(180deg)}75%{-webkit-transform:rotateX(0) rotateY(180deg);transform:rotateX(0) rotateY(180deg)}to{-webkit-transform:rotateX(0) rotateY(0);transform:rotateX(0) rotateY(0)}}.wrapper.svelte-19t9gd9{position:relative;display:flex;justify-content:center;align-items:center;width:var(--size);height:var(--size)}.shadow.svelte-19t9gd9{color:var(--color);font-size:var(--size);overflow:hidden;width:var(--size);height:var(--size);border-radius:50%;margin:28px auto;position:relative;transform:translateZ(0);animation:svelte-19t9gd9-load var(--duration) infinite ease,svelte-19t9gd9-round var(--duration) infinite ease}.pause-animation.svelte-19t9gd9{animation-play-state:paused}@keyframes svelte-19t9gd9-load{0%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}to{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}}@keyframes svelte-19t9gd9-round{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.wrapper.svelte-1lvgwn0{height:var(--size);width:var(--size);border-radius:100%;animation:svelte-1lvgwn0-moonStretchDelay var(--duration) 0s infinite linear;animation-fill-mode:forwards;position:relative}.circle-one.svelte-1lvgwn0{top:var(--moonSize);background-color:var(--color);width:calc(var(--size) / 7);height:calc(var(--size) / 7);border-radius:100%;animation:svelte-1lvgwn0-moonStretchDelay var(--duration) 0s infinite linear;animation-fill-mode:forwards;opacity:.8;position:absolute}.circle-two.svelte-1lvgwn0{opacity:.1;border:calc(var(--size) / 7) solid var(--color);height:var(--size);width:var(--size);border-radius:100%;box-sizing:border-box}.pause-animation.svelte-1lvgwn0{animation-play-state:paused}@keyframes svelte-1lvgwn0-moonStretchDelay{to{transform:rotate(360deg)}}.wrapper.svelte-3ogvav{height:var(--size);width:var(--size);position:relative;display:flex;justify-content:center;align-items:center}.wrapper.svelte-3ogvav :where(.svelte-3ogvav){line-height:0;box-sizing:border-box}.spinner-inner.svelte-3ogvav{height:var(--size);width:var(--size);transform:scale(calc(var(--size) / 70))}.mask.svelte-3ogvav{position:absolute;border-radius:2px;overflow:hidden;perspective:1000;backface-visibility:hidden}.plane.svelte-3ogvav{background:var(--color);width:400%;height:100%;position:absolute;z-index:100;perspective:1000;backface-visibility:hidden}#top.svelte-3ogvav .plane:where(.svelte-3ogvav){z-index:2000;animation:svelte-3ogvav-trans1 var(--duration) ease-in infinite 0s backwards}#middle.svelte-3ogvav .plane:where(.svelte-3ogvav){transform:translateZ(0);background:var(--rgba);animation:svelte-3ogvav-trans2 var(--duration) linear infinite calc(var(--duration) / 4) backwards}#bottom.svelte-3ogvav .plane:where(.svelte-3ogvav){z-index:2000;animation:svelte-3ogvav-trans3 var(--duration) ease-out infinite calc(var(--duration) / 2) backwards}#top.svelte-3ogvav{width:53px;height:20px;left:20px;top:5px;transform:skew(-15deg);z-index:100}#middle.svelte-3ogvav{width:33px;height:20px;left:20px;top:21px;transform:skew(-15deg,40deg)}#bottom.svelte-3ogvav{width:53px;height:20px;top:35px;transform:skew(-15deg)}.pause-animation.svelte-3ogvav .plane:where(.svelte-3ogvav){animation-play-state:paused}@keyframes svelte-3ogvav-trans1{0%{transform:translate3d(53px,0,0)}to{transform:translate3d(-250px,0,0)}}@keyframes svelte-3ogvav-trans2{0%{transform:translate3d(-160px,0,0)}to{transform:translate3d(53px,0,0)}}@keyframes svelte-3ogvav-trans3{0%{transform:translate3d(53px,0,0)}to{transform:translate3d(-220px,0,0)}}span.svelte-mocnxs{width:var(--size);height:calc(var(--size) / 4);position:relative;display:block}div.svelte-mocnxs{width:calc(var(--size) / 4);height:calc(var(--size) / 4);position:absolute;left:0%;top:0;border-radius:2px;background:var(--color);transform:translate(-50%) rotate(45deg) scale(0);animation:svelte-mocnxs-diamonds var(--duration) linear infinite}div.svelte-mocnxs:nth-child(1){animation-delay:calc(var(--duration) * 2 / 3 * -1)}div.svelte-mocnxs:nth-child(2){animation-delay:calc(var(--duration) * 2 / 3 * -2)}div.svelte-mocnxs:nth-child(3){animation-delay:calc(var(--duration) * 2 / 3 * -3)}.pause-animation.svelte-mocnxs div:where(.svelte-mocnxs){animation-play-state:paused}@keyframes svelte-mocnxs-diamonds{50%{left:50%;transform:translate(-50%) rotate(45deg) scale(1)}to{left:100%;transform:translate(-50%) rotate(45deg) scale(0)}}div.svelte-q41bvn{position:relative;width:var(--size);height:var(--size);background-color:transparent;box-shadow:inset 0 0 0 2px var(--color);border-radius:50%}div.svelte-q41bvn:before,div.svelte-q41bvn:after{position:absolute;content:"";background-color:var(--color)}div.svelte-q41bvn:after{width:calc(var(--size) / 2.4);height:2px;top:calc(var(--size) / 2);left:calc(var(--size) / 2);transform-origin:1px 1px;animation:svelte-q41bvn-rotate calc(var(--duration) / 4) linear infinite}div.svelte-q41bvn:before{width:calc(var(--size) / 3);height:2px;top:calc((var(--size) / 2));left:calc((var(--size) / 2));transform-origin:1px 1px;animation:svelte-q41bvn-rotate var(--duration) linear infinite}.pause-animation.svelte-q41bvn,.pause-animation.svelte-q41bvn:before,.pause-animation.svelte-q41bvn:after{animation-play-state:paused}@keyframes svelte-q41bvn-rotate{to{transform:rotate(360deg)}}.wrapper.svelte-172feak{position:relative;display:flex;justify-content:center;align-items:center;width:calc(var(--size) * 2.5);height:var(--size);overflow:hidden}.bar.svelte-172feak{position:absolute;top:calc(var(--size) / 10);width:calc(var(--size) / 5);height:calc(var(--size) / 10);margin-top:calc(var(--size) - var(--size) / 10);transform:skewY(0);background-color:var(--color);animation:svelte-172feak-motion var(--duration) ease-in-out infinite}.pause-animation.svelte-172feak{animation-play-state:paused}@keyframes svelte-172feak-motion{25%{transform:skewY(25deg)}50%{height:100%;margin-top:0}75%{transform:skewY(-25deg)}}.wrapper.svelte-38l2hi{display:inherit;position:relative;width:var(--size);height:var(--size)}.circle.svelte-38l2hi{position:absolute;width:var(--size);height:var(--size);border:thick solid var(--rgba);border-radius:50%;opacity:1;top:0;left:0;animation-fill-mode:both;animation-iteration-count:infinite;animation-timing-function:cubic-bezier(.165,.84,.44,1),cubic-bezier(.3,.61,.355,1);animation-direction:normal,normal;animation-fill-mode:none,none;animation-play-state:running,running;animation-name:svelte-38l2hi-puff-1,svelte-38l2hi-puff-2;box-sizing:border-box}.pause-animation.svelte-38l2hi{animation-play-state:paused}@keyframes svelte-38l2hi-puff-1{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes svelte-38l2hi-puff-2{0%{opacity:1}to{opacity:0}}.wrapper.svelte-1o7bmae{width:var(--size);height:calc(var(--size) * 1.5);margin-left:var(--size);background:var(--color);display:inline-block;position:relative;box-sizing:border-box;animation:svelte-1o7bmae-bump var(--duration) ease-in infinite alternate}.wrapper.svelte-1o7bmae:after{content:"";box-sizing:border-box;left:50%;top:100%;transform:translate(-50%);position:absolute;border:var(--size) solid transparent;border-top-color:var(--color)}.pause-animation.svelte-1o7bmae{animation-play-state:paused}@keyframes svelte-1o7bmae-bump{0%{transform:translate(-50%,5px)}to{transform:translate(-50%,-5px)}}.wrapper.svelte-1exixdt{width:var(--size);height:calc(var(--size) * 1.5);margin-left:var(--size);margin-top:var(--size);background:var(--color);display:inline-block;position:relative;box-sizing:border-box;animation:svelte-1exixdt-bump var(--duration) ease-in infinite alternate}.wrapper.svelte-1exixdt:after{content:"";box-sizing:border-box;left:50%;bottom:100%;transform:translate(-50%);position:absolute;border:var(--size) solid transparent;border-bottom-color:var(--color)}.pause-animation.svelte-1exixdt{animation-play-state:paused}@keyframes svelte-1exixdt-bump{0%{transform:translate(-50%,5px)}to{transform:translate(-50%,-5px)}}div.svelte-dfb6jk{background-color:var(--bg-medium);position:relative}.loading.svelte-dfb6jk{position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--bg-dark-extra);opacity:.8;z-index:1000;display:flex;justify-content:center;align-items:center;font-size:24px;font-weight:700;color:var(--text-medium)}.container.svelte-130wuz3{display:flex;flex-direction:row;flex-wrap:wrap;gap:.2rem}.option.svelte-130wuz3{width:24px;height:24px;border-radius:5px;cursor:pointer;border:none}.label.svelte-130wuz3{font-size:smaller;color:var(--text-2);display:flex;justify-content:center;align-items:center;margin:0 .5rem}.container.svelte-124sfg{display:flex;flex-direction:column;gap:1rem}button.svelte-124sfg{display:flex;min-width:220px;align-items:center;justify-content:flex-start;gap:.5rem;background-color:var(--bg-light);color:var(--text);font-family:inherit;font-size:1rem;border:0;border-radius:.3rem;padding:.4rem .7rem;cursor:pointer}.options.svelte-124sfg{list-style:none;top:calc(100% + 5px);left:0;width:100%;position:absolute;overflow:auto;background:var(--bg-light);max-height:30vh;overscroll-behavior:none;border-radius:8px;padding:0;margin:0;z-index:100}.option.svelte-124sfg{padding:.2rem .6rem;cursor:pointer;scroll-margin:var(--sms-options-scroll-margin, 100px);text-align:left;display:flex;align-items:center;justify-content:start;gap:.5rem;flex-direction:row}.option.svelte-124sfg:hover{background:var(--bg-light-extra)}.backdrop.svelte-1bxxaoh{position:fixed;inset:0;background:#0a0a10b3;backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center;z-index:100000}.modal.svelte-1bxxaoh{width:min(560px,90vw);background:var(--bg-dark);border:1px solid var(--border-light);border-radius:12px;box-shadow:0 20px 60px #0006;padding:1rem;display:flex;flex-direction:column;gap:.8rem}.header.svelte-1bxxaoh{display:flex;align-items:center;justify-content:space-between;gap:1rem}.title.svelte-1bxxaoh{font-size:1rem;color:var(--text);font-family:var(--f1)}.close.svelte-1bxxaoh{background:transparent;border:1px solid var(--border-light);color:var(--text-2);border-radius:6px;width:28px;height:28px;cursor:pointer;line-height:1;font-size:1rem}.close.svelte-1bxxaoh:hover{color:var(--text);border-color:var(--bg-light-extra)}.body.svelte-1bxxaoh{color:var(--text)}.actions.svelte-1bxxaoh{display:flex;justify-content:flex-end;gap:.5rem}body{color:var(--text)}.container.svelte-1y8xt5x{display:flex;height:100vh}aside.svelte-1y8xt5x{width:600px;background-color:var(--bg-dark);overflow-y:auto;overflow-x:hidden;padding:1rem}main.svelte-1y8xt5x{flex:1;padding:1rem;background-color:var(--bg-dark-extra);display:flex;align-items:center;justify-content:center;text-align:center;position:relative}.selector.svelte-1y8xt5x{position:absolute;top:20px;left:50%;translate:-50% 0;color:var(--text-2);font-size:.8rem;z-index:10000;display:flex;align-items:center;gap:.6rem}.template-actions.svelte-1y8xt5x{display:flex;align-items:center;gap:.4rem}.template-actions.svelte-1y8xt5x .action:where(.svelte-1y8xt5x){background-color:var(--bg-light);color:var(--text);border:1px solid var(--border-light);border-radius:.3rem;width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;font-family:var(--f1);font-size:.85rem}.template-actions.svelte-1y8xt5x .action:where(.svelte-1y8xt5x):hover{background-color:var(--bg-light-extra)}.modal-field.svelte-1y8xt5x input[type=text]:where(.svelte-1y8xt5x){width:100%}.modal-error.svelte-1y8xt5x{margin-top:.4rem;color:var(--red);font-size:.85rem}.modal-hint.svelte-1y8xt5x{color:var(--text-2);font-size:.85rem}.modal-hint.save-hint.svelte-1y8xt5x{margin-top:.9rem;font-style:italic}.modal-action.svelte-1y8xt5x{background-color:var(--violet);color:var(--text);border:1px solid transparent;border-radius:.4rem;padding:.4rem .9rem;cursor:pointer;font-family:var(--f1)}.modal-action.secondary.svelte-1y8xt5x{background-color:var(--bg-light);border-color:var(--border-light)}.modal-action.svelte-1y8xt5x:hover{background-color:var(--violet-dark)}.modal-action.secondary.svelte-1y8xt5x:hover{background-color:var(--bg-light-extra)}.modal-action.danger.svelte-1y8xt5x{background-color:var(--red-dark)}.modal-action.danger.svelte-1y8xt5x:hover{background-color:var(--red)}.template-list.svelte-1y8xt5x{display:flex;flex-direction:column;gap:.4rem;max-height:40vh;overflow-y:auto}.template-row.svelte-1y8xt5x{display:flex;align-items:center;gap:.5rem}.template-item.svelte-1y8xt5x{flex:1;background-color:var(--bg-light);border:1px solid transparent;border-radius:.5rem;padding:.5rem .7rem;cursor:pointer;display:flex;align-items:baseline;gap:.4rem;text-align:left;color:var(--text);font-family:var(--f1)}.template-item.svelte-1y8xt5x:hover{background-color:var(--bg-light-extra)}.template-item.active.svelte-1y8xt5x{border-color:var(--violet);background-color:var(--bg-dark-extra)}.template-delete.svelte-1y8xt5x{width:32px;height:32px;display:inline-flex;align-items:center;justify-content:center;border-radius:.4rem;border:1px solid var(--border-light);background-color:var(--bg-light);color:var(--text-2);cursor:pointer}.template-delete.svelte-1y8xt5x:hover{background-color:var(--bg-light-extra);color:var(--text)}.template-name.svelte-1y8xt5x{font-size:.95rem}.template-categories.svelte-1y8xt5x{font-size:.75rem;color:var(--text-2)}#build.svelte-1n46o8q{position:fixed;top:20;left:20;color:var(--text-2);font-size:.8rem;z-index:10000}</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
